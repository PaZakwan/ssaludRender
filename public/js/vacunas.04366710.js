"use strict";(self["webpackChunksecretaria_de_salud_moreno_frontend"]=self["webpackChunksecretaria_de_salud_moreno_frontend"]||[]).push([[7174],{20007:function(a,t,e){e.d(t,{A:function(){return w}});var i=e(21999),r=e(76139),o=e(3150),s=e(1899),n=e(37471),l=e(81851),c=e(34172),d=e(24496),u=e(41614),m=e(21527),p=e(69155),g=e(17912),h=e(55731),f=e(57e3),v=function(){var a=this,t=a._self._c;return t(d.A,{staticClass:"terciary lighten-1",scopedSlots:a._u([{key:"actions",fn:function(){return[t(m.A,{attrs:{color:"white"}},[a._v("expand_more")])]},proxy:!0},{key:"header",fn:function(){return[t(u.A,{staticClass:"white--text title",attrs:{xs12:""}},[t(r.A,{staticClass:"grey lighten-2 mr-2 mb-1",attrs:{size:"38px"}},[t(m.A,{staticStyle:{height:"30px",width:"30px"},attrs:{color:`${a.iconColor??"black"}`}},[a._v("vaccines")])],1),t("b",[a._v(" Vacunas"+a._s(a.pacienteNombreDocumento?`: ${a.pacienteNombreDocumento}`:"")+" ")]),t(c.A,{staticClass:"mx-1 white"})],1)]},proxy:!0}])},[t(o.A,[t(s.OQ,{staticClass:"grey lighten-4 pa-0"},[t(p.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t(u.A,{staticClass:"terciary lighten-2 px-1 pb-1",attrs:{xs12:""}},[t(n.A,{staticClass:"title py-0 px-1"},[t(u.A,{attrs:{xs12:"",sm4:""}},[t(f.W,{staticClass:"py-1",attrs:{clearable:"",color:"grey lighten-3","append-icon":"search",label:"Filtrar","single-line":"","hide-details":""},model:{value:a.search,callback:function(t){a.search=t},expression:"search"}})],1),t(h.hc)],1),t(l.A,{staticClass:"elevation-6",staticStyle:{"table-layout":"fixed"},attrs:{headers:a.headers,items:a.dataTable,"item-key":"_id",pagination:a.paginacion,"rows-per-page-items":[5,10,25,50],loading:a.loading.estado,search:a.search},on:{"update:pagination":function(t){a.paginacion=t}},scopedSlots:a._u([{key:"no-data",fn:function(){return[t(i.A,{staticClass:"title black--text text-sm-left",attrs:{value:!0,color:"grey lighten-2",icon:"warning"}},[a._v(" No hay vacunas para mostrar. ")])]},proxy:!0},{key:"no-results",fn:function(){return[t(i.A,{staticClass:"title black--text text-sm-left",attrs:{value:!0,color:"grey lighten-2",icon:"warning"}},[a._v(' No se encontraron resultados para "'+a._s(a.search)+'". ')])]},proxy:!0},{key:"items",fn:function(e){return[t("tr",{class:a.backgroundClass(e.item)},a._l(a.headers,(function(a){return t("td",{key:a.value,class:a.class},[t("bodyDataTableDinamic",{attrs:{props:e,field:a}})],1)})),0)]}}])},[t(g.A,{attrs:{color:"terciary",indeterminate:""}})],1)],1)],1)],1)],1)],1)},b=[],A=e(95353),y=e(42681),x={name:"expandVacunaciones",props:["expandOpen","pacienteId","pacienteNombreDocumento","iconColor"],components:{bodyDataTableDinamic:y.A},data(){return{dataTable:[],search:"",paginacion:{sortBy:"fecha",descending:!0,rowsPerPage:5,page:1},headers:[{text:"Fecha Aplicacion",value:"fecha",class:"text-sm-left",ruta:"fecha",date:!0,width:"10%"},{text:"Vacuna",value:"insumoDB",class:"text-xs-left",ruta:"insumoDB",width:"*"},{text:"Dosis",value:"dosis",class:"text-sm-left",ruta:"dosis",width:"10%"},{text:"Lote",value:"lote",class:"text-sm-left",ruta:"lote",width:"10%"},{text:"Vencimiento",value:"vencimiento",class:"text-sm-left",ruta:"vencimiento",date:!0,width:"10%"},{text:"Estrategia",value:"estrategia",class:"text-sm-left",ruta:"estrategia",width:"10%"},{text:"Fecha Futura Cita",value:"fecha_futura_cita",class:"text-sm-left",ruta:"fecha_futura_cita",date:!0,width:"10%"}]}},computed:{...(0,A.aH)(["loading"])},watch:{async expandOpen(a){a&&this.pacienteId&&(this.dataTable=await this.buscarVacunacionesPaciente({paciente:this.pacienteId}))},async pacienteId(a){a&&this.expandOpen&&(this.dataTable=await this.buscarVacunacionesPaciente({paciente:this.pacienteId}))},dataTable(a){this.paginacion.page>Math.ceil(a.length/this.paginacion.rowsPerPage)&&(this.paginacion.page=1)}},methods:{...(0,A.PY)(["mostrarLoading","mostrarError","ocultarLoading","mostrarDialogIframe"]),...(0,A.i0)(["routerResolve","requestAPI"]),backgroundClass(a){try{return a?"background-color: terciary lighten-5":""}catch(t){return""}},async buscarVacunacionesPaciente(a){try{this.mostrarLoading({titulo:"Buscando Vacunaciones..."}),a.paciente||this.mostrarError({mensaje:"Falta el Id del Paciente para buscar sus vacunaciones.",titulo:"Valores Requeridos"});let t=null;return t=await this.requestAPI({method:"get",url:`/vacunas/aplicacion?paciente=${a.paciente}&select=lite`}),t?.data?.ok?t.data.vacunaciones:[{insumoDB:"error de carga, recargar pagina",id:void 0}]}catch(t){return this.mostrarError({mensaje:t,titulo:"Inesperado (buscarVacunacionesPaciente)"}),[{insumoDB:"error de buscarVacunacionesPaciente, recargar pagina",id:void 0}]}finally{this.ocultarLoading()}},async pacienteVacunasPDF(){localStorage.setItem("localStorageTemp",JSON.stringify({paciente:this.pacienteId}));let a=await this.routerResolve({name:"VacunasAplicacionesImprimir",query:{descarga:!1}});this.mostrarDialogIframe({src:a.href,titulo_name:`Vacunaciones ${this.pacienteNombreDocumento}`})}}},_=x,k=e(81656),E=(0,k.A)(_,v,b,!1,null,null,null),w=E.exports},62373:function(a,t,e){e.d(t,{A:function(){return f}});var i=e(28597),r=e(3150),o=e(28921),s=e(24496),n=e(41614),l=e(69155),c=function(){var a=this,t=a._self._c;return t(l.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t(o.A,{model:{value:a.panel,callback:function(t){a.panel=t},expression:"panel"}},[t(s.A,{staticClass:"v-expansion-panel-header--center v-expansion-panel-header--background-cuarto",scopedSlots:a._u([{key:"header",fn:function(){return[a._v("Filtro Avanzado")]},proxy:!0}])},[t(r.A,[t(l.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[a.areasFiltro?t(n.A,{attrs:{xs12:"","px-3":""}},[t(i.A,{attrs:{clearable:"","background-color":"cuarto lighten-5","item-value":"id","item-text":"area",items:a.areasFiltro,label:"Vacunatorio","prepend-icon":"fa-house-medical-flag",color:"cuarto",multiple:"",chips:"","deletable-chips":""},on:{"click:clear":function(t){a.$nextTick((()=>a.filtro.areas=[]))}},model:{value:a.filtro.areas,callback:function(t){a.$set(a.filtro,"areas",t)},expression:"filtro.areas"}})],1):a._e(),a.insumos?t(n.A,{attrs:{xs12:"","px-3":""}},[t(i.A,{attrs:{clearable:"","background-color":"cuarto lighten-5","item-value":"id","item-text":"nombreC",items:a.insumosDB,label:"Insumos (Opcional)","prepend-icon":"vaccines",color:"cuarto",multiple:"",chips:"","deletable-chips":""},on:{"click:clear":function(t){a.$nextTick((()=>a.filtro.insumos=[]))}},model:{value:a.filtro.insumos,callback:function(t){a.$set(a.filtro,"insumos",t)},expression:"filtro.insumos"}})],1):a._e(),a.procedencia?t(n.A,{attrs:{xs12:"","px-3":""}},[t(i.A,{attrs:{clearable:"","background-color":"cuarto lighten-5",items:a.optionsJsonVacunas?.insumo_procedencia||[],label:"Procedencia (Opcional)","prepend-icon":"trip_origin",color:"cuarto",multiple:"",chips:"","deletable-chips":""},on:{"click:clear":function(t){a.$nextTick((()=>a.filtro.procedencias=[]))}},model:{value:a.filtro.procedencias,callback:function(t){a.$set(a.filtro,"procedencias",t)},expression:"filtro.procedencias"}})],1):a._e(),a.vacunas_reportes?t(n.A,{attrs:{xs12:"","px-3":""}},[t(i.A,{attrs:{clearable:"","background-color":"cuarto lighten-5",items:a.optionsJsonVacunas?.vacunas_reportes||[],label:"Contar por separado (Opcional)","prepend-icon":"grain",color:"cuarto",multiple:"",chips:"","deletable-chips":""},on:{"click:clear":function(t){a.$nextTick((()=>a.filtro.opciones=[]))}},model:{value:a.filtro.opciones,callback:function(t){a.$set(a.filtro,"opciones",t)},expression:"filtro.opciones"}})],1):a._e()],1)],1)],1)],1)],1)},d=[],u=e(95353),m={name:"vacunas-component-filtro-avanzado",props:["filtro","areasFiltro","insumos","procedencia","vacunas_reportes"],data:()=>({panel:[],insumosDB:[],optionsJsonVacunas:{}}),computed:{},async created(){this.insumos&&(this.insumosDB=await this.buscarInsumosFiltro(this.insumos)),(this.procedencia||this.vacunas_reportes)&&(this.optionsJsonVacunas=await this.returnOptionsJSON({key:"vacunas",opcion:"base"}))},methods:{...(0,u.i0)(["returnOptionsJSON"]),...(0,u.i0)("vacunas",["buscarInsumosFiltro"])}},p=m,g=e(81656),h=(0,g.A)(p,c,d,!1,null,null,null),f=h.exports},17800:function(a,t,e){e.d(t,{A:function(){return A}});var i=e(28597),r=e(28383),o=e(52562),s=e(41614),n=e(21527),l=e(69155),c=e(55731),d=e(57e3),u=e(17087),m=(e(18111),e(13579),function(){var a=this,t=a._self._c;return t(l.A,{class:"grey lighten-"+(a.index%2===0?"3":"2"),attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[a.egreso.retirado||a.soloLectura?t(s.A,{attrs:{xs12:"",md8:"",lg9:"","px-3":""}},[t(d.W,{attrs:{readonly:"","background-color":"primary lighten-1","prepend-icon":"vaccines",label:"Insumo",type:"text",color:"primary"},model:{value:a.egreso.insumoDB,callback:function(t){a.$set(a.egreso,"insumoDB",t)},expression:"egreso.insumoDB"}})],1):a._e(),a.egreso.retirado||a.soloLectura?t(s.A,{attrs:{xs12:"",sm6:"",md4:"",lg3:"","px-3":""}},[t(d.W,{attrs:{readonly:"","background-color":"primary lighten-1","prepend-icon":"trip_origin",label:"Procedencia",type:"text",color:"primary"},model:{value:a.egreso.procedencia,callback:function(t){a.$set(a.egreso,"procedencia",t)},expression:"egreso.procedencia"}})],1):a._e(),a.egreso.retirado||a.soloLectura?t(s.A,{attrs:{xs12:"",sm6:"",lg3:"","px-3":""}},[t(d.W,{attrs:{readonly:"","background-color":"primary lighten-1","prepend-icon":"group_work",label:"Lote",type:"text",color:"primary"},model:{value:a.egreso.lote,callback:function(t){a.$set(a.egreso,"lote",t)},expression:"egreso.lote"}})],1):a._e(),a.egreso.retirado||a.soloLectura?t(s.A,{attrs:{xs12:"",sm5:"",md6:"",lg4:"","px-3":""}},[t(d.W,{attrs:{readonly:"","background-color":"primary lighten-1","prepend-icon":"event",label:"Vencimiento",type:"text",color:"primary"},model:{value:a.egreso.vencimiento,callback:function(t){a.$set(a.egreso,"vencimiento",t)},expression:"egreso.vencimiento"}})],1):t(s.A,{attrs:{xs12:"",lg9:"","px-3":""}},[t(i.A,{attrs:{clearable:"","background-color":"primary lighten-5","item-value":"_id","item-text":"insumoDB",items:a.stockDB,label:"Insumo",placeholder:""+(a.egreso.insumo?`${a.egreso.insumo.insumoDB} => Hay: ${a.egreso.insumo.cantidad??"0"} -> Procedencia: ${a.egreso.insumo.procedencia??"---"}; Lote: ${a.egreso.insumo.lote??"---"}; Vencimiento: ${a.egreso.insumo.vencimiento??"---"}.`:"Seleccionar primero Origen"),"prepend-icon":"vaccines",color:"primary",rules:[...a.rules.requerido,t=>{try{return t&&!a.stockDB.some((t=>t._id===a.egreso.insumo._id))?"El Insumo ya no se encuentra disponible.":"Utilizado"!==a.motivo||"Vacuna"!==a.egreso.insumo.insumoCategoriaDB||"Las Vacunas no pueden egresarse como Utilizados."}catch(e){return"Error Inesperado (component-egreso-insumo)."}}],"validate-on-blur":"","return-object":""},scopedSlots:a._u([{key:"selection",fn:function(e){return[t(o.A,{attrs:{color:"primary darken-1","text-color":"white"}},[t(n.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[a._v("vaccines")]),a._v(" "+a._s(e.item.insumoDB)+" ")],1),t(o.A,{attrs:{color:"primary darken-1","text-color":"white"}},[t(n.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[a._v("trip_origin")]),a._v(" Procedencia: "+a._s(e.item.procedencia??"---")+" ")],1),t(o.A,{attrs:{color:"primary darken-1","text-color":"white"}},[t(n.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[a._v("group_work")]),a._v(" Lote: "+a._s(e.item.lote??"---")+" ")],1),t(o.A,{attrs:{color:""+(e.item.expirado?"red darken-1":e.item.porExpirar?"orange darken-1":"primary darken-1"),"text-color":"white"}},[t(n.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[a._v("event")]),a._v(" Vencimiento: "+a._s(e.item.vencimiento??"---")+" ")],1),t(o.A,{attrs:{color:"primary darken-1","text-color":"white"}},[t(n.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[a._v("grain")]),a._v(" Hay: "+a._s(e.item.cantidad??"0")+" ")],1)]}},{key:"item",fn:function(e){return[t("code",{staticClass:"primary darken-1 white--text v-list-active--background v-list-disabled--background"},[a._v(" "+a._s(e.item.insumoDB)+" ")]),a._v(" - "),t("code",{staticClass:"primary darken-1 white--text"},[t("span",{staticClass:"hidden-xs-only"},[a._v("Procedencia: ")]),a._v(a._s(e.item.procedencia??"---")+" ")]),a._v(" - "),t("code",{staticClass:"primary darken-1 white--text"},[t("span",{staticClass:"hidden-xs-only"},[a._v("Lote: ")]),a._v(a._s(e.item.lote??"---")+" ")]),a._v(" - "),t("code",{class:(e.item.expirado?"red darken-1":e.item.porExpirar?"orange darken-1":"primary darken-1")+" white--text"},[t("span",{staticClass:"hidden-xs-only"},[a._v("Vencimiento: ")]),a._v(a._s(e.item.vencimiento??"---")+" ")]),a._v(" - "),t("code",{staticClass:"primary darken-1 white--text"},[t("span",{staticClass:"hidden-xs-only"},[a._v("Hay: ")]),a._v(a._s(e.item.cantidad??"0")+" ")])]}}]),model:{value:a.egreso.insumo,callback:function(t){a.$set(a.egreso,"insumo",t)},expression:"egreso.insumo"}})],1),t(s.A,{class:""+(a.egreso.retirado||a.soloLectura?"sm5 md6 lg3":"sm8 lg2"),attrs:{xs12:"","px-3":""}},[t(d.W,{attrs:{readonly:!!a.egreso.retirado||a.soloLectura,clearable:!(a.egreso.retirado||a.soloLectura),"background-color":a.egreso.retirado||a.soloLectura?"primary lighten-1":"primary lighten-5","prepend-icon":"grain",label:"Cantidad",type:"number",onkeydown:"return event.key !== 'e' && event.key !== 'E' && event.key !== '.' && event.key !== ',' && event.key !== '+' && event.key !== '-'",color:"primary",rules:a.egreso.retirado||a.soloLectura?[]:[...a.rules.requerido,...a.rules.soloNumero,a.rules.minNumber(1),a.rules.maxNumber(a.egreso.insumo?.cantidad||"Seleccione Insumo")]},model:{value:a.egreso.cantidad,callback:function(t){a.$set(a.egreso,"cantidad",t)},expression:"egreso.cantidad"}})],1),t(c.hc),t(u.A,{attrs:{top:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:e}){return[t(r.A,a._g({attrs:{disabled:a.loading.estado||!!a.egreso.retirado||a.soloLectura,color:"white",icon:"",small:""},on:{click:function(t){return a.borrarFila(a.index)}}},e),[t(n.A,{attrs:{color:"red lighten-2"}},[a._v("delete_forever")])],1)]}}])},[t("span",[a._v("Eliminar Insumo")])]),t(c.hc,{staticClass:"hidden-xs-only"})],1)}),p=[],g=e(95353),h={name:"component-egreso-insumo",props:["egreso","index","stockDB","borrarFila","actualizar","soloLectura","motivo"],computed:{...(0,g.aH)(["loading","rules"])},watch:{"egreso.insumo"(){this.actualizar()}}},f=h,v=e(81656),b=(0,v.A)(f,m,p,!1,null,null,null),A=b.exports},33546:function(a,t,e){e.d(t,{A:function(){return D}});var i=e(28597),r=e(28383),o=e(3150),s=e(1899),n=e(79305),l=e(41614),c=e(21939),d=e(21527),u=e(69155),m=e(55731),p=e(70134),g=e(57e3),h=e(45621),f=e(17087),v=function(){var a=this,t=a._self._c;return t(n.A,{attrs:{"max-width":"80%",persistent:"",scrollable:""},model:{value:a.dialogTransferencia.state,callback:function(t){a.$set(a.dialogTransferencia,"state",t)},expression:"dialogTransferencia.state"}},[t(o.A,[t(p.A,{attrs:{color:"grey lighten-2",height:"auto",window:""}},[t(d.A,{attrs:{medium:"",color:"black darken-2"}},[a._v("input")]),t("span",{staticClass:"display-1 font-weight-bold text-capitalize black--text text--darken-2"},[a._v(a._s(a.dialogTransferencia.remito?`Remito: ${a.dataEdit.remito}`:"Nueva Transferencia"))]),t(m.hc),t(d.A,{attrs:{large:"",disabled:a.loading.estado,color:"error darken-1"},on:{click:a.close}},[a._v("cancel_presentation")])],1),t(s.OQ,[t(c.A,{ref:"form",attrs:{"lazy-validation":""},model:{value:a.valido,callback:function(t){a.valido=t},expression:"valido"}},[t(u.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t(l.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(g.W,{attrs:{readonly:"","background-color":"primary lighten-1",value:a.mostrarFecha(a.dataEdit.fecha,"time"),"prepend-icon":"event",label:"Fecha Emision",type:"text",color:"primary"}})],1),t(l.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(g.W,{attrs:{readonly:"","background-color":"primary lighten-1","prepend-icon":"list_alt",placeholder:"El Numero de remito sera autogenerado una vez guardada la transferencia.",hint:"El Numero de remito sera autogenerado una vez guardada la transferencia.",label:"Remito",type:"text",color:"primary"},model:{value:a.dataEdit.remito,callback:function(t){a.$set(a.dataEdit,"remito",t)},expression:"dataEdit.remito"}})],1),t(l.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(i.A,{attrs:{readonly:a.dialogTransferencia.soloLectura,clearable:!a.dialogTransferencia.soloLectura,"background-color":a.dialogTransferencia.soloLectura?"primary lighten-1":"primary lighten-5","item-value":"id","item-text":"area",items:a.areasFiltro,label:"Origen","prepend-icon":"local_shipping",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},model:{value:a.dataEdit.origen,callback:function(t){a.$set(a.dataEdit,"origen",t)},expression:"dataEdit.origen"}})],1),t(l.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(i.A,{attrs:{readonly:a.dialogTransferencia.soloLectura,clearable:!a.dialogTransferencia.soloLectura,"background-color":a.dialogTransferencia.soloLectura?"primary lighten-1":"primary lighten-5","item-value":"id","item-text":"area",items:a.areasDestino,label:"Destino","prepend-icon":"fa-house-medical-flag",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},on:{"click:clear":function(t){a.$nextTick((()=>a.dataEdit.destino=""))}},model:{value:a.dataEdit.destino,callback:function(t){a.$set(a.dataEdit,"destino",t)},expression:"dataEdit.destino"}})],1),t(l.A,{attrs:{"hidden-xs-only":"",sm3:"","px-3":""}}),t(l.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t("dateSelect",{attrs:{soloLectura:a.dialogTransferencia.soloLectura,clearable:!a.dialogTransferencia.soloLectura,color:"primary",label:"Fecha Planificada (Opcional)",icon:"event",value:a.dataEdit.fec_planificada,min:a.hoy},model:{value:a.dataEdit.fec_planificada,callback:function(t){a.$set(a.dataEdit,"fec_planificada",t)},expression:"dataEdit.fec_planificada"}})],1),t(l.A,{attrs:{"hidden-xs-only":"",sm3:"","px-3":""}}),t(l.A,{attrs:{xs12:"","px-3":"",primary:"","darken-3":""}},[t(u.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t("h4",{staticClass:"title float: left white--text"},[a._v("Insumos a Transferir")]),t(m.hc),t(f.A,{attrs:{top:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:e}){return[t(r.A,a._g({attrs:{disabled:a.loading.estado||!!a.dataEdit.retirado||a.noGestionEnOrigen,flat:"",icon:"",color:"white",small:"",right:""},on:{click:function(t){return a.agregarFila()}}},e),[t(d.A,{attrs:{large:""}},[a._v("control_point")])],1)]}}])},[t("span",[a._v("Agregar Insumo")])])],1)],1),a._l(a.dataEdit.insumos,(function(e,i){return t(l.A,{key:`insumos-${i}`,attrs:{xs12:""}},[t("componentEgresoInsumo",{attrs:{egreso:e,index:i,stockDB:a.stockFiltrado,borrarFila:a.borrarFila,actualizar:a.actualizarStockFiltrado,soloLectura:a.noGestionEnOrigen}})],1)})),0===a.dataEdit.insumos?.length?t(u.A,{attrs:{row:"",wrap:""}},[t(l.A,{attrs:{xs12:"","mx-3":"","pb-0":""}},[t(g.W,{attrs:{readonly:"","background-color":"orange lighten-4",label:"No Hay Insumos, Debe haber por lo menos uno.","prepend-icon":"warning",color:"orange",solo:"",rules:[...a.rules.requerido]}})],1),t(m.hc),t(r.A,{staticClass:"my-0",attrs:{disabled:a.loading.estado||!!a.dataEdit.retirado||a.noGestionEnOrigen,round:"",color:"primary"},on:{click:function(t){return a.agregarFila()}}},[t(d.A,{attrs:{left:""}},[a._v("control_point")]),a._v("Insumo a Transf. ")],1),t(m.hc)],1):a._e(),t(l.A,{attrs:{xs12:"","mx-3":""}},[t(h.A,{attrs:{readonly:!!a.dataEdit.retirado||a.noGestionEnOrigen,clearable:!(a.dataEdit.retirado||a.noGestionEnOrigen),"background-color":a.dataEdit.retirado||a.noGestionEnOrigen?"primary lighten-1":"primary lighten-5",label:"Observacion (opcional)",color:"primary","prepend-icon":"description","auto-grow":"",rows:"2"},model:{value:a.dataEdit.observacion,callback:function(t){a.$set(a.dataEdit,"observacion",t)},expression:"dataEdit.observacion"}})],1),a.dialogTransferencia.soloLectura?t(l.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(g.W,{attrs:{readonly:"","background-color":"primary lighten-1",value:a.mostrarFecha(a.dataEdit.retirado,"time"),"prepend-icon":"local_shipping",label:"Fecha Retirado de Origen",placeholder:"Sin Retirar",type:"text",color:"primary"}})],1):a._e(),a.dialogTransferencia.soloLectura?t(l.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(g.W,{attrs:{readonly:"","background-color":"primary lighten-1",value:a.mostrarFecha(a.dataEdit.recibido,"time"),"prepend-icon":"local_shipping",label:"Fecha Recibido en Destino",placeholder:"Sin Recibir",type:"text",color:"primary"}})],1):a._e()],2)],1)],1),t(s.SL,[t(u.A,{attrs:{row:"",wrap:""}},[t(r.A,{attrs:{disabled:a.loading.estado||!!a.dataEdit.retirado||a.noGestionEnOrigen,round:"",color:"primary"},on:{click:function(t){return a.agregarFila()}}},[t(d.A,{attrs:{left:""}},[a._v("control_point")]),a._v("Insumo a Transf. ")],1),t(m.hc),a.dataEdit._id?t(r.A,{staticClass:"black darken-1 orange--text",attrs:{disabled:a.loading.estado||a.dialogTransferencia.soloLectura,round:"",loading:a.loading.estado},on:{click:function(t){return a.borrarTransferencia()}}},[t(d.A,{attrs:{color:"red lighten-2",left:""}},[a._v("delete_forever")]),a._v("Borrar ")],1):a._e(),t(m.hc),t(r.A,{staticClass:"red darken-1 white--text",attrs:{disabled:a.loading.estado,round:"",loading:a.loading.estado},on:{click:function(t){return a.close()}}},[t(d.A,{attrs:{left:""}},[a._v("cancel_presentation")]),a._v("Cancelar ")],1),t(r.A,{staticClass:"primary darken-1 white--text",attrs:{disabled:a.loading.estado||!!a.dataEdit.retirado||a.noGestionEnOrigen,loading:a.loading.estado,round:""},on:{click:function(t){return a.guardarTransferencia()}}},[t(d.A,{attrs:{left:""}},[a._v("save")]),a._v(a._s(a.valido?a.dialogTransferencia.remito?"Guardar":"Crear":"Formulario No valido")+" ")],1)],1)],1)],1)],1)},b=[],A=(e(44114),e(18111),e(20116),e(7588),e(13579),e(95353)),y=e(81255),x=e(17800),_={name:"dialogTransferencia",props:["closeFinish"],components:{dateSelect:y.A,componentEgresoInsumo:x.A},data:()=>({valido:!0,noGestionEnOrigen:!1,areasDB:[],areasFiltro:[],areasDestino:[],stockEntregaDB:[],stockFiltrado:[],dataEdit:{},dataEditBase:{fecha:"",remito:"",origen:"",destino:"",insumos:[{insumo:void 0,cantidad:null}],observacion:"",fec_planificada:"",retirado:"",recibido:""}}),computed:{...(0,A.aH)(["loading","hoy","persona","rules"]),...(0,A.aH)("vacunas",["dialogTransferencia"])},watch:{async"dialogTransferencia.state"(a){a?setTimeout((async()=>{this.areasDB=[...await this.buscarAreaFiltros({filtro:{vacunatorio:!0},populate:"no",select:"area"})],this.areasDestino=this.areasDB,this.dialogTransferencia.remito?this.dataEdit=Object.assign(this._cloneDeep(this.dataEditBase),this._cloneDeep(this.dialogTransferencia.remito)):(this.dataEdit=this._cloneDeep(this.dataEditBase),this.dataEdit.fecha=Date.now(),this.persona.vacunas.general?.gestion||1!==this.persona.vacunas.gestion?.length||(this.dataEdit.origen=this.persona.vacunas.gestion[0])),this.persona.vacunas.general?.gestion||!this.dataEdit.origen||this.persona.vacunas.gestion?.includes(this.dataEdit.origen)||(this.noGestionEnOrigen=!0),this.areasFiltro=this.persona.vacunas.general?.gestion?this.areasDB:await this.filtrarArrayParaSelectsDisabled({arraySelects:this.areasDB,arrayEnable:this.persona.vacunas.gestion,propCompare:"_id",onlyEnabled:!this.noGestionEnOrigen}),this.$refs.form.resetValidation()}),350):(this.dataEdit=this._cloneDeep(this.dataEditBase),this.noGestionEnOrigen=!1,this.$refs.form.resetValidation())},async"dataEdit.origen"(a,t){if(a){if((this.persona.vacunas.general?.gestion||this.persona.vacunas.gestion?.includes(a))&&this.dataEdit.insumos.some((a=>!a.retirado))&&(this.stockEntregaDB=await this.buscarStockParaSelects({area:a})),this.dialogTransferencia.soloLectura||this.dataEdit.destino===a&&(this.dataEdit.destino=""),t)this.dataEdit.insumos=[{...this.dataEditBase.insumos[0]}];else if(this.dialogTransferencia.remito&&this.dataEdit.insumos[0].insumo)for(let e=0;e<this.dataEdit.insumos.length;e++){let a=this.stockEntregaDB.find((a=>a._id===this.dataEdit.insumos[e].stockID));this.$set(this.dataEdit.insumos,e,{...this.dataEdit.insumos[e],insumo:a||{_id:this.dataEdit.insumos[e].stockID,insumo:this.dataEdit.insumos[e].insumo,insumoDB:this.dataEdit.insumos[e].insumoDB,procedencia:this.dataEdit.insumos[e].procedencia,lote:this.dataEdit.insumos[e].lote,vencimiento:this.dataEdit.insumos[e].vencimiento,cantidad:0}})}}else this.stockEntregaDB=[],this.dataEdit.insumos=[{...this.dataEditBase.insumos[0]}];this.areasDestino=await this.filtrarArrayParaSelectsDisabled({arraySelects:this.areasDB,arrayDisable:[a],propCompare:"_id"}),this.actualizarStockFiltrado()}},beforeMount(){this.dataEdit=this._cloneDeep(this.dataEditBase)},methods:{...(0,A.PY)(["mostrarLoading","mostrarError","mostrarMensaje","ocultarLoading"]),...(0,A.i0)(["filtrarArrayParaSelectsDisabled","requestAPI"]),...(0,A.i0)("main",["buscarAreaFiltros"]),...(0,A.i0)("vacunas",["actualizarDialogIngresoTransferencia","buscarStockParaSelects"]),close(){this.actualizarDialogIngresoTransferencia({state:!1,type:{transferencia:!0}}),this.closeFinish?.()},async actualizarStockFiltrado(){let a=[];this.dataEdit.insumos.forEach((t=>{t.insumo?._id&&a.push(t.insumo._id)})),a.length>0?this.stockFiltrado=await this.filtrarArrayParaSelectsDisabled({arraySelects:this.stockEntregaDB,arrayDisable:a,propCompare:"_id"}):this.stockFiltrado=this.stockEntregaDB},agregarFila(){this.dataEdit.insumos.push({...this.dataEditBase.insumos[0]})},borrarFila(a){this.dataEdit.insumos.splice(a,1),this.actualizarStockFiltrado()},async guardarTransferencia(){if(!this.$refs.form.validate())return this.mostrarError({mensaje:"Revise los campos obligatorios.",titulo:"Valores Requeridos."}),!1;try{this.mostrarLoading({titulo:"Efectuando cambios..."});let a=this._cloneDeep(this.dataEdit);if(!a._id){let t=this.isVacio(a,!0);if(!0===t.vacio)return this.mostrarError({mensaje:"Complete por lo menos un dato.",titulo:"Valores Requeridos"}),!1;a=t.dato}for(let e=0;e<a.insumos.length;e++)a.insumos[e].stockID=a.insumos[e].insumo._id,a.insumos[e].procedencia=a.insumos[e].insumo.procedencia,a.insumos[e].lote=a.insumos[e].insumo.lote,a.insumos[e].vencimiento=a.insumos[e].insumo.vencimiento,a.insumos[e].insumo=a.insumos[e].insumo.insumo;let t=null;if(t=await this.requestAPI({method:"put",url:"/vacunas/transferencia",update:a}),t?.data?.ok){let t=a._id?"Editada":"Guardada";return this.mostrarMensaje({msj:[`Transferencia ${t} exitosamente.`],titulo:"Completado"}),this.close(),!0}return!1}catch(a){return this.mostrarError({mensaje:a,titulo:"Inesperado (guardarTransferencia)"}),!1}finally{this.ocultarLoading()}},async borrarTransferencia(){if(await this.$root.$confirm.open({titulo:"ELIMINAR",msj:["Una vez Eliminada no se podra recuperar.",`La Transferencia: ${this.dataEdit.remito}, sera ELIMINADA.\n¿Desea continuar?`]}))try{this.mostrarLoading({titulo:"Borrando Transferencia..."});let a=null;return a=await this.requestAPI({method:"delete",url:`/vacunas/transferencia/${this.dataEdit._id}`}),!!a?.data?.ok&&(this.mostrarMensaje({msj:["Borrado exitosamente."],titulo:"Borrado Exitoso"}),this.close(),!0)}catch(a){return this.mostrarError({mensaje:a,titulo:"Inesperado (borrarTransferencia)"}),!1}finally{this.ocultarLoading()}}}},k=_,E=e(81656),w=(0,E.A)(k,v,b,!1,null,null,null),D=w.exports},75841:function(a,t,e){e.r(t),e.d(t,{default:function(){return ua}});var i=e(21999),r=e(28597),o=e(76139),s=e(28383),n=e(3150),l=e(1899),c=e(37471),d=e(48122),u=e(81851),m=e(34172),p=e(41614),g=e(21527),h=e(48431),f=e(69155),v=e(17912),b=e(55731),A=e(57e3),y=e(17087),x=function(){var a=this,t=a._self._c;return t(d.A,{attrs:{fluid:"","grid-list-xs":""}},[t(f.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[t(p.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[t(n.A,{staticClass:"cuarto darken-2"},[t(l.OQ,{staticClass:"white--text text-xs-center"},[a._v("====== GESTION DE VACUNAS ======")])],1)],1)],1),t(f.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[t(p.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[t(f.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",cuarto:"","darken-1":""}},[t(p.A,{attrs:{"px-3":""}},[t(g.A,{attrs:{medium:"",color:"white",left:""}},[a._v("vaccines")]),t("span",{staticClass:"title white--text"},[a._v("Vacunas / Aplicaciones")])],1),t(b.hc),t(s.A,{attrs:{fab:"",small:"",color:"primary darken-2"},on:{click:function(t){return a.retroceder()}}},[t(g.A,[a._v("far fa-arrow-alt-circle-left")])],1)],1),t(n.A,{staticClass:"elevation-6",attrs:{color:"grey lighten-2"}},[t(l.OQ,{staticClass:"px-0"},[t(f.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[t(p.A,{attrs:{xs12:"","px-3":""}},[t(n.A,{staticClass:"grey lighten-3"},[t(f.A,{attrs:{"justify-center":"",row:"",wrap:""},on:{keypress:function(t){return!t.type.indexOf("key")&&a._k(t.keyCode,"enter",13,t.key,"Enter")?null:a.recargarDataTable(a.filtro)}}},[t(p.A,{attrs:{xs12:"",sm6:"",md3:"","px-3":""}},[t("dateSelect",{staticClass:"capitalizar",attrs:{value:a.filtro.desde,"background-color":"cuarto lighten-5",color:"cuarto",label:"Desde",icon:"today",max:a.filtro.hasta,requerido:"true"},model:{value:a.filtro.desde,callback:function(t){a.$set(a.filtro,"desde",t)},expression:"filtro.desde"}})],1),t(p.A,{attrs:{xs12:"",sm6:"",md3:"","px-3":""}},[t("dateSelect",{staticClass:"capitalizar",attrs:{value:a.filtro.hasta,"background-color":"cuarto lighten-5",color:"cuarto",label:"Hasta",icon:"event",min:a.filtro.desde,requerido:"true"},model:{value:a.filtro.hasta,callback:function(t){a.$set(a.filtro,"hasta",t)},expression:"filtro.hasta"}})],1),t(p.A,{attrs:{xs12:"",md10:"","px-3":"","mb-3":""}},[t("componentFiltroAvanzado",{attrs:{filtro:a.filtro,areasFiltro:a.areasFiltro,insumos:{select:"nombre descripcion nombreC"},procedencia:!0}})],1)],1),t(f.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[t(s.A,{staticClass:"white--text mb-2",attrs:{round:"",color:"cuarto darken-2",disabled:a.loading.estado,loading:a.loading.estado},on:{click:function(t){return a.recargarDataTable(a.filtro)}}},[t(g.A,{attrs:{medium:"",left:""}},[a._v("search")]),a._v(" Buscar Vacunaciones")],1),t(m.A,{staticClass:"hidden-xs-only mx-4 my-1 black",attrs:{vertical:""}}),t(s.A,{staticClass:"white--text mb-2",attrs:{round:"",color:"cuarto darken-2",disabled:a.loading.estado,loading:a.loading.estado},on:{click:function(t){return a.reporte({detalle:!0})}}},[t(g.A,{attrs:{medium:"",left:""}},[a._v("fas fa-file-invoice")]),a._v(" Vacunaciones Nominal")],1),t(m.A,{staticClass:"hidden-xs-only mx-4 my-1 black",attrs:{vertical:""}}),t(s.A,{staticClass:"white--text mb-2",attrs:{round:"",color:"cuarto darken-2",disabled:a.loading.estado,loading:a.loading.estado},on:{click:function(t){return a.reporte()}}},[t(g.A,{attrs:{medium:"",left:""}},[a._v("fa-solid fa-file-lines")]),a._v(" Vacunaciones")],1)],1)],1)],1)],1)],1)],1)],1),t(p.A,{attrs:{"pa-1":"","ma-1":"",xs12:"",cuarto:"","lighten-1":""}},[t(n.A,[t(f.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",primary:"","ma-0":""}},[t(p.A,{attrs:{"px-3":""}},[t(g.A,{attrs:{medium:"",color:"white",left:""}},[a._v("vaccines")]),t("span",{staticClass:"title white--text"},[a._v("Vacunaciones")])],1),t(b.hc)],1),t(c.A,[t(p.A,{attrs:{xs12:"",sm4:"","px-2":""}},[t(A.W,{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":"",clearable:""},model:{value:a.search,callback:function(t){a.search=t},expression:"search"}})],1),t(b.hc),t(p.A,{attrs:{xs12:"",sm6:"",md4:"","px-2":""}},[t(r.A,{attrs:{items:a.dataTableSelect,label:"Mostrar","prepend-icon":"tune",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:a.dataTableSelected,callback:function(t){a.dataTableSelected=t},expression:"dataTableSelected"}})],1),t(m.A,{staticClass:"hidden-xs-only mx-2 primary",attrs:{inset:"",vertical:""}}),t(s.A,{staticClass:"mb-2",attrs:{round:"",color:"primary",disabled:a.loading.estado||!(a.persona.vacunas.gestion?.length>0||a.persona.vacunas.general?.gestion),loading:a.loading.estado},on:{click:function(t){return a.actualizarDialogVacunacion({state:!0})}}},[t(g.A,{attrs:{medium:"",left:""}},[a._v("output")]),a._v(" Nueva Vacunacion")],1)],1),t(u.A,{staticStyle:{"table-layout":"fixed"},attrs:{headers:a.headers,items:a.dataTableFilter,"item-key":"_id",pagination:a.paginacion,"rows-per-page-items":[5,10,25,50],loading:a.loading.estado,search:a.search},on:{"update:pagination":function(t){a.paginacion=t}},scopedSlots:a._u([{key:"no-results",fn:function(){return[t(i.A,{staticClass:"title white--text text-sm-left",attrs:{value:!0,color:"red lighten-1",icon:"warning"}},[a._v(' No se encontraron resultados para "'+a._s(a.search)+'". ')])]},proxy:!0},{key:"no-data",fn:function(){return[t(i.A,{staticClass:"title white--text text-sm-left",attrs:{value:!0,color:"red lighten-1",icon:"warning"}},[a._v(" No hay datos para mostrar. ")])]},proxy:!0},{key:"items",fn:function(i){return[t("tr",{class:a.backgroundClass(i.item)},[a._l(a.headersDinamics,(function(a){return t("td",{key:a.text,class:a.class},[t("bodyDataTableDinamic",{attrs:{props:i,field:a}})],1)})),t("td",{staticClass:"text-sm-left"},[t("div",{staticClass:"text-xs-center"},[t(y.A,{attrs:{top:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:r}){return[t(s.A,a._g({staticClass:"cyan--text",attrs:{disabled:!(i.item.cipres_id||i.item.cipres_msg)&&!(a.persona.vacunas.general?.gestion||a.persona.vacunas.general?.cipres||a.persona._id===i.item.usuario_creador||a.persona.vacunas.cipres?.includes(i.item.origen))||a.loading.estado,color:"white",loading:a.loading.estado,round:""},on:{click:function(t){return a.cipresVacunacion({vacunacion:i.item})}}},r),[t(o.A,{staticClass:"mr-1",attrs:{tile:!1,size:"32px"}},[t(h.A,{attrs:{src:e(19400),alt:"CIPRES"}})],1),a._v(" CIPRES ")],1)]}}],null,!0)},[t("span",[a._v("Registro en CIPRES")])]),t(y.A,{attrs:{top:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:e}){return[t(s.A,a._g({attrs:{disabled:i.item.cipres_id||!(a.persona.vacunas.general?.gestion||a.persona._id===i.item.usuario_creador)||a.loading.estado,color:"white",small:"",icon:"",loading:a.loading.estado},on:{click:function(t){return a.borrarVacunacion({vacunacion:i.item})}}},e),[t(g.A,{attrs:{color:"red"}},[a._v("delete")])],1)]}}],null,!0)},[t("span",[a._v("Borrar Vacunacion")])])],1)])],2)]}}])},[t(v.A,{attrs:{color:"blue",indeterminate:""}})],1)],1)],1),t(p.A,{attrs:{"pa-1":"","ma-1":"",red:"","darken-2":"",xs12:""}},[t(n.A,[t(l.OQ,{staticClass:"px-3 font-weight-medium"},[t("p",[t(g.A,{attrs:{color:"yellow darken-3",left:""}},[a._v(" warning ")]),t("b",[t("u",[a._v("Referencia de Colores:")])])],1),t("ul",[t("li",{staticClass:"green--text",attrs:{type:"square"}},[t("b",[t("u",[a._v("Verde:")])]),a._v(" Registro Local "),t("b",[t("u",[a._v("OK")])]),a._v(". ")]),t("li",{staticClass:"blue--text text--lighten-2",attrs:{type:"square"}},[t("b",[t("u",[a._v("Celeste:")])]),a._v(" Registro en CIPRES "),t("b",[t("u",[a._v("OK")])]),a._v(". ")]),t("li",{staticClass:"pink--text text--lighten-3",attrs:{type:"square"}},[t("b",[t("u",[a._v("Rosa:")])]),a._v(" Registro en CIPRES "),t("b",[t("u",[a._v("ERROR")])]),a._v(". ")]),t("li",{staticClass:"orange--text",attrs:{type:"square"}},[t("b",[t("u",[a._v("Anaranjado:")])]),a._v(" Aplicacion de Vacuna "),t("b",[t("u",[a._v("Vencida")])]),a._v(". ")])])])],1)],1)],1),t("dialogVacunacion",{attrs:{closeFinish:a.recargarDataTable}})],1)},_=[],k=(e(18111),e(22489),e(17642),e(58004),e(33853),e(45876),e(32475),e(15024),e(31698),e(64979),e(71678),e(95353)),E=e(42681),w=e(62373),D=e(81255),B=e(52562),S=e(79305),C=e(28921),F=e(21939),I=e(8805),T=e(65582),V=e(87202),P=e(26786),K=e(3016),L=e(1904),R=e(72031),j=e(70134),q=function(){var a=this,t=a._self._c;return t(S.A,{attrs:{"max-width":"80%",persistent:"",scrollable:""},model:{value:a.dialogVacunacion.state,callback:function(t){a.$set(a.dialogVacunacion,"state",t)},expression:"dialogVacunacion.state"}},[t(n.A,{staticClass:"dialog-draggable-window"},[t(j.A,{staticClass:"dialog-draggable ma-0 pa-0",attrs:{color:"grey lighten-2",height:"auto",window:""}},[t(g.A,{staticClass:"dialog-draggable pl-2",attrs:{medium:"",color:"black darken-2"}},[a._v("vaccines")]),t("span",{staticClass:"display-1 font-weight-bold black--text text--darken-2 dialog-draggable"},[a._v(a._s(a.dialogVacunacion.vacunacion?"Vacunacion":"Nueva Vacunacion"))]),t(b.hc),t(g.A,{attrs:{large:"",disabled:a.loading.estado,color:"error darken-1"},on:{click:a.close}},[a._v("cancel_presentation")])],1),t(n.A,[t(l.OQ,{staticClass:"ma-0 pa-0"},[t(P.A,{model:{value:a.step,callback:function(t){a.step=t},expression:"step"}},[t(L.vY,{staticClass:"yellow lighten-4",staticStyle:{height:"32px"}},[t(R.A,{staticClass:"px-4 py-0",attrs:{color:a.step>1?"green":"primary",complete:a.step>1,step:"1"}},[a._v("Seleccione el Paciente")]),t(m.A),t(R.A,{staticClass:"px-4 py-0",attrs:{color:a.step>2?"green":"primary",complete:a.step>2,step:"2"}},[a._v("HICLEM")]),t(m.A),t(R.A,{staticClass:"px-4 py-0",attrs:{color:a.step>3?"green":"primary",complete:a.step>3,step:"3"}},[a._v("Vacunar")])],1)],1),t(p.A,{directives:[{name:"show",rawName:"v-show",value:a.dataEdit.paciente,expression:"dataEdit.paciente"}],attrs:{xs12:""}},[t(C.A,{attrs:{focusable:""},model:{value:a.expandPanel,callback:function(t){a.expandPanel=t},expression:"expandPanel"}},[t("expandVacunaciones",{attrs:{expandOpen:0===a.expandPanel||a.expandPanel?.[0],pacienteId:a.dataEdit.paciente,pacienteNombreDocumento:a.dataEdit.pacienteNombreDocumento}})],1)],1)],1)],1),t(m.A),t(l.OQ,{staticClass:"ma-0 pa-0"},[t(P.A,{model:{value:a.step,callback:function(t){a.step=t},expression:"step"}},[t(L.vY,{staticClass:"d-none"},[t(R.A,{attrs:{step:"1"}})],1),t(L.WV,[t(K.A,{staticClass:"ma-0 pa-1",attrs:{step:"1"}},[t("selectPaciente",{attrs:{selectIcon:"vaccines",refreshState:a.dialogVacunacion.state},on:{selectedPaciente:({paciente:t})=>a.pacienteSeleccionado(t)}})],1),t(K.A,{staticClass:"ma-0 pa-1",attrs:{step:"2"}},[t(F.A,{ref:"formHistorial",attrs:{"lazy-validation":""},model:{value:a.validoHistorial,callback:function(t){a.validoHistorial=t},expression:"validoHistorial"}},[t(f.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t(p.A,{attrs:{xs12:"","px-3":"",primary:"","darken-3":""}},[t("h4",{staticClass:"title float: left white--text"},[a._v("Historial Clinico General")])])],1),t("formHistorial",{attrs:{historial_unico:a.dataEdit,historial_previo:a.historial_previo,sexo:a.dataEdit.sexo,edad_years:a.dataEdit.edad?.edad_years,refreshState:a.dialogVacunacion.state&&2===a.step,soloLectura:a.dialogVacunacion.soloLectura}})],1)],1),t(K.A,{staticClass:"ma-0 pa-2",attrs:{step:"3"}},[t(F.A,{ref:"formVacunacion",attrs:{"lazy-validation":""},model:{value:a.validoVacunacion,callback:function(t){a.validoVacunacion=t},expression:"validoVacunacion"}},[t(f.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t("dateSelect",{attrs:{soloLectura:a.dialogVacunacion.soloLectura,clearable:!a.dialogVacunacion.soloLectura,color:"primary",label:"Fecha de Aplicacion",icon:"event",value:a.dataEdit.fecha,max:a.hoy,requerido:"true"},model:{value:a.dataEdit.fecha,callback:function(t){a.$set(a.dataEdit,"fecha",t)},expression:"dataEdit.fecha"}})],1),t(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(r.A,{attrs:{readonly:a.dialogVacunacion.soloLectura,clearable:!a.dialogVacunacion.soloLectura,"background-color":a.dialogVacunacion.soloLectura?"primary lighten-1":"primary lighten-5","item-value":"id","item-text":"area",items:a.areasFiltro,label:"Origen","prepend-icon":"fa-house-medical-flag",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},model:{value:a.dataEdit.origen,callback:function(t){a.$set(a.dataEdit,"origen",t)},expression:"dataEdit.origen"}})],1),t(p.A,{attrs:{xs12:"","px-3":""}},[t(f.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t(A.W,{attrs:{readonly:"","background-color":"primary lighten-1",label:"Paciente: Apellido, Nombre (Documento)","prepend-icon":"personal_injury",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},model:{value:a.dataEdit.pacienteNombreDocumento,callback:function(t){a.$set(a.dataEdit,"pacienteNombreDocumento",t)},expression:"dataEdit.pacienteNombreDocumento"}}),t(s.A,{staticClass:"primary white--text",attrs:{disabled:a.loading.estado,loading:a.loading.estado,round:""},on:{click:function(t){return a.resetForm()}}},[t(g.A,{attrs:{left:""}},[a._v("fa-solid fa-people-arrows")]),a._v("Cambiar Paciente ")],1)],1)],1),t(p.A,{attrs:{xs12:"",md4:"","px-3":""}},[t(A.W,{attrs:{readonly:"","background-color":"primary lighten-2",value:a.dataEdit.fec_nac,label:"Fecha Nacimiento","prepend-icon":"cake",color:"primary"}})],1),t(p.A,{attrs:{xs12:"",md2:"","px-3":""}},[t(A.W,{attrs:{readonly:"","background-color":"primary lighten-2",value:a.dataEdit.edad?.edad_weeks,label:"Semanas Cumplidas","prepend-icon":"cake",color:"primary"}})],1),t(p.A,{attrs:{xs12:"",md2:"","px-3":""}},[t(A.W,{attrs:{readonly:"","background-color":"primary lighten-2",value:a.dataEdit.edad?.edad_days,label:"Dias Cumplidos","prepend-icon":"cake",color:"primary"}})],1),t(p.A,{attrs:{xs12:"",md4:"","px-3":""}},[t(A.W,{attrs:{readonly:"","background-color":"primary lighten-2",value:a.dataEdit.edad?.formatString,label:"Edad Completa","prepend-icon":"cake",color:"primary"}})],1),t(p.A,{attrs:{xs12:"",sm6:"",md4:"","px-3":""}},[t(V.d,{attrs:{readonly:a.dialogVacunacion.soloLectura,"background-color":a.dialogVacunacion.soloLectura?"primary lighten-1":"primary lighten-5",items:["Año","Mes","Semana","Dia","Hora"],label:"Edad Unidad","prepend-icon":"cake",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},model:{value:a.dataEdit.edad_unidad,callback:function(t){a.$set(a.dataEdit,"edad_unidad",t)},expression:"dataEdit.edad_unidad"}})],1),t(p.A,{attrs:{xs12:"",sm6:"",md4:"","px-3":""}},[t(A.W,{attrs:{readonly:a.dialogVacunacion.soloLectura||!a.dataEdit.edad_unidad,clearable:!(a.dialogVacunacion.soloLectura||!a.dataEdit.edad_unidad),"background-color":a.dialogVacunacion.soloLectura||!a.dataEdit.edad_unidad?"primary lighten-1":"primary lighten-5","prepend-icon":"cake",label:"Edad"+(a.dataEdit.edad_unidad?` [${a.dataEdit.edad_unidad[0]}]`:""),type:"number",color:"primary",rules:[...a.rules.requerido,...a.rules.soloNumero,a.rules.minNumber(0)],placeholder:"Primero 'Edad Unidad'.",messages:""+(a.dataEdit.edad_valor?"":"Primero seleccionar la 'Edad Unidad'.")},model:{value:a.dataEdit.edad_valor,callback:function(t){a.$set(a.dataEdit,"edad_valor",t)},expression:"dataEdit.edad_valor"}})],1),t(p.A,{attrs:{xs12:"",sm6:"",md4:"","px-3":""}},[t(A.W,{attrs:{readonly:a.dialogVacunacion.soloLectura,clearable:!a.dialogVacunacion.soloLectura,"background-color":a.dialogVacunacion.soloLectura?"primary lighten-1":"primary lighten-5","prepend-icon":"fas fa-id-card-alt",label:"Cobertura Social (Opcional)",messages:"Dejar vacio si no tiene.",placeholder:"Dejar vacio si no tiene.",type:"text",color:"primary"},model:{value:a.dataEdit.oSocial,callback:function(t){a.$set(a.dataEdit,"oSocial",t)},expression:"dataEdit.oSocial"}})],1),t(p.A,{staticClass:"title grey lighten-2 black--text",attrs:{xs12:"","px-3":"","py-1":"","text-xs-center":"","align-center":"","justify-center":""}},[t(o.A,{staticClass:"white",attrs:{size:"32px","mr-1":""}},[t(g.A,{attrs:{color:"indigo"}},[a._v("vaccines")])],1),a._v(" Vacuna Proviene de: ")],1),t(p.A,{staticClass:"text-xs-center grey lighten-4",attrs:{xs12:"","px-3":""}},[t(T.A,{staticClass:"justify-center mt-1 pa-0",attrs:{disabled:a.dialogVacunacion.soloLectura,row:""},model:{value:a.dataEdit.No_Provista,callback:function(t){a.$set(a.dataEdit,"No_Provista",t)},expression:"dataEdit.No_Provista"}},[t(I.A,{attrs:{color:"cyan",value:null},scopedSlots:a._u([{key:"label",fn:function(){return[t(B.A,{staticClass:"grey lighten-3 title v-chip-pointer",attrs:{"text-color":"black",selected:null===a.dataEdit.No_Provista}},[t(o.A,{staticClass:"white"},[t(g.A,{attrs:{color:"cyan"}},[a._v("kitchen")])],1),a._v(" Stock ")],1)]},proxy:!0}])}),t(I.A,{attrs:{color:"blue",value:"Paciente"},scopedSlots:a._u([{key:"label",fn:function(){return[t(B.A,{staticClass:"grey lighten-3 title v-chip-pointer",attrs:{"text-color":"black",selected:"Paciente"===a.dataEdit.No_Provista}},[t(o.A,{staticClass:"white"},[t(g.A,{attrs:{color:"blue"}},[a._v("personal_injury")])],1),a._v(" Paciente ")],1)]},proxy:!0}])}),t(I.A,{attrs:{color:"green",value:"Historial"},scopedSlots:a._u([{key:"label",fn:function(){return[t(B.A,{staticClass:"grey lighten-3 title v-chip-pointer",attrs:{"text-color":"black",selected:"Historial"===a.dataEdit.No_Provista}},[t(o.A,{staticClass:"white"},[t(g.A,{attrs:{color:"green"}},[a._v("menu_book")])],1),a._v(" Aplicacion Previa ")],1)]},proxy:!0}])})],1)],1),"Historial"===a.dataEdit.No_Provista?t(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(A.W,{attrs:{readonly:a.dialogVacunacion.soloLectura,clearable:!a.dialogVacunacion.soloLectura,"background-color":a.dialogVacunacion.soloLectura?"primary lighten-1":"primary lighten-5","prepend-icon":"fa-hospital-user",label:"Institucion / Vacunador",type:"text",color:"primary",rules:[...a.rules.requerido]},model:{value:a.dataEdit.vacunadorName,callback:function(t){a.$set(a.dataEdit,"vacunadorName",t)},expression:"dataEdit.vacunadorName"}})],1):t(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(A.W,{attrs:{readonly:"","background-color":"primary lighten-1","prepend-icon":"fa-solid fa-user-doctor",label:"Vacunador",type:"text",color:"primary",rules:[...a.rules.requerido]},model:{value:a.persona.nombreC,callback:function(t){a.$set(a.persona,"nombreC",t)},expression:"persona.nombreC"}})],1),t(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t("dateSelect",{attrs:{soloLectura:a.dialogVacunacion.soloLectura,clearable:!a.dialogVacunacion.soloLectura,color:"primary",label:"Fecha Futura Cita (opcional)",icon:"event",value:a.dataEdit.fecha_futura_cita,min:a.hoy},model:{value:a.dataEdit.fecha_futura_cita,callback:function(t){a.$set(a.dataEdit,"fecha_futura_cita",t)},expression:"dataEdit.fecha_futura_cita"}})],1),t(p.A,{attrs:{xs12:"","px-3":"",primary:"","darken-3":""}},[t(f.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t("h4",{staticClass:"title float: left white--text"},[a._v("Vacunas a Aplicar")]),t(b.hc),t(y.A,{attrs:{top:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:e}){return[t(s.A,a._g({attrs:{disabled:a.dialogVacunacion.soloLectura||a.loading.estado,flat:"",icon:"",color:"white",small:"",right:""},on:{click:function(t){return a.agregarFila()}}},e),[t(g.A,{attrs:{large:""}},[a._v("control_point")])],1)]}}])},[t("span",[a._v("Agregar Insumo")])])],1)],1),a._l(a.dataEdit.insumos,(function(e,i){return t(p.A,{key:`insumos-${i}`,attrs:{xs12:""}},[null===a.dataEdit.No_Provista?t("componentEgresoVacuna",{attrs:{paciente:a.dataEdit,egreso:e,index:i,optionsJson:a.optionsJsonVacunas,borrarFila:a.borrarFila,stockDB:a.stockFiltrado,actualizar:a.actualizarStockFiltrado}}):t("componentHistorialVacuna",{attrs:{paciente:a.dataEdit,egreso:e,index:i,optionsJson:a.optionsJsonVacunas,borrarFila:a.borrarFila,vacunasDB:a.vacunasDB}})],1)})),0===a.dataEdit.insumos?.length?t(f.A,{attrs:{row:"",wrap:""}},[t(p.A,{attrs:{xs12:"","mx-3":"","pb-0":""}},[t(A.W,{attrs:{readonly:"","background-color":"orange lighten-4",label:"No Hay Vacunaciones, Debe haber por lo menos una.","prepend-icon":"warning",color:"orange",solo:"",rules:[...a.rules.requerido]}})],1),t(b.hc),t(s.A,{staticClass:"my-0",attrs:{disabled:a.dialogVacunacion.soloLectura||a.loading.estado,round:"",color:"primary"},on:{click:function(t){return a.agregarFila()}}},[t(g.A,{attrs:{left:""}},[a._v("control_point")]),a._v("Agregar Insumo ")],1),t(b.hc)],1):a._e()],2)],1)],1)],1)],1)],1),t(m.A),t(l.SL,{directives:[{name:"show",rawName:"v-show",value:2===a.step,expression:"step === 2"}]},[t(f.A,{attrs:{row:"",wrap:""}},[t(s.A,{staticClass:"primary white--text",attrs:{disabled:a.loading.estado,loading:a.loading.estado,round:""},on:{click:function(t){return a.resetForm()}}},[t(g.A,{attrs:{left:""}},[a._v("personal_injury")]),a._v("Cambiar Paciente ")],1),t(b.hc),t(s.A,{staticClass:"red darken-1 white--text",attrs:{disabled:a.loading.estado,loading:a.loading.estado,round:""},on:{click:function(t){return a.close()}}},[t(g.A,{attrs:{left:""}},[a._v("cancel_presentation")]),a._v("Cancelar ")],1),t(s.A,{class:(a.validoHistorial?"primary darken-1":"yellow darken-3")+" white--text",attrs:{disabled:a.loading.estado,loading:a.loading.estado,round:""},on:{click:function(t){return a.guardarHistorialStep2()}}},[a._v(" Guardar y Seguir"),t(g.A,{attrs:{right:""}},[a._v("forward")])],1)],1)],1),t(l.SL,{directives:[{name:"show",rawName:"v-show",value:3===a.step,expression:"step === 3"}]},[t(f.A,{attrs:{row:"",wrap:""}},[t(s.A,{attrs:{disabled:a.dialogVacunacion.soloLectura||a.loading.estado,round:"",color:"primary"},on:{click:function(t){return a.agregarFila()}}},[t(g.A,{attrs:{left:""}},[a._v("control_point")]),a._v("Agregar Insumo ")],1),t(b.hc),t(s.A,{staticClass:"red darken-1 white--text",attrs:{disabled:a.loading.estado,loading:a.loading.estado,round:""},on:{click:function(t){return a.close()}}},[t(g.A,{attrs:{left:""}},[a._v("cancel_presentation")]),a._v("Cancelar ")],1),t(s.A,{class:(a.validoVacunacion?"primary darken-1":"yellow darken-3")+" white--text",attrs:{disabled:a.dialogVacunacion.soloLectura||a.loading.estado,loading:a.loading.estado,round:""},on:{click:function(t){return a.guardarVacunacion()}}},[t(g.A,{attrs:{left:""}},[a._v("save")]),a._v(a._s(a.validoVacunacion?a.dialogVacunacion.vacunacion?"Guardar":"Realizar Vacunacion":"Faltan Datos")+" ")],1)],1)],1)],1)],1)},$=[],N=(e(44114),e(7588),e(78552)),z=e(35367),O=e(20007),H=e(16717),M=(e(13579),function(){var a=this,t=a._self._c;return t(f.A,{class:"grey lighten-"+(a.index%2===0?"3":"2"),attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[a._l(a.egreso.insumo?.condicionesDB??[],(function(e,i){return t(p.A,{key:`${a.egreso.insumo??null}-condicion-${e}`,attrs:{xs12:"",md6:"","px-3":""}},[t(A.W,{attrs:{readonly:"","background-color":!0===a.rulesCondiciones({dato:e,paciente:a.paciente})?"green lighten-1":"red lighten-1",value:`Condicion: ${e}`,"prepend-icon":!0===a.rulesCondiciones({dato:e,paciente:a.paciente})?"task_alt":"warning",label:`Condicion: ${e}`,color:!0===a.rulesCondiciones({dato:e,paciente:a.paciente})?"green":"red"}})],1)})),t(p.A,{class:""+("Vacuna"!==a.egreso.insumo?.insumoCategoriaDB||a.egreso.insumo?.qty_dosisDB?"md8 lg9":""),attrs:{xs12:"","px-3":""}},[t(r.A,{attrs:{clearable:"","background-color":"primary lighten-5","item-value":"_id","item-text":"insumoDB",items:a.stockDB,label:"Insumo",placeholder:""+(a.egreso.insumo?`${a.egreso.insumo.insumoDB} => Hay: ${a.egreso.insumo.cantidad??"0"} -> Procedencia: ${a.egreso.insumo.procedencia??"---"}; Lote: ${a.egreso.insumo.lote??"---"}; Vencimiento: ${a.egreso.insumo.vencimiento??"---"}.`:"Insumo: Seleccionar primero 'Origen'."),messages:""+(a.egreso.insumo?"":"Primero seleccionar el 'Origen'."),"prepend-icon":"vaccines",color:"primary",rules:[...a.rules.requerido,t=>{try{return!(t&&!a.stockDB.some((t=>t._id===a.egreso.insumo._id)))||"El Insumo ya no se encuentra disponible."}catch(e){return"Error Inesperado (component-egreso-vacuna)."}}],"validate-on-blur":"","return-object":""},scopedSlots:a._u([{key:"selection",fn:function(e){return[t(B.A,{attrs:{color:"primary darken-1","text-color":"white"}},[t(g.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[a._v("vaccines")]),a._v(" "+a._s(e.item.insumoDB)+" ")],1),t(B.A,{attrs:{color:"primary darken-1","text-color":"white"}},[t(g.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[a._v("trip_origin")]),a._v(" Procedencia: "+a._s(e.item.procedencia??"---")+" ")],1),t(B.A,{attrs:{color:"primary darken-1","text-color":"white"}},[t(g.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[a._v("group_work")]),a._v(" Lote: "+a._s(e.item.lote??"---")+" ")],1),t(B.A,{attrs:{color:""+(e.item.expirado?"red darken-1":e.item.porExpirar?"orange darken-1":"primary darken-1"),"text-color":"white"}},[t(g.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[a._v("event")]),a._v(" Vencimiento: "+a._s(e.item.vencimiento??"---")+" ")],1),t(B.A,{attrs:{color:"primary darken-1","text-color":"white"}},[t(g.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[a._v("grain")]),a._v(" Hay: "+a._s(e.item.cantidad??"0")+" ")],1)]}},{key:"item",fn:function(e){return[t("code",{staticClass:"primary darken-1 white--text v-list-active--background v-list-disabled--background"},[a._v(" "+a._s(e.item.insumoDB)+" ")]),a._v(" - "),t("code",{staticClass:"primary darken-1 white--text"},[t("span",{staticClass:"hidden-xs-only"},[a._v("Procedencia: ")]),a._v(a._s(e.item.procedencia??"---")+" ")]),a._v(" - "),t("code",{staticClass:"primary darken-1 white--text"},[t("span",{staticClass:"hidden-xs-only"},[a._v("Lote: ")]),a._v(a._s(e.item.lote??"---")+" ")]),a._v(" - "),t("code",{class:(e.item.expirado?"red darken-1":e.item.porExpirar?"orange darken-1":"primary darken-1")+" white--text"},[t("span",{staticClass:"hidden-xs-only"},[a._v("Vencimiento: ")]),a._v(a._s(e.item.vencimiento??"---")+" ")]),a._v(" - "),t("code",{staticClass:"primary darken-1 white--text"},[t("span",{staticClass:"hidden-xs-only"},[a._v("Hay: ")]),a._v(a._s(e.item.cantidad??"0")+" ")])]}}]),model:{value:a.egreso.insumo,callback:function(t){a.$set(a.egreso,"insumo",t)},expression:"egreso.insumo"}})],1),a.egreso.insumo?.insumoCategoriaDB&&"Vacuna"!==a.egreso.insumo?.insumoCategoriaDB?t(p.A,{attrs:{xs12:"",md3:"",lg2:"","px-3":""}},[t(A.W,{attrs:{clearable:"","background-color":"primary lighten-5","prepend-icon":"grain",label:"Cantidad",type:"number",onkeydown:"return event.key !== 'e' && event.key !== 'E' && event.key !== '.' && event.key !== ',' && event.key !== '+' && event.key !== '-'",color:"primary",rules:[...a.rules.requerido,...a.rules.soloNumero,a.rules.minNumber(1),a.rules.maxNumber(a.egreso.insumo?.cantidad||"Seleccione Insumo")]},model:{value:a.egreso.cantidad,callback:function(t){a.$set(a.egreso,"cantidad",t)},expression:"egreso.cantidad"}})],1):a._e(),"Vacuna"===a.egreso.insumo?.insumoCategoriaDB&&a.egreso.insumo?.qty_dosisDB?t(p.A,{attrs:{xs12:"",md4:"",lg3:"","px-3":""}},[t(V.d,{attrs:{"background-color":"primary lighten-5",items:["Dosis completa",...a.egreso.insumo.qty_dosisDB],label:"Dosis Administrada","prepend-icon":"delete_outline",color:"primary",rules:[...a.rules.requerido]},model:{value:a.egreso.qty_dosis,callback:function(t){a.$set(a.egreso,"qty_dosis",t)},expression:"egreso.qty_dosis"}})],1):a._e(),"Vacuna"===a.egreso.insumo?.insumoCategoriaDB?t(p.A,{attrs:{xs12:"",sm6:"",md4:"","px-3":""}},[t(V.d,{attrs:{"background-color":"primary lighten-5",items:a.egreso.insumo?.dosisDB??a.optionsJson.vacunas_dosis_posibles,label:"Dosis","prepend-icon":"fa-solid fa-syringe",color:"primary",rules:[...a.rules.requerido],placeholder:""+(a.egreso.insumo?"":"Dosis: Primero seleccionar la 'Vacuna'."),messages:""+(a.egreso.insumo?"":"Primero seleccionar la 'Vacuna'.")},model:{value:a.egreso.dosis,callback:function(t){a.$set(a.egreso,"dosis",t)},expression:"egreso.dosis"}})],1):a._e(),"Vacuna"===a.egreso.insumo?.insumoCategoriaDB?t(p.A,{attrs:{xs12:"",sm6:"",md3:"","px-3":""}},[t(H.A,{staticClass:"align-center justify-center",attrs:{color:"primary"},scopedSlots:a._u([{key:"label",fn:function(){return[t("span",{class:{"primary--text":a.egreso.completa}},[a._v("Completa: "+a._s(a.egreso.completa?"Si":"No"))])]},proxy:!0}],null,!1,1137948028),model:{value:a.egreso.completa,callback:function(t){a.$set(a.egreso,"completa",t)},expression:"egreso.completa"}})],1):a._e(),"Vacuna"===a.egreso.insumo?.insumoCategoriaDB?t(p.A,{attrs:{xs12:"",sm6:"",md4:"","px-3":""}},[t(V.d,{attrs:{"background-color":"primary lighten-5",items:a.optionsJson.vacunas_estrategia,label:"Estrategia","prepend-icon":"map",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},model:{value:a.egreso.estrategia,callback:function(t){a.$set(a.egreso,"estrategia",t)},expression:"egreso.estrategia"}})],1):a._e(),t(b.hc),t(y.A,{attrs:{top:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:e}){return[t(s.A,a._g({attrs:{disabled:a.loading.estado,color:"white",icon:"",small:""},on:{click:function(t){return a.borrarFila(a.index)}}},e),[t(g.A,{attrs:{color:"red lighten-2"}},[a._v("delete_forever")])],1)]}}])},[t("span",[a._v("Eliminar Aplicacion")])]),t(b.hc,{class:""+("Vacuna"===a.egreso.insumo?.insumoCategoriaDB?"hidden-xs-only":"hidden-sm-and-down")})],2)}),G=[],W={name:"component-egreso-vacuna",props:["paciente","egreso","index","stockDB","optionsJson","borrarFila","actualizar"],computed:{...(0,k.aH)(["loading","rules"]),...(0,k.aH)("vacunas",["rulesCondiciones"])},watch:{"egreso.insumo"(a){this.egreso.dosis=1===a?.dosisDB?.length?a.dosisDB[0]:"",this.egreso.qty_dosis="",this.egreso.cantidad="",this.actualizar()}}},J=W,Q=e(81656),U=(0,Q.A)(J,M,G,!1,null,null,null),Y=U.exports,X=function(){var a=this,t=a._self._c;return t(f.A,{class:"grey lighten-"+(a.index%2===0?"3":"2"),attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[a._l(a.egreso.insumo?.condiciones??[],(function(e,i){return t(p.A,{key:`${a.egreso.insumo??null}-condicion-${e}`,attrs:{xs12:"",md6:"","px-3":""}},[t(A.W,{attrs:{readonly:"","background-color":!0===a.rulesCondiciones({dato:e,paciente:a.paciente})?"green lighten-1":"red lighten-1",value:`Condicion: ${e}`,"prepend-icon":!0===a.rulesCondiciones({dato:e,paciente:a.paciente})?"task_alt":"warning",label:`Condicion: ${e}`,color:!0===a.rulesCondiciones({dato:e,paciente:a.paciente})?"green":"red"}})],1)})),t(p.A,{class:""+(a.egreso.insumo?.qty_dosis_posibles?"md8 lg5":"lg8"),attrs:{xs12:"","px-3":""}},[t(r.A,{attrs:{clearable:"","background-color":"primary lighten-5","item-value":"_id","item-text":"nombre",items:a.vacunasDB,label:"Vacuna","prepend-icon":"vaccines",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":"","return-object":""},model:{value:a.egreso.insumo,callback:function(t){a.$set(a.egreso,"insumo",t)},expression:"egreso.insumo"}})],1),a.egreso.insumo?.qty_dosis_posibles?t(p.A,{attrs:{xs12:"",sm6:"",md4:"",lg3:"","px-3":""}},[t(V.d,{attrs:{"background-color":"primary lighten-5",items:["Dosis completa",...a.egreso.insumo.qty_dosis_posibles],label:"Dosis Administrada","prepend-icon":"delete_outline",color:"primary",rules:[...a.rules.requerido]},model:{value:a.egreso.qty_dosis,callback:function(t){a.$set(a.egreso,"qty_dosis",t)},expression:"egreso.qty_dosis"}})],1):a._e(),t(p.A,{attrs:{xs12:"",sm6:"",lg2:"","px-3":""}},[t(A.W,{attrs:{clearable:"","background-color":"primary lighten-5","prepend-icon":"group_work",label:"Lote",messages:"Historial"!==a.paciente.No_Provista?"":"Dejar vacio si no hay dato.",placeholder:"Historial"!==a.paciente.No_Provista?"":"Dejar vacio si no hay dato.",type:"text",color:"primary",rules:"Historial"!==a.paciente.No_Provista?[...a.rules.requerido]:[],"validate-on-blur":""},model:{value:a.egreso.lote,callback:function(t){a.$set(a.egreso,"lote",t)},expression:"egreso.lote"}})],1),t(p.A,{attrs:{xs12:"",sm6:"",lg2:"","px-3":""}},[t("dateSelect",{attrs:{clearable:"true",color:"primary",label:"Vencimiento",icon:"event",value:a.egreso.vencimiento,messages:"Historial"!==a.paciente.No_Provista?"":"Dejar vacio si no hay dato.",placeholder:"Historial"!==a.paciente.No_Provista?"":"Dejar vacio si no hay dato.",requerido:"Historial"!==a.paciente.No_Provista},model:{value:a.egreso.vencimiento,callback:function(t){a.$set(a.egreso,"vencimiento",t)},expression:"egreso.vencimiento"}})],1),t(p.A,{attrs:{xs12:"",sm6:"",md4:"","px-3":""}},[t(V.d,{attrs:{"background-color":"primary lighten-5",items:a.egreso.insumo?.dosis_posibles??a.optionsJson.vacunas_dosis_posibles,label:"Dosis","prepend-icon":"fa-solid fa-syringe",color:"primary",rules:[...a.rules.requerido],placeholder:""+(a.egreso.insumo?"":"Dosis: Primero seleccionar la 'Vacuna'."),messages:""+(a.egreso.insumo?"":"Primero seleccionar la 'Vacuna'.")},model:{value:a.egreso.dosis,callback:function(t){a.$set(a.egreso,"dosis",t)},expression:"egreso.dosis"}})],1),t(p.A,{attrs:{xs12:"",sm6:"",md3:"","px-3":""}},[t(H.A,{staticClass:"align-center justify-center",attrs:{color:"primary"},scopedSlots:a._u([{key:"label",fn:function(){return[t("span",{class:{"primary--text":a.egreso.completa}},[a._v("Completa: "+a._s(a.egreso.completa?"Si":"No"))])]},proxy:!0}]),model:{value:a.egreso.completa,callback:function(t){a.$set(a.egreso,"completa",t)},expression:"egreso.completa"}})],1),t(p.A,{attrs:{xs12:"",sm6:"",md4:"","px-3":""}},[t(V.d,{attrs:{"background-color":"primary lighten-5",items:a.optionsJson.vacunas_estrategia,label:"Estrategia","prepend-icon":"map",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},model:{value:a.egreso.estrategia,callback:function(t){a.$set(a.egreso,"estrategia",t)},expression:"egreso.estrategia"}})],1),t(b.hc),t(y.A,{attrs:{top:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:e}){return[t(s.A,a._g({attrs:{disabled:a.loading.estado,color:"white",icon:"",small:""},on:{click:function(t){return a.borrarFila(a.index)}}},e),[t(g.A,{attrs:{color:"red lighten-2"}},[a._v("delete_forever")])],1)]}}])},[t("span",[a._v("Eliminar Aplicacion")])]),t(b.hc,{class:""+(a.egreso.insumo?.qty_dosis_posibles?"hidden-sm-and-down":"hidden-xs-only")})],2)},Z=[],aa={name:"component-historial-vacuna",props:["paciente","egreso","index","vacunasDB","optionsJson","borrarFila"],components:{dateSelect:D.A},computed:{...(0,k.aH)(["loading","rules"]),...(0,k.aH)("vacunas",["rulesCondiciones"])},watch:{"egreso.insumo"(a){this.egreso.dosis=1===a?.dosis_posibles?.length?a.dosis_posibles[0]:"",this.egreso.qty_dosis=""}}},ta=aa,ea=(0,Q.A)(ta,X,Z,!1,null,null,null),ia=ea.exports,ra={name:"dialogVacunacion",props:["closeFinish"],components:{dateSelect:D.A,selectPaciente:N.A,formHistorial:z.A,expandVacunaciones:O.A,componentEgresoVacuna:Y,componentHistorialVacuna:ia},data:()=>({step:1,expandPanel:null,validoHistorial:!0,validoVacunacion:!0,areasFiltro:[],optionsJsonVacunas:{},vacunasDB:[],stockEntregaDB:[],stockFiltrado:[],dataEdit:{},dataEditBase:{fecha:"",origen:"",vacunadorName:"",fecha_futura_cita:"",edad_valor:"",edad_unidad:"",paciente:"",pacienteNombreDocumento:"",fec_nac:"",sexo:"",oSocial:"",edad:{},profesional_cabecera:"",zona_sanitaria:"",prematuro:null,peso_nacer_menor_2500:null,peso_nacer_mayor_3800:null,antecedentes_patologicos:[],inmunodeprimida:null,fuma:null,riesgo:null,personal_salud:null,personal_esencial:null,observacion:"",embarazada_semana:"",puerpera:null,No_Provista:null,insumos:[{insumo:void 0,lote:"",vencimiento:"",dosis:"",qty_dosis:"",completa:"",estrategia:"",cantidad:""}]},historial_previo:{inmunodeprimida:"Sin Dato",fuma:"Sin Dato",riesgo:"Sin Dato",femenino:"Sin Dato"}}),computed:{...(0,k.aH)(["loading","hoy","persona","rules"]),...(0,k.aH)("vacunas",["dialogVacunacion"])},watch:{async"dialogVacunacion.state"(a){a?setTimeout((async()=>{this.optionsJsonVacunas=await this.returnOptionsJSON({key:"vacunas",opcion:"base"});let a=[...await this.buscarAreaFiltros({filtro:{vacunatorio:!0},populate:"no",select:"area"})];this.areasFiltro=this.persona.vacunas?.general?.gestion?a:await this.filtrarArrayParaSelectsDisabled({arraySelects:a,arrayEnable:this.persona.vacunas?.gestion,propCompare:"_id",onlyEnabled:!0}),this.resetForm()}),350):this.resetForm({soloBase:!0})},async"dataEdit.origen"(a){this.stockEntregaDB=a?await this.buscarStockParaSelects({area:a,insumoSelect:{dosis:!0,condiciones:!0,qty_dosis:!0}}):[],this.dataEdit.insumos=[{...this.dataEditBase.insumos[0]}],this.actualizarStockFiltrado()},async"dataEdit.No_Provista"(a){null!==a&&(this.vacunasDB=await this.buscarInsumosFiltro({filtro:{categoria:{$in:["Vacuna"]}},select:"nombre descripcion nombreC condiciones dosis_posibles qty_dosis_posibles"})),"Historial"===a?this.dataEdit.fecha="":this.dataEdit.vacunadorName="",this.dataEdit.insumos=[{...this.dataEditBase.insumos[0]}],this.actualizarStockFiltrado()},"dataEdit.edad_unidad"(a){switch(a){case"Año":this.dataEdit.edad_valor=this.dataEdit.edad?.edad_years??"";break;case"Mes":this.dataEdit.edad_valor=this.dataEdit.edad?.edad_months??"";break;case"Semana":this.dataEdit.edad_valor=this.dataEdit.edad?.edad_weeks??"";break;case"Dia":this.dataEdit.edad_valor=this.dataEdit.edad?.edad_days??"";break;case"Hora":this.dataEdit.edad_valor="";break;default:this.dataEdit.edad_valor="";break}},"dataEdit.fecha"(a){if(this.dataEdit.edad=this.getEdad({date:this.dataEdit.fec_nac,dateHasta:a,onlyYear:!1,formatString:!0}),this.dataEdit.edad_unidad)switch(this.dataEdit.edad_unidad){case"Año":this.dataEdit.edad_valor=this.dataEdit.edad?.edad_years??"";break;case"Mes":this.dataEdit.edad_valor=this.dataEdit.edad?.edad_months??"";break;case"Semana":this.dataEdit.edad_valor=this.dataEdit.edad?.edad_weeks??"";break;case"Dia":this.dataEdit.edad_valor=this.dataEdit.edad?.edad_days??"";break;case"Hora":this.dataEdit.edad_valor="";break;default:this.dataEdit.edad_valor="";break}}},beforeMount(){this.dataEditBase.fecha=this.hoy,this.dataEdit=structuredClone({...this.dataEditBase})},methods:{...(0,k.PY)(["mostrarLoading","mostrarError","mostrarMensaje","ocultarLoading"]),...(0,k.i0)(["filtrarArrayParaSelectsDisabled","returnOptionsJSON","requestAPI"]),...(0,k.i0)("main",["buscarAreaFiltros"]),...(0,k.i0)("hiclem",["buscarHistorialPacienteId","guardarHistorial"]),...(0,k.i0)("vacunas",["actualizarDialogVacunacion","buscarStockParaSelects","buscarInsumosFiltro"]),close(){this.actualizarDialogVacunacion({state:!1}),this.closeFinish?.()},async actualizarStockFiltrado(){let a=[];this.dataEdit.insumos.forEach((t=>{t.insumo?._id&&a.push(t.insumo._id)})),a.length>0?this.stockFiltrado=await this.filtrarArrayParaSelectsDisabled({arraySelects:this.stockEntregaDB,arrayDisable:a,propCompare:"_id"}):this.stockFiltrado=this.stockEntregaDB},agregarFila(){this.dataEdit.insumos.push({...this.dataEditBase.insumos[0]})},borrarFila(a){this.dataEdit.insumos.splice(a,1),this.actualizarStockFiltrado()},resetForm({soloBase:a=!1}={}){this.dataEdit=structuredClone({...this.dataEditBase}),a||this.persona.vacunas?.general?.gestion||1!==this.persona.vacunas?.gestion?.length||(this.dataEdit.origen=this.persona.vacunas.gestion[0]),this.expandPanel=null,this.validoHistorial=!0,this.validoVacunacion=!0,this.$refs.formHistorial.resetValidation(),this.$refs.formVacunacion.resetValidation(),this.step=1},async pacienteSeleccionado(a){this.dataEdit.paciente=a.id,this.dataEdit.pacienteNombreDocumento=a.nombreDocumento,this.dataEdit.oSocial=a.oSocial,this.dataEdit.sexo=a.sexo,this.dataEdit.fec_nac=a.fec_nac,this.dataEdit.edad=a.edad,this.step=2,await this.cargarHistorial({id:!0})},async cargarHistorial({id:a=!1}={}){this.dataEdit=structuredClone({...this.dataEdit,...await this.buscarHistorialPacienteId({pacienteId:this.dataEdit.paciente})}),a?this.dataEdit.id?(this.historial_previo.inmunodeprimida=this.dataEdit.inmunodeprimida?"Si":"No",this.historial_previo.fuma=this.dataEdit.fuma?"Si":"No",this.historial_previo.riesgo=this.dataEdit.riesgo?"Si":"No","Femenino"===this.dataEdit.sexo&&this.dataEdit.edad?.edad_years>10&&(this.dataEdit.puerpera?this.historial_previo.femenino="Puerpera":this.dataEdit.embarazada_semana?this.historial_previo.femenino=`Semana de Embarazo ${this.dataEdit.embarazada_semana}`:this.historial_previo.femenino="Ninguna"),this.dataEdit.embarazada_semana="",this.dataEdit.puerpera=null,this.dataEdit.edad?.edad_years>5?this.dataEdit=structuredClone({...this.dataEdit,inmunodeprimida:null,fuma:null,riesgo:null}):(null===this.dataEdit.inmunodeprimida&&(this.dataEdit.inmunodeprimida=!1),null===this.dataEdit.fuma&&(this.dataEdit.fuma=!1),null===this.dataEdit.riesgo&&(this.dataEdit.riesgo=!1))):this.historial_previo={inmunodeprimida:"Sin Dato",fuma:"Sin Dato",riesgo:"Sin Dato",femenino:"Sin Dato"}:(delete this.dataEdit.id,delete this.dataEdit._id,delete this.dataEdit.usuario_modifico,delete this.dataEdit.updatedAt,delete this.dataEdit.__v)},async guardarHistorialStep2(){await this.guardarHistorial({data:this.dataEdit,validate:this.$refs.formHistorial.validate,finish:this.cargarHistorial})&&(this.step=3)},async guardarVacunacion(){if(!this.$refs.formVacunacion.validate())return this.mostrarError({mensaje:"Revise los campos obligatorios.",titulo:"Valores Requeridos."}),!1;try{this.mostrarLoading({titulo:"Efectuando cambios..."});let a=structuredClone({...this.dataEdit});if(!a._id){let t=this.isVacio(a,!0);if(!0===t.vacio)return this.mostrarError({mensaje:"Complete por lo menos un dato.",titulo:"Valores Requeridos"}),!1;a=t.dato}let t=null;if(t=await this.requestAPI({method:"put",url:"/vacunas/aplicacion",update:a}),t?.data?.ok){let t=a._id?"Editada":"Guardada";return this.mostrarMensaje({msj:[`Vacunacion ${t} exitosamente.`],titulo:"Completado"}),this.close(),!0}return!1}catch(a){return this.mostrarError({mensaje:a,titulo:"Inesperado (guardarVacunacion)"}),!1}finally{this.ocultarLoading()}}}},oa=ra,sa=(0,Q.A)(oa,q,$,!1,null,null,null),na=sa.exports,la={name:"vacunaAplicacionBuscar",components:{bodyDataTableDinamic:E.A,componentFiltroAvanzado:w.A,dateSelect:D.A,dialogVacunacion:na},data:()=>({areasFiltro:[],dataTable:[],dataTableSelected:"Todas",dataTableSelect:["Todas","Registradas CIPRES","ERRORES CIPRES","No Envio CIPRES","Vencidas"],filtro:{desde:"",hasta:"",areas:[],insumos:[],procedencias:[]},ultimoFiltro:{},search:"",paginacion:{sortBy:"fecha",descending:!0,rowsPerPage:10,page:1},headers:[{text:"Fecha",value:"fecha",class:"text-xs-left",width:"10%",ruta:"fecha",date:!0},{text:"Origen",value:"origenDB",class:"text-xs-left",width:"15%",ruta:"origenDB"},{text:"Vacunador",value:"vacunadorDB",class:"text-xs-left",width:"15%",ruta:"vacunadorDB"},{text:"Paciente",value:"pacienteDB",class:"text-xs-left",width:"15%",ruta:"pacienteDB"},{text:"Documento",value:"pacienteDocDB",class:"text-xs-right",width:"15%",ruta:"pacienteDocDB"},{text:"Edad",value:"pacienteFecNacDB",class:"text-xs-right",width:"10%",ruta:"pacienteFecNacDB",dateCompare:{"formatAñoDia":!0},rutaCompare:"fecha"},{text:"Vacuna",value:"insumoDB",class:"text-xs-left",width:"10%",ruta:"insumoDB"},{text:"Dosis",value:"dosis",class:"text-xs-left",width:"5%",ruta:"dosis"},{text:"Administrada",value:"qty_dosis",class:"text-xs-left",width:"5%",ruta:"qty_dosis",defaultValue:"Dosis completa"},{text:"Estrategia",value:"estrategia",class:"text-xs-left",width:"10%",ruta:"estrategia"},{text:"Procedencia",value:"procedencia",class:"text-xs-left",width:"10%",ruta:"procedencia"},{text:"Lote",value:"lote",class:"text-xs-right",width:"10%",ruta:"lote"},{text:"Vencimiento",value:"vencimiento",class:"text-xs-left",width:"10%",ruta:"vencimiento",date:!0},{text:"Futura Cita",value:"fecha_futura_cita",class:"text-xs-left",width:"10%",ruta:"fecha_futura_cita",date:!0},{text:"Fecha de Carga",value:"createdAt",class:"text-xs-left",width:"10%",ruta:"createdAt",date:!0,time:!0},{text:"Acciones",value:"id",sortable:!1,width:"5%",ruta:"id",ignore:!0}]}),computed:{...(0,k.aH)(["loading","hoy","weekBefore","persona"]),headersDinamics(){return[...this.headers.filter((a=>!0!==a.ignore))]},dataTableFilter(){return"Todas"===this.dataTableSelected?this.dataTable??[]:this.dataTable?.filter((a=>!("Registradas CIPRES"!==this.dataTableSelected||!a.cipres_id)||(!("ERRORES CIPRES"!==this.dataTableSelected||!a.cipres_msg)||("No Envio CIPRES"===this.dataTableSelected&&!a.cipres_fecha||("Vencidas"===this.dataTableSelected&&a.vencimiento<a.fecha||void 0)))))}},watch:{dataTableFilter(){this.paginacion.page>Math.ceil(this.dataTableFilter?.length/this.paginacion.rowsPerPage)&&(this.paginacion.page=1)}},async created(){this.filtro.desde=this.weekBefore,this.filtro.hasta=this.hoy;let a=[...await this.buscarAreaFiltros({filtro:{vacunatorio:!0},populate:"no",select:"area"})];this.areasFiltro=a,this.persona.vacunas.general?.lectura||this.persona.vacunas.general?.gestion||this.persona.vacunas.general?.cipres?this.filtro.areas=a.map((a=>a.id)):(this.filtro.areas=[],this.persona.vacunas.lectura&&(this.filtro.areas=[...this.filtro.areas,...this.persona.vacunas.lectura]),this.persona.vacunas.gestion&&(this.filtro.areas=[...this.filtro.areas,...this.persona.vacunas.gestion]),this.persona.vacunas.cipres&&(this.filtro.areas=[...this.filtro.areas,...this.persona.vacunas.cipres]),this.filtro.areas=Array.from(new Set(this.filtro.areas))),await this.recargarDataTable(this.filtro)},methods:{...(0,k.PY)(["mostrarLoading","mostrarMensaje","mostrarError","ocultarLoading","mostrarDialogIframe"]),...(0,k.i0)(["retroceder","routerResolve","requestAPI"]),...(0,k.i0)("main",["buscarAreaFiltros"]),...(0,k.i0)("vacunas",["actualizarDialogVacunacion","getRequestFilter"]),backgroundClass(a){if(!a)return"";try{return a.cipres_id?"background-color: blue lighten-5":a.cipres_msg?"background-color: red lighten-5":a.vencimiento<a.fecha?"background-color: orange lighten-4":"background-color: green lighten-5"}catch(t){return""}},async recargarDataTable(a){if(a){let t=await this.buscarVacunacionesFiltro(a);t&&(this.dataTable=t,this.ultimoFiltro=structuredClone({...a}))}else this.dataTable=await this.buscarVacunacionesFiltro(this.ultimoFiltro)},async buscarVacunacionesFiltro(a){try{this.mostrarLoading({titulo:"Buscando Vacunaciones..."});let t=await this.getRequestFilter({payload:a});if(t.error)return;let e=null;return e=await this.requestAPI({method:"get",url:`/vacunas/aplicacion?${t.dato}&select=lite`}),e?.data?.ok?e.data.vacunaciones:[{origenDB:"error de carga, recargar pagina",id:void 0}]}catch(t){return this.mostrarError({mensaje:t,titulo:"Inesperado (buscarVacunacionesFiltro)"}),[{origenDB:"error de buscarVacunacionesFiltro, recargar pagina",id:void 0}]}finally{this.ocultarLoading()}},async reporte(a){if(this.filtro.areas.length>0){localStorage.setItem("localStorageTemp",JSON.stringify({...this.filtro,...a}));let t=await this.routerResolve({name:"VacunasAplicacionesImprimir",query:{descarga:!1}});this.mostrarDialogIframe({src:t.href,titulo_name:`Vacunaciones ${a?.detalle?" Nominales":""} ${this.filtro.desde} ~ ${this.filtro.hasta}`})}else this.mostrarError({errores:"",mensaje:"Complete por lo menos con un Vacunatorio para el reporte.",titulo:"Valores Requeridos."})},async borrarVacunacion(a){if(await this.$root.$confirm.open({titulo:"ELIMINAR",msj:["Se Recuperará el Stock utilizado.",`La Vacunacion de ${a.vacunacion.insumoDB} a ${a.vacunacion.pacienteDB}; sera Eliminada.\n¿Desea continuar?`]}))try{this.mostrarLoading({titulo:"Borrando Vacunacion..."});let t=null;return t=await this.requestAPI({method:"delete",url:`/vacunas/aplicacion/${a.vacunacion._id}`}),!!t?.data?.ok&&(this.mostrarMensaje({msj:["Borrado exitosamente."],titulo:"Borrado Exitoso"}),this.recargarDataTable(),!0)}catch(t){return this.mostrarError({mensaje:t,titulo:"Inesperado (borrarVacunacion)"}),!1}finally{this.ocultarLoading()}},async cipresVacunacion(a){if(a.vacunacion.cipres_id)return this.mostrarMensaje({msj:[`Aplicacion Registrada en CIPRES.\nFecha: ${this.mostrarFecha(a.vacunacion.cipres_fecha,!0)}\nID: ${a.vacunacion.cipres_id}.`],titulo:"C.I.PRE.S."}),!0;if(this.persona.vacunas.general?.gestion||this.persona.vacunas.general?.cipres||this.persona._id===a.vacunacion.usuario_creador||this.persona.vacunas.cipres?.includes(a.vacunacion.origen)){if(await this.$root.$confirm.open({titulo:"C.I.PRE.S.",msj:a.vacunacion.cipres_msg?[`La aplicacion se intento enviar al C.I.PRE.S. el ${this.mostrarFecha(a.vacunacion.cipres_fecha,!0)} pero surgio el siguiente error:\n ${a.vacunacion.cipres_msg}`,"\nUna vez registrada en C.I.PRE.S. no se podra modificar la aplicacion.\n¿Desea re-enviar la aplicacion?"]:[`Se Registrara en C.I.PRE.S. la Vacunacion de ${a.vacunacion.insumoDB} a ${a.vacunacion.pacienteDB};\nUna vez registrada en C.I.PRE.S. no se podra modificar la aplicacion.\n¿Desea continuar?`]}))try{this.mostrarLoading({titulo:"Registrando Vacunacion..."});let t=null;return t=await this.requestAPI({method:"put",url:"/vacunas/cipres/registrar",update:{vacunacion:a.vacunacion._id}}),!!t?.data?.ok&&(this.mostrarMensaje({msj:[`${t?.data.message}`],titulo:"C.I.PRE.S."}),!0)}catch(t){return this.mostrarError({mensaje:t,titulo:"Inesperado (cipresVacunacion)"}),!1}finally{this.ocultarLoading(),this.recargarDataTable()}}else if(a.vacunacion.cipres_msg)return this.mostrarMensaje({msj:[`La aplicacion se intento enviar al C.I.PRE.S. el ${this.mostrarFecha(a.vacunacion.cipres_fecha,!0)} pero surgio el siguiente error:\n ${a.vacunacion.cipres_msg}`],titulo:"C.I.PRE.S.",color:"orange",titulo_icon:"warning_amber"}),!1}}},ca=la,da=(0,Q.A)(ca,x,_,!1,null,null,null),ua=da.exports},66202:function(a,t,e){e.r(t),e.d(t,{default:function(){return $}});var i=e(21999),r=e(28383),o=e(3150),s=e(1899),n=e(37471),l=e(48122),c=e(81851),d=e(34172),u=e(41614),m=e(21527),p=e(69155),g=e(17912),h=e(55731),f=e(57e3),v=e(17087),b=function(){var a=this,t=a._self._c;return t(l.A,{attrs:{fluid:"","grid-list-xs":""}},[t(p.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"","text-xs-center":""}},[t(u.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[t(o.A,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[t(s.OQ,{staticClass:"px-0 text-uppercase"},[a._v("====== Gestion de Vacunas ======")])],1)],1)],1),t(p.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[t(u.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[t(p.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",cuarto:"","darken-1":""}},[t(u.A,{attrs:{"px-3":""}},[t(m.A,{attrs:{medium:"",color:"white",left:""}},[a._v("vaccines")]),t("span",{staticClass:"title white--text"},[a._v("Vacunas / Egresos")])],1),t(h.hc),t(r.A,{attrs:{fab:"",small:"",color:"primary darken-2"},on:{click:function(t){return a.retroceder()}}},[t(m.A,[a._v("far fa-arrow-alt-circle-left")])],1)],1),t(o.A,{staticClass:"elevation-6",attrs:{color:"grey lighten-2"}},[t(s.OQ,{staticClass:"px-0"},[t(p.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"","text-xs-center":""}},[t(u.A,{attrs:{xs12:"","px-3":""}},[t(o.A,{staticClass:"grey lighten-3"},[t(p.A,{attrs:{"justify-center":"",row:"",wrap:""},on:{keypress:function(t){return!t.type.indexOf("key")&&a._k(t.keyCode,"enter",13,t.key,"Enter")?null:a.recargarDataTable(a.filtro)}}},[t(u.A,{attrs:{xs12:"",sm6:"",md3:"","px-3":""}},[t("dateSelect",{attrs:{value:a.filtro.desde,"background-color":"cuarto lighten-5",color:"cuarto",label:"Desde",icon:"today",max:a.filtro.hasta,requerido:"true"},model:{value:a.filtro.desde,callback:function(t){a.$set(a.filtro,"desde",t)},expression:"filtro.desde"}})],1),t(u.A,{attrs:{xs12:"",sm6:"",md3:"","px-3":""}},[t("dateSelect",{attrs:{value:a.filtro.hasta,"background-color":"cuarto lighten-5",color:"cuarto",label:"Hasta",icon:"event",min:a.filtro.desde,requerido:"true"},model:{value:a.filtro.hasta,callback:function(t){a.$set(a.filtro,"hasta",t)},expression:"filtro.hasta"}})],1),t(u.A,{attrs:{xs12:"",md10:"","px-3":"","mb-3":""}},[t("componentFiltroAvanzado",{attrs:{filtro:a.filtro,areasFiltro:a.areasFiltro,insumos:{select:"nombre descripcion nombreC"},procedencia:!0}})],1)],1),t(p.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[t(r.A,{staticClass:"white--text mb-2",attrs:{round:"",color:"cuarto darken-2",disabled:a.loading.estado,loading:a.loading.estado},on:{click:function(t){return a.recargarDataTable(a.filtro)}}},[t(m.A,{attrs:{medium:"",left:""}},[a._v("search")]),a._v(" Buscar Egresos")],1),t(d.A,{staticClass:"hidden-xs-only mx-4 my-1 black",attrs:{vertical:""}}),t(r.A,{staticClass:"white--text mb-2",attrs:{round:"",color:"cuarto darken-2",disabled:a.loading.estado,loading:a.loading.estado},on:{click:function(t){return a.reporte()}}},[t(m.A,{attrs:{medium:"",left:""}},[a._v("fa-solid fa-file-pdf")]),a._v(" Egresos PDF")],1)],1)],1)],1)],1)],1)],1)],1),t(u.A,{attrs:{"pa-1":"","ma-1":"",xs12:"",cuarto:"","lighten-1":""}},[t(o.A,{staticClass:"elevation-6"},[t(p.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",primary:""}},[t(u.A,{attrs:{"px-3":""}},[t(m.A,{attrs:{medium:"",color:"white",left:""}},[a._v("output")]),t("span",{staticClass:"title white--text"},[a._v("Egresos de Vacunas")])],1),t(h.hc)],1),t(n.A,[t(u.A,{attrs:{xs12:"",sm4:"","px-2":""}},[t(f.W,{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":"",clearable:""},model:{value:a.search,callback:function(t){a.search=t},expression:"search"}})],1),t(h.hc),t(d.A,{staticClass:"hidden-xs-only mx-2 primary",attrs:{inset:"",vertical:""}}),t(r.A,{staticClass:"mb-2",attrs:{round:"",color:"primary",disabled:!(a.persona.vacunas.gestion?.length>0||a.persona.vacunas.general?.gestion)||a.loading.estado,loading:a.loading.estado},on:{click:function(t){return a.actualizarDialogDescarte({state:!0})}}},[t(m.A,{attrs:{medium:"",left:""}},[a._v("output")]),a._v(" Nuevo Egreso")],1)],1),t(c.A,{staticClass:"elevation-6",staticStyle:{"table-layout":"fixed"},attrs:{headers:a.headers,items:a.dataTable,"item-key":"_id",pagination:a.paginacion,"rows-per-page-items":[5,10,25,50],loading:a.loading.estado,search:a.search},on:{"update:pagination":function(t){a.paginacion=t}},scopedSlots:a._u([{key:"no-results",fn:function(){return[t(i.A,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[a._v(' No se encontraron resultados para "'+a._s(a.search)+'". ')])]},proxy:!0},{key:"no-data",fn:function(){return[t(i.A,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[a._v(" No hay datos para mostrar. ")])]},proxy:!0},{key:"items",fn:function(e){return[t("tr",{class:a.backgroundClass(e.item)},[a._l(a.headersDinamics,(function(a){return t("td",{key:a.text,class:a.class},[t("bodyDataTableDinamic",{attrs:{props:e,field:a}})],1)})),t("td",{staticClass:"text-sm-left"},[t("div",{staticClass:"text-xs-center"},[t(v.A,{attrs:{top:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:i}){return[t(r.A,a._g({attrs:{disabled:!(a.todayInit<=e.item.retirado&&e.item.retirado<=a.todayFinish)||!(a.persona.vacunas.general?.gestion||a.persona.vacunas.gestion?.includes(e.item.origen))||a.loading.estado,color:"white",small:"",icon:""},on:{click:function(t){return a.borrarDescarte({descarte:e.item})}}},i),[t(m.A,{attrs:{color:"red"}},[a._v("delete")])],1)]}}],null,!0)},[t("span",[a._v("Borrar Descarte")])])],1)])],2)]}}])},[t(g.A,{attrs:{color:"blue",indeterminate:""}})],1)],1)],1),t(u.A,{attrs:{"pa-1":"","ma-1":"",red:"","darken-2":"",xs12:""}},[t(o.A,[t(s.OQ,{staticClass:"px-3 font-weight-medium"},[t("p",[t(m.A,{attrs:{color:"yellow darken-3",left:""}},[a._v(" warning ")]),t("b",[t("u",[a._v("Referencia de Colores:")])])],1),t("ul",[t("li",{staticClass:"green--text",attrs:{type:"square"}},[t("b",[t("u",[a._v("Verde:")])]),a._v(" Egresos con motivo de "),t("b",[t("u",[a._v("Utilizado")])]),a._v(". ")]),t("li",{staticClass:"orange--text",attrs:{type:"square"}},[t("b",[t("u",[a._v("Anaranjado:")])]),a._v(" Egresos con motivo de "),t("b",[t("u",[a._v("Vencimiento")])]),a._v(". ")]),t("li",{staticClass:"text-yellow-shadow",attrs:{type:"square"}},[t("b",[t("u",[a._v("Amarillo:")])]),a._v(" Egresos con motivo de "),t("b",[t("u",[a._v("Otros")])]),a._v(" que no sean por Vencimiento. ")])])])],1)],1)],1),t("dialogDescarte",{attrs:{closeFinish:a.recargarDataTable}})],1)},A=[],y=(e(18111),e(22489),e(17642),e(58004),e(33853),e(45876),e(32475),e(15024),e(31698),e(95353)),x=e(81255),_=e(42681),k=e(28597),E=e(79305),w=e(21939),D=e(70134),B=e(45621),S=function(){var a=this,t=a._self._c;return t(E.A,{attrs:{"max-width":"80%",persistent:"",scrollable:""},model:{value:a.dialogDescarte.state,callback:function(t){a.$set(a.dialogDescarte,"state",t)},expression:"dialogDescarte.state"}},[t(o.A,[t(D.A,{attrs:{color:"grey lighten-2",height:"auto",window:""}},[t(m.A,{attrs:{medium:"",color:"black darken-2"}},[a._v("output")]),t("span",{staticClass:"display-1 font-weight-bold text-capitalize black--text text--darken-2"},[a._v(a._s(a.dialogDescarte.descarte?"Vacuna Descartada":"Nuevo Egreso"))]),t(h.hc),t(m.A,{attrs:{large:"",disabled:a.loading.estado,color:"error darken-1"},on:{click:a.close}},[a._v("cancel_presentation")])],1),t(s.OQ,[t(w.A,{ref:"form",attrs:{"lazy-validation":""},model:{value:a.valido,callback:function(t){a.valido=t},expression:"valido"}},[t(p.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t(u.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t("dateSelect",{attrs:{soloLectura:a.dialogDescarte.soloLectura,clearable:!a.dialogDescarte.soloLectura,color:"primary",label:"Fecha",icon:"event",value:a.dataEdit.fecha,max:a.hoy,requerido:"true"},model:{value:a.dataEdit.fecha,callback:function(t){a.$set(a.dataEdit,"fecha",t)},expression:"dataEdit.fecha"}})],1),t(u.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(k.A,{attrs:{readonly:a.dialogDescarte.soloLectura,clearable:!a.dialogDescarte.soloLectura,"background-color":a.dialogDescarte.soloLectura?"primary lighten-1":"primary lighten-5","item-value":"id","item-text":"area",items:a.areasFiltro,label:"Origen","prepend-icon":"fa-house-medical-flag",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},model:{value:a.dataEdit.origen,callback:function(t){a.$set(a.dataEdit,"origen",t)},expression:"dataEdit.origen"}})],1),t(u.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(k.A,{attrs:{readonly:a.dialogDescarte.soloLectura,clearable:!a.dialogDescarte.soloLectura,"background-color":a.dialogDescarte.soloLectura?"primary lighten-1":"primary lighten-5",items:a.descarteMotivos,label:"Motivo","prepend-icon":"description",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},model:{value:a.dataEdit.motivo,callback:function(t){a.$set(a.dataEdit,"motivo",t)},expression:"dataEdit.motivo"}})],1),"Error"===a.dataEdit.motivo?t(u.A,{attrs:{xs12:"","mx-2":""}},[t(B.A,{attrs:{readonly:a.dialogDescarte.soloLectura,clearable:!a.dialogDescarte.soloLectura,"background-color":a.dialogDescarte.soloLectura?"primary lighten-1":"primary lighten-5",label:"Justificacion",color:"primary","prepend-icon":"speaker_notes","auto-grow":"",rows:"2",rules:[...a.rules.requerido],"validate-on-blur":""},model:{value:a.dataEdit.justificacion,callback:function(t){a.$set(a.dataEdit,"justificacion",t)},expression:"dataEdit.justificacion"}})],1):a._e(),t(u.A,{attrs:{xs12:"","px-3":"",primary:"","darken-3":""}},[t(p.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t("h4",{staticClass:"title float: left white--text"},[a._v("Insumos a Egresar")]),t(h.hc),t(v.A,{attrs:{top:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:e}){return[t(r.A,a._g({attrs:{disabled:a.loading.estado||a.dialogDescarte.soloLectura,flat:"",icon:"",color:"white",small:"",right:""},on:{click:function(t){return a.agregarFila()}}},e),[t(m.A,{attrs:{large:""}},[a._v("control_point")])],1)]}}])},[t("span",[a._v("Agregar Insumo")])])],1)],1),a._l(a.dataEdit.insumos,(function(e,i){return t(u.A,{key:`insumos-${i}`,attrs:{xs12:""}},[t("componentEgresoInsumo",{attrs:{egreso:e,index:i,stockDB:a.stockFiltrado,borrarFila:a.borrarFila,actualizar:a.actualizarStockFiltrado,soloLectura:!1,motivo:a.dataEdit.motivo}})],1)})),0===a.dataEdit.insumos?.length?t(p.A,{attrs:{row:"",wrap:""}},[t(u.A,{attrs:{xs12:"","mx-3":"","pb-0":""}},[t(f.W,{attrs:{readonly:"","background-color":"orange lighten-4",label:"No Hay Insumos, Debe haber por lo menos uno.","prepend-icon":"warning",color:"orange",solo:"",rules:[...a.rules.requerido]}})],1),t(h.hc),t(r.A,{staticClass:"my-0",attrs:{disabled:a.loading.estado||a.dialogDescarte.soloLectura,round:"",color:"primary"},on:{click:function(t){return a.agregarFila()}}},[t(m.A,{attrs:{left:""}},[a._v("control_point")]),a._v("Insumo a Egresar ")],1),t(h.hc)],1):a._e(),a.dialogDescarte.soloLectura?t(u.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(f.W,{attrs:{readonly:"","background-color":"primary lighten-1","prepend-icon":"local_shipping",label:"Fecha de Retirado",placeholder:"Sin Salir",type:"text",color:"primary"},model:{value:a.dataEdit.retirado,callback:function(t){a.$set(a.dataEdit,"retirado",t)},expression:"dataEdit.retirado"}})],1):a._e()],2)],1)],1),t(s.SL,[t(p.A,{attrs:{row:"",wrap:""}},[t(r.A,{attrs:{disabled:a.loading.estado||a.dialogDescarte.soloLectura,round:"",color:"primary"},on:{click:function(t){return a.agregarFila()}}},[t(m.A,{attrs:{left:""}},[a._v("control_point")]),a._v("Insumo a Egresar ")],1),t(h.hc),t(r.A,{staticClass:"red darken-1 white--text",attrs:{disabled:a.loading.estado,round:"",loading:a.loading.estado},on:{click:function(t){return a.close()}}},[t(m.A,{attrs:{left:""}},[a._v("cancel_presentation")]),a._v("Cancelar ")],1),t(r.A,{staticClass:"primary darken-1 white--text",attrs:{disabled:a.loading.estado||a.dialogDescarte.soloLectura,loading:a.loading.estado,round:""},on:{click:function(t){return a.guardarDescarte()}}},[t(m.A,{attrs:{left:""}},[a._v("save")]),a._v(a._s(a.valido?a.dialogDescarte.descarte?"Guardar":"Realizar Egreso":"Formulario No valido")+" ")],1)],1)],1)],1)],1)},C=[],F=(e(44114),e(7588),e(17800)),I={name:"dialogDescarte",props:["closeFinish"],components:{dateSelect:x.A,componentEgresoInsumo:F.A},data:()=>({valido:!0,areasFiltro:[],stockEntregaDB:[],stockFiltrado:[],dataEdit:{},dataEditBase:{fecha:"",origen:"",motivo:"",justificacion:"",insumos:[{insumo:void 0,cantidad:null}],retirado:""},descarteMotivos:["Utilizado","Vencimiento","Rotura","Rotura cadena de Frio","Mal estado","Robo","Hurto","Devolucion","Error"]}),computed:{...(0,y.aH)(["loading","hoy","persona","rules"]),...(0,y.aH)("vacunas",["dialogDescarte"])},watch:{async"dialogDescarte.state"(a){a?setTimeout((async()=>{let a=[...await this.buscarAreaFiltros({filtro:{vacunatorio:!0},populate:"no",select:"area"})];this.areasFiltro=this.persona.vacunas.general?.gestion?a:await this.filtrarArrayParaSelectsDisabled({arraySelects:a,arrayEnable:this.persona.vacunas.gestion,propCompare:"_id",onlyEnabled:!0}),this.dataEdit=this._cloneDeep(this.dataEditBase),this.persona.vacunas.general?.gestion||1!==this.persona.vacunas.gestion?.length||(this.dataEdit.origen=this.persona.vacunas.gestion[0]),this.$refs.form.resetValidation()}),350):(this.dataEdit=this._cloneDeep(this.dataEditBase),this.$refs.form.resetValidation())},async"dataEdit.origen"(a){this.stockEntregaDB=a?await this.buscarStockParaSelects({area:a}):[],this.dataEdit.insumos=[{...this.dataEditBase.insumos[0]}],this.actualizarStockFiltrado()},"dataEdit.motivo"(a){"Error"!==a&&(this.dataEdit.justificacion="")}},beforeMount(){this.dataEditBase.fecha=this.hoy,this.dataEdit=this._cloneDeep(this.dataEditBase)},methods:{...(0,y.PY)(["mostrarLoading","mostrarError","mostrarMensaje","ocultarLoading"]),...(0,y.i0)(["filtrarArrayParaSelectsDisabled","requestAPI"]),...(0,y.i0)("main",["buscarAreaFiltros"]),...(0,y.i0)("vacunas",["actualizarDialogDescarte","buscarStockParaSelects"]),close(){this.actualizarDialogDescarte({state:!1}),this.closeFinish?.()},async actualizarStockFiltrado(){let a=[];this.dataEdit.insumos.forEach((t=>{t.insumo?._id&&a.push(t.insumo._id)})),a.length>0?this.stockFiltrado=await this.filtrarArrayParaSelectsDisabled({arraySelects:this.stockEntregaDB,arrayDisable:a,propCompare:"_id"}):this.stockFiltrado=this.stockEntregaDB},agregarFila(){this.dataEdit.insumos.push({...this.dataEditBase.insumos[0]})},borrarFila(a){this.dataEdit.insumos.splice(a,1),this.actualizarStockFiltrado()},async guardarDescarte(){if(!this.$refs.form.validate())return this.mostrarError({mensaje:"Revise la validacion de los datos (mensajes en rojo).",titulo:"Validacion de Datos."}),!1;try{this.mostrarLoading({titulo:"Efectuando cambios..."});let a=this._cloneDeep(this.dataEdit);if(!a._id){let t=this.isVacio(a,!0);if(!0===t.vacio)return this.mostrarError({mensaje:"Complete por lo menos un dato.",titulo:"Valores Requeridos"}),!1;a=t.dato}let t=null;if(t=await this.requestAPI({method:"put",url:"/vacunas/descarte",update:a}),t?.data?.ok){let t=a._id?"Editado":"Guardado";return this.mostrarMensaje({msj:[`Descarte ${t} exitosamente.`],titulo:"Completado"}),this.close(),!0}return this.close(),!1}catch(a){return this.mostrarError({mensaje:a,titulo:"Inesperado (guardarDescarte)"}),!1}finally{this.ocultarLoading()}}}},T=I,V=e(81656),P=(0,V.A)(T,S,C,!1,null,null,null),K=P.exports,L=e(62373),R={name:"vacunaDescarteBuscar",components:{dateSelect:x.A,bodyDataTableDinamic:_.A,dialogDescarte:K,componentFiltroAvanzado:L.A},data:()=>({areasFiltro:[],dataTable:[],filtro:{desde:"",hasta:"",areas:[],insumos:[],procedencias:[]},ultimoFiltro:{},search:"",paginacion:{sortBy:"fecha",descending:!0,rowsPerPage:10,page:1},headers:[{text:"Fecha",value:"fecha",align:"left",class:"text-xs-left",width:"10%",ruta:"fecha",date:!0},{text:"Origen",value:"origenDB",align:"left",class:"text-xs-left",width:"15%",ruta:"origenDB"},{text:"Insumo",value:"insumoDB",align:"left",class:"text-xs-left",width:"10%",ruta:"insumoDB"},{text:"Cantidad",value:"cantidad",align:"left",class:"text-xs-right",width:"10%",ruta:"cantidad"},{text:"Motivo",value:"motivo",align:"left",class:"text-xs-left",ruta:"motivo"},{text:"Justificacion",value:"justificacion",align:"left",class:"text-xs-left",ruta:"justificacion"},{text:"Procedencia",value:"procedencia",align:"left",class:"text-xs-left",width:"10%",ruta:"procedencia"},{text:"Lote",value:"lote",align:"left",class:"text-xs-right",width:"10%",ruta:"lote"},{text:"Vencimiento",value:"vencimiento",align:"left",class:"text-xs-left",width:"10%",ruta:"vencimiento",date:!0},{text:"Fecha de Carga",value:"retirado",align:"left",class:"text-xs-left",width:"10%",ruta:"retirado",date:!0,time:!0},{text:"Acciones",value:"id",align:"center",sortable:!1,width:"5%",ruta:"id",ignore:!0}]}),computed:{...(0,y.aH)(["loading","todayInit","todayFinish","hoy","monthBefore","persona"]),headersDinamics(){return[...this.headers.filter((a=>!0!==a.ignore))]}},async created(){this.filtro.desde=this.monthBefore,this.filtro.hasta=this.hoy;let a=[...await this.buscarAreaFiltros({filtro:{vacunatorio:!0},populate:"no",select:"area"})];this.persona.vacunas.general?.lectura||this.persona.vacunas.general?.gestion?(this.areasFiltro=a,this.filtro.areas=a.map((a=>a.id))):(this.filtro.areas=[],this.persona.vacunas.lectura&&(this.filtro.areas=[...this.filtro.areas,...this.persona.vacunas.lectura]),this.persona.vacunas.gestion&&(this.filtro.areas=[...this.filtro.areas,...this.persona.vacunas.gestion]),this.filtro.areas=Array.from(new Set(this.filtro.areas)),this.areasFiltro=await this.filtrarArrayParaSelectsDisabled({arraySelects:a,arrayEnable:this.filtro.areas,propCompare:"_id",onlyEnabled:!0})),await this.recargarDataTable(this.filtro)},methods:{...(0,y.PY)(["mostrarLoading","mostrarMensaje","mostrarError","ocultarLoading","mostrarDialogIframe"]),...(0,y.i0)(["retroceder","routerResolve","filtrarArrayParaSelectsDisabled","requestAPI"]),...(0,y.i0)("main",["buscarAreaFiltros"]),...(0,y.i0)("vacunas",["actualizarDialogDescarte","getRequestFilter"]),backgroundClass(a){if(!a)return"";try{return"Utilizado"===a.motivo?"background-color: green lighten-5":"Vencimiento"===a.motivo?"background-color: orange lighten-4":"background-color: yellow lighten-4"}catch(t){return""}},async recargarDataTable(a){if(a){let t=await this.buscarDescartesFiltro(a);t&&(this.dataTable=t,this.ultimoFiltro=this._cloneDeep(a))}else this.dataTable=await this.buscarDescartesFiltro(this.ultimoFiltro);this.paginacion.page>Math.ceil(this.dataTable?.length/this.paginacion.rowsPerPage)&&(this.paginacion.page=1)},async buscarDescartesFiltro(a){try{this.mostrarLoading({titulo:"Buscando Descartes..."});let t=await this.getRequestFilter({payload:a});if(t.error)return;let e=null;return e=await this.requestAPI({method:"get",url:`/vacunas/descarte?${t.dato}`}),e?.data?.ok?e.data.descartes:[{origenDB:"error de carga, recargar pagina",id:void 0}]}catch(t){return this.mostrarError({mensaje:t,titulo:"Inesperado (buscarDescartesFiltro)"}),[{origenDB:"error de carga(buscarDescartesFiltro), recargar pagina",id:void 0}]}finally{this.ocultarLoading()}},async reporte(){if(this.filtro.areas.length>0){localStorage.setItem("localStorageTemp",JSON.stringify(this.filtro));let a=await this.routerResolve({name:"VacunaDescarteImprimir",query:{descarga:!1}});this.mostrarDialogIframe({src:a.href,titulo_name:`Vacunatorio Egresos ${this.filtro.desde} ~ ${this.filtro.hasta}`})}else this.mostrarError({errores:"",mensaje:"Complete por lo menos con un Vacunatorio para el reporte.",titulo:"Valores Requeridos."})},async borrarDescarte(a){if(await this.$root.$confirm.open({titulo:"ELIMINAR",msj:["Se Recuperará el Stock descartado.",`El Descarte de ${a.descarte.insumoDB} (${a.descarte.cantidad}) con motivo ${a.descarte.motivo}, sera Eliminado.\n¿Desea continuar??`]}))try{this.mostrarLoading({titulo:"Borrando Descarte..."});let t=null;return t=await this.requestAPI({method:"delete",url:`/vacunas/descarte/${a.descarte._id}`}),!!t?.data?.ok&&(this.mostrarMensaje({msj:["Borrado exitosamente."],titulo:"Borrado Exitoso"}),this.recargarDataTable(),!0)}catch(t){return this.mostrarError({mensaje:t,titulo:"Inesperado (borrarDescarte)"}),!1}finally{this.ocultarLoading()}}}},j=R,q=(0,V.A)(j,b,A,!1,null,null,null),$=q.exports},79358:function(a,t,e){e.r(t),e.d(t,{default:function(){return N}});var i=e(21999),r=e(28597),o=e(28383),s=e(3150),n=e(1899),l=e(37471),c=e(48122),d=e(81851),u=e(34172),m=e(41614),p=e(21527),g=e(69155),h=e(17912),f=e(55731),v=e(57e3),b=e(17087),A=function(){var a=this,t=a._self._c;return t(c.A,{attrs:{fluid:"","grid-list-xs":""}},[t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"","text-xs-center":""}},[t(m.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[t(s.A,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[t(n.OQ,{staticClass:"px-0 text-uppercase"},[a._v("====== Gestion de Vacunas ======")])],1)],1)],1),t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[t(m.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",cuarto:"","darken-1":""}},[t(m.A,{attrs:{"px-3":""}},[t(p.A,{attrs:{medium:"",color:"white",left:""}},[a._v("vaccines")]),t("span",{staticClass:"title white--text"},[a._v("Vacunas / Ingresos")])],1),t(f.hc),t(o.A,{attrs:{fab:"",small:"",color:"primary darken-2"},on:{click:function(t){return a.retroceder()}}},[t(p.A,[a._v("far fa-arrow-alt-circle-left")])],1)],1),t(s.A,{staticClass:"elevation-6",attrs:{color:"grey lighten-2"}},[t(n.OQ,{staticClass:"px-0"},[t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"","text-xs-center":""}},[t(m.A,{attrs:{xs12:"","px-3":""}},[t(s.A,{staticClass:"grey lighten-3"},[t(g.A,{attrs:{"justify-center":"",row:"",wrap:""},on:{keypress:function(t){return!t.type.indexOf("key")&&a._k(t.keyCode,"enter",13,t.key,"Enter")?null:a.recargarDataTable(a.filtro)}}},[t(m.A,{attrs:{xs12:"",sm6:"",md3:"","px-3":""}},[t("dateSelect",{attrs:{value:a.filtro.desde,"background-color":"cuarto lighten-5",color:"cuarto",label:"Desde",icon:"today",max:a.filtro.hasta,requerido:"true"},model:{value:a.filtro.desde,callback:function(t){a.$set(a.filtro,"desde",t)},expression:"filtro.desde"}})],1),t(m.A,{attrs:{xs12:"",sm6:"",md3:"","px-3":""}},[t("dateSelect",{attrs:{value:a.filtro.hasta,"background-color":"cuarto lighten-5",color:"cuarto",label:"Hasta",icon:"event",min:a.filtro.desde,requerido:"true"},model:{value:a.filtro.hasta,callback:function(t){a.$set(a.filtro,"hasta",t)},expression:"filtro.hasta"}})],1),t(m.A,{attrs:{xs12:"",md10:"","px-3":"","mb-3":""}},[t("componentFiltroAvanzado",{attrs:{filtro:a.filtro,areasFiltro:a.areasFiltro,insumos:{select:"nombre descripcion nombreC"},procedencia:!0}})],1)],1),t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[t(o.A,{staticClass:"white--text mb-2",attrs:{round:"",color:"cuarto darken-2",disabled:a.loading.estado,loading:a.loading.estado},on:{click:function(t){return a.recargarDataTable(a.filtro)}}},[t(p.A,{attrs:{medium:"",left:""}},[a._v("search")]),a._v(" Buscar Ingresos")],1),t(u.A,{staticClass:"hidden-xs-only mx-4 my-1 black",attrs:{vertical:""}}),t(o.A,{staticClass:"white--text mb-2",attrs:{round:"",color:"cuarto darken-2",disabled:a.loading.estado,loading:a.loading.estado},on:{click:function(t){return a.reporte()}}},[t(p.A,{attrs:{medium:"",left:""}},[a._v("fa-solid fa-file-pdf")]),a._v(" Vacunas Ingresadas PDF")],1)],1)],1)],1)],1)],1)],1)],1),t(m.A,{attrs:{"pa-1":"","ma-1":"",xs12:"",cuarto:"","lighten-1":""}},[t(s.A,{staticClass:"elevation-6"},[t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",primary:""}},[t(m.A,{attrs:{"px-3":""}},[t(p.A,{attrs:{medium:"",color:"white",left:""}},[a._v("list_alt")]),t("span",{staticClass:"title white--text"},[a._v("Ingresos de Vacunas")])],1)],1),t(l.A,[t(m.A,{attrs:{xs12:"",sm4:"","px-2":""}},[t(v.W,{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":"",clearable:""},model:{value:a.search,callback:function(t){a.search=t},expression:"search"}})],1),t(f.hc),t(m.A,{attrs:{xs12:"",sm6:"",md4:"","px-2":""}},[t(r.A,{attrs:{items:a.dataTableSelect,label:"Mostrar","prepend-icon":"list_alt",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:a.dataTableSelected,callback:function(t){a.dataTableSelected=t},expression:"dataTableSelected"}})],1),t(u.A,{staticClass:"hidden-xs-only mx-2 primary",attrs:{inset:"",vertical:""}}),t(o.A,{staticClass:"mb-2",attrs:{round:"",color:"primary",disabled:a.noGeneralNoGestion||a.loading.estado,loading:a.loading.estado},on:{click:function(t){return a.actualizarDialogIngresoTransferencia({state:!0,type:{ingreso:!0}})}}},[t(p.A,{attrs:{medium:"",left:""}},[a._v("input")]),a._v(" Nuevo Ingreso")],1)],1),t(d.A,{staticClass:"elevation-6",staticStyle:{"table-layout":"fixed"},attrs:{headers:a.headers,items:a.dataTableFilter,"item-key":"_id",pagination:a.paginacion,"rows-per-page-items":[5,10,25,50],loading:a.loading.estado,search:a.search,"custom-filter":a.customFilter},on:{"update:pagination":function(t){a.paginacion=t}},scopedSlots:a._u([{key:"no-results",fn:function(){return[t(i.A,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[a._v(' No se encontraron resultados para "'+a._s(a.search)+'". ')])]},proxy:!0},{key:"no-data",fn:function(){return[t(i.A,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[a._v(" No hay datos para mostrar. ")])]},proxy:!0},{key:"items",fn:function(e){return[t("tr",{class:a.backgroundClass(e.item)},[t("td",{staticClass:"text-sm-left"},[t("div",{staticClass:"text-xs-center",staticStyle:{width:"90px"}},[t(b.A,{attrs:{top:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:i}){return[t(o.A,a._g({attrs:{disabled:a.noGeneralNoGestion||e.item.recibido||e.item.remito&&!e.item.retirado||a.noGeneralSiGestion&&!a.persona.vacunas.gestion?.includes(e.item.destino)||a.loading.estado,color:"white",small:"",icon:""},on:{click:function(t){return a.recibirIngreso({ingreso:{id:e.item._id,remito_compra:e.item.remito_compra,remito:e.item.remito},finish:a.recargarDataTable,confirm:a.$root.$confirm})}}},i),[t(p.A,{attrs:{color:e.item.recibido?"green":"red"}},[a._v(a._s(e.item.recibido?"task_alt":"radio_button_unchecked"))])],1)]}}],null,!0)},[t("span",[a._v("Recibir")])]),t(b.A,{attrs:{right:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:i}){return[t(o.A,a._g({attrs:{disabled:a.loading.estado,color:"white",small:"",icon:""},on:{click:function(t){return a.actualizarDialogIngresoTransferencia({state:!0,type:{ingreso:!!e.item.remito_compra,transferencia:!!e.item.remito},ingreso:{remito_compra:e.item.remito_compra?e.item:null,remito:e.item.remito?e.item:null}})}}},i),[t(p.A,{attrs:{color:"primary"}},[a._v("visibility")])],1)]}}],null,!0)},[t("span",[a._v(a._s(e.item.remito?"Ver Transferencia":"Ver Ingreso"))])])],1)]),a._l(a.headersDinamics,(function(a){return t("td",{key:a.text,class:a.class},[t("bodyDataTableDinamic",{attrs:{props:e,field:a}})],1)}))],2)]}}])},[t(h.A,{attrs:{color:"blue",indeterminate:""}})],1)],1)],1),t(m.A,{attrs:{"pa-1":"","ma-1":"",red:"","darken-2":"",xs12:""}},[t(s.A,[t(n.OQ,{staticClass:"px-3 font-weight-medium"},[t("p",[t(p.A,{attrs:{color:"yellow darken-3",left:""}},[a._v(" warning ")]),t("b",[t("u",[a._v("Referencia de Colores:")])])],1),t("ul",[t("li",{staticClass:"green--text",attrs:{type:"square"}},[t("b",[t("u",[a._v("Verde:")])]),a._v(" Transicion "),t("b",[t("u",[a._v("Finalizada")])]),a._v(" (Recibida). ")]),t("li",{staticClass:"orange--text",attrs:{type:"square"}},[t("b",[t("u",[a._v("Anaranjado:")])]),a._v(" Transicion incompleta falta que la "),t("b",[t("u",[a._v("Recibamos")])]),a._v(" en Destino. ")]),t("li",{staticClass:"text-yellow-shadow",attrs:{type:"square"}},[t("b",[t("u",[a._v("Amarillo:")])]),a._v(" Transicion incompleta falta que la "),t("b",[t("u",[a._v("Retiremos")])]),a._v(" del Origen (Desde Transferencias). ")]),t("li",{staticClass:"grey--text",attrs:{type:"square"}},[t("b",[t("u",[a._v("Gris:")])]),t("ul",[t("li",[a._v(" Transicion incompleta falta que la "),t("b",[t("u",[a._v("Reciban")])]),a._v(" en Destino. ")]),t("li",[a._v(" Transicion incompleta falta que la "),t("b",[t("u",[a._v("Retiren")])]),a._v(" del Origen. ")])])])])])],1)],1)],1),t("dialogIngreso",{attrs:{closeFinish:a.recargarDataTable}}),t("dialogTransferencia",{attrs:{closeFinish:a.recargarDataTable}})],1)},y=[],x=(e(18111),e(22489),e(17642),e(58004),e(33853),e(45876),e(32475),e(15024),e(31698),e(95353)),_=e(42681),k=e(62373),E=e(81255),w=e(16717),D=e(79305),B=e(21939),S=e(70134),C=e(45621),F=(e(20116),function(){var a=this,t=a._self._c;return t(D.A,{attrs:{"max-width":"80%",persistent:"",scrollable:""},model:{value:a.dialogIngreso.state,callback:function(t){a.$set(a.dialogIngreso,"state",t)},expression:"dialogIngreso.state"}},[t(s.A,[t(S.A,{attrs:{color:"grey lighten-2",height:"auto",window:""}},[t(p.A,{attrs:{medium:"",color:"black darken-2"}},[a._v("input")]),t("span",{staticClass:"display-1 font-weight-bold text-capitalize black--text text--darken-2"},[a._v(a._s(a.dialogIngreso.remito_compra?`Editar: ${a.dataEdit.remito_compra}`:"Nuevo Ingreso"))]),t(f.hc),t(p.A,{attrs:{large:"",disabled:a.loading.estado,color:"error darken-1"},on:{click:a.close}},[a._v("cancel_presentation")])],1),t(n.OQ,[t(B.A,{ref:"form",attrs:{"lazy-validation":""},model:{value:a.valido,callback:function(t){a.valido=t},expression:"valido"}},[a.dialogIngreso.soloLectura?a._e():t(g.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t("div",{staticClass:"text-xs-center"},[t(w.A,{staticClass:"mt-2",attrs:{"false-value":!1,"true-value":!0,color:"primary lighten-1"},scopedSlots:a._u([{key:"label",fn:function(){return[t(p.A,{attrs:{left:""}},[a._v("inventory_2")]),a._v(" Carga Inicial: "+a._s(a.cargaInicial?"Si":"No")+" ")]},proxy:!0}],null,!1,293394657),model:{value:a.cargaInicial,callback:function(t){a.cargaInicial=t},expression:"cargaInicial"}})],1)]),t(g.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t(m.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(v.W,{attrs:{readonly:"","background-color":"primary lighten-1",value:a.mostrarFecha(a.dataEdit.fecha,"time"),"prepend-icon":"event",label:"Fecha",type:"text",color:"primary"}})],1),t(m.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(v.W,{attrs:{readonly:a.dialogIngreso.soloLectura||"Carga inicial"===a.dataEdit.remito_compra,clearable:!(a.dialogIngreso.soloLectura||"Carga inicial"===a.dataEdit.remito_compra),"background-color":a.dialogIngreso.soloLectura||"Carga inicial"===a.dataEdit.remito_compra?"primary lighten-1":"primary lighten-5","prepend-icon":"list_alt",label:"Remito de Compra",placeholder:"YYYY-NumeroDeOrden",type:"text",color:"primary",rules:[...a.rules.requerido,a.rules.minLength(6)]},model:{value:a.dataEdit.remito_compra,callback:function(t){a.$set(a.dataEdit,"remito_compra",t)},expression:"dataEdit.remito_compra"}})],1),a.dialogIngreso.soloLectura?t(m.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(v.W,{attrs:{readonly:"","background-color":"primary lighten-1",label:"Procedencia / Proveedor","prepend-icon":"local_shipping",type:"text",color:"primary"},model:{value:a.dataEdit.proveedor,callback:function(t){a.$set(a.dataEdit,"proveedor",t)},expression:"dataEdit.proveedor"}})],1):t(m.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(r.A,{attrs:{readonly:"Carga inicial"===a.dataEdit.proveedor,clearable:!("Carga inicial"===a.dataEdit.proveedor),"background-color":"Carga inicial"===a.dataEdit.proveedor?"primary lighten-1":"primary lighten-5",items:a.vacunasProveedores,label:"Procedencia / Proveedor","prepend-icon":"local_shipping",color:"primary",rules:[...a.rules.requerido,a=>"primerCarga"!==a||"Este campo es requerido."]},model:{value:a.dataEdit.proveedor,callback:function(t){a.$set(a.dataEdit,"proveedor",t)},expression:"dataEdit.proveedor"}})],1),t(m.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(r.A,{attrs:{readonly:a.dialogIngreso.soloLectura,clearable:!a.dialogIngreso.soloLectura,"background-color":a.dialogIngreso.soloLectura?"primary lighten-1":"primary lighten-5","item-value":"id","item-text":"area",items:a.areasFiltro,label:"Destino","prepend-icon":"fa-house-medical-flag",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},model:{value:a.dataEdit.destino,callback:function(t){a.$set(a.dataEdit,"destino",t)},expression:"dataEdit.destino"}})],1),t(m.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(v.W,{attrs:{readonly:a.dialogIngreso.soloLectura||"Carga inicial"===a.dataEdit.orden_compra,clearable:!(a.dialogIngreso.soloLectura||"Carga inicial"===a.dataEdit.orden_compra),"background-color":a.dialogIngreso.soloLectura||"Carga inicial"===a.dataEdit.orden_compra?"primary lighten-1":"primary lighten-5","prepend-icon":"list_alt",label:"Orden de Compra (Opcional)",type:"text",color:"primary"},model:{value:a.dataEdit.orden_compra,callback:function(t){a.$set(a.dataEdit,"orden_compra",t)},expression:"dataEdit.orden_compra"}})],1),t(m.A,{attrs:{xs12:"","px-3":"",primary:"","darken-3":""}},[t("h4",{staticClass:"title float: left white--text"},[a._v("Insumos a Ingresar")])]),a._l(a.dataEdit.insumos,(function(e,i){return t(m.A,{key:`insumos-${i}`,attrs:{xs12:""}},[t(g.A,{class:"grey lighten-"+(i%2===0?"3":"2"),attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t(m.A,{attrs:{xs12:"",md8:"",lg9:"","px-3":""}},[t(r.A,{attrs:{readonly:a.dataEdit.insumos[i].recibido,clearable:!a.dataEdit.insumos[i].recibido,"background-color":a.dataEdit.insumos[i].recibido?"primary lighten-1":"primary lighten-5","item-value":"id","item-text":"nombreC",items:a.insumosDB,label:"Insumo","prepend-icon":"vaccines",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},on:{"click:clear":function(t){a.$nextTick((()=>a.dataEdit.insumos[i].insumo=""))}},model:{value:a.dataEdit.insumos[i].insumo,callback:function(t){a.$set(a.dataEdit.insumos[i],"insumo",t)},expression:"dataEdit.insumos[index].insumo"}})],1),t(m.A,{attrs:{xs12:"",sm6:"",md4:"",lg3:"","px-3":""}},[t(v.W,{attrs:{readonly:"","background-color":"primary lighten-1",label:"Procedencia","prepend-icon":"trip_origin",type:"text",color:"primary"},model:{value:a.dataEdit.insumos[i].procedencia,callback:function(t){a.$set(a.dataEdit.insumos[i],"procedencia",t)},expression:"dataEdit.insumos[index].procedencia"}})],1),t(m.A,{attrs:{xs12:"",sm6:"",lg3:"","px-3":""}},[t(v.W,{attrs:{readonly:a.dataEdit.insumos[i].recibido,clearable:!a.dataEdit.insumos[i].recibido,"background-color":a.dataEdit.insumos[i].recibido?"primary lighten-1":"primary lighten-5","prepend-icon":"group_work",label:"Lote"+("Vacuna"===a.insumosDB.find((t=>t.id===a.dataEdit.insumos[i].insumo))?.categoria?"":" (Opcional)"),type:"text",color:"primary",rules:"Vacuna"===a.insumosDB.find((t=>t.id===a.dataEdit.insumos[i].insumo))?.categoria?[...a.rules.requerido]:[],"validate-on-blur":""},model:{value:a.dataEdit.insumos[i].lote,callback:function(t){a.$set(a.dataEdit.insumos[i],"lote",t)},expression:"dataEdit.insumos[index].lote"}})],1),t(m.A,{attrs:{xs12:"",sm5:"",md6:"",lg4:"","px-3":""}},[t("dateSelect",{attrs:{value:a.dataEdit.insumos[i].vencimiento,soloLectura:a.dataEdit.insumos[i].recibido,clearable:!a.dataEdit.insumos[i].recibido,color:"primary",label:"Vencimiento"+("Vacuna"===a.insumosDB.find((t=>t.id===a.dataEdit.insumos[i].insumo))?.categoria?"":" (Opcional)"),icon:"event",requerido:"Vacuna"===a.insumosDB.find((t=>t.id===a.dataEdit.insumos[i].insumo))?.categoria},model:{value:a.dataEdit.insumos[i].vencimiento,callback:function(t){a.$set(a.dataEdit.insumos[i],"vencimiento",t)},expression:"dataEdit.insumos[index].vencimiento"}})],1),t(m.A,{attrs:{xs12:"",sm5:"",md6:"",lg3:"","px-3":""}},[t(v.W,{attrs:{readonly:a.dataEdit.insumos[i].recibido,clearable:!a.dataEdit.insumos[i].recibido,"background-color":a.dataEdit.insumos[i].recibido?"primary lighten-1":"primary lighten-5","prepend-icon":"grain",label:"Cantidad",type:"number",onkeydown:"return event.key !== 'e' && event.key !== 'E' && event.key !== '.' && event.key !== ',' && event.key !== '+' && event.key !== '-'",color:"primary",rules:[...a.rules.requerido,...a.rules.soloNumero,a.rules.minNumber(1)],"validate-on-blur":""},model:{value:a.dataEdit.insumos[i].cantidad,callback:function(t){a.$set(a.dataEdit.insumos[i],"cantidad",t)},expression:"dataEdit.insumos[index].cantidad"}})],1),t(f.hc),0==i?t(b.A,{attrs:{top:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:e}){return[t(o.A,a._g({attrs:{disabled:a.loading.estado||!!a.dataEdit.recibido,fab:"",small:"",color:"primary"},on:{click:function(t){return a.agregarFila(a.dataEdit.insumos,{...a.dataEditBase.insumos[0],procedencia:a.dataEdit.insumos[0].procedencia})}}},e),[t(p.A,{attrs:{"x-large":""}},[a._v("control_point")])],1)]}}],null,!0)},[t("span",[a._v("Agregar Vacuna a Ingreso")])]):a._e(),0!=i?t(b.A,{attrs:{top:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:e}){return[t(o.A,a._g({attrs:{disabled:a.loading.estado||a.dataEdit.insumos[i].recibido,small:"",icon:"",color:"white"},on:{click:function(t){return a.borrarFila(a.dataEdit.insumos,i)}}},e),[t(p.A,{attrs:{color:"red lighten-2"}},[a._v("delete_forever")])],1)]}}],null,!0)},[t("span",[a._v("Eliminar Ingreso")])]):a._e(),t(f.hc,{staticClass:"hidden-xs-only"})],1)],1)})),t(m.A,{attrs:{xs12:"","mx-3":""}},[t(C.A,{attrs:{readonly:a.dialogIngreso.soloLectura,clearable:!a.dialogIngreso.soloLectura,"background-color":a.dialogIngreso.soloLectura?"primary lighten-1":"primary lighten-5",label:"Observacion (opcional)",color:"primary","prepend-icon":"description","auto-grow":"",rows:"2"},model:{value:a.dataEdit.observacion,callback:function(t){a.$set(a.dataEdit,"observacion",t)},expression:"dataEdit.observacion"}})],1),a.dialogIngreso.soloLectura?t(m.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(v.W,{attrs:{readonly:"","background-color":"primary lighten-1",value:a.mostrarFecha(a.dataEdit.recibido,"time"),"prepend-icon":"local_shipping",label:"Fecha Recibido en Destino",placeholder:"Sin Recibir",type:"text",color:"primary"}})],1):a._e()],2)],1)],1),t(n.SL,[t(g.A,{attrs:{row:"",wrap:""}},[t(o.A,a._g({attrs:{disabled:a.loading.estado||!!a.dataEdit.recibido,round:"",color:"primary"},on:{click:function(t){return a.agregarFila(a.dataEdit.insumos,{...a.dataEditBase.insumos[0],procedencia:a.dataEdit.insumos[0].procedencia})}}},a.on),[t(p.A,{attrs:{left:""}},[a._v("control_point")]),a._v("Vacuna a Ingreso ")],1),t(f.hc),a.dataEdit._id?t(o.A,{staticClass:"black darken-1 orange--text",attrs:{disabled:a.loading.estado||a.dialogIngreso.soloLectura,round:"",loading:a.loading.estado},on:{click:function(t){return a.borrarIngreso()}}},[t(p.A,{attrs:{color:"red lighten-2",left:""}},[a._v("delete_forever")]),a._v("Borrar ")],1):a._e(),t(f.hc),t(o.A,{staticClass:"red darken-1 white--text",attrs:{disabled:a.loading.estado,round:"",loading:a.loading.estado},on:{click:function(t){return a.close()}}},[t(p.A,{attrs:{left:""}},[a._v("cancel_presentation")]),a._v("Cancelar ")],1),t(o.A,{staticClass:"primary darken-1 white--text",attrs:{disabled:a.loading.estado||!!a.dataEdit.recibido,loading:a.loading.estado,round:""},on:{click:function(t){return a.guardarIngreso()}}},[t(p.A,{attrs:{left:""}},[a._v("save")]),a._v(a._s(a.valido?a.dialogIngreso.remito_compra?"Guardar":"Crear":"Formulario No valido")+" ")],1)],1)],1)],1)],1)}),I=[],T=(e(44114),{name:"dialogIngreso",props:["closeFinish"],components:{dateSelect:E.A},data:()=>({valido:!0,cargaInicial:!1,vacunasProveedores:[],insumosDB:[],areasFiltro:[],dataEdit:{},dataEditBase:{fecha:"",remito_compra:"",proveedor:"primerCarga",destino:"",orden_compra:"",insumos:[{insumo:void 0,cantidad:null,procedencia:"",lote:"",vencimiento:""}],observacion:"",recibido:""}}),computed:{...(0,x.aH)(["loading","hoy","persona","rules"]),...(0,x.aH)("vacunas",["dialogIngreso"])},watch:{async"dialogIngreso.state"(a){a?setTimeout((async()=>{this.vacunasProveedores=await this.returnOptionsJSON({key:"vacunas",opcion:"base"}),this.vacunasProveedores=[...this.vacunasProveedores?.insumo_procedencia.slice(0,-3)],this.vacunasProveedores.push({text:"Historial",disabled:!0}),this.vacunasProveedores.push({text:"Paciente",disabled:!0}),this.vacunasProveedores.push({text:"Carga inicial",disabled:!0}),this.insumosDB=await this.buscarInsumosFiltro({select:"nombre descripcion nombreC categoria"});let a=[...await this.buscarAreaFiltros({filtro:{vacunatorio:!0},populate:"no",select:"area"})];if(this.areasFiltro=this.persona.vacunas.general?.gestion?a:await this.filtrarArrayParaSelectsDisabled({arraySelects:a,arrayEnable:this.persona.vacunas.gestion,propCompare:"_id",onlyEnabled:!0}),this.dialogIngreso.remito_compra){let a=this._cloneDeep(this.dialogIngreso.remito_compra);for(let t=0;t<a.insumos.length;t++)a.insumos[t].vencimiento=this.mostrarFecha(a.insumos[t].vencimiento);this.dataEdit=Object.assign(this._cloneDeep(this.dataEditBase),a)}else this.dataEdit=this._cloneDeep(this.dataEditBase),this.cargaInicial=!1,this.dataEdit.fecha=Date.now(),this.dataEdit.remito_compra=this.hoy.substring(0,5),this.persona.vacunas.general?.gestion||1!==this.persona.vacunas.gestion?.length||(this.dataEdit.destino=this.persona.vacunas.gestion[0]);this.$refs.form.resetValidation()}),350):(this.dataEdit=this._cloneDeep(this.dataEditBase),this.$refs.form.resetValidation())},cargaInicial(a){a?(this.dataEdit.remito_compra="Carga inicial",this.dataEdit.proveedor="Carga inicial",this.dataEdit.orden_compra="Carga inicial"):(this.dataEdit.remito_compra=this.hoy.substring(0,5),this.dataEdit.proveedor="Region",this.dataEdit.orden_compra="")},"dataEdit.remito_compra"(a){"carga inicial"===a?.toLowerCase()&&(this.dataEdit.proveedor="Carga inicial",this.dataEdit.orden_compra="Carga inicial",this.cargaInicial=!0)},"dataEdit.orden_compra"(a){"carga inicial"===a?.toLowerCase()&&(this.dataEdit.remito_compra="Carga inicial",this.dataEdit.proveedor="Carga inicial",this.cargaInicial=!0)},"dataEdit.proveedor"(a,t){let e="";if(a){if(this.dialogIngreso.remito_compra&&"primerCarga"===t)return;e="Region","Carga inicial"===a?(this.dataEdit.remito_compra="Carga inicial",this.dataEdit.orden_compra="Carga inicial",this.cargaInicial=!0,e="Carga inicial"):"Region"===a?e="Region":"Historial"===a?e="Historial":"Paciente"===a&&(e="Paciente")}for(let i=0;i<this.dataEdit.insumos.length;i++)this.dataEdit.insumos[i].procedencia=e}},beforeMount(){this.dataEdit=this._cloneDeep(this.dataEditBase)},methods:{...(0,x.PY)(["mostrarLoading","mostrarError","mostrarMensaje","ocultarLoading"]),...(0,x.i0)(["requestAPI","returnOptionsJSON","filtrarArrayParaSelectsDisabled"]),...(0,x.i0)("main",["buscarAreaFiltros"]),...(0,x.i0)("vacunas",["actualizarDialogIngresoTransferencia","buscarInsumosFiltro"]),close(){this.actualizarDialogIngresoTransferencia({state:!1,type:{ingreso:!0}}),this.closeFinish?.()},agregarFila(a,t){a.push(t??"")},borrarFila(a,t){a.splice(t,1)},async guardarIngreso(){if(!this.$refs.form.validate())return this.mostrarError({mensaje:"Revise los campos obligatorios.",titulo:"Valores Requeridos."}),!1;try{this.mostrarLoading({titulo:"Efectuando cambios..."});let a=this._cloneDeep(this.dataEdit);if(!a._id){let t=this.isVacio(a,!0);if(!0===t.vacio)return this.mostrarError({mensaje:"Complete por lo menos un dato.",titulo:"Valores Requeridos"}),!1;a=t.dato}a._id&&(a.insumos=this.isVacio(a.insumos,!0).dato);for(let e=0;e<a.insumos.length;e++)if(a.insumos[e].lote&&(a.insumos[e].lote=a.insumos[e].lote.toUpperCase()),a.insumos.filter((t=>t.insumo===a.insumos[e].insumo&&t.vencimiento===a.insumos[e].vencimiento&&t.lote===a.insumos[e].lote)).length>1)return this.mostrarError({mensaje:`Insumo ya cargado, repetido en este mismo ingreso.\n                　${this.insumosDB.find((t=>t._id===a.insumos[e].insumo)).nombre}\n                　L: ${a.insumos[e].lote??"---"}\n                　V: ${a.insumos[e].vencimiento??"---"}`,titulo:"Valores Repetidos"}),this.dataEdit=a,!1;let t=null;return t=await this.requestAPI({method:"put",url:"/vacunas/ingreso",update:a}),!!t?.data?.ok&&(this.mostrarMensaje({msj:[`Ingreso ${a._id?"Editado":"Guardado"} exitosamente.`],titulo:"Completado"}),this.close(),!0)}catch(a){return this.mostrarError({mensaje:a,titulo:"Inesperado (guardarIngreso)"}),!1}finally{this.ocultarLoading()}},async borrarIngreso(){if(await this.$root.$confirm.open({titulo:"ELIMINAR",msj:["Una vez Eliminado no se podra recuperar.",`El Ingreso: ${this.dataEdit.remito_compra}, sera ELIMINADO.\n¿Desea continuar?`]}))try{this.mostrarLoading({titulo:"Borrando Ingreso..."});let a=null;return a=await this.requestAPI({method:"delete",url:`/vacunas/ingreso/${this.dataEdit._id}`}),!!a?.data?.ok&&(this.mostrarMensaje({msj:["Borrado exitosamente."],titulo:"Borrado Exitoso"}),this.close(),!0)}catch(a){return this.mostrarError({mensaje:a,titulo:"Inesperado (borrarIngreso)"}),!1}finally{this.ocultarLoading()}}}}),V=T,P=e(81656),K=(0,P.A)(V,F,I,!1,null,null,null),L=K.exports,R=e(33546),j={name:"vacunaIngresoBuscar",components:{bodyDataTableDinamic:_.A,componentFiltroAvanzado:k.A,dateSelect:E.A,dialogIngreso:L,dialogTransferencia:R.A},data:()=>({areasFiltro:[],noGeneralNoGestion:!1,noGeneralSiGestion:!1,dataTable:[],dataTableSelected:"Todos",dataTableSelect:["Todos","Aptos para que Recibamos","Transiciones Incompletas","Transiciones Finalizadas","No Transferencias"],filtro:{desde:"",hasta:"",areas:[],insumos:[],procedencias:[]},ultimoFiltro:{},search:"",paginacion:{sortBy:"fecha",descending:!0,rowsPerPage:10,page:1},headers:[{text:"Acciones",value:"id",align:"center",sortable:!1,width:"5%",ignore:!0},{text:"Fecha",value:"fecha",align:"left",class:"text-xs-left",width:"15%",ruta:"fecha",date:!0,time:!0},{text:"Remito de Compra",value:"remito_compra",align:"left",class:"text-xs-right",width:"15%",ruta:"remito_compra"},{text:"Procedencia / Proveedor",value:"proveedor",align:"left",class:"text-xs-left",width:"15%",ruta:"proveedor"},{text:"Remito Transf.",value:"remito",align:"left",class:"text-xs-right",width:"15%",ruta:"remito"},{text:"Transf. Origen",value:"origenDB",align:"left",class:"text-xs-left",width:"15%",ruta:"origenDB"},{text:"Destino",value:"destinoDB",align:"left",class:"text-xs-left",width:"20%",ruta:"destinoDB"},{text:"Recibido Destino",value:"recibido",align:"left",class:"text-xs-left",width:"10%",ruta:"recibido",date:!0,time:!0},{text:"Retirado Origen",value:"retirado",align:"left",class:"text-xs-left",width:"10%",ruta:"retirado",date:!0,time:!0}]}),computed:{...(0,x.aH)(["loading","hoy","monthBefore","persona"]),headersDinamics(){return[...this.headers.filter((a=>!0!==a.ignore))]},dataTableFilter(){return this.dataTable?.filter((a=>{if("Todos"===this.dataTableSelected)return!0;if("Transiciones Finalizadas"===this.dataTableSelected&&a.recibido)return!0;if("Transiciones Incompletas"===this.dataTableSelected&&!a.recibido)return!0;if("Aptos para que Recibamos"===this.dataTableSelected&&!a.recibido){if(a.origen&&!a.retirado)return!1;if(this.persona.vacunas.general?.gestion||this.persona.vacunas.gestion?.includes(a.destino))return!0}return!("No Transferencias"!==this.dataTableSelected||!a.remito_compra)}))}},watch:{dataTableFilter(){this.paginacion.page>Math.ceil(this.dataTableFilter?.length/this.paginacion.rowsPerPage)&&(this.paginacion.page=1)}},async created(){this.filtro.desde=this.monthBefore,this.filtro.hasta=this.hoy,this.persona.vacunas.general?.gestion||(this.persona.vacunas.gestion?this.noGeneralSiGestion=!0:this.noGeneralNoGestion=!0);let a=[...await this.buscarAreaFiltros({filtro:{vacunatorio:!0},populate:"no",select:"area"})];this.persona.vacunas.general?.lectura||this.persona.vacunas.general?.gestion?(this.filtro.areas=a.map((a=>a.id)),this.areasFiltro=a):(this.filtro.areas=[],this.persona.vacunas.lectura&&(this.filtro.areas=[...this.filtro.areas,...this.persona.vacunas.lectura]),this.persona.vacunas.gestion&&(this.filtro.areas=[...this.filtro.areas,...this.persona.vacunas.gestion]),this.filtro.areas=Array.from(new Set(this.filtro.areas)),this.areasFiltro=await this.filtrarArrayParaSelectsDisabled({arraySelects:a,arrayEnable:this.filtro.areas,propCompare:"_id",onlyEnabled:!0})),await this.recargarDataTable(this.filtro)},methods:{...(0,x.PY)(["mostrarLoading","mostrarError","ocultarLoading","mostrarDialogIframe"]),...(0,x.i0)(["retroceder","routerResolve","filtrarArrayParaSelectsDisabled","requestAPI"]),...(0,x.i0)("main",["buscarAreaFiltros"]),...(0,x.i0)("vacunas",["actualizarDialogIngresoTransferencia","getRequestFilter","recibirIngreso"]),backgroundClass(a){if(!a)return"";try{return a.recibido?"background-color: green lighten-5":this.noGeneralNoGestion?"background-color: grey lighten-4":this.persona.vacunas.general?.gestion?a.remito&&!a.retirado?"background-color: yellow lighten-4":"background-color: orange lighten-4":a.remito&&!a.retirado&&this.persona.vacunas.gestion?.includes(a.origen)?"background-color: yellow lighten-4":a.retirado&&this.persona.vacunas.gestion?.includes(a.destino)||!a.remito&&this.persona.vacunas.gestion?.includes(a.destino)?"background-color: orange lighten-4":"background-color: grey lighten-4"}catch(t){return""}},customFilter(a,t){return t&&a.length>0?this.objectSearch({items:a,search:t,propCompare:["fecha","remito_compra","orden_compra","proveedor","remito","origenDB","destinoDB","recibido","retirado"]}):a},async recargarDataTable(a){if(a){let t=await this.buscarIngresosAgrupados(a);t&&(this.dataTable=t,this.ultimoFiltro=this._cloneDeep(a))}else this.dataTable=await this.buscarIngresosAgrupados(this.ultimoFiltro)},async buscarIngresosAgrupados(a){try{this.mostrarLoading({titulo:"Buscando Ingresos..."});let t=await this.getRequestFilter({payload:a});if(t.error)return;let e=null;return e=await this.requestAPI({method:"get",url:`/vacunas/ingresos?${t.dato}`}),e?.data?.ok?e.data.ingresos:[{remito_compra:"error de carga, recargar pagina",id:void 0}]}catch(t){return this.mostrarError({mensaje:t,titulo:"Inesperado (buscarIngresosAgrupados)"}),[{remito_compra:"error de carga(buscarIngresosAgrupados), recargar pagina",id:void 0}]}finally{this.ocultarLoading()}},async reporte(){if(this.filtro.areas.length>0){localStorage.setItem("localStorageTemp",JSON.stringify(this.filtro));let a=await this.routerResolve({name:"VacunasIngresosImprimir",query:{descarga:!1}});this.mostrarDialogIframe({src:a.href,titulo_name:`Vacunatorio Ingresos ${this.filtro.desde} ~ ${this.filtro.hasta}`})}else this.mostrarError({errores:"",mensaje:"Complete por lo menos con un Vacunatorio para el reporte.",titulo:"Valores Requeridos."})}}},q=j,$=(0,P.A)(q,A,y,!1,null,null,null),N=$.exports},29365:function(a,t,e){e.r(t),e.d(t,{default:function(){return q}});var i=e(21999),r=e(28597),o=e(28383),s=e(3150),n=e(1899),l=e(37471),c=e(48122),d=e(81851),u=e(34172),m=e(41614),p=e(21527),g=e(69155),h=e(17912),f=e(55731),v=e(57e3),b=e(17087),A=function(){var a=this,t=a._self._c;return t(c.A,{attrs:{fluid:"","grid-list-xs":""}},[t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"","text-xs-center":""}},[t(m.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[t(s.A,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[t(n.OQ,{staticClass:"px-0 text-uppercase"},[a._v("====== Gestion de Vacunas ======")])],1)],1)],1),t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[t(m.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",cuarto:"","darken-1":""}},[t(m.A,{attrs:{"px-3":""}},[t(p.A,{attrs:{medium:"",color:"white",left:""}},[a._v("vaccines")]),t("span",{staticClass:"title white--text"},[a._v("Vacunas / Solicitudes")])],1),t(f.hc),t(o.A,{attrs:{fab:"",small:"",color:"primary darken-2"},on:{click:function(t){return a.retroceder()}}},[t(p.A,[a._v("far fa-arrow-alt-circle-left")])],1)],1),t(s.A,{staticClass:"elevation-6",attrs:{color:"grey lighten-2"}},[t(n.OQ,{staticClass:"px-0"},[t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"","text-xs-center":""}},[t(m.A,{attrs:{xs12:"","px-3":""}},[t(s.A,{staticClass:"grey lighten-3"},[t(g.A,{attrs:{"justify-center":"",row:"",wrap:""},on:{keypress:function(t){return!t.type.indexOf("key")&&a._k(t.keyCode,"enter",13,t.key,"Enter")?null:a.recargarDataTable(a.filtro)}}},[t(m.A,{attrs:{xs12:"",sm6:"",md3:"","px-3":""}},[t("dateSelect",{attrs:{value:a.filtro.desde,"background-color":"cuarto lighten-5",color:"cuarto",label:"Desde",icon:"today",max:a.filtro.hasta,requerido:"true"},model:{value:a.filtro.desde,callback:function(t){a.$set(a.filtro,"desde",t)},expression:"filtro.desde"}})],1),t(m.A,{attrs:{xs12:"",sm6:"",md3:"","px-3":""}},[t("dateSelect",{attrs:{value:a.filtro.hasta,"background-color":"cuarto lighten-5",color:"cuarto",label:"Hasta",icon:"event",min:a.filtro.desde,requerido:"true"},model:{value:a.filtro.hasta,callback:function(t){a.$set(a.filtro,"hasta",t)},expression:"filtro.hasta"}})],1),t(m.A,{attrs:{xs12:"",md10:"","px-3":"","mb-3":""}},[t("componentFiltroAvanzado",{attrs:{filtro:a.filtro,areasFiltro:a.areasFiltro,insumos:{select:"nombre descripcion nombreC"}}})],1)],1),t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[t(o.A,{staticClass:"white--text mb-2",attrs:{round:"",color:"cuarto darken-2",disabled:a.loading.estado,loading:a.loading.estado},on:{click:function(t){return a.recargarDataTable(a.filtro)}}},[t(p.A,{attrs:{medium:"",left:""}},[a._v("search")]),a._v(" Buscar Solicitudes")],1),t(u.A,{staticClass:"hidden-xs-only mx-4 my-1 black",attrs:{vertical:""}}),t(o.A,{staticClass:"white--text mb-2",attrs:{round:"",color:"cuarto darken-2",disabled:a.loading.estado,loading:a.loading.estado},on:{click:function(t){return a.reporte()}}},[t(p.A,{attrs:{medium:"",left:""}},[a._v("fa-solid fa-file-pdf")]),a._v(" Solicitudes Pendientes PDF")],1)],1)],1)],1)],1)],1)],1)],1),t(m.A,{attrs:{"pa-1":"","ma-1":"",xs12:"",cuarto:"","lighten-1":""}},[t(s.A,{staticClass:"elevation-6"},[t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",primary:""}},[t(m.A,{attrs:{"px-3":""}},[t(p.A,{attrs:{medium:"",color:"white",left:""}},[a._v("speaker_notes")]),t("span",{staticClass:"title white--text"},[a._v("Solicitudes de Insumos")])],1),t(f.hc)],1),t(l.A,[t(m.A,{attrs:{xs12:"",sm4:"","px-2":""}},[t(v.W,{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":"",clearable:""},model:{value:a.search,callback:function(t){a.search=t},expression:"search"}})],1),t(f.hc),t(m.A,{attrs:{xs12:"",sm6:"",md4:"","px-2":""}},[t(r.A,{attrs:{items:a.dataTableSelect,label:"Mostrar","prepend-icon":"list_alt",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:a.dataTableSelected,callback:function(t){a.dataTableSelected=t},expression:"dataTableSelected"}})],1),t(u.A,{staticClass:"hidden-xs-only mx-2 my-1 primary",attrs:{vertical:""}}),t(o.A,{staticClass:"mb-2",attrs:{round:"",color:"primary",disabled:!(a.persona.vacunas.gestion?.length>0||a.persona.vacunas.general?.gestion)||a.loading.estado,loading:a.loading.estado},on:{click:function(t){return a.actualizarDialogSolicitud({state:!0})}}},[t(p.A,{attrs:{medium:"",left:""}},[a._v("input")]),a._v(" Nueva Solicitud")],1)],1),t(d.A,{staticClass:"elevation-6",staticStyle:{"table-layout":"fixed"},attrs:{headers:a.headers,items:a.dataTableFilter,"item-key":"_id",pagination:a.paginacion,"rows-per-page-items":[5,10,25,50],loading:a.loading.estado,search:a.search},on:{"update:pagination":function(t){a.paginacion=t}},scopedSlots:a._u([{key:"no-results",fn:function(){return[t(i.A,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[a._v(' No se encontraron resultados para "'+a._s(a.search)+'". ')])]},proxy:!0},{key:"no-data",fn:function(){return[t(i.A,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[a._v(" No hay datos para mostrar. ")])]},proxy:!0},{key:"items",fn:function(e){return[t("tr",{class:a.backgroundClass(e.item)},[t("td",{staticClass:"text-sm-left"},[t("div",{staticClass:"text-xs-center",staticStyle:{width:"90px"}},[t(b.A,{attrs:{bottom:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:i}){return[t(o.A,a._g({attrs:{disabled:a.loading.estado,color:"white",small:"",icon:""},on:{click:function(t){return a.imprimirSolicitud({solicitud:e.item})}}},i),[t(p.A,{attrs:{color:"green"}},[a._v("print")])],1)]}}],null,!0)},[t("span",[a._v("Ver PDF")])]),t(b.A,{attrs:{right:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:i}){return[t(o.A,a._g({attrs:{disabled:a.loading.estado,color:"white",small:"",icon:""},on:{click:function(t){return a.actualizarDialogSolicitud({state:!0,solicitud:e.item})}}},i),[t(p.A,{attrs:{color:"primary"}},[a._v("visibility")])],1)]}}],null,!0)},[t("span",[a._v("Ver Solicitud")])])],1)]),a._l(a.headersDinamics,(function(i){return t("td",{key:i.text,class:i.class,staticStyle:{cursor:"pointer"},on:{click:function(t){return a.actualizarDialogSolicitud({state:!0,solicitud:e.item})}}},[t("bodyDataTableDinamic",{attrs:{props:e,field:i}})],1)}))],2)]}}])},[t(h.A,{attrs:{color:"blue",indeterminate:""}})],1)],1)],1),t(m.A,{attrs:{"pa-1":"","ma-1":"",red:"","darken-2":"",xs12:""}},[t(s.A,[t(n.OQ,{staticClass:"px-3 font-weight-medium"},[t("p",[t(p.A,{attrs:{color:"yellow darken-3",left:""}},[a._v(" warning ")]),t("b",[t("u",[a._v("Referencia de Colores:")])])],1),t("ul",[t("li",{staticClass:"green--text",attrs:{type:"square"}},[t("b",[t("u",[a._v("Verde:")])]),a._v(" Solicitudes de Insumos "),t("b",[t("u",[a._v("Aceptadas")])]),a._v(". ")]),t("li",{staticClass:"blue--text",attrs:{type:"square"}},[t("b",[t("u",[a._v("Celeste:")])]),a._v(" Solicitudes de Insumos Pendientes con motivo de "),t("b",[t("u",[a._v("Rutina")])]),a._v(". ")]),t("li",{staticClass:"orange--text",attrs:{type:"square"}},[t("b",[t("u",[a._v("Anaranjado:")])]),a._v(" Solicitudes de Insumos Pendientes con motivo de "),t("b",[t("u",[a._v("Emergencia")])]),a._v(". ")]),t("li",{staticClass:"text-yellow-shadow",attrs:{type:"square"}},[t("b",[t("u",[a._v("Amarillo:")])]),a._v(" Solicitudes de Insumos Pendientes con motivo de "),t("b",[t("u",[a._v("Urgencia")])]),a._v(". ")]),t("li",{staticClass:"red--text",attrs:{type:"square"}},[t("b",[t("u",[a._v("Rojo:")])]),a._v(" Solicitudes de Insumos "),t("b",[t("u",[a._v("Rechazadas")])]),a._v(". ")])])])],1)],1)],1),t("dialogSolicitud",{attrs:{closeFinish:a.recargarDataTable}})],1)},y=[],x=(e(18111),e(22489),e(17642),e(58004),e(33853),e(45876),e(32475),e(15024),e(31698),e(95353)),_=e(81255),k=e(42681),E=e(79305),w=e(21939),D=e(70134),B=e(45621),S=function(){var a=this,t=a._self._c;return t(E.A,{attrs:{"max-width":"80%",persistent:"",scrollable:""},model:{value:a.dialogSolicitud.state,callback:function(t){a.$set(a.dialogSolicitud,"state",t)},expression:"dialogSolicitud.state"}},[t(s.A,[t(D.A,{attrs:{color:"grey lighten-2",height:"auto",window:""}},[t(p.A,{attrs:{medium:"",color:"black darken-2"}},[a._v("speaker_notes")]),t("span",{staticClass:"display-1 font-weight-bold black--text text--darken-2"},[a._v(a._s(a.dialogSolicitud.solicitud?`Solicitud ${a.dataEdit.id_time??""}`:"Nueva Solicitud"))]),t(f.hc),t(p.A,{attrs:{large:"",disabled:a.loading.estado,color:"error darken-1"},on:{click:a.close}},[a._v("cancel_presentation")])],1),t(n.OQ,[t(w.A,{ref:"form",attrs:{"lazy-validation":""},model:{value:a.valido,callback:function(t){a.valido=t},expression:"valido"}},[t(g.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t(m.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(v.W,{attrs:{readonly:"","background-color":"primary lighten-1",value:a.mostrarFecha(a.dataEdit.fecha,"time"),"prepend-icon":"event",label:"Fecha",type:"text",color:"primary"}})],1),t(m.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(r.A,{attrs:{readonly:a.dialogSolicitud.soloLectura,clearable:!a.dialogSolicitud.soloLectura,"background-color":`${"Pendiente"===a.dataEdit.estado?"yellow":"Rechazada"===a.dataEdit.estado?"red":"green"} ${a.dialogSolicitud.soloLectura?"lighten-1":"lighten-4"}`,items:a.solicitudEstados,label:"Estado","prepend-icon":"Aceptada"===a.dataEdit.estado?"check_box":"Rechazada"===a.dataEdit.estado?"disabled_by_default":"check_box_outline_blank",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},on:{change:function(t){return a.getInsumoInfo()}},model:{value:a.dataEdit.estado,callback:function(t){a.$set(a.dataEdit,"estado",t)},expression:"dataEdit.estado"}})],1),t(m.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(r.A,{attrs:{readonly:a.dialogSolicitud.soloLectura||a.dialogSolicitud.edicionLimitada,clearable:!(a.dialogSolicitud.soloLectura||a.dialogSolicitud.edicionLimitada),"background-color":`${"Rutina"===a.dataEdit.motivo?"blue":"Urgencia"===a.dataEdit.motivo?"yellow":"orange"} ${a.dialogSolicitud.soloLectura||a.dialogSolicitud.edicionLimitada?"lighten-1":"lighten-4"}`,items:a.solicitudMotivos,label:"Motivo","prepend-icon":"speaker_notes",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},model:{value:a.dataEdit.motivo,callback:function(t){a.$set(a.dataEdit,"motivo",t)},expression:"dataEdit.motivo"}})],1),t(m.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(r.A,{attrs:{readonly:a.dialogSolicitud.soloLectura||a.dialogSolicitud.edicionLimitada,clearable:!(a.dialogSolicitud.soloLectura||a.dialogSolicitud.edicionLimitada),"background-color":a.dialogSolicitud.soloLectura||a.dialogSolicitud.edicionLimitada?"primary lighten-1":"primary lighten-5","item-value":"id","item-text":"area",items:a.areasFiltro,label:"Origen","prepend-icon":"fa-house-medical-flag",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},on:{change:function(t){return a.getInsumoInfo()}},model:{value:a.dataEdit.origen,callback:function(t){a.$set(a.dataEdit,"origen",t)},expression:"dataEdit.origen"}})],1),t(m.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(r.A,{attrs:{readonly:a.dialogSolicitud.soloLectura||"Pendiente"===a.dataEdit.estado&&a.dialogSolicitud.edicionLimitada,clearable:!(a.dialogSolicitud.soloLectura||"Pendiente"===a.dataEdit.estado&&a.dialogSolicitud.edicionLimitada),"background-color":a.dialogSolicitud.soloLectura||"Pendiente"===a.dataEdit.estado&&a.dialogSolicitud.edicionLimitada?"primary lighten-1":"primary lighten-5","item-value":"id","item-text":"area",items:"Aceptada"===a.dataEdit.estado||"Rechazada"===a.dataEdit.estado?a.areasFiltroDestino:a.dataEdit.origen?a.areasNoOrigen:a.areasDB,label:""+("Aceptada"===a.dataEdit.estado?"Aceptada por:":"Rechazada"===a.dataEdit.estado?"Rechazada por:":"Destinatario (Opcional)"),"prepend-icon":"fa-solid fa-dolly",color:"primary",rules:"Aceptada"===a.dataEdit.estado||"Rechazada"===a.dataEdit.estado?[...a.rules.requerido]:[],"validate-on-blur":""},on:{"click:clear":function(t){a.$nextTick((()=>a.dataEdit.destino=""))}},model:{value:a.dataEdit.destino,callback:function(t){a.$set(a.dataEdit,"destino",t)},expression:"dataEdit.destino"}})],1),t(m.A,{attrs:{xs12:"","px-3":"",primary:"","darken-3":""}},[t("h4",{staticClass:"title float: left white--text"},[a._v("Insumos a Solicitar")])]),a._l(a.dataEdit.insumos,(function(e,i){return t(m.A,{key:`${a.dataEdit.categoria}-insumos-${i}`,attrs:{xs12:""}},[t(g.A,{class:"grey lighten-"+(i%2===0?"3":"2"),attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t(m.A,{class:"xs12 "+("Pendiente"===a.dataEdit.estado?"lg5":"lg8"),attrs:{"px-3":""}},[t(r.A,{attrs:{readonly:a.dialogSolicitud.soloLectura||a.dialogSolicitud.edicionLimitada,clearable:!(a.dialogSolicitud.soloLectura||a.dialogSolicitud.edicionLimitada),"background-color":a.dialogSolicitud.soloLectura||a.dialogSolicitud.edicionLimitada?"primary lighten-1":"primary lighten-5","item-value":"id","item-text":"nombreC",items:a.insumosFiltrado,label:"Insumo","prepend-icon":"vaccines",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},on:{"click:clear":function(t){a.$nextTick((()=>a.dataEdit.insumos[i].insumo=""))},change:function(t){return a.getInsumoInfo()}},model:{value:a.dataEdit.insumos[i].insumo,callback:function(t){a.$set(a.dataEdit.insumos[i],"insumo",t)},expression:"dataEdit.insumos[index].insumo"}})],1),t(m.A,{class:"xs12 "+("Pendiente"===a.dataEdit.estado?"sm4 lg2":"sm8 lg3"),attrs:{"px-3":""}},[t(v.W,{attrs:{readonly:a.dialogSolicitud.soloLectura||a.dialogSolicitud.edicionLimitada,clearable:!(a.dialogSolicitud.soloLectura||a.dialogSolicitud.edicionLimitada),"background-color":a.dialogSolicitud.soloLectura||a.dialogSolicitud.edicionLimitada?"primary lighten-1":"primary lighten-5","prepend-icon":"grain",label:"Solicitan",type:"number",onkeydown:"return event.key !== 'e' && event.key !== 'E' && event.key !== '.' && event.key !== ',' && event.key !== '+' && event.key !== '-'",color:"primary",rules:[...a.rules.requerido,...a.rules.soloNumero,a.rules.minNumber(1)],"validate-on-blur":""},model:{value:a.dataEdit.insumos[i].cantidad,callback:function(t){a.$set(a.dataEdit.insumos[i],"cantidad",t)},expression:"dataEdit.insumos[index].cantidad"}})],1),"Pendiente"===a.dataEdit.estado?t(m.A,{attrs:{xs12:"",sm3:"",lg2:"","px-3":""}},[t(v.W,{attrs:{readonly:"","background-color":"primary lighten-3",value:a.dataEdit.insumos[i].cant_min,"prepend-icon":"shield",label:"Recomendado",placeholder:"Sin Dato","persistent-placeholder":""}})],1):a._e(),"Pendiente"===a.dataEdit.estado?t(m.A,{attrs:{xs12:"",sm3:"",lg2:"","px-3":""}},[t(v.W,{attrs:{readonly:"","background-color":"primary lighten-3",value:a.dataEdit.insumos[i].stock,"prepend-icon":"warehouse",label:"Tienen"}})],1):a._e(),t(f.hc),0===i?t(b.A,{attrs:{top:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:e}){return[t(o.A,a._g({attrs:{disabled:a.loading.estado||a.dialogSolicitud.soloLectura||a.dialogSolicitud.edicionLimitada,fab:"",small:"",color:"primary"},on:{click:function(t){return a.agregarFila(a.dataEdit.insumos,{...a.dataEditBase.insumos[0]})}}},e),[t(p.A,{attrs:{"x-large":""}},[a._v("control_point")])],1)]}}],null,!0)},[t("span",[a._v("Agregar Insumo a Solicitar")])]):a._e(),0!==i?t(b.A,{attrs:{top:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:e}){return[t(o.A,a._g({attrs:{disabled:a.loading.estado||a.dialogSolicitud.soloLectura||a.dialogSolicitud.edicionLimitada,small:"",icon:"",color:"white"},on:{click:function(t){return a.borrarFila(a.dataEdit.insumos,i)}}},e),[t(p.A,{attrs:{color:"red lighten-2"}},[a._v("delete_forever")])],1)]}}],null,!0)},[t("span",[a._v("Eliminar Insumo")])]):a._e(),t(f.hc,{staticClass:"hidden-xs-only"})],1)],1)}))],2),t(g.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},["Aceptada"===a.dataEdit.estado||"Rechazada"===a.dataEdit.estado?t(m.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(v.W,{attrs:{readonly:"","background-color":"primary lighten-1",value:a.mostrarFecha(a.dataEdit.fec_resolucion,"time"),"prepend-icon":"event",label:"Fecha de Resolucion",type:"text",color:"primary"}})],1):a._e(),"Aceptada"===a.dataEdit.estado?t(m.A,{attrs:{xs12:"","mx-2":""}},[t(B.A,{attrs:{readonly:a.dialogSolicitud.soloLectura,clearable:!a.dialogSolicitud.soloLectura,"background-color":a.dialogSolicitud.soloLectura?"primary lighten-1":"primary lighten-5",label:"Condicion con la que se acepto (Opcional)",placeholder:"Si de alguno de los Insumos se enviara menor cantidad, completar aca para avisar.",color:"primary","prepend-icon":"speaker_notes","auto-grow":"",rows:"2"},model:{value:a.dataEdit.condicion_aceptada,callback:function(t){a.$set(a.dataEdit,"condicion_aceptada",t)},expression:"dataEdit.condicion_aceptada"}})],1):a._e(),"Rechazada"===a.dataEdit.estado?t(m.A,{attrs:{xs12:"","mx-2":""}},[t(B.A,{attrs:{readonly:a.dialogSolicitud.soloLectura,clearable:!a.dialogSolicitud.soloLectura,"background-color":a.dialogSolicitud.soloLectura?"primary lighten-1":"primary lighten-5",label:"Motivo de Rechazo",color:"primary","prepend-icon":"speaker_notes","auto-grow":"",rows:"2",rules:[...a.rules.requerido],"validate-on-blur":""},model:{value:a.dataEdit.motivo_rechazo,callback:function(t){a.$set(a.dataEdit,"motivo_rechazo",t)},expression:"dataEdit.motivo_rechazo"}})],1):a._e()],1)],1)],1),t(n.SL,[t(g.A,{attrs:{row:"",wrap:""}},[t(o.A,a._g({attrs:{disabled:a.loading.estado||a.dialogSolicitud.soloLectura||a.dialogSolicitud.edicionLimitada,round:"",color:"primary"},on:{click:function(t){return a.agregarFila(a.dataEdit.insumos,{...a.dataEditBase.insumos[0]})}}},a.on),[t(p.A,{attrs:{left:""}},[a._v("control_point")]),a._v("Insumo Solicitar ")],1),t(f.hc),a.dataEdit._id?t(o.A,{staticClass:"black darken-1 orange--text",attrs:{disabled:a.loading.estado||a.dialogSolicitud.soloLectura||a.dialogSolicitud.edicionLimitada,round:"",loading:a.loading.estado},on:{click:function(t){return a.borrarSolicitud()}}},[t(p.A,{attrs:{color:"red lighten-2",left:""}},[a._v("delete_forever")]),a._v("Borrar ")],1):a._e(),t(f.hc),t(o.A,{staticClass:"red darken-1 white--text",attrs:{disabled:a.loading.estado,round:"",loading:a.loading.estado},on:{click:function(t){return a.close()}}},[t(p.A,{attrs:{left:""}},[a._v("cancel_presentation")]),a._v("Cancelar ")],1),t(o.A,{staticClass:"primary darken-1 white--text",attrs:{disabled:a.loading.estado||a.dialogSolicitud.soloLectura,loading:a.loading.estado,round:""},on:{click:function(t){return a.guardarSolicitud()}}},[t(p.A,{attrs:{left:""}},[a._v("save")]),a._v(a._s(a.valido?a.dialogSolicitud.solicitud?"Guardar":"Crear":"Formulario No valido")+" ")],1)],1)],1)],1)],1)},C=[],F=(e(44114),e(20116),e(61701),e(13579),{name:"dialogSolicitud",props:["closeFinish"],components:{},data:()=>({valido:!0,areasDB:[],areasNoOrigen:[],areasFiltro:[],areasFiltroDestino:[],insumosDB:[],insumosFiltrado:[],dataEdit:{},dataEditBase:{fecha:"",origen:"",destino:"",insumos:[{insumo:void 0,cantidad:null,stock:null}],estado:"Pendiente",motivo:"Rutina",categoria:"Vacuna",fec_resolucion:"",condicion_aceptada:"",motivo_rechazo:""},solicitudEstados:["Pendiente","Aceptada","Rechazada"],solicitudMotivos:["Rutina","Urgencia","Emergencia"]}),computed:{...(0,x.aH)(["loading","persona","rules"]),...(0,x.aH)("vacunas",["dialogSolicitud"]),stockASolicitar(){return this.dataEdit.insumos?.map((a=>a.insumo))}},watch:{async"dialogSolicitud.state"(a){a?setTimeout((async()=>{this.insumosDB=await this.buscarInsumosFiltro({select:"nombre descripcion nombreC"}),this.areasDB=[...await this.buscarAreaFiltros({filtro:{vacunatorio:!0},populate:"no",select:"area"})],this.dialogSolicitud.solicitud?(this.dataEdit=Object.assign(this._cloneDeep(this.dataEditBase),this._cloneDeep(this.dialogSolicitud.solicitud)),this.getInsumoInfo()):(this.dataEdit=this._cloneDeep(this.dataEditBase),this.dataEdit.fecha=Date.now(),this.persona.vacunas.general?.gestion||1!==this.persona.vacunas.gestion?.length||(this.dataEdit.origen=this.persona.vacunas.gestion[0])),this.areasFiltro=this.persona.vacunas.general?.gestion?this.areasDB:await this.filtrarArrayParaSelectsDisabled({arraySelects:this.areasDB,arrayEnable:this.persona.vacunas.gestion,propCompare:"_id",onlyEnabled:!this.dialogSolicitud.soloLectura&&!this.dialogSolicitud.edicionLimitada}),this.insumosFiltrado=await this.filtrarArrayParaSelectsDisabled({arraySelects:this.insumosDB,arrayDisable:this.stockASolicitar,propCompare:"id"}),this.$refs.form.resetValidation()}),350):(this.dataEdit=this._cloneDeep(this.dataEditBase),this.insumosDB=[],this.$refs.form.resetValidation())},"dataEdit.estado"(a){"Aceptada"===a||"Rechazada"===a?(this.dataEdit.fec_resolucion||(this.dataEdit.fec_resolucion=Date.now(),this.dataEdit.destino=""),this.changeAreasFiltroDestino()):"Pendiente"===a&&this.dataEdit.fec_resolucion&&(this.dataEdit.fec_resolucion="",this.dataEdit.destino=""),"Aceptada"!==a&&(this.dataEdit.condicion_aceptada=""),"Rechazada"!==a&&(this.dataEdit.motivo_rechazo="")},async"dataEdit.origen"(a){"Aceptada"!==this.dataEdit.estado&&"Rechazada"!==this.dataEdit.estado||this.changeAreasFiltroDestino(),a&&"Pendiente"===this.dataEdit.estado&&(this.areasNoOrigen=await this.filtrarArrayParaSelectsDisabled({arraySelects:this.areasDB,arrayDisable:a,propCompare:"_id"}),this.dataEdit.origen===this.dataEdit.destino&&(this.dataEdit.destino=""))},async stockASolicitar(a){this.insumosFiltrado=await this.filtrarArrayParaSelectsDisabled({arraySelects:this.insumosDB,arrayDisable:a,propCompare:"id"})}},async beforeMount(){this.dataEdit=this._cloneDeep(this.dataEditBase)},methods:{...(0,x.PY)(["mostrarLoading","mostrarError","mostrarMensaje","ocultarLoading"]),...(0,x.i0)(["filtrarArrayParaSelectsDisabled","requestAPI","returnOptionsJSON"]),...(0,x.i0)("main",["buscarAreaFiltros"]),...(0,x.i0)("vacunas",["actualizarDialogSolicitud","buscarInsumosFiltro"]),async changeAreasFiltroDestino(){this.areasFiltroDestino=await this.filtrarArrayParaSelectsDisabled({arraySelects:this.areasDB,arrayEnable:this.persona.vacunas.general?.gestion?null:this.persona.vacunas.gestion,arrayDisable:this.dataEdit.origen,propCompare:"_id",onlyEnabled:!this.dialogSolicitud.soloLectura}),this.dataEdit.destino||this.persona.vacunas.general?.gestion||1!==this.persona.vacunas.gestion?.length||(this.dataEdit.destino=this.persona.vacunas.gestion[0]),this.dataEdit.origen===this.dataEdit.destino&&(this.dataEdit.destino="")},close(){this.actualizarDialogSolicitud({state:!1}),this.closeFinish?.()},agregarFila(a,t){a.push(t||"")},borrarFila(a,t){a.splice(t,1)},async guardarSolicitud(){if(!this.$refs.form.validate())return this.mostrarError({mensaje:"Revise los campos obligatorios.",titulo:"Valores Requeridos."}),!1;try{this.mostrarLoading({titulo:"Efectuando cambios..."});let a=this._cloneDeep(this.dataEdit);if(!a._id){let t=this.isVacio(a,!0);if(!0===t.vacio)return this.mostrarError({mensaje:"Complete por lo menos un dato.",titulo:"Valores Requeridos"}),!1;a=t.dato}let t=null;if(t=await this.requestAPI({method:"put",url:"/vacunas/solicitud",update:a}),t?.data?.ok){let t=a._id?"Editada":"Guardada";return this.mostrarMensaje({msj:[`Solicitud ${t} exitosamente.`],titulo:"Completado"}),this.close(),!0}return!1}catch(a){return this.mostrarError({mensaje:a,titulo:"Inesperado (guardarSolicitud)"}),!1}finally{this.ocultarLoading()}},async borrarSolicitud(){if(await this.$root.$confirm.open({titulo:"ELIMINAR",msj:["Una vez Eliminada no se podra recuperar.",`La Solicitud realizada el ${this.mostrarFecha(this.dataEdit.fecha,"time")}hs por ${this.areasDB.find((a=>a.id===this.dataEdit.origen))?.area?.replace?.(" ","_")} sera ELIMINADA.\n¿Desea continuar?`]}))try{this.mostrarLoading({titulo:"Borrando Solicitud..."});let a=null;return a=await this.requestAPI({method:"delete",url:`/vacunas/solicitud/${this.dataEdit._id}`}),!!a?.data?.ok&&(this.mostrarMensaje({msj:["Borrado exitosamente."],titulo:"Borrado Exitoso"}),this.close(),!0)}catch(a){return this.mostrarError({mensaje:a,titulo:"Inesperado (borrarSolicitud)"}),!1}finally{this.ocultarLoading()}},async getInsumoInfo(){try{if("Pendiente"===this.dataEdit.estado&&this.dataEdit.origen&&this.stockASolicitar.some((a=>!!a))){this.mostrarLoading({titulo:"Cargando informacion de los Insumos solicitados..."});let a=`area=${this.dataEdit.origen}&insumos=${JSON.stringify(this.stockASolicitar)}`,t=await this.requestAPI({method:"get",url:`/vacunas/stock/solicitud?${a}`}),e=await this.requestAPI({method:"get",url:`/vacunas/opciones/solicitud?${a}`});if(t?.data?.ok){for(let a=0;a<this.dataEdit.insumos.length;a++)this.dataEdit.insumos[a].stock=t.data.stock.find((t=>t.insumo===this.dataEdit.insumos[a].insumo))?.total??0,this.dataEdit.insumos[a].cant_min=e.data.opciones.find((t=>t.insumo===this.dataEdit.insumos[a].insumo))?.cant_min??"",this.$set(this.dataEdit.insumos,a,this.dataEdit.insumos[a]);return!0}return!1}return!1}catch(a){return this.mostrarError({mensaje:a,titulo:"Inesperado (getInsumoInfo)"}),!1}finally{this.ocultarLoading()}}}}),I=F,T=e(81656),V=(0,T.A)(I,S,C,!1,null,null,null),P=V.exports,K=e(62373),L={name:"vacunaSolicitudBuscar",components:{dateSelect:_.A,bodyDataTableDinamic:k.A,dialogSolicitud:P,componentFiltroAvanzado:K.A},data:()=>({areasFiltro:[],dataTable:[],dataTableSelected:"Todas",dataTableSelect:["Todas","Pendientes","Emergencias","Urgencias","Rutinas","Aceptadas","Rechazadas"],filtro:{desde:"",hasta:"",areas:[],insumos:[]},ultimoFiltro:{},search:"",paginacion:{sortBy:"fecha",descending:!0,rowsPerPage:10,page:1},headers:[{text:"Acciones",value:"id",align:"center",sortable:!1,width:"5%",ignore:!0},{text:"Fecha",value:"fecha",align:"left",class:"text-xs-left",width:"15%",ruta:"fecha",date:!0,time:!0},{text:"Identificador",value:"id_time",align:"left",class:"text-xs-left",width:"15%",ruta:"id_time"},{text:"Origen",value:"origenDB",align:"left",class:"text-capitalize text-xs-left",width:"15%",ruta:"origenDB"},{text:"Dirigida a",value:"destinoDB",align:"left",class:"text-capitalize text-xs-left",width:"20%",ruta:"destinoDB"},{text:"Estado",value:"estado",align:"left",class:"text-xs-left",width:"10%",ruta:"estado"},{text:"Motivo",value:"motivo",align:"left",class:"text-xs-left",width:"10%",ruta:"motivo"}]}),computed:{...(0,x.aH)(["loading","hoy","monthBefore","persona"]),headersDinamics(){return[...this.headers.filter((a=>!0!==a.ignore))]},dataTableFilter(){return this.dataTable?.filter((a=>"Todas"===this.dataTableSelected||("Pendientes"===this.dataTableSelected&&"Pendiente"===a.estado||("Rutinas"===this.dataTableSelected&&"Rutina"===a.motivo||("Urgencias"===this.dataTableSelected&&"Urgencia"===a.motivo||("Emergencias"===this.dataTableSelected&&"Emergencia"===a.motivo||("Aceptadas"===this.dataTableSelected&&"Aceptada"===a.estado||("Rechazadas"===this.dataTableSelected&&"Rechazada"===a.estado||void 0))))))))}},watch:{dataTableFilter(){this.paginacion.page>Math.ceil(this.dataTableFilter?.length/this.paginacion.rowsPerPage)&&(this.paginacion.page=1)}},async created(){this.filtro.desde=this.monthBefore,this.filtro.hasta=this.hoy;let a=[...await this.buscarAreaFiltros({filtro:{vacunatorio:!0},populate:"no",select:"area"})];this.persona.vacunas.general?.lectura||this.persona.vacunas.general?.gestion?(this.areasFiltro=a,this.filtro.areas=a.map((a=>a.id))):(this.filtro.areas=[],this.persona.vacunas.lectura&&(this.filtro.areas=[...this.filtro.areas,...this.persona.vacunas.lectura]),this.persona.vacunas.gestion&&(this.filtro.areas=[...this.filtro.areas,...this.persona.vacunas.gestion]),this.filtro.areas=Array.from(new Set(this.filtro.areas)),this.areasFiltro=await this.filtrarArrayParaSelectsDisabled({arraySelects:a,arrayEnable:this.filtro.areas,propCompare:"_id",onlyEnabled:!0})),await this.recargarDataTable(this.filtro)},methods:{...(0,x.PY)(["mostrarLoading","mostrarError","ocultarLoading","mostrarDialogIframe"]),...(0,x.i0)(["retroceder","routerResolve","filtrarArrayParaSelectsDisabled","requestAPI"]),...(0,x.i0)("main",["buscarAreaFiltros"]),...(0,x.i0)("vacunas",["actualizarDialogSolicitud","getRequestFilter"]),backgroundClass(a){if(!a)return"";try{if("Aceptada"===a.estado)return"background-color: green lighten-5";if("Rechazada"===a.estado)return"background-color: red lighten-4";if("Rutina"===a.motivo)return"background-color: blue lighten-4";if("Urgencia"===a.motivo)return"background-color: yellow lighten-4";if("Emergencia"===a.motivo)return"background-color: orange lighten-2"}catch(t){return""}},async recargarDataTable(a){if(a){let t=await this.buscarSolicitudesFiltro(a);t&&(this.dataTable=t,this.ultimoFiltro=this._cloneDeep(a))}else this.dataTable=await this.buscarSolicitudesFiltro(this.ultimoFiltro)},async buscarSolicitudesFiltro(a){try{this.mostrarLoading({titulo:"Buscando Solicitudes..."});let t=await this.getRequestFilter({payload:a});if(t.error)return;let e=null;return e=await this.requestAPI({method:"get",url:`/vacunas/solicitudes?${t.dato}`}),e?.data?.ok?e.data.solicitudes:[{origenDB:"error de carga, recargar pagina",id:void 0}]}catch(t){return this.mostrarError({mensaje:t,titulo:"Inesperado (buscarSolicitudesFiltro)"}),[{origenDB:"error de carga(buscarSolicitudesFiltro), recargar pagina",id:void 0}]}finally{this.ocultarLoading()}},async reporte(){if(this.filtro.areas.length>0){localStorage.setItem("localStorageTemp",JSON.stringify(this.filtro));let a=await this.routerResolve({name:"VacunaSolicitudesPendientesImprimir",query:{descarga:!1}});this.mostrarDialogIframe({src:a.href,titulo_name:`Vacunatorio Solicitudes ${this.filtro.desde} ~ ${this.filtro.hasta}`})}else this.mostrarError({errores:"",mensaje:"Complete por lo menos con un Vacunatorio para el reporte.",titulo:"Valores Requeridos."})},async imprimirSolicitud(a){try{localStorage.setItem("localStorageTemp",JSON.stringify(a.solicitud));let t=await this.routerResolve({name:"VacunaSolicitudImprimir",query:{descarga:!1}});this.mostrarDialogIframe({src:t.href,titulo_name:`Solicitud ${a.solicitud.id_time}`})}catch(t){this.mostrarError({mensaje:t,titulo:"Inesperado"})}}}},R=L,j=(0,T.A)(R,A,y,!1,null,null,null),q=j.exports},45011:function(a,t,e){e.r(t),e.d(t,{default:function(){return B}});var i=e(21999),r=e(28597),o=e(28383),s=e(3150),n=e(1899),l=e(37471),c=e(48122),d=e(81851),u=e(34172),m=e(41614),p=e(21527),g=e(69155),h=e(17912),f=e(55731),v=e(57e3),b=function(){var a=this,t=a._self._c;return t(c.A,{attrs:{fluid:"","grid-list-xs":""}},[t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"","text-xs-center":""}},[t(m.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[t(s.A,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[t(n.OQ,{staticClass:"px-0 text-uppercase"},[a._v("====== Gestion de Vacunas ======")])],1)],1)],1),t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[t(m.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",cuarto:"","darken-1":""}},[t(m.A,{attrs:{"px-3":""}},[t(p.A,{attrs:{medium:"",color:"white",left:""}},[a._v("vaccines")]),t("span",{staticClass:"title white--text"},[a._v("Vacunas / Stock")])],1),t(f.hc),t(o.A,{attrs:{fab:"",small:"",color:"primary darken-2"},on:{click:function(t){return a.retroceder()}}},[t(p.A,[a._v("far fa-arrow-alt-circle-left")])],1)],1),t(s.A,{staticClass:"elevation-6",attrs:{color:"grey lighten-2"}},[t(n.OQ,{staticClass:"px-0"},[t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"","text-xs-center":""}},[t(m.A,{attrs:{xs12:"","px-3":""}},[t(s.A,{staticClass:"grey lighten-3"},[t(g.A,{attrs:{"justify-center":"",row:"",wrap:""},on:{keypress:function(t){return!t.type.indexOf("key")&&a._k(t.keyCode,"enter",13,t.key,"Enter")?null:a.recargarDataTable(a.filtro)}}},[t(m.A,{attrs:{xs12:"",md10:"","px-3":"","my-3":""}},[t("componentFiltroAvanzado",{attrs:{filtro:a.filtro,areasFiltro:a.areasFiltro,insumos:{select:"nombre descripcion nombreC"},procedencia:!0}})],1)],1),t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[t(o.A,{staticClass:"white--text mb-2",attrs:{round:"",color:"cuarto darken-2",disabled:a.loading.estado,loading:a.loading.estado},on:{click:function(t){return a.recargarDataTable(a.filtro)}}},[t(p.A,{attrs:{medium:"",left:""}},[a._v("search")]),a._v(" Buscar Stock")],1),t(u.A,{staticClass:"hidden-xs-only mx-4 my-1 black",attrs:{vertical:""}}),t(o.A,{staticClass:"white--text mb-2",attrs:{round:"",color:"cuarto darken-2",disabled:a.loading.estado,loading:a.loading.estado},on:{click:function(t){return a.reporte({detalle:!0})}}},[t(p.A,{attrs:{medium:"",left:""}},[a._v("fas fa-file-invoice")]),a._v(" Stock Detallado")],1),t(u.A,{staticClass:"hidden-xs-only mx-4 my-1 black",attrs:{vertical:""}}),t(o.A,{staticClass:"white--text mb-2",attrs:{round:"",color:"cuarto darken-2",disabled:a.loading.estado,loading:a.loading.estado},on:{click:function(t){return a.reporte()}}},[t(p.A,{attrs:{medium:"",left:""}},[a._v("fa-solid fa-file-lines")]),a._v(" Stock")],1)],1)],1)],1)],1)],1)],1)],1),t(m.A,{attrs:{"pa-1":"","ma-1":"",xs12:"",cuarto:"","lighten-1":""}},[t(s.A,{staticClass:"elevation-6"},[t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",primary:""}},[t(m.A,{attrs:{"px-3":""}},[t(p.A,{attrs:{medium:"",color:"white",left:""}},[a._v("fa-solid fa-warehouse")]),t("span",{staticClass:"title white--text"},[a._v("Stock de Vacunatorio")])],1),t(f.hc)],1),t(l.A,[t(m.A,{attrs:{xs12:"",sm6:"",md4:"","px-2":""}},[t(v.W,{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":"",clearable:""},model:{value:a.search,callback:function(t){a.search=t},expression:"search"}})],1),t(f.hc),t(m.A,{attrs:{xs12:"",sm6:"",md4:"","px-2":""}},[t(r.A,{attrs:{items:a.dataTableSelect,label:"Mostrar","prepend-icon":"event",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:a.dataTableSelected,callback:function(t){a.dataTableSelected=t},expression:"dataTableSelected"}})],1)],1),t(d.A,{staticClass:"elevation-6",staticStyle:{"table-layout":"fixed"},attrs:{headers:a.headers,items:a.dataTableFilter,"item-key":"_id",pagination:a.paginacion,"rows-per-page-items":[5,10,25,50],loading:a.loading.estado,search:a.search},on:{"update:pagination":function(t){a.paginacion=t}},scopedSlots:a._u([{key:"no-results",fn:function(){return[t(i.A,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[a._v(' No se encontraron resultados para "'+a._s(a.search)+'". ')])]},proxy:!0},{key:"no-data",fn:function(){return[t(i.A,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[a._v(" No hay datos para mostrar. ")])]},proxy:!0},{key:"items",fn:function(e){return[t("tr",{class:a.backgroundClass(e),staticStyle:{cursor:"pointer"},on:{click:function(a){e.expanded=!e.expanded}}},a._l(a.headersDinamics,(function(a){return t("td",{key:a.text,class:a.class},[t("bodyDataTableDinamic",{attrs:{props:e,field:a}})],1)})),0)]}},{key:"expand",fn:function(e){return[t(s.A,{attrs:{flat:""}},[0===e.item.detalle?.length?t(g.A,{key:`${e.item._id}`,attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[t(m.A,{staticClass:"text-xs-center",attrs:{xs12:"","px-3":""}},[t("b",[a._v("Sin Stock")])])],1):a._l(e.item.detalle,(function(i,r){return[0!=r?t(u.A,{key:`${e.item._id}-${r}`,staticStyle:{"border-width":"2px 0px 0px 0px"},attrs:{color:"black"}}):a._e(),t(g.A,{key:`${e.item._id}-${r}`,class:a.detalleColors(i,r),attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[t(m.A,{attrs:{xs12:"",sm3:""}},[t(n.OQ,{staticClass:"px-2 py-1"},[a._v("Procedencia: "+a._s(i.procedencia?i.procedencia:"S/D"))])],1),t(m.A,{attrs:{xs12:"",sm3:""}},[t(n.OQ,{class:"px-2 py-1 "+(i.expirado?"font-weight-black":""+(i.porExpirar?"font-weight-bold":""))},[a._v("Lote: "+a._s(i.lote?i.lote:"S/D"))])],1),t(m.A,{attrs:{xs12:"",sm3:""}},[t(n.OQ,{class:"text-sm-center px-2 py-1 "+(i.expirado?"font-weight-black":""+(i.porExpirar?"font-weight-bold":""))},[a._v("Caduca: "+a._s(i.vencimiento?i.vencimiento:"S/D"))])],1),t(m.A,{attrs:{xs12:"",sm3:""}},[t(n.OQ,{staticClass:"text-sm-right font-weight-bold px-2 py-1"},[a._v("Cantidad: "+a._s(i.cantidad?i.cantidad.toLocaleString("es-AR"):"S/D"))])],1)],1)]}))],2)]}}])},[t(h.A,{attrs:{color:"blue",indeterminate:""}})],1)],1)],1),t(m.A,{attrs:{"pa-1":"","ma-1":"",red:"","darken-2":"",xs12:""}},[t(s.A,[t(n.OQ,{staticClass:"px-3 font-weight-medium"},[t("p",[t(p.A,{attrs:{color:"yellow darken-3",left:""}},[a._v(" warning ")]),t("b",[t("u",[a._v("Referencia de Colores:")])])],1),t("ul",[t("li",{staticClass:"green--text",attrs:{type:"square"}},[t("b",[t("u",[a._v("Verde:")])]),a._v(" Todos los lotes del Insumo estan "),t("b",[t("u",[a._v("OK")])]),a._v(". ")]),t("li",{staticClass:"pink--text text--accent-2",attrs:{type:"square"}},[t("b",[t("u",[a._v("Fucsia:")])]),a._v(" "),t("b",[t("u",[a._v("No Hay")])]),a._v(" Stock del Insumo Recomendado. ")]),t("li",{staticClass:"red--text",attrs:{type:"square"}},[t("b",[t("u",[a._v("Rojo:")])]),a._v(" Contiene por lo menos algun lote del Insumo "),t("b",[t("u",[a._v("Vencido")])]),a._v(". ")]),t("li",{staticClass:"orange--text",attrs:{type:"square"}},[t("b",[t("u",[a._v("Anaranjado:")])]),a._v(" Contiene por lo menos algun lote del Insumo "),t("b",[t("u",[a._v("Proximo a vencer")])]),a._v(" (90 dias). ")]),t("li",{staticClass:"pink--text text--lighten-3",attrs:{type:"square"}},[t("b",[t("u",[a._v("Rosa:")])]),a._v(" El Stock Total del Insumo esta por "),t("b",[t("u",[a._v("Debajo del Recomendado")])]),a._v(". ")])])])],1)],1)],1)],1)},A=[],y=(e(18111),e(22489),e(61701),e(13579),e(17642),e(58004),e(33853),e(45876),e(32475),e(15024),e(31698),e(95353)),x=e(42681),_=e(62373),k={name:"vacunaStockBuscar",components:{bodyDataTableDinamic:x.A,componentFiltroAvanzado:_.A},data:()=>({areasFiltro:[],dataTable:[],dataTableSelected:"Todos",dataTableSelect:["Todos","Vencidos","Por Vencer","Por Debajo del Recomendado","Proximo al Recomendado"],filtro:{areas:[],insumos:[],procedencias:[]},ultimoFiltro:{},search:"",paginacion:{sortBy:"areaDB",descending:!1,rowsPerPage:10,page:1},headers:[{text:"Area",value:"areaDB",align:"left",class:"text-xs-left",width:"35%",ruta:"areaDB"},{text:"Insumo",value:"insumoDB",align:"left",class:"text-xs-left",width:"41%",ruta:"insumoDB"},{text:"Total",value:"total",align:"left",class:"text-xs-right",width:"12%",ruta:"total"},{text:"Recomendado",value:"cant_min",align:"left",class:"text-xs-right",width:"12%",ruta:"cant_min"}]}),computed:{...(0,y.aH)(["loading","persona","hoy"]),headersDinamics(){return[...this.headers.filter((a=>!0!==a.ignore))]},dataTableFilter(){return this.dataTable?.filter((a=>"Todos"===this.dataTableSelected||(!("Por Vencer"!==this.dataTableSelected||!a.total_porExpirar)||(!("Vencidos"!==this.dataTableSelected||!a.total_expirado)||("Por Debajo del Recomendado"===this.dataTableSelected&&a.total<a.cant_min||("Proximo al Recomendado"===this.dataTableSelected&&a.cant_min<=a.total&&a.total<1.2*a.cant_min||void 0))))))}},watch:{dataTableFilter(){this.paginacion.page>Math.ceil(this.dataTableFilter?.length/this.paginacion.rowsPerPage)&&(this.paginacion.page=1)}},async created(){let a=await this.buscarAreaFiltros({filtro:{vacunatorio:!0},populate:"no",select:"area"});this.persona.vacunas.general?.lectura||this.persona.vacunas.general?.gestion?(this.areasFiltro=a,this.filtro.areas=a.map((a=>a.id))):(this.filtro.areas=[],this.persona.vacunas.lectura&&(this.filtro.areas=[...this.filtro.areas,...this.persona.vacunas.lectura]),this.persona.vacunas.gestion&&(this.filtro.areas=[...this.filtro.areas,...this.persona.vacunas.gestion]),this.filtro.areas=Array.from(new Set(this.filtro.areas)),this.areasFiltro=await this.filtrarArrayParaSelectsDisabled({arraySelects:a,arrayEnable:this.filtro.areas,propCompare:"_id",onlyEnabled:!0})),await this.recargarDataTable(this.filtro)},methods:{...(0,y.PY)(["mostrarError","mostrarDialogIframe"]),...(0,y.i0)(["retroceder","routerResolve","filtrarArrayParaSelectsDisabled"]),...(0,y.i0)("main",["buscarAreaFiltros"]),...(0,y.i0)("vacunas",["buscarStockAreas"]),detalleColors(a,t){try{if(a){let t={color:"grey",luz:"lighten",intensidad:4,subrayado:""};return a.expirado?(t.color="red",t.intensidad=3):a.porExpirar&&(t.color="orange",t.intensidad=4),`${t.color} ${t.luz}-${t.intensidad}`}return""}catch(e){return""}},backgroundClass(a){if(!a.item)return"";try{let t={color:"green",intensidad:"lighten-4",subrayado:"",negrita:""};return 0===a.item.total?(t.color="pink",t.intensidad="accent-1",t.negrita="table-row--negrita"):a.item.detalle.some((a=>!0===a.expirado))?(t.color="red",t.intensidad="lighten-2",t.negrita="table-row--negrita"):a.item.detalle.some((a=>!0===a.porExpirar))?(t.color="orange",t.intensidad="lighten-4",t.subrayado="",t.negrita=""):a.item.total<a.item.cant_min&&(t.color="pink",t.intensidad="lighten-4",t.negrita="table-row--negrita"),a.expanded&&(t.color="cyan",t.intensidad="lighten-4"),`background-color: ${t.color} ${t.intensidad} ${t.subrayado} ${t.negrita}`}catch(t){return""}},async recargarDataTable(a){if(a){let t=await this.buscarStockAreas(a);t&&(this.dataTable=t,this.ultimoFiltro=this._cloneDeep(a))}else this.dataTable=await this.buscarStockAreas(this.ultimoFiltro)},async reporte(a){if(this.filtro.areas.length>0){localStorage.setItem("localStorageTemp",JSON.stringify({...this.filtro,...a}));let t=await this.routerResolve({name:"VacunaStockImprimir",query:{descarga:!1}});this.mostrarDialogIframe({src:t.href,titulo_name:`Vacunatorio Stock${a?.detalle?" Detallado":""} ${this.hoy}`})}else this.mostrarError({errores:"",mensaje:"Complete por lo menos con un Vacunatorio para el reporte.",titulo:"Valores Requeridos."})}}},E=k,w=e(81656),D=(0,w.A)(E,b,A,!1,null,null,null),B=D.exports},28022:function(a,t,e){e.r(t),e.d(t,{default:function(){return F}});var i=e(21999),r=e(28597),o=e(28383),s=e(3150),n=e(1899),l=e(37471),c=e(48122),d=e(81851),u=e(34172),m=e(41614),p=e(21527),g=e(69155),h=e(17912),f=e(55731),v=e(57e3),b=e(17087),A=function(){var a=this,t=a._self._c;return t(c.A,{attrs:{fluid:"","grid-list-xs":""}},[t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"","text-xs-center":""}},[t(m.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[t(s.A,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[t(n.OQ,{staticClass:"px-0 text-uppercase"},[a._v("====== Gestion de Vacunas ======")])],1)],1)],1),t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[t(m.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",cuarto:"","darken-1":""}},[t(m.A,{attrs:{"px-3":""}},[t(p.A,{attrs:{medium:"",color:"white",left:""}},[a._v("vaccines")]),t("span",{staticClass:"title white--text"},[a._v("Vacunas / Transferencias")])],1),t(f.hc),t(o.A,{attrs:{fab:"",small:"",color:"primary darken-2"},on:{click:function(t){return a.retroceder()}}},[t(p.A,[a._v("far fa-arrow-alt-circle-left")])],1)],1),t(s.A,{staticClass:"elevation-6",attrs:{color:"grey lighten-2"}},[t(n.OQ,{staticClass:"px-0"},[t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"","text-xs-center":""}},[t(m.A,{attrs:{xs12:"","px-3":""}},[t(s.A,{staticClass:"grey lighten-3"},[t(g.A,{attrs:{"justify-center":"",row:"",wrap:""},on:{keypress:function(t){return!t.type.indexOf("key")&&a._k(t.keyCode,"enter",13,t.key,"Enter")?null:a.recargarDataTable(a.filtro)}}},[t(m.A,{attrs:{xs12:"",sm6:"",md3:"","px-3":""}},[t("dateSelect",{attrs:{value:a.filtro.desde,"background-color":"cuarto lighten-5",color:"cuarto",label:"Desde",icon:"today",max:a.filtro.hasta,requerido:"true"},model:{value:a.filtro.desde,callback:function(t){a.$set(a.filtro,"desde",t)},expression:"filtro.desde"}})],1),t(m.A,{attrs:{xs12:"",sm6:"",md3:"","px-3":""}},[t("dateSelect",{attrs:{value:a.filtro.hasta,"background-color":"cuarto lighten-5",color:"cuarto",label:"Hasta",icon:"event",min:a.filtro.desde,requerido:"true"},model:{value:a.filtro.hasta,callback:function(t){a.$set(a.filtro,"hasta",t)},expression:"filtro.hasta"}})],1),t(m.A,{attrs:{xs12:"",md10:"","px-3":"","mb-3":""}},[t("componentFiltroAvanzado",{attrs:{filtro:a.filtro,areasFiltro:a.areasFiltro,insumos:{select:"nombre descripcion nombreC"},procedencia:!0}})],1)],1),t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[t(o.A,{staticClass:"white--text mb-2",attrs:{round:"",color:"cuarto darken-2",disabled:a.loading.estado,loading:a.loading.estado},on:{click:function(t){return a.recargarDataTable(a.filtro)}}},[t(p.A,{attrs:{medium:"",left:""}},[a._v("search")]),a._v(" Buscar Transferencias")],1),t(u.A,{staticClass:"hidden-xs-only mx-4 my-1 black",attrs:{vertical:""}}),t(o.A,{staticClass:"white--text mb-2",attrs:{round:"",color:"cuarto darken-2",disabled:a.loading.estado,loading:a.loading.estado},on:{click:function(t){return a.reporte()}}},[t(p.A,{attrs:{medium:"",left:""}},[a._v("fa-solid fa-file-pdf")]),a._v(" Transferencias Estado PDF")],1)],1)],1)],1)],1)],1)],1)],1),t(m.A,{attrs:{"pa-1":"","ma-1":"",xs12:"",cuarto:"","lighten-1":""}},[t(s.A,{staticClass:"elevation-6"},[t(g.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",primary:""}},[t(m.A,{attrs:{"px-3":""}},[t(p.A,{attrs:{medium:"",color:"white",left:""}},[a._v("fa-solid fa-dolly")]),t("span",{staticClass:"title white--text"},[a._v("Transferencias de Vacunas")])],1),t(f.hc)],1),t(l.A,[t(m.A,{attrs:{xs12:"",sm4:"","px-2":""}},[t(v.W,{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":"",clearable:""},model:{value:a.search,callback:function(t){a.search=t},expression:"search"}})],1),t(f.hc),t(m.A,{attrs:{xs12:"",sm6:"",md4:"","px-2":""}},[t(r.A,{attrs:{items:a.dataTableSelect,label:"Mostrar","prepend-icon":"fa-solid fa-dolly",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:a.dataTableSelected,callback:function(t){a.dataTableSelected=t},expression:"dataTableSelected"}})],1),t(u.A,{staticClass:"hidden-xs-only mx-2 primary",attrs:{inset:"",vertical:""}}),t(o.A,{staticClass:"mb-2",attrs:{round:"",color:"primary",disabled:a.noGeneralNoGestion||a.loading.estado,loading:a.loading.estado},on:{click:function(t){return a.actualizarDialogIngresoTransferencia({state:!0,type:{transferencia:!0}})}}},[t(p.A,{attrs:{medium:"",left:""}},[a._v("input")]),a._v(" Nueva Transferencia")],1)],1),t(d.A,{staticClass:"elevation-6",staticStyle:{"table-layout":"fixed"},attrs:{headers:a.headers,items:a.dataTableFilter,"item-key":"_id",pagination:a.paginacion,"rows-per-page-items":[5,10,25,50],loading:a.loading.estado,search:a.search},on:{"update:pagination":function(t){a.paginacion=t}},scopedSlots:a._u([{key:"no-results",fn:function(){return[t(i.A,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[a._v(' No se encontraron resultados para "'+a._s(a.search)+'". ')])]},proxy:!0},{key:"no-data",fn:function(){return[t(i.A,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[a._v(" No hay datos para mostrar. ")])]},proxy:!0},{key:"items",fn:function(e){return[t("tr",{class:a.backgroundClass(e.item)},[t("td",{staticClass:"text-sm-left"},[t("div",{staticClass:"text-xs-center",staticStyle:{width:"90px"}},[t(b.A,{attrs:{top:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:i}){return[t(o.A,a._g({attrs:{disabled:a.noGeneralNoGestion||e.item.recibido||e.item.remito&&!e.item.retirado||a.noGeneralSiGestion&&!a.persona.vacunas.gestion?.includes(e.item.destino)||a.loading.estado,color:"white",small:"",icon:""},on:{click:function(t){return a.recibirIngreso({ingreso:{id:e.item._id,orden_compra:e.item.orden_compra,remito:e.item.remito},finish:a.recargarDataTable,confirm:a.$root.$confirm})}}},i),[t(p.A,{attrs:{color:e.item.recibido?"green":"red"}},[a._v(a._s(e.item.recibido?"task_alt":"radio_button_unchecked"))])],1)]}}],null,!0)},[t("span",[a._v("Recibir")])]),t(b.A,{attrs:{right:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:i}){return[t(o.A,a._g({attrs:{disabled:a.noGeneralNoGestion||e.item.retirado||a.noGeneralSiGestion&&!a.persona.vacunas.gestion?.includes(e.item.origen)||a.loading.estado,color:"white",small:"",icon:""},on:{click:function(t){return a.retirarTransferencia({remito:e.item.remito,finish:a.recargarDataTable})}}},i),[t(p.A,{attrs:{color:e.item.retirado?"green":"error"}},[a._v(a._s(e.item.retirado?"output":"check_box_outline_blank"))])],1)]}}],null,!0)},[t("span",[a._v("Retirar de Stock")])]),t(b.A,{attrs:{bottom:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:i}){return[t(o.A,a._g({attrs:{disabled:a.loading.estado,color:"white",small:"",icon:""},on:{click:function(t){return a.imprimirRemito({remito:e.item})}}},i),[t(p.A,{attrs:{color:"green"}},[a._v("print")])],1)]}}],null,!0)},[t("span",[a._v("Ver PDF")])]),t(b.A,{attrs:{right:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:i}){return[t(o.A,a._g({attrs:{disabled:a.loading.estado,color:"white",small:"",icon:""},on:{click:function(t){return a.actualizarDialogIngresoTransferencia({state:!0,type:{transferencia:!0},ingreso:{remito:e.item}})}}},i),[t(p.A,{attrs:{color:"blue"}},[a._v("visibility")])],1)]}}],null,!0)},[t("span",[a._v("Ver Transferencia")])])],1)]),a._l(a.headersDinamics,(function(a){return t("td",{key:a.text,class:a.class},[t("bodyDataTableDinamic",{attrs:{props:e,field:a}})],1)}))],2)]}}])},[t(h.A,{attrs:{color:"blue",indeterminate:""}})],1)],1)],1),t(m.A,{attrs:{"pa-1":"","ma-1":"",red:"","darken-2":"",xs12:""}},[t(s.A,[t(n.OQ,{staticClass:"px-3 font-weight-medium"},[t("p",[t(p.A,{attrs:{color:"yellow darken-3",left:""}},[a._v(" warning ")]),t("b",[t("u",[a._v("Referencia de Colores:")])])],1),t("ul",[t("li",{staticClass:"green--text",attrs:{type:"square"}},[t("b",[t("u",[a._v("Verde:")])]),a._v(" Transicion "),t("b",[t("u",[a._v("Finalizada")])]),a._v(" (Recibida). ")]),t("li",{staticClass:"orange--text",attrs:{type:"square"}},[t("b",[t("u",[a._v("Anaranjado:")])]),a._v(" Transicion incompleta falta que la "),t("b",[t("u",[a._v("Recibamos")])]),a._v(" en Destino. ")]),t("li",{staticClass:"text-yellow-shadow",attrs:{type:"square"}},[t("b",[t("u",[a._v("Amarillo:")])]),a._v(" Transicion incompleta falta que la "),t("b",[t("u",[a._v("Retiremos")])]),a._v(" del Origen. ")]),t("li",{staticClass:"grey--text",attrs:{type:"square"}},[t("b",[t("u",[a._v("Gris:")])]),t("ul",[t("li",[a._v(" Transicion incompleta falta que la "),t("b",[t("u",[a._v("Reciban")])]),a._v(" en Destino. ")]),t("li",[a._v(" Transicion incompleta falta que la "),t("b",[t("u",[a._v("Retiren")])]),a._v(" del Origen. ")])])])])])],1)],1)],1),t("dialogTransferencia",{attrs:{closeFinish:a.recargarDataTable}})],1)},y=[],x=(e(18111),e(22489),e(17642),e(58004),e(33853),e(45876),e(32475),e(15024),e(31698),e(95353)),_=e(81255),k=e(42681),E=e(33546),w=e(62373),D={name:"vacunaTransferenciaBuscar",components:{dateSelect:_.A,bodyDataTableDinamic:k.A,dialogTransferencia:E.A,componentFiltroAvanzado:w.A},data:()=>({areasFiltro:[],noGeneralNoGestion:!1,noGeneralSiGestion:!1,dataTable:[],dataTableSelected:"Todos",dataTableSelect:["Todos","Aptos para que Retiremos","Aptos para que Recibamos","Transiciones Incompletas","Transiciones Finalizadas"],filtro:{desde:"",hasta:"",areas:[],insumos:[],procedencias:[]},ultimoFiltro:{},search:"",paginacion:{sortBy:"remito",descending:!0,rowsPerPage:10,page:1},headers:[{text:"Acciones",value:"id",align:"center",sortable:!1,width:"5%",ignore:!0},{text:"Fecha",value:"fecha",align:"left",class:"text-xs-left",width:"15%",ruta:"fecha",date:!0,time:!0},{text:"Transf. Origen",value:"origenDB",align:"left",class:"text-capitalize text-xs-left",width:"20%",ruta:"origenDB"},{text:"Destino",value:"destinoDB",align:"left",class:"text-capitalize text-xs-left",width:"20%",ruta:"destinoDB"},{text:"Remito Transf.",value:"remito",align:"left",class:"text-xs-right",width:"20%",ruta:"remito"},{text:"Fec. Planificada",value:"fec_planificada",align:"left",class:"text-xs-left",width:"10%",ruta:"fec_planificada",date:!0},{text:"Retirado Origen",value:"retirado",align:"left",class:"text-xs-left",width:"10%",ruta:"retirado",date:!0,time:!0},{text:"Recibido Destino",value:"recibido",align:"left",class:"text-xs-left",width:"10%",ruta:"recibido",date:!0,time:!0}]}),computed:{...(0,x.aH)(["loading","hoy","monthBefore","persona"]),headersDinamics(){return[...this.headers.filter((a=>!0!==a.ignore))]},dataTableFilter(){return this.dataTable?.filter((a=>"Todos"===this.dataTableSelected||(!("Transiciones Finalizadas"!==this.dataTableSelected||!a.recibido)||(!("Transiciones Incompletas"!==this.dataTableSelected||a.retirado&&a.recibido)||(!("Aptos para que Retiremos"!==this.dataTableSelected||a.retirado||!this.persona.vacunas.general?.gestion&&!this.persona.vacunas.gestion?.includes(a.origen))||(!("Aptos para que Recibamos"!==this.dataTableSelected||!a.retirado||a.recibido||!this.persona.vacunas.general?.gestion&&!this.persona.vacunas.gestion?.includes(a.destino))||void 0))))))}},watch:{dataTableFilter(){this.paginacion.page>Math.ceil(this.dataTableFilter?.length/this.paginacion.rowsPerPage)&&(this.paginacion.page=1)}},async created(){this.filtro.desde=this.monthBefore,this.filtro.hasta=this.hoy,this.persona.vacunas.general?.gestion||(this.persona.vacunas.gestion?this.noGeneralSiGestion=!0:this.noGeneralNoGestion=!0);let a=[...await this.buscarAreaFiltros({filtro:{vacunatorio:!0},populate:"no",select:"area"})];this.persona.vacunas.general?.lectura||this.persona.vacunas.general?.gestion?(this.areasFiltro=a,this.filtro.areas=a.map((a=>a.id))):(this.filtro.areas=[],this.persona.vacunas.lectura&&(this.filtro.areas=[...this.filtro.areas,...this.persona.vacunas.lectura]),this.persona.vacunas.gestion&&(this.filtro.areas=[...this.filtro.areas,...this.persona.vacunas.gestion]),this.filtro.areas=Array.from(new Set(this.filtro.areas)),this.areasFiltro=await this.filtrarArrayParaSelectsDisabled({arraySelects:a,arrayEnable:this.filtro.areas,propCompare:"_id",onlyEnabled:!0})),await this.recargarDataTable(this.filtro)},methods:{...(0,x.PY)(["mostrarLoading","ocultarLoading","mostrarError","mostrarMensaje","mostrarDialogIframe"]),...(0,x.i0)(["retroceder","filtrarArrayParaSelectsDisabled","requestAPI","routerResolve"]),...(0,x.i0)("main",["buscarAreaFiltros"]),...(0,x.i0)("vacunas",["actualizarDialogIngresoTransferencia","getRequestFilter","recibirIngreso"]),backgroundClass(a){if(!a)return"";try{return a.recibido?"background-color: green lighten-5":this.noGeneralNoGestion?"background-color: grey lighten-4":this.persona.vacunas.general?.gestion?a.remito&&!a.retirado?"background-color: yellow lighten-4":"background-color: orange lighten-4":a.remito&&!a.retirado&&this.persona.vacunas.gestion?.includes(a.origen)?"background-color: yellow lighten-4":a.retirado&&this.persona.vacunas.gestion?.includes(a.destino)?"background-color: orange lighten-4":"background-color: grey lighten-4"}catch(t){return""}},async recargarDataTable(a){if(a){let t=await this.buscarTransferenciasFiltro(a);t&&(this.dataTable=t,this.ultimoFiltro=this._cloneDeep(a))}else this.dataTable=await this.buscarTransferenciasFiltro(this.ultimoFiltro)},async buscarTransferenciasFiltro(a){try{this.mostrarLoading({titulo:"Buscando Transferencias..."});let t=await this.getRequestFilter({payload:a});if(t.error)return;let e=null;return e=await this.requestAPI({method:"get",url:`/vacunas/transferencias?${t.dato}`}),e?.data?.ok?e?.data?.transferencias:[{remito:"error de carga(buscarTransferenciasFiltro), recargar pagina",id:void 0}]}catch(t){return this.mostrarError({mensaje:t,titulo:"Inesperado"}),[{remito:"error de carga(buscarTransferenciasFiltro.catch), recargar pagina",id:void 0}]}finally{this.ocultarLoading()}},async retirarTransferencia(a){try{if(await this.$root.$confirm.open({titulo:"RETIRAR",msj:["Verifique que todos las Vacunas esten cargadas correctamente,\nuna vez Retirado no se podra modificar.","Se retiraran del Stock las Cantidades de las Vacunas correspondientes.",`La Transferencia: ${a.remito}, sera marcada como RETIRADA.\n¿Desea continuar?`]})){this.mostrarLoading({titulo:"Retirando Stock..."});let t=null;return t=await this.requestAPI({method:"put",url:"/vacunas/retirar",update:a}),!!t?.data?.ok&&(this.mostrarMensaje({msj:["Retirado exitosamente."],titulo:"Completado"}),a.finish&&a.finish(),t.data.retirado)}}catch(t){return this.mostrarError({mensaje:t,titulo:"Inesperado"}),!1}finally{this.ocultarLoading()}},async reporte(){if(this.filtro.areas.length>0){localStorage.setItem("localStorageTemp",JSON.stringify(this.filtro));let a=await this.routerResolve({name:"VacunaTransferenciaEstadoImprimir",query:{descarga:!1}});this.mostrarDialogIframe({src:a.href,titulo_name:`Vacunatorio Transferencias ${this.filtro.desde} ~ ${this.filtro.hasta}`})}else this.mostrarError({mensaje:"Complete por lo menos con un Vacunatorio para el reporte.",titulo:"Valores Requeridos."})},async imprimirRemito(a){try{localStorage.setItem("localStorageTemp",JSON.stringify(a.remito));let t=await this.routerResolve({name:"VacunaRemitoImprimir",query:{descarga:!1}});this.mostrarDialogIframe({src:t.href,titulo_name:`Remito ${a.remito.remito}`})}catch(t){this.mostrarError({mensaje:t,titulo:"Inesperado"})}}}},B=D,S=e(81656),C=(0,S.A)(B,A,y,!1,null,null,null),F=C.exports},19400:function(a){a.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAtNQTFRFAAAAAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3BAK3B0ccNVgAAAPF0Uk5TADGNEIMoZD1Sb5dpeoxfLAp4ER0goGZupB8MVkEIKqcmKRljDxqTTN9ThjYYFy8zLUicApaImySQkpm/bUN8gHdFV3l7B2AjHkuxj+vDxfisSpFPXXFGlLu0s4eazNE7AT9YN3OLMGguUX6EcA5aZ3U4joolpkRiFa41OQ3EdGEhtWVHf7x9t1tVVFxsOgUrnbCfPKLIoVkEldTdwjSvshIbuajTJ0lrUK2riYJCXk4UyhaqpXI+QDIJavUTqQP/5Loi0Mej19vVzYEc2tjAttwG6QvP7b3e8eq44eLG8nae703lhdLs6OaYvs7JwdbwAN7TBj8AAAa8SURBVHic3dd5NJR7GAfw389EQzJjzTYtttuEIUaiRc1MKqVbtIy0iG6WcE9SWkh1UIooqlFEm2Wo4RaJwu1aJ6ZGMiJbRGHGmmVquNNyOudmZkzuH/ec+/wx77znfb6f932fd97fOQPBvyz4vwfg1xqZLID8BvROEkBD2C2B/iyMScD2SQDq3QpvNWGLhCaEreiunwbm9MjDeqADvw2CO/ZaHMBggKsI+Zm+jy3zWfOq9Svwg9Mg3bxs4StJ7RJxAMsvZwM1ugj+ptIIwnzCcxziXfcc6bea4IEYgM0XYCgHAJxWXznPGrJUBlGNxl/vIkkMYOu3B1c/ZAhbJJsXUrfwJ1H7C4S3yMWYSr1a6/gJAAuoLQejvXhTnve3kbllM/LmAdTLWQzvToUoYK49o7L0w0RXoAovuUX4wj+rPXrRTxdA6pZOmivsinO+14Y4EuV9MhAeFw2cuOyIggFILxQMPMlQ7tJQloCJjt0dc+FZBwxtrvLp8HbkqJKPCGDhLE3NEEklZ8h9rR+y1igc/D5QySPAw1gOaCKZ3Z+itDbTVM1dBHDqPUIX+ncitPbGyDtB2HUIACUVTrDL9waK1CXcNRFAfDs73KVEzo2j6HoFNkRHwP72Al0qxdOsthk/wgRawRfxuOTV7CChgB6JGwuSnZEckAJhrIJ95L76uwf3oy0lrVKwH86ACMzYcPYmaMcTCvicAyvqLqzjf7tXcLMjRgNW4DcO8ve0iB/yv7yPD7bPd2UFCL+F7Bc4yJ06dGSw4XQRYDvnWbDukDoaP63WKARP1HixJP9nPnUjhgQRQ5R8D4hTtyjJe8mnWiXpVw2tMJKNd+xVgUsB7uI7h09K6YzTqgwRQyxqvmxnREWlJBKGiR/ROnQfGc+biZZRY6F3lFM1/tozsOuos9pWjQrhwPmO4M8bmnqB4ebdbJmOfoRP54mT2836Rs9ftr1t/Nhu1UvFbHSIcEDyI7hdstOMUq5DsnVWvphY8zghhsUgm8OwA1lrMrRwRh4JBh5GBfuEAvyqMGdAw/kbbxqYrAzzkss7kjL7IJL5ZTVCEYOSOzbdmgbJhBERAAtfUerk4wqPo7We8UjeYVkRtMi2r4fkNjQSs0f0Mu4M2YsA7J2u0eJGlwff2M3UWFAmk75/+ob8/q/XPNP2nkPKKmvEUXShMMDKhYVNoy8Pzk6xK1HB5haN+XeuPMfuxG8yOG/bfKNcbcqGEGD+tN66ThiQ+pCzjK7y6VnRZk5TAnVqG+HCxwt90mNjD3zKZd8H23cXv3MvkEggfc+PA0LwXU+WnGF5NvWMVlznqHok8H9062bTyddaOQAws1ViNychOfhtBKHA59Kltkr5WpXyWqWoZFSW8cDJN1UMVvwxALAjINLEdH/q/uwEocCSlUE7HpHkQwHYY0xhaw1lwMMeEY8rd+JDeU7MB0FOg35y1devYs4IBZSP+dqSmdXT+afYlXrBMzepLXDHIhvTeZnaxwZyPDEFXhkGXlx1d2+hwFbf1Iww7nDksJ/KoLmLSba360B08fmztb3Ixfkr/FzeG2ec0EyzyrooFFDq3aHLtqvRPWVfcmD9ruMhMQEOOoiiaOI9i9JthsBJj7bItrklt6FN5BDV3de03Hpr0ygle2ib4uwgMGONuz+heSSOfwid0cpKf5lpA4QC6vq5/E9KIP3hu77CmWH6oWeafFs9Ow8hTdZHNfOfftQoyukfgR8BD7ZGeU8lSM+/unHu88ybjTIVsWvqztkHjTLC427UA2C6qTxNJIBDHb3aW+yKWVIZ53+3fg6yaK2Z2yN1+qeU3MjUdD12OUFDJ04koO9/v1GaW8XQ2VPaTxrjVLpUNzRgyhAWWBPXZNlqctxgRR4QCSRRa16DqVXJf3Cuwjqgl1NqoV1wfRdNbvA20XKHGxhfPwIyxEsDx8zpl+jKILr9yevexhdF67C6jlNY0vtC3gjIjwPw2hvv36aYyEez3Hf34va8iDVTfllryqKFYxdvEJQfB6gpjNo47l4YSHrB3zGdScwxZXbu5TkKzAoEnPOagHqxh6W/8IhoIKlp6TDp7NJl9wkC2ycGSEMSTNKv4VhemsD2iQEaM/xKvPyQAT4zTmD/hEBoT3e1Q0GGrdM6nsD+CQHZAIlXUjXYJTH54uXHASsK2xQUF2CkI8XMjx+iW9SCQkOWdYDAbjGAs6rX89rTVxr3TBYwl0Ow/dLKvHwEdosB+PVdxjzZZ0KtmiygrzpLXfPh2xz0ZAGweWdjovRvZHHzAlZlCgWyssR9E4T8Z6IIWnp+BviZ+u+BvwGckqtfaTAQ1gAAAABJRU5ErkJggg=="},20116:function(a,t,e){var i=e(46518),r=e(69565),o=e(72652),s=e(79306),n=e(28551),l=e(1767),c=e(9539),d=e(84549),u=d("find",TypeError);i({target:"Iterator",proto:!0,real:!0,forced:u},{find:function(a){n(this);try{s(a)}catch(i){c(this,"throw",i)}if(u)return r(u,this,a);var t=l(this),e=0;return o(t,(function(t,i){if(a(t,e++))return i(t)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})}}]);