"use strict";(self["webpackChunksecretaria_de_salud_moreno_frontend"]=self["webpackChunksecretaria_de_salud_moreno_frontend"]||[]).push([[914],{2686:function(a,t,o){o.r(t),o.d(t,{default:function(){return y}});var r=o(6194),e=o(8956),i=o(2353),s=o(6530),n=o(108),l=o(683),c=o(445),u=o(3667),d=o(9456),m=o(8143),h=function(){var a=this,t=a._self._c;return t(s.Z,{attrs:{"grid-list-xs":""}},[t(d.Z,{attrs:{"align-center":"","justify-center":"","ma-0":"",wrap:"","text-xs-center":""}},[t(l.Z,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[t(e.Z,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[t(i.ZB,{staticClass:"px-0 text-uppercase"},[a._v("====== Patrimonio ======")])],1)],1),t(l.Z,{attrs:{"pa-1":"","ma-1":"",terciary:"",xs12:""}},[t(d.Z,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",terciary:"","darken-2":""}},[t(l.Z,{attrs:{"text-xs-left":"","px-3":""}},[t(u.Z,{attrs:{medium:"",color:"white",left:""}},[a._v("library_books")]),t("span",{staticClass:"title white--text"},[a._v("Editar Objeto")])],1),t(m.Cl),t(n.Z,{staticClass:"hidden-xs-only mx-2 my-1 white",attrs:{vertical:""}}),t(r.Z,{staticClass:"white--text",attrs:{round:"",to:{name:"PatrimonioBuscar"},color:"terciary darken-1",disabled:a.loading.estado,loading:a.loading.estado}},[a._v("Buscar Objetos")])],1),t(e.Z,{staticClass:"elevation-6"},[t(i.ZB,[t(c.Z,{ref:"form",attrs:{"lazy-validation":""},model:{value:a.valido,callback:function(t){a.valido=t},expression:"valido"}},[t("formObjeto",{attrs:{formulario:a.objeto,persona:a.persona,areas:a.areas,editar:!0}})],1)],1),t(d.Z,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",terciary:"","lighten-2":""}},[t(m.Cl),t(r.Z,{staticClass:"white--text",attrs:{round:"",to:{name:"PatrimonioBuscar"},color:"red darken-1",disabled:a.loading.estado,loading:a.loading.estado}},[a._v(" Cancelar")]),t(n.Z,{staticClass:"hidden-xs-only mx-2 my-1 black",attrs:{vertical:""}}),t(r.Z,{class:{"terciary darken-1":a.valido,"error darken-1":!a.valido},attrs:{round:"",dark:"",disabled:a.loading.estado,loading:a.loading.estado},on:{click:a.editar}},[a._v(" "+a._s(a.valido?"Editar Objeto":"Formulario No valido"))])],1)],1)],1)],1)],1)},f=[],p=o(629),b=o(7816),j={name:"patrimonioEditar",components:{formObjeto:b.Z},data:()=>({valido:!0,areas:[],objeto:{categoria:"",inventario:null,serie:null,marca:null,modelo:null,dependencia:null,fec_alta:null,area:null,ubicacion:null,detalle:null,funciona:"Funcionando",resumen_percance:null,fec_percance:null,motivo_baja:null,fec_baja:null,motivo_eliminacion:null,usuario_eliminacion:null,fec_eliminacion:null,verificado:null,usuario_verifico:null,fec_verifico:null,estado:null,micro:null,mother:null,memmoria_tipo:null,memoria:null,disco_tipo:null,disco:null,fuente:null,PC:null,pulgadas:null,tipoPantalla:null,impresora_tipo:null,impresora_multifuncion:null,telefono_interno:null,cantidad:null,subcategoria:null,compatibilidad:null,verificar:"true"}}),watch:{"objeto.subcategoria":function(a){"Toner"!==a&&(this.objeto.compatibilidad=null)}},computed:{...(0,p.rn)(["APIURL","axiosConfig","loading","persona"])},async created(){this.areas.push(...await this.buscarAreaFiltros({filtro:"todos",populate:"no",select:"area"})),await this.cargarObjeto(this.$route.params.id),this.persona.informatica<2&&"Insumos"===this.objeto.categoria&&(this.mostrarError({mensaje:"Acceso Denegado, permisos insuficientes",titulo:401}),this.$router.push({name:"PatrimonioBuscar"}))},methods:{...(0,p.OI)(["mostrarLoading","ocultarLoading","mostrarError","mostrarMensaje"]),...(0,p.nv)("main_areas",["buscarAreaFiltros"]),async cargarObjeto(a){try{this.mostrarLoading({titulo:"Cargando datos...",color:"primary"});let o=JSON.stringify({_id:a}),r=JSON.stringify({area:!1,usuario_eliminacion:!0,usuario_verifico:!0}),e=await this.axios.get(`${this.APIURL}/patrimonio/buscar?filtro=${o}&populate=${r}`,this.axiosConfig);if(e.data.ok)for(const a in e.data.objetos[0])e.data.objetos[0].hasOwnProperty(a)&&("fec_movio"===a||"fec_verifico"===a||"fec_alta"===a||"fec_eliminacion"===a||"fec_baja"===a||"fec_percance"===a?this.objeto[a]=this.mostrarFecha(e.data.objetos[0][a]):"number"===typeof e.data.objetos[0][a]?this.objeto[a]=e.data.objetos[0][a].toString():this.objeto[a]=e.data.objetos[0][a]);else try{this.mostrarError({mensaje:e.data.err.message,titulo:e.status})}catch(t){this.mostrarError({mensaje:"Problemas con el servidor, Intente mas tarde.",titulo:500})}}catch(t){try{this.mostrarError({errores:t.response.data.err.errors,mensaje:t.response.data.err.message,titulo:t.response.status})}catch(t){this.mostrarError({mensaje:"Problemas con el servidor, Intente mas tarde.",titulo:500})}this.$router.push({name:"PatrimonioBuscar"})}finally{this.ocultarLoading()}},async editar(){if(this.$refs.form.validate()){let t=Object.assign({},this.objeto);try{this.mostrarLoading({titulo:"Enviando datos...",color:"primary"});let o=await this.axios.put(this.APIURL+"/patrimonio/"+this.objeto._id,t,this.axiosConfig);if(o.data.ok)o.data.objeto.inventario?this.mostrarMensaje({msj:["Objeto Editado exitosamente.","<##> NÂº Inventario: "+o.data.objeto.inventario.toString()+"<##>"],titulo:"Modificacion Exitosa"}):this.mostrarMensaje({msj:["Objeto Editado exitosamente."],titulo:"Modificacion Exitosa"}),this.$router.push({name:"PatrimonioBuscar"});else try{this.mostrarError({mensaje:o.data.err.message,titulo:o.status})}catch(a){this.mostrarError({mensaje:"Problemas con el servidor, Intente mas tarde.",titulo:500})}}catch(a){try{this.mostrarError({errores:a.response.data.err.errors,mensaje:a.response.data.err.message,titulo:a.response.status})}catch(a){this.mostrarError({mensaje:"Problemas con el servidor, Intente mas tarde.",titulo:500})}}finally{this.ocultarLoading()}}else this.mostrarError({mensaje:"Revise los campos obligatorios.",titulo:"Valores Requeridos."})}}},g=j,_=o(1001),v=(0,_.Z)(g,h,f,!1,null,null,null),y=v.exports}}]);