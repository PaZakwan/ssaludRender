"use strict";(self["webpackChunksecretaria_de_salud_moreno_frontend"]=self["webpackChunksecretaria_de_salud_moreno_frontend"]||[]).push([[15],{5167:function(t,e,a){a.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t._self._c;return t.field.array?e("span",[t.field.object?e("span",t._l(t._get(t.props.item,t.field.ruta),(function(a,i){return e("code",{key:`${t.field.text}-${i}`,attrs:{STYLE:"margin:4px"}},[t.field.keyShow?e("span",[t._v(t._s(t.field.date?t.mostrarFecha(a[t.field.keyShow],t.field.time):a[t.field.keyShow]||"0"==a[t.field.keyShow]?a[t.field.keyShow]:"S/D"))]):e("span",t._l(a,(function(r,s,o){return e("span",{key:`${t.field.text}-${i}-${s}`},[t._v(t._s(s)+": "),e("kbd",[t._v(t._s(isNaN(r)&&"Invalid Date"!==t.mostrarFecha(r,t.field.time)?t.mostrarFecha(r,t.field.time)||"S/D":r||"0"==r?r:"S/D"))]),o!=Object.keys(a).length-1?e("span",[t._v(t._s("\n"))]):t._e()])})),0)])})),0):e("span",t._l(t._get(t.props.item,t.field.ruta),(function(a,i){return e("code",{key:`${t.field.text}-${i}`,attrs:{STYLE:"margin:4px"}},[t._v(t._s(t.field.date?t.mostrarFecha(a,t.field.time):a||"0"==a?a:"S/D"))])})),0)]):t.field.object?e("span",[e("code",{attrs:{STYLE:"margin:4px"}},[t.field.keyShow?e("span",[t._v(t._s(t.field.date?t.mostrarFecha(t._get(t.props.item,t.field.ruta)[t.field.keyShow],t.field.time):t._get(t.props.item,t.field.ruta)[t.field.keyShow]||"0"==t._get(t.props.item,t.field.ruta)[t.field.keyShow]?t._get(t.props.item,t.field.ruta)[t.field.keyShow]:"--------"))]):e("span",t._l(t._get(t.props.item,t.field.ruta),(function(a,i,r){return e("span",{key:`${t.field.text}-${i}`},[t._v(t._s(i)+": "),e("kbd",[t._v(t._s(isNaN(a)&&"Invalid Date"!==t.mostrarFecha(a,t.field.time)?`${t.mostrarFecha(a,t.field.time)}`||"S/D":a||"0"==a?`${a}`:"S/D"))]),r!=Object.keys(t._get(t.props.item,t.field.ruta)).length-1?e("span",[t._v(t._s("\n"))]):t._e()])})),0)])]):e("span",{style:""+(t.field.numeric&&t._get(t.props.item,t.field.ruta)<0?"color: red;":"")},[t._v(t._s(t.field.date?t.mostrarFecha(t.props.item[t.field.ruta],t.field.time):t.field.boolean?""+(t._get(t.props.item,t.field.ruta)&&"false"!=t._get(t.props.item,t.field.ruta)&&"0"!=t._get(t.props.item,t.field.ruta)?"Si":"No"):t._get(t.props.item,t.field.ruta)||"0"==t._get(t.props.item,t.field.ruta)?t._get(t.props.item,t.field.ruta):"--------"))])},r=[],s={name:"body-data-table-dinamic",props:["props","field"]},o=s,l=a(1001),n=(0,l.Z)(o,i,r,!1,null,null,null),c=n.exports},5967:function(t,e,a){a.d(e,{Z:function(){return p}});var i=a(6961),r=a(683),s=a(9456),o=a(5084),l=a(4618),n=function(){var t=this,e=t._self._c;return e(s.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(r.Z,{attrs:{xs12:"","px-2":""}},[e(o.Z,{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(l.h,t._g({attrs:{clearable:!t.soloLect&&!!t.clear,"background-color":t.soloLect?`${t.color} lighten-2`:`${t.color} lighten-5`,label:t.label,"prepend-icon":t.prepend,readonly:"",color:`${t.color} darken-3`,rules:t.req?t.validate:[]},on:{"click:clear":function(e){return t.$emit("input","")}},model:{value:t.fecha,callback:function(e){t.fecha=e},expression:"fecha"}},a))]}}]),model:{value:t.menufecha1,callback:function(e){t.menufecha1=e},expression:"menufecha1"}},[e(i.Z,{attrs:{readonly:t.soloLect,"allowed-dates":t.allowedDates,min:t.fecMin,max:t.fecMax,color:`${t.color} darken-3`,"header-color":`${t.color} darken-1`,locale:"mx"},on:{input:function(e){t.menufecha1=!1,t.$emit("input",e)}},model:{value:t.fecha,callback:function(e){t.fecha=e},expression:"fecha"}})],1)],1)],1)},c=[],d={name:"date-select",props:["value","label","icon","color","soloLectura","requerido","min","max","filtro","clearable"],data(){return{menufecha1:!1,validate:[t=>t?""===t.trim()?"Este campo es requerido.":!(t&&t.length<10)||"Ingrese fecha valida (AAAA-MM-DD).":"Este campo es requerido."]}},computed:{fecha:function(){return this.value},soloLect:function(){return this.soloLectura||!1},prepend:function(){return this.icon||"event"},req:function(){return this.requerido||!1},clear:function(){return this.clearable||!1},fecMin:function(){return"-1"===this.min?new Date((new Date).setFullYear((new Date).getFullYear()-1)).toISOString().substr(0,10):this.min?this.min:void 0},fecMax:function(){return"+1"===this.max?new Date((new Date).setFullYear((new Date).getFullYear()+1)).toISOString().substr(0,10):this.max?this.max:void 0},restriction:function(){return this.filtro||[]}},methods:{allowedDates:function(t){return!this.restriction.includes(new Date(t).getUTCDay())}}},u=d,f=a(1001),h=(0,f.Z)(u,n,c,!1,null,null,null),p=h.exports},8476:function(t,e,a){a.r(e),a.d(e,{default:function(){return $}});var i=a(8469),r=a(7416),s=a(6194),o=a(8956),l=a(2353),n=a(9418),c=a(6530),d=a(7352),u=a(108),f=a(683),h=a(445),p=a(3667),m=a(9456),g=a(6446),v=a(8143),x=a(4618),_=function(){var t=this,e=t._self._c;return e(c.Z,{attrs:{fluid:"","grid-list-xs":""}},[e(m.Z,{attrs:{row:"",wrap:"","align-center":"","justify-center":"","text-xs-center":""}},[e(f.Z,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[e(o.Z,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[e(l.ZB,{staticClass:"px-0 text-uppercase"},[t._v("====== Historial Clinico Electronico Municipal (HICLEM) ======")])],1)],1)],1),e(m.Z,{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[e(f.Z,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[e(o.Z,{staticClass:"white--text",attrs:{color:"cuarto darken-1"}},[e(m.Z,{attrs:{row:""}},[e(f.Z,{attrs:{"px-3":""}},[e(l.ZB,{staticClass:"px-0 text-uppercase"},[t._v("==##== Control / Hojas 2.1 ==##==")])],1),e(v.Cl),e(s.Z,{attrs:{fab:"",small:"",color:"primary darken-2"},on:{click:function(e){return t.retroceder()}}},[e(p.Z,[t._v("far fa-arrow-alt-circle-left")])],1)],1)],1),e(o.Z,{staticClass:"elevation-6",attrs:{color:"grey lighten-2"}},[e(l.ZB,{staticClass:"px-0"},[e(m.Z,{attrs:{row:"",wrap:"","align-center":"","justify-center":"","text-xs-center":""}},[e(f.Z,{attrs:{xs12:"","px-3":""}},[e(o.Z,{staticClass:"grey lighten-3"},[e(h.Z,{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valido,callback:function(e){t.valido=e},expression:"valido"}},[e(m.Z,{attrs:{"justify-center":"",row:"",wrap:""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.consultaHojas2()}}},[e(f.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[e("dateSelect",{staticClass:"capitalizar",attrs:{value:t.filtro.desde,"background-color":"cuarto lighten-5",color:"cuarto",label:"Desde",icon:"event",max:t.filtro.hasta,requerido:"true"},model:{value:t.filtro.desde,callback:function(e){t.$set(t.filtro,"desde",e)},expression:"filtro.desde"}})],1),e(f.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[e("dateSelect",{staticClass:"capitalizar",attrs:{value:t.filtro.hasta,"background-color":"cuarto lighten-5",color:"cuarto",label:"Hasta",icon:"event",min:t.filtro.desde,requerido:"true"},model:{value:t.filtro.hasta,callback:function(e){t.$set(t.filtro,"hasta",e)},expression:"filtro.hasta"}})],1),e(f.Z,{attrs:{xs12:"",sm4:"","px-3":""}},[e(r.Z,{staticClass:"capitalizar",attrs:{clearable:"","background-color":"cuarto lighten-5",color:"cuarto",items:t.optionsJson.motivo_especialidad,label:"Especialidad de la Hoja 2.1","prepend-icon":"fas fa-stethoscope",rules:[...t.rules.requerido]},on:{"click:clear":function(e){t.$nextTick((()=>t.filtro.especialidad=null))}},model:{value:t.filtro.especialidad,callback:function(e){t.$set(t.filtro,"especialidad",e)},expression:"filtro.especialidad"}})],1),e(f.Z,{attrs:{xs12:"",sm4:"","px-3":""}},[e(r.Z,{staticClass:"capitalizar",attrs:{clearable:"","background-color":"cuarto lighten-5","item-value":"id","item-text":"area",items:t.unidadesAtencionDB,label:"Lugar de Atencion","prepend-icon":"fa-house-medical-flag",color:"cuarto"},on:{"click:clear":function(e){t.$nextTick((()=>t.filtro.area=null))}},model:{value:t.filtro.area,callback:function(e){t.$set(t.filtro,"area",e)},expression:"filtro.area"}})],1),e(f.Z,{attrs:{xs12:"",sm4:"","px-3":""}},[e(r.Z,{staticClass:"capitalizar",attrs:{clearable:"","background-color":"cuarto lighten-5","item-value":"id","item-text":"nombreC",items:t.profesionalesDB,label:"Profesional","prepend-icon":"fas fa-user-md",color:"cuarto"},on:{"click:clear":function(e){t.$nextTick((()=>t.filtro.profesional=null))}},model:{value:t.filtro.profesional,callback:function(e){t.$set(t.filtro,"profesional",e)},expression:"filtro.profesional"}})],1)],1)],1),e(l.h7,[e(v.Cl),e(s.Z,{staticClass:"white--text",attrs:{round:"",color:"cuarto darken-2",disabled:t.loading.estado,loading:t.loading.estado},on:{click:function(e){return t.consultaHojas2()}}},[t._v("Buscar ")]),e(v.Cl)],1)],1)],1)],1)],1)],1)],1),e(f.Z,{attrs:{"pa-1":"","ma-1":"",terciary:"","lighten-1":"",xs12:""}},[e(n.Z,{staticClass:"title text-capitalize terciary"},[e(f.Z,{attrs:{xs5:"","px-2":""}}),e(f.Z,{attrs:{"display-1":"","font-weight-bold":"",xs12:"",sm6:"","px-2":""}},[e(p.Z,{attrs:{large:"",color:"black",left:""}},[t._v("insert_chart")]),t._v(" Resultados ")],1),e(v.Cl),e(f.Z,{attrs:{xs1:"","px-2":""}}),e(m.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:"","align-content-center":""}},[e(f.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e(r.Z,{staticClass:"capitalizar",attrs:{color:"black","background-color":"terciary lighten-4",items:t.filtroShowOptions,label:"Mostrar Informacion","prepend-icon":"insert_chart"},model:{value:t.filtroShow,callback:function(e){t.filtroShow=e},expression:"filtroShow"}})],1),e(u.Z,{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),e(v.Cl),e(f.Z,{attrs:{xs12:"","px-2":""}},[e(r.Z,{staticClass:"capitalizar",attrs:{clearable:"",color:"black","background-color":"terciary lighten-4",items:t.filtroHeaderOptions,label:"Mostrar Columnas","prepend-icon":"pie_chart","menu-props":{top:!0,auto:!0},multiple:"",chips:"","deletable-chips":""},model:{value:t.filtroHeaderSelected,callback:function(e){t.filtroHeaderSelected=e},expression:"filtroHeaderSelected"}})],1)],1)],1),e(n.Z,{staticClass:"title text-capitalize terciary lighten-2"},[e(f.Z,{attrs:{xs12:"",sm4:"","px-2":""}},[e(x.h,{attrs:{clearable:"",color:"grey lighten-1","background-color":"terciary lighten-4","append-icon":"search",label:"Filtrar","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e(v.Cl),e(u.Z,{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),e(s.Z,{staticClass:"white--text",attrs:{round:"",color:"terciary darken-1",disabled:t.loading.estado,loading:t.loading.estado},on:{click:function(e){return t.informe()}}},[t._v("Informe (En Desarrollo PDF)")])],1),e(d.Z,{staticClass:"elevation-6",staticStyle:{"table-layout":"fixed"},attrs:{id:"tablita",headers:t.headers,items:t.dataShowList,"item-key":"_id",pagination:t.paginacion,loading:t.loading.estado,search:t.search},on:{"update:pagination":function(e){t.paginacion=e}},scopedSlots:t._u([{key:"no-data",fn:function(){return[e(i.Z,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[t._v(" No hay datos para mostrar. ")])]},proxy:!0},{key:"no-results",fn:function(){return[e(i.Z,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[t._v(' No se encontraron resultados para "'+t._s(t.search)+'". ')])]},proxy:!0},{key:"items",fn:function(a){return[e("tr",{class:t.backgroundClass(a.item)},t._l(t.headers,(function(t){return e("td",{key:t.text,class:t.class},[e("bodyDataTableDinamic",{attrs:{props:a,field:t}})],1)})),0)]}}])},[e(g.Z,{attrs:{color:"green",indeterminate:""}})],1)],1)],1)],1)},b=[],k=a(629),w=a(5967),y=a(5167),S={name:"controlHojas2",components:{dateSelect:w.Z,bodyDataTableDinamic:y.Z},data:()=>({paginacion:{sortBy:"Rango",descending:!1,page:1,rowsPerPage:10},search:"",dataList:{},filtroShowMain:"",filtroShowOptions:[],filtroShow:"",filtroHeaderSelected:[],unidadesAtencionDB:[{id:null,area:"Tod@s"}],profesionalesDB:[{id:null,nombreC:"Tod@s"}],optionsJson:{},valido:!0,filtro:{desde:(new Date).getFullYear()-1+"-"+((new Date).getMonth()+1).toString().padStart(2,0)+"-01",hasta:"",especialidad:"",area:null,profesional:null}}),computed:{...(0,k.rn)(["loading","hoy","rules"]),dataShowList(){return this.filtroShow?this.dataList[this.filtroShow]:[]},filtroHeaderOptions(){let t=Object.keys(this.dataShowList[0]||[]);return["Derivado","Rango","Edad_Total"].forEach((e=>{let a=t.indexOf(e);a>=0&&t.splice(a,1)})),this.filtroHeaderSelected=t,t},headers(){if(0!=this.dataList.length){let t=[];return"Derivados"===this.filtroShow?(t.push({text:"Derivados De",value:"Derivado",class:"text-capitalize text-sm-left",ruta:"Derivado"}),this.filtroHeaderSelected.includes("Derivados_Cantidad")&&t.push({text:"Derivados Cantidad",value:"Derivados_Cantidad",class:"text-sm-left",ruta:"Derivados_Cantidad"}),this.filtroHeaderSelected.includes("Motivos")&&t.push({text:"Motivos",value:"Motivos",class:"text-sm-left",ruta:"Motivos",array:!0}),t):(t.push({text:"Rango Etario",value:"Rango",class:"text-capitalize text-sm-left",ruta:"Rango"}),this.filtroHeaderSelected.includes("Total")&&t.push({text:"Total",value:"Total",class:"text-sm-left",ruta:"Total"}),this.filtroHeaderSelected.includes("Edad_Promedio")&&t.push({text:"Edad Promedio",value:"Edad_Promedio",class:"text-sm-left",ruta:"Edad_Promedio"}),this.filtroHeaderSelected.includes("Genero")&&t.push({text:"Genero",value:"Genero",class:"text-sm-left",ruta:"Genero",object:!0}),this.filtroHeaderSelected.includes("Actividad")&&t.push({text:"Actividad",value:"Actividad",class:"text-sm-left",ruta:"Actividad",object:!0}),this.filtroHeaderSelected.includes("Presentacion")&&t.push({text:"Presentacion",value:"Presentacion",class:"text-sm-left",ruta:"Presentacion",object:!0}),this.filtroHeaderSelected.includes("Comorbilidad")&&t.push({text:"Comorbilidad",value:"Comorbilidad",class:"text-sm-left",ruta:"Comorbilidad",object:!0}),this.filtroHeaderSelected.includes("Diagnostico")&&t.push({text:"Diagnostico",value:"Diagnostico",class:"text-sm-left",ruta:"Diagnostico",object:!0}),this.filtroHeaderSelected.includes("Riesgo_Cardio_%")&&t.push({text:"Riesgo Cardio [%]",value:"Riesgo_Cardio_%",class:"text-sm-left",ruta:"Riesgo_Cardio_%",object:!0}),"Nutricion"===this.filtroShowMain?(this.filtroHeaderSelected.includes("Puntaje_Z")&&t.push({text:"Puntaje Z",value:"Puntaje_Z",class:"text-sm-left",ruta:"Puntaje_Z",object:!0}),t):t)}return[]}},async created(){this.filtro.hasta=this.hoy,this.profesionalesDB.push(...await this.cargarProfesionalesBusqueda()),this.optionsJson=await this.returnOptionsJSON({key:"hiclem",opcion:"base"}),this.unidadesAtencionDB.push(...await this.buscarAreaFiltros({filtro:{uas:!0},populate:"no",select:"area"}))},methods:{...(0,k.OI)(["mostrarError"]),...(0,k.nv)(["requestAPI","returnOptionsJSON","retroceder"]),...(0,k.nv)("main_areas",["buscarAreaFiltros"]),...(0,k.nv)("profesional",["cargarProfesionalesBusqueda"]),backgroundClass(t){if(!t)return""},async consultaHojas2(){if(this.$refs.form.validate()){let t=await this.requestAPI({method:"get",url:`/HistorialClinico/control/${this.filtro.especialidad}/hoja2?desde=${this.filtro.desde}&hasta=${this.filtro.hasta}&area=${this.filtro.area}&profesional=${this.filtro.profesional}`});this.filtroShowOptions=Object.keys(t?.data?.resumen||[]),this.filtroShow=this.filtroShowOptions[0]||"",this.filtroShowMain=this.filtro.especialidad||"",this.dataList=t?.data?.resumen||{},Object.keys(this.dataList).forEach((t=>{Array.isArray(this.dataList[t])||"object"!==typeof this.dataList||(this.dataList[t]=Object.values(this.dataList[t]))}))}else this.mostrarError({errores:"",mensaje:"Revise los campos obligatorios.",titulo:"Valores Requeridos."})},async informe(){console.log("informe dataList",this.dataList),console.log("informe totales",this.totales)}}},Z=S,C=a(1001),D=(0,C.Z)(Z,_,b,!1,null,null,null),$=D.exports},445:function(t,e,a){a.d(e,{Z:function(){return r}});var i=a(21),r={name:"v-form",mixins:[(0,i.J)("form")],inheritAttrs:!1,props:{value:Boolean,lazyValidation:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(){var t=Object.values(this.errorBag).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,a=function(t){return t.$watch("hasError",(function(a){e.$set(e.errorBag,t._uid,a)}),{immediate:!0})},i={_uid:t._uid,valid:void 0,shouldValidate:void 0};return this.lazyValidation?i.shouldValidate=t.$watch("shouldValidate",(function(r){r&&(e.errorBag.hasOwnProperty(t._uid)||(i.valid=a(t)))})):i.valid=a(t),i},validate:function(){var t=this.inputs.filter((function(t){return!t.validate(!0)})).length;return!t},reset:function(){for(var t=this,e=this.inputs.length;e--;)this.inputs[e].reset();this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){for(var t=this,e=this.inputs.length;e--;)this.inputs[e].resetValidation();this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},register:function(t){var e=this.watchInput(t);this.inputs.push(t),this.watchers.push(e)},unregister:function(t){var e=this.inputs.find((function(e){return e._uid===t._uid}));if(e){var a=this.watchers.find((function(t){return t._uid===e._uid}));a.valid&&a.valid(),a.shouldValidate&&a.shouldValidate(),this.watchers=this.watchers.filter((function(t){return t._uid!==e._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object.assign({novalidate:!0},this.$attrs),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}}}}]);