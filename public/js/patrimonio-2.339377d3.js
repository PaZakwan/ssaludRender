"use strict";(self["webpackChunksecretaria_de_salud_moreno_frontend"]=self["webpackChunksecretaria_de_salud_moreno_frontend"]||[]).push([[5224],{12683:(a,e,r)=>{r.d(e,{A:()=>c});var t=function(){var a=this,e=a._self._c;return a.field.array?e("span",[a.field.object?e("span",a._l(a._get(a.props.item,a.field.ruta),(function(r,t){return e("code",{key:`${a.field.text}-${t}`,attrs:{STYLE:"margin:4px"}},[a.field.keyShow?e("span",[a._v(a._s(a.field.date?a.mostrarFecha(r[a.field.keyShow],a.field.time)||"--------":r[a.field.keyShow]??"--------"))]):e("span",a._l(r,(function(o,i,s){return e("span",{key:`${a.field.text}-${t}-${i}`},[a._v(a._s(i)+": "),e("kbd",[a._v(a._s(isNaN(o)&&"Invalid Date"!==a.mostrarFecha(o,a.field.time)?a.mostrarFecha(o,a.field.time)||"--------":o??"--------"))]),s!=Object.keys(r).length-1?e("span",[a._v(a._s("\n"))]):a._e()])})),0)])})),0):e("span",a._l(a._get(a.props.item,a.field.ruta),(function(r,t){return e("code",{key:`${a.field.text}-${t}`,attrs:{STYLE:"margin:4px"}},[a._v(a._s(a.field.date?a.mostrarFecha(r,a.field.time)||"--------":r??"--------"))])})),0)]):a.field.object?e("span",[e("code",{attrs:{STYLE:"margin:4px"}},[a.field.keyShow?e("span",[a._v(a._s(a.field.date?a.mostrarFecha(a._get(a.props.item,a.field.ruta)[a.field.keyShow],a.field.time)||"--------":a._get(a.props.item,a.field.ruta)[a.field.keyShow]??"--------"))]):e("span",a._l(a._get(a.props.item,a.field.ruta),(function(r,t,o){return e("span",{key:`${a.field.text}-${t}`},[a._v(a._s(t)+": "),e("kbd",[a._v(a._s(isNaN(r)&&"Invalid Date"!==a.mostrarFecha(r,a.field.time)?`${a.mostrarFecha(r,a.field.time)}`||"--------":r??"--------"))]),o!=Object.keys(a._get(a.props.item,a.field.ruta)).length-1?e("span",[a._v(a._s("\n"))]):a._e()])})),0)])]):e("span",{style:""+(a.field.numeric&&a._get(a.props.item,a.field.ruta)<0?"color: red;":"")},[a._v(a._s(a.field.date?a.mostrarFecha(a.props.item[a.field.ruta],a.field.time)||"--------":a.field.boolean?""+(a._get(a.props.item,a.field.ruta)&&"false"!=a._get(a.props.item,a.field.ruta)&&"0"!=a._get(a.props.item,a.field.ruta)?"Si":"No"):a._get(a.props.item,a.field.ruta)?.toLocaleString("es-AR")??"--------"))])},o=[];const i={name:"body-data-table-dinamic",props:["props","field"]},s=i;var n=r(81656),l=(0,n.A)(s,t,o,!1,null,null,null);const c=l.exports},10839:(a,e,r)=>{r.r(e),r.d(e,{default:()=>y});var t=r(55669),o=r(15852),i=r(1899),s=r(48122),n=r(16251),l=r(41614),c=r(59594),d=r(46227),u=r(69155),m=r(55731),p=function(){var a=this,e=a._self._c;return e(s.A,{attrs:{"grid-list-xs":""}},[e(u.A,{attrs:{"align-center":"","justify-center":"","ma-0":"",wrap:"","text-xs-center":""}},[e(l.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[e(o.A,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[e(i.OQ,{staticClass:"px-0 text-uppercase"},[a._v("====== Patrimonio ======")])],1)],1),e(l.A,{attrs:{"pa-1":"","ma-1":"",terciary:"",xs12:""}},[e(u.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",terciary:""}},[e(l.A,{attrs:{"text-xs-left":"","px-3":""}},[e(d.A,{attrs:{medium:"",color:"white",left:""}},[a._v("library_books")]),e("span",{staticClass:"title white--text"},[a._v("Crear")])],1),e(m.hc),e(n.A,{staticClass:"hidden-xs-only mx-2 my-1 white",attrs:{vertical:""}}),e(t.A,{staticClass:"white--text",attrs:{round:"",to:{name:"PatrimonioBuscar"},color:"terciary darken-1",disabled:a.loading.estado,loading:a.loading.estado}},[e(d.A,{attrs:{color:"white",left:""}},[a._v("search")]),a._v("Buscar Objetos")],1)],1),e(o.A,{staticClass:"elevation-6"},[e(i.OQ,[e(c.A,{ref:"form",attrs:{"lazy-validation":""},model:{value:a.valido,callback:function(e){a.valido=e},expression:"valido"}},[e("formObjeto",{attrs:{formulario:a.formulario,persona:a.persona,areas:a.areas,lugaresDB:a.lugaresDB,editar:!1}})],1)],1),e(u.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",terciary:"","lighten-2":""}},[e(m.hc),e(t.A,{staticClass:"white--text",attrs:{round:"",to:{name:"PatrimonioBuscar"},color:"red darken-1",disabled:a.loading.estado,loading:a.loading.estado}},[a._v(" Cancelar")]),e(n.A,{staticClass:"hidden-xs-only mx-2 my-1 black",attrs:{vertical:""}}),e(t.A,{class:{"terciary darken-1":a.valido,"error darken-1":!a.valido},attrs:{round:"",dark:"",disabled:a.loading.estado,loading:a.loading.estado},on:{click:a.crear}},[a._v(" "+a._s(a.valido?"Cargar Objeto":"Formulario No valido"))])],1)],1)],1)],1)],1)},f=[],v=r(95353),g=r(78753);const h={name:"patrimonioCrear",components:{formObjeto:g.A},data(){return{valido:!0,areas:[],lugaresDB:[],formulario:{categoria:"",inventario:null,serie:null,marca:null,modelo:null,dependencia:null,fec_alta:null,area:null,lugar:null,ubicacion:null,detalle:null,funciona:"Funcionando",micro:null,mother:null,memoria_tipo:null,memoria:null,disco_tipo:null,disco:null,fuente:null,PC:null,pulgadas:null,tipoPantalla:null,impresora_tipo:null,impresora_multifuncion:null,telefono_interno:null,cantidad:"0",subcategoria:null,compatibilidad:null}}},watch:{"formulario.subcategoria":function(a){"Toner"!==a&&(this.formulario.compatibilidad=null)}},async created(){this.lugaresDB=await this.buscarLugarFiltros({select:"nombre"}),this.areas=await this.buscarAreaFiltros({filtro:"todos",populate:"no",select:"area"}),this.persona.informatica&&0!==this.persona.informatica||this.persona.patrimonio&&0!==this.persona.patrimonio||this.persona.patrimonioArea&&0!==this.persona.patrimonioArea&&(this.formulario.area=this.persona.area)},computed:{...(0,v.aH)(["loading","persona"]),...(0,v.aH)("patrimonio",["PCsPropiedades","MonitorPropiedades","ImpresoraPropiedades","TelefonoPropiedades","InsumosPropiedades"])},methods:{...(0,v.PY)(["mostrarLoading","ocultarLoading","mostrarError","mostrarMensaje"]),...(0,v.i0)(["requestAPI"]),...(0,v.i0)("main",["buscarAreaFiltros","buscarLugarFiltros"]),async crear(){if(this.$refs.form.validate())try{this.mostrarLoading({titulo:"Creando Nuevo Bien...",color:"primary"});let a=Object.assign({},this.formulario);"Insumos"===a.categoria&&(delete a["serie"],delete a["inventario"]),"Muebles"===a.categoria&&delete a["serie"],a.categoria.includes("PCs")||this.PCsPropiedades.forEach((e=>{delete a[e]})),"Monitor"!==a.categoria&&this.MonitorPropiedades.forEach((e=>{delete a[e]})),"Impresora"!==a.categoria&&this.ImpresoraPropiedades.forEach((e=>{delete a[e]})),"Telefono"!==a.categoria&&this.TelefonoPropiedades.forEach((e=>{delete a[e]})),"Insumos"!==a.categoria&&this.InsumosPropiedades.forEach((e=>{delete a[e]}));let e=null;return e=await this.requestAPI({method:"post",url:"/patrimonio",update:a}),!!e?.data?.ok&&("Insumos"===a.categoria?this.mostrarMensaje({msj:"Insumo cargado exitosamente.",titulo:"Registro Exitoso"}):this.mostrarMensaje({msj:["Objeto cargado exitosamente.",`<##> Nro de Inventario: ${e.data.objeto.inventario.toString()} <##>`],titulo:"Registro Exitoso"}),this.$refs.form.resetValidation(),!0)}catch(a){return this.mostrarError({mensaje:a,titulo:"Inesperado (crearBien)"}),!1}finally{this.ocultarLoading()}else this.mostrarError({mensaje:"Revise los campos obligatorios.",titulo:"Valores Requeridos."})}}},_=h;var b=r(81656),x=(0,b.A)(_,p,f,!1,null,null,null);const y=x.exports},52959:(a,e,r)=>{r.r(e),r.d(e,{default:()=>M});var t=r(55669),o=r(15852),i=r(1899),s=r(48122),n=r(16251),l=r(41614),c=r(59594),d=r(46227),u=r(69155),m=r(55731),p=(r(44114),function(){var a=this,e=a._self._c;return e(s.A,{attrs:{"grid-list-xs":""}},[e(u.A,{attrs:{"align-center":"","justify-center":"","ma-0":"",wrap:"","text-xs-center":""}},[e(l.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[e(o.A,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[e(i.OQ,{staticClass:"px-0 text-uppercase"},[a._v("====== Patrimonio ======")])],1)],1),e(l.A,{attrs:{"pa-1":"","ma-1":"",terciary:"",xs12:""}},[e(o.A,{staticClass:"elevation-6"},[e(u.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",terciary:"","darken-2":""}},[e(l.A,{attrs:{"text-xs-left":"","px-3":""}},[e(d.A,{attrs:{medium:"",color:"white",left:""}},[a._v("fas fa-file-invoice")]),e("span",{staticClass:"title white--text"},[a._v("Declaración de Bienes")])],1),e(m.hc),e(n.A,{staticClass:"hidden-xs-only mx-2 my-1 white",attrs:{vertical:""}}),e(t.A,{staticClass:"white--text",attrs:{round:"",color:"terciary darken-1",disabled:a.loading.estado,loading:a.loading.estado},on:{click:function(e){return a.$router.push({name:"PatrimonioDeclaracionBuscar"})}}},[a._v("Buscar Declaraciones")])],1),e(i.OQ,[e(c.A,{ref:"form",attrs:{"lazy-validation":""},model:{value:a.valido,callback:function(e){a.valido=e},expression:"valido"}},[e("formDeclaracion",{attrs:{formulario:a.formulario,persona:a.persona,areas:a.areas,editar:!1,agregarFila:a.agregarFila}})],1)],1),e(u.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",terciary:"","lighten-2":""}},[e(t.A,{staticClass:"terciary darken-1",attrs:{round:"",dark:"",disabled:a.loading.estado,loading:a.loading.estado},on:{click:a.agregarFila}},[e(d.A,{attrs:{large:""}},[a._v("add_circle")]),a._v(" Agregar Bien")],1),e(m.hc),e(t.A,{staticClass:"white--text",attrs:{round:"",color:"red darken-1",disabled:a.loading.estado,loading:a.loading.estado},on:{click:function(e){return a.$router.push({name:"PatrimonioDeclaracionBuscar"})}}},[a._v("Cancelar")]),e(n.A,{staticClass:"hidden-xs-only mx-2 my-1 black",attrs:{vertical:""}}),e(t.A,{class:{"terciary darken-1":a.valido,"error darken-1":!a.valido},attrs:{round:"",dark:"",disabled:a.loading.estado,loading:a.loading.estado},on:{click:a.crear}},[a._v(" "+a._s(a.valido?"Cargar Declaración":"Formulario No valido"))])],1)],1)],1)],1)],1)}),f=[],v=r(95353),g=r(28597),h=r(67926),_=r(11210),b=r(63286),x=r(57e3),y=r(51257),A=r(66816),k=function(){var a=this,e=a._self._c;return e("div",[e(u.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(l.A,{attrs:{xs0:"",sm3:"","px-3":""}}),e(l.A,{attrs:{xs12:"",sm6:"","px-3":""}},[e(b.d,{attrs:{rules:a.requerido,items:a.tipos,"item-value":"valor","item-text":"label",label:"Tipo de Declaracion","prepend-icon":"fas fa-file-invoice",color:"terciary","background-color":"terciary lighten-2"},model:{value:a.formulario.tipo,callback:function(e){a.$set(a.formulario,"tipo",e)},expression:"formulario.tipo"}})],1),e(l.A,{attrs:{xs0:"",sm3:"","px-3":""}}),e(l.A,{attrs:{xs12:"",sm6:"","px-3":""}},[e(_.A,{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:a._u([{key:"activator",fn:function({on:r}){return[e(x.W,a._g({attrs:{rules:a.requerido,clearable:"",label:"Fecha de Declaración","prepend-icon":"event",readonly:"",color:"terciary","background-color":"terciary lighten-5"},model:{value:a.formulario.fecha,callback:function(e){a.$set(a.formulario,"fecha",e)},expression:"formulario.fecha"}},r))]}}]),model:{value:a.menufecha1,callback:function(e){a.menufecha1=e},expression:"menufecha1"}},[e(h.A,{attrs:{color:"terciary darken-3","header-color":"terciary darken-1",locale:"mx"},on:{input:function(e){a.menufecha1=!1}},model:{value:a.formulario.fecha,callback:function(e){a.$set(a.formulario,"fecha",e)},expression:"formulario.fecha"}})],1)],1),e(l.A,{attrs:{xs0:"",sm6:"","px-3":""}}),e(l.A,{attrs:{xs12:"",sm6:"","px-3":""}},[e(g.A,{staticClass:"capitalizar",attrs:{readonly:a.editar||!a.permisoOtrasAreas(),clearable:!(a.editar||!a.permisoOtrasAreas()),"background-color":a.editar||!a.permisoOtrasAreas()?"terciary":"terciary lighten-5","item-value":"id","item-text":"area",rules:a.requerido,items:a.areas,label:"Oficina","prepend-icon":"location_city",color:"terciary","validate-on-blur":""},model:{value:a.formulario.oficina,callback:function(e){a.$set(a.formulario,"oficina",e)},expression:"formulario.oficina"}})],1),e(l.A,{attrs:{xs12:"",sm6:"","px-3":""}},[e(x.W,{attrs:{clearable:"","background-color":"terciary lighten-5","prepend-icon":"N°",label:"Número de Oficina",type:"number",onkeydown:"return event.key !== 'e' && event.key !== 'E' && event.key !== '.' && event.key !== ',' && event.key !== '+' && event.key !== '-'",rules:a.positivoReq,color:"terciary"},model:{value:a.formulario.oficina_nro,callback:function(e){a.$set(a.formulario,"oficina_nro",e)},expression:"formulario.oficina_nro"}})],1),e(l.A,{attrs:{xs12:"",sm6:"","px-3":""}},[e(x.W,{attrs:{"prepend-icon":"fas fa-user-shield",label:"Responsable de la Custodia (Opcional)",type:"text",color:"terciary","background-color":"terciary lighten-5"},model:{value:a.formulario.custodia,callback:function(e){a.$set(a.formulario,"custodia",e)},expression:"formulario.custodia"}})],1),e(l.A,{attrs:{xs12:"",sm6:"","px-3":""}},[e(x.W,{attrs:{"prepend-icon":"fas fa-user-tag",label:"Agente Inventariador/ra (Opcional)",type:"text",color:"terciary","background-color":"terciary lighten-5"},model:{value:a.formulario.inventariador,callback:function(e){a.$set(a.formulario,"inventariador",e)},expression:"formulario.inventariador"}})],1),e(u.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",grey:"","darken-1":""}},[e("div",{staticClass:"mx-3 my-1"},[e(d.A,{attrs:{medium:"",color:"white",left:""}},[a._v("fas fa-box")]),e("span",{staticClass:"title white--text"},[a._v("Bienes")])],1),e(n.A,{staticClass:"hidden-xs-only mx-2 my-1 white",attrs:{vertical:""}}),e(m.hc)],1),a._l(a.formulario.objetos,(function(r,o){return e(l.A,{key:o,attrs:{xs12:""}},[e(u.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(l.A,{attrs:{xs12:"",sm3:"","px-3":""}},[e(x.W,{attrs:{clearable:"","background-color":"terciary lighten-5","prepend-icon":"local_offer",label:"Número de Inventario",type:"text",rules:a.requerido,color:"terciary"},model:{value:a.formulario.objetos[o].inventario,callback:function(e){a.$set(a.formulario.objetos[o],"inventario",e)},expression:"formulario.objetos[index].inventario"}})],1),e(l.A,{attrs:{xs12:"",sm8:"","px-3":""}},[e(y.A,{attrs:{clearable:"","auto-grow":"",rows:"1","background-color":"terciary lighten-5","prepend-icon":"fas fa-file-alt",label:"Descripción",rules:a.requerido,color:"terciary"},model:{value:a.formulario.objetos[o].descripcion,callback:function(e){a.$set(a.formulario.objetos[o],"descripcion",e)},expression:"formulario.objetos[index].descripcion"}})],1),e(l.A,{attrs:{"text-sm-left":"",xs12:"",sm1:"","px-3":""}},[e(A.A,{attrs:{top:""},scopedSlots:a._u([{key:"activator",fn:function({on:r}){return[0==o?e(t.A,a._g({attrs:{flat:"",icon:"",color:"blue lighten-2"},on:{click:function(e){return a.agregarFila()}}},r),[e(d.A,{attrs:{large:""}},[a._v("add_circle")])],1):a._e()]}}],null,!0)},[e("span",[a._v("Agregar Bien")])]),e(A.A,{attrs:{top:""},scopedSlots:a._u([{key:"activator",fn:function({on:r}){return[0!=o?e(t.A,a._g({attrs:{flat:"",icon:"",color:"red lighten-2"},on:{click:function(e){return a.borrarFila(o)}}},r),[e(d.A,[a._v("delete_forever")])],1):a._e()]}}],null,!0)},[e("span",[a._v("Borrar Bien")])])],1)],1),o+1<a.formulario.objetos.length?e(n.A,{key:`divider-${o}`}):a._e()],1)}))],2),(a.persona.patrimonio>=3||a.persona.informatica>=3)&&a.editar?e(u.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(l.A,{attrs:{xs12:"","ma-2":""}},[e(o.A,{attrs:{dark:"",color:"error darken-1"}},[e(i.OQ,{staticClass:"px-0 text-uppercase"},[a._v(" === Visibilidad del Objeto === ")])],1)],1),e(l.A,{attrs:{xs0:"",sm3:"","px-3":""}}),e(l.A,{attrs:{xs12:"",sm6:"","px-3":""}},[e(b.d,{attrs:{"item-value":"valor","item-text":"label",items:a.estados,label:"Visibilidad","prepend-icon":"visibility",color:"terciary","background-color":"cuarto lighten-2"},model:{value:a.formulario.estado,callback:function(e){a.$set(a.formulario,"estado",e)},expression:"formulario.estado"}})],1),e(l.A,{attrs:{xs0:"",sm3:"","px-3":""}})],1):a._e()],1)},j=[];const w={name:"formDeclaracion",props:["formulario","editar","persona","areas","agregarFila"],data(){return{menufecha1:!1,tipos:[{label:"Bienes Faltantes",valor:"Bienes Faltantes"},{label:"Bienes Reales",valor:"Bienes Reales"}],estados:[{label:"ACTIVO",valor:!0},{label:"BORRADO",valor:!1}],requerido:[a=>a&&!(!isNaN(a)&&""===a.trim())||"Este campo es requerido."],positivoReq:[a=>a?""===a.trim()?"Este campo es requerido.":isNaN(a)?"Debe ser un numero valido.":!(a&&Number(a)<0)||"El numero debe ser positivo.":"Este campo es requerido."]}},watch:{"formulario.oficina"(a){let e=this.areas.find((e=>e.id===a));e&&e.oficina_nro?this.formulario.oficina_nro=e.oficina_nro:this.formulario.oficina_nro=""}},methods:{permisoOtrasAreas(){return!(!this.persona.informatica||0===this.persona.informatica)||(!(!this.persona.patrimonio||0===this.persona.patrimonio)||(!this.persona.patrimonioArea||0===this.persona.patrimonioArea)&&void 0)},borrarFila(a){this.formulario.objetos.splice(a,1)}}},$=w;var C=r(81656),P=(0,C.A)($,k,j,!1,null,null,null);const D=P.exports,F={name:"patrimonioDeclaracionCarga",components:{formDeclaracion:D},data(){return{valido:!0,areas:[],formulario:{tipo:"",fecha:"",oficina:"",oficina_nro:"",custodia:"",inventariador:"",objetos:[{inventario:"",descripcion:""}]}}},async created(){this.areas.push(...await this.buscarAreaFiltros({filtro:"todos",populate:"no",select:"area oficina_nro"})),this.persona.informatica&&0!==this.persona.informatica||this.persona.patrimonio&&0!==this.persona.patrimonio||this.persona.patrimonioArea&&0!==this.persona.patrimonioArea&&(this.formulario.oficina=this.persona.area)},computed:{...(0,v.aH)(["APIURL","axiosConfig","loading","persona"])},methods:{...(0,v.PY)(["mostrarLoading","ocultarLoading","mostrarError","mostrarMensaje"]),...(0,v.i0)("main",["buscarAreaFiltros"]),async agregarFila(){this.formulario.objetos.push({inventario:"",descripcion:""})},async crear(){if(this.$refs.form.validate()){let e=Object.assign({},this.formulario);try{this.mostrarLoading({titulo:"Enviando datos...",color:"primary"});let r=await this.axios.post(this.APIURL+"/patrimonioDeclaracion",e,this.axiosConfig);if(r.data.ok)this.mostrarMensaje({titulo:"Registro Exitoso",msj:["Declaración cargada exitosamente.","<##> Oficina N°: "+r.data.declaracion.oficina_nro.toString()+" <##>","<##> Fecha: "+new Date(r.data.declaracion.fecha).toISOString().substring(0,10)+" <##>"]}),this.$refs.form.reset(),this.$refs.form.resetValidation();else try{this.mostrarError({errores:"",mensaje:r.data.err.message,titulo:r.status})}catch(a){this.mostrarError({errores:"",mensaje:"Problemas con el servidor, Intente mas tarde.",titulo:500})}}catch(a){try{this.mostrarError({errores:a.response.data.err.errors,mensaje:a.response.data.err.message,titulo:a.response.status})}catch(a){this.mostrarError({errores:"",mensaje:"Problemas con el servidor, Intente mas tarde.",titulo:500})}}finally{this.ocultarLoading()}}else this.mostrarError({errores:"",mensaje:"Revise los campos obligatorios.",titulo:"Valores Requeridos."})}}},O=F;var E=(0,C.A)(O,p,f,!1,null,null,null);const M=E.exports},45609:(a,e,r)=>{r.r(e),r.d(e,{default:()=>S});var t=r(81166),o=r(55669),i=r(15852),s=r(1899),n=r(37471),l=r(48122),c=r(85832),d=r(16251),u=r(41614),m=r(59594),p=r(46227),f=r(69155),v=r(31911),g=r(55731),h=r(57e3),_=r(66816),b=function(){var a=this,e=a._self._c;return e(l.A,{attrs:{fluid:"","grid-list-xs":""}},[e(f.A,{attrs:{"align-center":"","justify-center":"","ma-0":"",wrap:"","text-xs-center":""}},[e(u.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[e(i.A,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[e(s.OQ,{staticClass:"px-0 text-uppercase"},[a._v("====== Patrimonio ======")])],1)],1),e(u.A,{attrs:{"pa-1":"","ma-1":"",terciary:"",xs12:""}},[e(f.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",terciary:"","darken-2":""}},[e(u.A,{attrs:{"text-xs-left":"","px-3":""}},[e(p.A,{attrs:{medium:"",color:"white",left:""}},[a._v("fas fa-people-carry")]),e("span",{staticClass:"title white--text"},[a._v("Movimiento - "+a._s(a.movimiento.inventario?`Inventario: ${a.movimiento.inventario}`:`Modelo: ${a.movimiento.modelo}`))])],1),e(g.hc),e(d.A,{staticClass:"hidden-xs-only mx-2 my-1 white",attrs:{vertical:""}}),e(o.A,{staticClass:"white--text",attrs:{round:"",to:{name:"PatrimonioBuscar"},color:"terciary darken-1",disabled:a.loading.estado,loading:a.loading.estado}},[a._v("Buscar Objetos")])],1),e(i.A,{staticClass:"elevation-6"},[e(s.OQ,[e(m.A,{ref:"form",attrs:{"lazy-validation":""},model:{value:a.valido,callback:function(e){a.valido=e},expression:"valido"}},[e("formMover",{attrs:{formulario:a.movimiento,areas:a.areas,lugaresDB:a.lugaresDB}})],1)],1),e(f.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",terciary:"","lighten-2":""}},[e(g.hc),e(o.A,{staticClass:"white--text",attrs:{round:"",to:{name:"PatrimonioBuscar"},color:"red darken-1",disabled:a.loading.estado,loading:a.loading.estado}},[a._v(" Cancelar")]),e(d.A,{staticClass:"hidden-xs-only mx-2 my-1 black",attrs:{vertical:""}}),e(o.A,{class:{"terciary darken-1":a.valido,"error darken-1":!a.valido},attrs:{round:"",dark:"",disabled:a.loading.estado,loading:a.loading.estado},on:{click:function(e){return a.crearMovimiento()}}},[a._v(" "+a._s(a.valido?"Mover Objeto":"Formulario No valido"))])],1)],1)],1),e(f.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(u.A,{attrs:{"pa-1":"","ma-2":"",terciary:"","lighten-1":"",xs12:""}},[e(n.A,{staticClass:"title text-uppercase elevation-6"},[e(p.A,{attrs:{left:"",color:"dark"}},[a._v("fas fa-people-carry")]),a._v(" Historial de Movimientos "),e(g.hc),e(h.W,{attrs:{"append-icon":"search",label:"Filtrar","single-line":"",color:"terciary lighten-4","hide-details":"",clearable:""},model:{value:a.search,callback:function(e){a.search=e},expression:"search"}})],1),e(c.A,{staticClass:"elevation-6",staticStyle:{"table-layout":"fixed"},attrs:{id:"tablita",headers:a.headers,items:a.movimientos,"item-key":"_id",pagination:a.paginacion,"rows-per-page-items":[5,10,25,50],loading:a.loading.estado,search:a.search},on:{"update:pagination":function(e){a.paginacion=e}},scopedSlots:a._u([{key:"no-data",fn:function(){return[e(t.A,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[a._v(" No hay datos para mostrar. ")])]},proxy:!0},{key:"no-results",fn:function(){return[e(t.A,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[a._v(' No se encontraron resultados para "'+a._s(a.search)+'". ')])]},proxy:!0},{key:"items",fn:function(r){return[e("tr",[e("td",{staticClass:"text-sm-center"},[e("div",{staticClass:"text-xs-center",staticStyle:{width:"88px"}},[e(_.A,{attrs:{top:""},scopedSlots:a._u([{key:"activator",fn:function({on:t}){return[e(o.A,a._g({attrs:{flat:"",icon:"","mx-0":"",small:"",color:"gray"},on:{click:function(e){return a.PDF_movimiento(r.item)}}},t),[e(p.A,{attrs:{color:"green"}},[a._v(" print ")])],1)]}}],null,!0)},[e("span",[a._v("Imprimir")])]),e(_.A,{attrs:{top:""},scopedSlots:a._u([{key:"activator",fn:function({on:t}){return[e(o.A,a._g({attrs:{flat:"",icon:"","mx-0":"",small:"",color:"gray"},on:{click:function(e){return a.PDF_movimiento(r.item,!0)}}},t),[e(p.A,{attrs:{color:"red"}},[a._v(" file_download ")])],1)]}}],null,!0)},[e("span",[a._v("Descargar PDF")])]),e(_.A,{attrs:{top:""},scopedSlots:a._u([{key:"activator",fn:function({on:t}){return[e(o.A,a._g({attrs:{flat:"",icon:"","mx-0":"",disabled:r.item.fec_entregado,small:"",color:"gray"},on:{click:function(e){return a.crearMovimiento(r.item,{fec_entregado:!0})}}},t),[e(p.A,{attrs:{color:"orange"}},[a._v("check_circle_outline")])],1)]}}],null,!0)},[e("span",[a._v("Ya Entregado")])]),e(_.A,{attrs:{top:""},scopedSlots:a._u([{key:"activator",fn:function({on:t}){return[e(o.A,a._g({attrs:{flat:"",icon:"","mx-0":"",disabled:r.item.fec_patrimonio,small:"",color:"gray"},on:{click:function(e){return a.crearMovimiento(r.item,{fec_patrimonio:!0})}}},t),[e(p.A,{attrs:{color:"green"}},[a._v(" fas fa-stamp ")])],1)]}}],null,!0)},[e("span",[a._v("Entregado a Patrimonio")])])],1)]),a._l(a.headersDinamics,(function(a){return e("td",{key:a.text,class:a.class},[e("bodyDataTableDinamic",{attrs:{props:r,field:a}})],1)}))],2)]}}])},[e(v.A,{attrs:{color:"blue",indeterminate:""}})],1)],1)],1)],1)],1)},x=[],y=(r(44114),r(64979),r(71678),r(95353)),A=r(12683),k=r(28597),j=r(63286),w=r(51257),$=function(){var a=this,e=a._self._c;return e(f.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(u.A,{attrs:{xs12:"",sm3:"","px-3":""}}),e(u.A,{attrs:{xs12:"",sm6:"","px-2":""}},[e("dateSelect",{attrs:{value:a.formulario.fec_movio,color:"terciary",label:"Fecha del Movimiento",icon:"event",requerido:"true",clearable:"true"},model:{value:a.formulario.fec_movio,callback:function(e){a.$set(a.formulario,"fec_movio",e)},expression:"formulario.fec_movio"}})],1),e(u.A,{attrs:{xs12:"",sm3:"","px-3":""}}),e(u.A,{attrs:{xs12:"",sm6:"","px-3":""}},[e(h.W,{attrs:{readonly:"","background-color":"terciary lighten-1","prepend-icon":"location_city",label:"Area Actual",type:"string",color:"terciary"},model:{value:a.formulario.area_anterior_str,callback:function(e){a.$set(a.formulario,"area_anterior_str",e)},expression:"formulario.area_anterior_str"}})],1),e(u.A,{attrs:{xs12:"",sm6:"","px-3":""}},[e(k.A,{attrs:{"item-value":"id","item-text":"area",clearable:"",items:a.areas,label:"Futura Area (Responsable)","prepend-icon":"location_city",color:"terciary","background-color":"terciary lighten-5",rules:[...a.rules.requerido],"validate-on-blur":""},model:{value:a.formulario.area_destino,callback:function(e){a.$set(a.formulario,"area_destino",e)},expression:"formulario.area_destino"}})],1),e(u.A,{attrs:{xs12:"",sm6:"","px-3":""}},[e(h.W,{attrs:{readonly:"","background-color":"terciary lighten-1","prepend-icon":"fas fa-map-marked-alt",label:"Lugar Actual",type:"string",color:"terciary"},model:{value:a.formulario.lugar_anterior_str,callback:function(e){a.$set(a.formulario,"lugar_anterior_str",e)},expression:"formulario.lugar_anterior_str"}})],1),e(u.A,{attrs:{xs12:"",sm6:"","px-3":""}},[e(k.A,{attrs:{"item-value":"id","item-text":"nombre",clearable:"",items:a.lugaresDB,label:"Futuro Lugar (Ubicacion Fisica)","prepend-icon":"fas fa-map-marked-alt",color:"terciary","background-color":"terciary lighten-5",rules:[...a.rules.requerido],"validate-on-blur":""},model:{value:a.formulario.lugar_destino,callback:function(e){a.$set(a.formulario,"lugar_destino",e)},expression:"formulario.lugar_destino"}})],1),e(u.A,{attrs:{xs12:"",sm6:"","px-3":""}},[e(h.W,{attrs:{readonly:"","background-color":"terciary lighten-1","prepend-icon":"location_pin",label:"Ubicacion Actual",type:"string",color:"terciary"},model:{value:a.formulario.ubicacion_anterior,callback:function(e){a.$set(a.formulario,"ubicacion_anterior",e)},expression:"formulario.ubicacion_anterior"}})],1),e(u.A,{attrs:{xs12:"",sm6:"","px-3":""}},[e(h.W,{attrs:{clearable:"","prepend-icon":"location_pin",label:"Futura Ubicacion [Opcional]",type:"text",color:"terciary","background-color":"terciary lighten-5"},model:{value:a.formulario.ubicacion_destino,callback:function(e){a.$set(a.formulario,"ubicacion_destino",e)},expression:"formulario.ubicacion_destino"}})],1),e(u.A,{attrs:{xs0:"",sm3:"","px-3":""}}),e(u.A,{attrs:{xs12:"",sm6:"","px-3":""}},[e(j.d,{attrs:{items:a.objetoFuncionaList,label:"Nuevo Estado [Opcional]","prepend-icon":"check_circle",color:"terciary","background-color":"terciary lighten-5"},model:{value:a.formulario.funciona,callback:function(e){a.$set(a.formulario,"funciona",e)},expression:"formulario.funciona"}})],1),e(u.A,{attrs:{xs0:"",sm3:"","px-3":""}}),e(u.A,{attrs:{xs12:"",sm6:"","px-3":""}},[e(h.W,{attrs:{clearable:"","prepend-icon":"person",label:"Apellido y Nombre(Recibe) [Opcional]",type:"text",color:"terciary","background-color":"terciary lighten-5"},model:{value:a.formulario.usuario_movio,callback:function(e){a.$set(a.formulario,"usuario_movio",e)},expression:"formulario.usuario_movio"}})],1),e(u.A,{attrs:{xs12:"",sm6:"","px-3":""}},[e(h.W,{attrs:{clearable:"","prepend-icon":"fas fa-id-card",label:"Legajo(Recibe) [Opcional]",type:"text",color:"terciary","background-color":"terciary lighten-5"},model:{value:a.formulario.usuario_legajo,callback:function(e){a.$set(a.formulario,"usuario_legajo",e)},expression:"formulario.usuario_legajo"}})],1),e(u.A,{attrs:{xs12:"","mx-3":"","my-2":""}},[e(w.A,{attrs:{clearable:"","background-color":"terciary lighten-5",label:"Motivo del Movimiento",color:"terciary","prepend-icon":"description","auto-grow":"",rules:[...a.rules.requerido],rows:"2","validate-on-blur":""},model:{value:a.formulario.motivo_movio,callback:function(e){a.$set(a.formulario,"motivo_movio",e)},expression:"formulario.motivo_movio"}})],1)],1)},C=[],P=r(69006);const D={name:"formMover",components:{dateSelect:P.A},props:["formulario","areas","lugaresDB"],data(){return{}},computed:{...(0,y.aH)(["rules"]),...(0,y.aH)("patrimonio",["objetoFuncionaList"])},created(){},methods:{}},F=D;var O=r(81656),E=(0,O.A)(F,$,C,!1,null,null,null);const M=E.exports,I={name:"patrimonioMover",components:{formMover:M,bodyDataTableDinamic:A.A},data:()=>({valido:!0,areas:[],lugaresDB:[],search:"",paginacion:{sortBy:"fec_movio",descending:!0,rowsPerPage:5,page:1},headers:[{text:"Acciones",value:"_id",align:"center",sortable:!1,width:"5%",ignore:!0},{text:"Fecha de Movimiento",value:"fec_movio",class:"text-sm-center",ruta:"fec_movio",date:!0},{text:"Desde Area",value:"area_anterior.area",class:"text-sm-left",ruta:"area_anterior.area"},{text:"Destino Area",value:"area_destino.area",class:"text-sm-left",ruta:"area_destino.area"},{text:"Desde Lugar",value:"lugar_anterior.nombre",class:"text-sm-left",ruta:"lugar_anterior.nombre"},{text:"Destino Lugar",value:"lugar_destino.nombre",class:"text-sm-left",ruta:"lugar_destino.nombre"},{text:"Desde Ubicacion",value:"ubicacion_anterior",class:"text-sm-left",ruta:"ubicacion_anterior"},{text:"Destino Ubicacion",value:"ubicacion_destino",class:"text-sm-left",ruta:"ubicacion_destino"},{text:"Persona Recibio",value:"usuario_movio",class:"text-sm-left",ruta:"usuario_movio"},{text:"Legajo Recibio",value:"usuario_legajo",class:"text-sm-right",ruta:"usuario_legajo"},{text:"Motivo del Cambio",value:"motivo_movio",class:"text-sm-left",ruta:"motivo_movio"},{text:"Fec. Entregado",value:"fec_entregado",class:"text-sm-center",ruta:"fec_entregado"},{text:"Fec. Entr. Patrimonio",value:"fec_patrimonio",class:"text-sm-center",ruta:"fec_patrimonio"}],movimientos:[],movimiento:{},movimiento_base:{id_objeto:"",fec_movio:"",area_anterior:"",area_destino:"",lugar_anterior:"",lugar_destino:"",ubicacion_anterior:"",ubicacion_destino:"",funciona:"",usuario_movio:"",usuario_legajo:"",motivo_movio:"",area_anterior_str:"",lugar_anterior_str:"",inventario:"",modelo:"",categoria:""}}),computed:{...(0,y.aH)(["loading","hoy","persona"]),headersDinamics:function(){return this.headers.filter((a=>!0!==a.ignore))}},async created(){this.persona.informatica<2&&"Insumos"===this.movimiento.categoria?this.$router.push({name:"PatrimonioBuscar"}):(await this.cargarObjeto(),this.areas=await this.buscarAreaFiltros({filtro:"todos",populate:"no",select:"area"}),this.lugaresDB=await this.buscarLugarFiltros({select:"nombre"}),this.cargarMovimientos())},methods:{...(0,y.PY)(["mostrarLoading","ocultarLoading","mostrarError","mostrarMensaje","mostrarDialogIframe"]),...(0,y.PY)("patrimonio",["guardarPdf"]),...(0,y.i0)(["requestAPI"]),...(0,y.i0)("main",["buscarAreaFiltros","buscarLugarFiltros"]),async cargarObjeto(){try{this.mostrarLoading({titulo:"Cargando datos...",color:"primary"});let a=JSON.stringify({_id:this.$route.params.id}),e=JSON.stringify({area:!0,lugar:!0,usuario_eliminacion:!1,usuario_verifico:!1}),r=await this.requestAPI({method:"get",url:`/patrimonio/buscar?filtro=${a}&populate=${e}`});return!!r?.data?.ok&&(this.movimiento=structuredClone(this.movimiento_base),this.$nextTick((()=>{this.movimiento.id_objeto=this.$route.params.id,this.movimiento.categoria=r.data.objetos[0]?.categoria||"",this.movimiento.inventario=r.data.objetos[0]?.inventario||"",this.movimiento.modelo=r.data.objetos[0]?.modelo||"",this.movimiento.area_anterior=r.data.objetos[0]?.area?.id||"",this.movimiento.area_anterior_str=r.data.objetos[0]?.area?.area||"",this.movimiento.lugar_anterior=r.data.objetos[0]?.lugar?.id||"",this.movimiento.lugar_anterior_str=r.data.objetos[0]?.lugar?.nombre||"",this.movimiento.ubicacion_anterior=r.data.objetos[0]?.ubicacion||"",this.movimiento.funciona=r.data.objetos[0]?.funciona||"",this.movimiento.fec_movio=this.hoy})),!0)}catch(a){return this.mostrarError({mensaje:a,titulo:"Inesperado (cargarObjeto)"}),this.$router.push({name:"PatrimonioBuscar"}),!1}finally{this.ocultarLoading()}},async cargarMovimientos(){try{this.mostrarLoading({titulo:"Cargando datos...",color:"primary"});let a=await this.requestAPI({method:"get",url:`/patrimonioMover/buscar?id=${this.$route.params.id}`});return!!a?.data?.ok&&(this.movimientos=Object.assign([],a.data.movimientos),this.paginacion.page>Math.ceil(this.movimientos.length/this.paginacion.rowsPerPage)&&(this.paginacion.page=1),!0)}catch(a){return this.mostrarError({mensaje:a,titulo:"Inesperado (cargarMovimientos)"}),this.$router.push({name:"PatrimonioBuscar"}),!1}finally{this.ocultarLoading()}},async crearMovimiento(a,e){if(a||this.$refs.form.validate()){let t={};if(a){if(!await this.$root.$confirm.open({titulo:""+(e.fec_entregado?"ENTREGADO":"DOCUMENTADO"),msj:[`Esta por marcar la Fecha de Entrega ${e.fec_entregado?"al Area Destino":"de la Documentacion del Movimiento a Patrimonio"}, la misma no se podra editar mas tarde.`,"¿Desea continuar?"]}))return;t=Object.assign({},a,e||{})}else t=Object.assign({},this.movimiento);try{this.mostrarLoading({titulo:"Enviando datos...",color:"primary"});let a=await this.requestAPI({method:"post",url:"/patrimonioMover",update:t});return!!a?.data?.ok&&(this.movimiento.inventario?this.mostrarMensaje({msj:[`Objeto ${e?"Editado":"Movido"} exitosamente.`,`<##> Nº Inventario: ${this.movimiento.inventario.toString()} <##>`],titulo:(e?"Editado":"Traslado")+" Exitoso"}):this.mostrarMensaje({msj:[`Objeto ${e?"Editado":"Movido"} exitosamente.`],titulo:(e?"Editado":"Traslado")+" Exitoso"}),e||this.$refs.form.reset(),await this.cargarObjeto(),this.cargarMovimientos(),!0)}catch(r){return this.mostrarError({mensaje:r,titulo:"Inesperado (crearMovimiento)"}),!1}finally{this.ocultarLoading()}}else this.mostrarError({mensaje:"Revise los campos obligatorios.",titulo:"Valores Requeridos."})},async PDF_movimiento(a,e){try{this.mostrarLoading({titulo:"Cargando PDF...",color:"primary"});let r={fecha:this.mostrarFecha(a.fec_movio),inventario:a.id_objeto.inventario,descripcion:`${a.id_objeto.categoria}, ${a.id_objeto.marca} ${a.id_objeto.modelo} ${a.id_objeto.serie?`\nSerie: ${a.id_objeto.serie}\n`:""}${a.id_objeto.micro} ${a.id_objeto.mother}${a.id_objeto.micro||a.id_objeto.mother?"\n":""}${a.id_objeto.memoria} ${a.id_objeto.memoria_tipo}${a.id_objeto.memoria||a.id_objeto.memoria_tipo?"\n":""}${a.id_objeto.disco} ${a.id_objeto.disco_tipo}${a.id_objeto.disco||a.id_objeto.disco_tipo?"\n":""}${a.id_objeto.fuente} ${a.id_objeto.pulgadas} ${a.id_objeto.tipoPantalla}`.replaceAll(" undefined","").replaceAll("undefined","").trim(),desde:`${a.area_anterior?.area||"S/D"}${a.area_anterior?.oficina_nro?`\n[${a.area_anterior.oficina_nro}]`:""}`,destino:`${a.area_destino?.area||"S/D"}${a.area_destino?.oficina_nro?`\n[${a.area_destino.oficina_nro}]`:""}`};this.guardarPdf({objetos:[r]});let t=this.$router.resolve({name:"patrimonioMoverImprimir",query:{descarga:!!e}});return this.mostrarDialogIframe({src:t.href,titulo_name:"Movimiento Patrimonial"}),!0}catch(r){return this.mostrarError({mensaje:r,titulo:"Inesperado (PDF_movimiento)"}),!1}finally{this.ocultarLoading()}}}},B=I;var L=(0,O.A)(B,b,x,!1,null,null,null);const S=L.exports}}]);