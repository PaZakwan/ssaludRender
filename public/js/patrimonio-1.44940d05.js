"use strict";(self["webpackChunksecretaria_de_salud_moreno_frontend"]=self["webpackChunksecretaria_de_salud_moreno_frontend"]||[]).push([[1427],{96853:function(t,a,e){e.d(a,{A:function(){return p}});var o=e(97001),r=e(21522),i=e(57e3),s=function(){var t=this,a=t._self._c;return a(r.A,{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function({on:e}){return[a(i.W,t._g({class:t.clase?`${t.clase}`:"",attrs:{clearable:!t.soloLect&&!!t.clear,"background-color":t.soloLect?`${t.color} lighten-2`:`${t.color} lighten-5`,"prepend-icon":t.prepend,label:t.label,messages:t.msg,placeholder:t.holder,readonly:"",color:`${t.color} darken-3`,rules:t.req?[...t.rules.requerido,...t.rules.fecha]:[]},on:{"click:clear":function(a){return t.$emit("input","")}},model:{value:t.fecha,callback:function(a){t.fecha=a},expression:"fecha"}},e))]}}]),model:{value:t.menufecha1,callback:function(a){t.menufecha1=a},expression:"menufecha1"}},[a(o.A,{directives:[{name:"show",rawName:"v-show",value:!(t.soloLect&&!t.fecha),expression:"!(soloLect && !fecha)"}],attrs:{readonly:t.soloLect,"allowed-dates":t.allowedDates,min:t.fecMin,max:t.fecMax,color:`${t.color} darken-3`,"header-color":`${t.color} darken-1`,locale:"mx"},on:{input:function(a){t.menufecha1=!1,t.$emit("input",a)}},model:{value:t.fecha,callback:function(a){t.fecha=a},expression:"fecha"}})],1)},n=[],l=e(95353),c={name:"date-select",props:["value","label","icon","color","soloLectura","requerido","min","max","filtro","clearable","messages","placeholder","clase"],data(){return{menufecha1:!1}},computed:{...(0,l.aH)(["rules"]),fecha(){return this.value},soloLect(){return this.soloLectura??!1},prepend(){return this.icon??"event"},req(){return this.requerido??!1},clear(){return this.clearable??!1},msg(){return this.messages??""},holder(){return this.placeholder??""},fecMin(){return this.soloLect&&this.fecha?this.fecha:"-1"===this.min?new Date((new Date).setFullYear((new Date).getFullYear()-1)).toISOString().substring(0,10):this.min?this.min:void 0},fecMax(){return this.soloLect&&this.fecha?this.fecha:"+1"===this.max?new Date((new Date).setFullYear((new Date).getFullYear()+1)).toISOString().substring(0,10):this.max?this.max:void 0},restriction(){return this.filtro??[]}},methods:{allowedDates(t){return!this.restriction.includes(new Date(t).getUTCDay())}}},d=c,u=e(81656),m=(0,u.A)(d,s,n,!1,null,null,null),p=m.exports},21696:function(t,a,e){e.r(a),e.d(a,{default:function(){return K}});var o=e(21999),r=e(28597),i=e(28383),s=e(3150),n=e(1899),l=e(37471),c=e(16717),d=e(48122),u=e(81851),m=e(34172),p=e(41614),f=e(21527),h=e(69155),g=e(17912),x=e(55731),b=e(57e3),_=e(17087),v=function(){var t=this,a=t._self._c;return a(d.A,{attrs:{fluid:"","grid-list-xs":""}},[a(h.A,{attrs:{"align-center":"","justify-center":"","ma-0":"",wrap:"","text-xs-center":""}},[a(p.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[a(s.A,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[a(n.OQ,{staticClass:"px-0 text-uppercase"},[t._v("====== Patrimonio ======")])],1)],1),a(p.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[a(s.A,{staticClass:"white--text",attrs:{color:"cuarto darken-1"}},[a(n.OQ,{staticClass:"px-0 text-uppercase"},[t._v("====== ====== Buscar ====== ======")])],1),a(s.A,{staticClass:"elevation-6",attrs:{color:"grey lighten-2"}},[a(n.OQ,{staticClass:"px-0"},[a(h.A,{attrs:{row:"",wrap:""},on:{keypress:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.buscar.apply(null,arguments)}}},[a("formFiltro",{attrs:{filtro:t.filtro}})],1)],1),a(h.A,{attrs:{wrap:""}},["ADMIN_ROLE"===t.persona.role?a(i.A,{staticClass:"white--text",attrs:{round:"",color:"cuarto darken-4",disabled:t.loading.estado,loading:t.loading.estado},on:{click:function(a){return t.recargarDataTable({populate:{area:!0,lugar:!0,usuario_eliminacion:!0,usuario_verifico:!0}})}}},[t._v("Cargar Toda la BD")]):t._e(),a(x.hc),a(x.hc),a(x.hc),a(i.A,{staticClass:"white--text",attrs:{round:"",color:"cuarto darken-2",disabled:t.loading.estado,loading:t.loading.estado},on:{click:t.buscar}},[t._v(" Buscar"),a(f.A,{attrs:{color:"white",right:""}},[t._v("search")])],1),a(x.hc)],1)],1)],1),a(p.A,{attrs:{"pa-1":"","ma-1":"",terciary:"","lighten-1":"",xs12:""}},[a(l.A,{staticClass:"title"},[a(p.A,{attrs:{xs12:"","mx-2":""}},[a(r.A,{staticClass:"capitalizar",attrs:{clearable:"",color:"black","background-color":"terciary lighten-4",items:t.filtroHeaderOptions,label:"Mostrar Columnas","prepend-icon":"pie_chart","menu-props":{top:!0,auto:!0},multiple:"",chips:"","deletable-chips":""},model:{value:t.filtroHeaderSelected,callback:function(a){t.filtroHeaderSelected=a},expression:"filtroHeaderSelected"}})],1),a(x.hc),a(p.A,{attrs:{xs12:"",sm6:"","mx-2":""}},[a(b.W,{attrs:{"append-icon":"search",label:"Filtrar","background-color":"terciary lighten-4",color:"black","hide-details":"",clearable:""},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}})],1)],1),a(m.A,{staticClass:"mx-3 terciary darken-2"}),a(l.A,[a(h.A,{attrs:{"align-center":"",row:"",wrap:""}},[a(f.A,{attrs:{medium:"",color:"white",left:""}},[t._v("info")]),a("div",[a(h.A,{attrs:{row:""}},[a("span",{staticClass:"body-2 white--text"},[t._v("Click en la fila para mas informacion")])]),a(h.A,{attrs:{row:""}},[a("span",{staticClass:"body-2 white--text"},[t._v("Seleccione los que descargara como excel")])])],1),a(m.A,{staticClass:"mx-3 terciary darken-2 hidden-xs-only",attrs:{vertical:""}}),a(x.hc),t.persona.informatica>1?a(i.A,{staticClass:"white--text",attrs:{round:"",to:{name:"PatrimonioInsumosIngresos"},color:"terciary darken-1",disabled:t.loading.estado,loading:t.loading.estado}},[a(f.A,{attrs:{color:"white",left:""}},[t._v("receipt")]),t._v("Ingreso de Insumos")],1):t._e(),a(i.A,{staticClass:"white--text",attrs:{round:"",to:{name:"PatrimonioCrear"},color:"terciary darken-1",disabled:!(t.persona.patrimonio>=2||t.persona.patrimonioArea>=2||t.persona.informatica>=2)||t.loading.estado,loading:t.loading.estado}},[a(f.A,{attrs:{color:"white",left:""}},[t._v("add_circle_outline")]),t._v("Cargar Objeto Nuevo")],1)],1)],1),a(u.A,{key:`tablita_${t.reRenderizarTable}`,staticClass:"elevation-6",staticStyle:{"table-layout":"fixed"},attrs:{headers:t.headers,items:t.dataTable,"item-key":"_id",pagination:t.paginacion,"rows-per-page-items":[5,10,25,50],loading:t.loading.estado,search:t.search,"select-all":""},on:{"update:pagination":function(a){t.paginacion=a}},scopedSlots:t._u([{key:"no-data",fn:function(){return[a(o.A,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[t._v(" No hay datos para mostrar. ")])]},proxy:!0},{key:"no-results",fn:function(){return[a(o.A,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[t._v(' No se encontraron resultados para "'+t._s(t.search)+'". ')])]},proxy:!0},{key:"items",fn:function(e){return[a("tr",{class:t.backgroundClass(e.item),style:"Insumos"===e.item.categoria||e.item.verificado?"":"text-decoration: underline;"},[a("td",[a(_.A,{attrs:{bottom:"","close-delay":"0"},scopedSlots:t._u([{key:"activator",fn:function({on:o}){return[e.item.estado?a(c.A,t._g({attrs:{color:"terciary darken-2","hide-details":""},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"props.selected"}},o)):t._e()]}}],null,!0)},[a("span",[t._v("Seleccionar")])])],1),a("td",{staticClass:"text-sm-left"},[a("div",{staticClass:"text-xs-center",staticStyle:{width:"132px"}},[a(_.A,{attrs:{top:"","close-delay":"0"},scopedSlots:t._u([{key:"activator",fn:function({on:o}){return[a(i.A,t._g({attrs:{flat:"",icon:"","mx-0":"",disabled:!(t.persona.patrimonio>=2||t.persona.patrimonioArea>=2||t.persona.informatica>=2)||"Insumos"===e.item.categoria&&t.persona.informatica<2||t.loading.estado||"Insumos"!==e.item.categoria&&!!e.item.verificado,small:"",color:"gray"},on:{click:function(a){return t.validarObjeto(e.item)}}},o),[a(f.A,{attrs:{color:"green"}},[t._v(" check_circle ")])],1)]}}],null,!0)},[a("span",[t._v("Verificar")])]),a(_.A,{attrs:{top:"","close-delay":"0"},scopedSlots:t._u([{key:"activator",fn:function({on:o}){return[a(i.A,t._g({attrs:{flat:"",icon:"","mx-0":"",disabled:!(t.persona.patrimonio>=3||t.persona.patrimonioArea>=3||t.persona.informatica>=2)||"Insumos"===e.item.categoria&&t.persona.informatica<2||t.loading.estado,to:{name:"PatrimonioEditar",params:{id:e.item._id}},small:"",color:"gray"}},o),[a(f.A,{attrs:{color:"primary"}},[t._v(" edit ")])],1)]}}],null,!0)},[a("span",[t._v("Editar/Baja")])]),a(_.A,{attrs:{top:"","close-delay":"0"},scopedSlots:t._u([{key:"activator",fn:function({on:o}){return[a(i.A,t._g({attrs:{flat:"",icon:"","mx-0":"",disabled:!(t.persona.patrimonio>=3||t.persona.informatica>=3)||"Insumos"===e.item.categoria&&t.persona.informatica<3||t.loading.estado||!e.item.estado,small:"",color:"gray"},on:{click:function(a){return t.deleteObjeto(e.item)}}},o),[a(f.A,{attrs:{color:"error"}},[t._v(" delete ")])],1)]}}],null,!0)},[a("span",[t._v("Borrar")])])],1),a("div",{staticClass:"text-xs-center",staticStyle:{width:"132px"}},[a(_.A,{attrs:{bottom:"","close-delay":"0"},scopedSlots:t._u([{key:"activator",fn:function({on:o}){return[a(i.A,t._g({attrs:{flat:"",icon:"","mx-0":"",disabled:!(t.persona.patrimonio>=2||t.persona.patrimonioArea>=2||t.persona.informatica>=2)||"Insumos"===e.item.categoria&&t.persona.informatica<2||t.loading.estado,to:{name:"PatrimonioMover",params:{id:e.item._id}},small:"",color:"gray"}},o),[a(f.A,{attrs:{color:"secondary"}},[t._v(" fas fa-people-carry ")])],1)]}}],null,!0)},[a("span",[t._v("Movimiento")])]),a(_.A,{attrs:{bottom:"","close-delay":"0"},scopedSlots:t._u([{key:"activator",fn:function({on:o}){return["Insumos"===e.item.categoria?a(i.A,t._g({attrs:{flat:"",icon:"","mx-0":"",disabled:t.persona.informatica<2||t.loading.estado,to:{name:"PatrimonioInsumos",params:{id:e.item._id}},small:"",color:"gray"}},o),[a(f.A,{attrs:{color:"terciary"}},[t._v(" far fa-list-alt ")])],1):t._e()]}}],null,!0)},[a("span",[t._v("Entregas")])]),a(_.A,{attrs:{bottom:"","close-delay":"0"},scopedSlots:t._u([{key:"activator",fn:function({on:o}){return["Insumos"===e.item.categoria?a(i.A,t._g({attrs:{flat:"",icon:"","mx-0":"",disabled:t.persona.informatica<2||t.loading.estado,small:"",color:"gray"},on:{click:function(a){return t.actualizarDialogStockDeposito({state:!0,id:e.item._id})}}},o),[a(f.A,{attrs:{color:"terciary"}},[t._v(" warehouse ")])],1):t._e()]}}],null,!0)},[a("span",[t._v("Deposito Stock")])])],1)]),a(_.A,{attrs:{bottom:"","close-delay":"0"},scopedSlots:t._u([{key:"activator",fn:function({on:o}){return t._l(t.headersDinamics,(function(r){return a("td",t._g({key:r.text,class:r.class,on:{click:function(a){return t.datosInfoOn(e.item)}}},o),[a("bodyDataTableDinamic",{attrs:{props:e,field:r}})],1)}))}}],null,!0)},[a("span",[t._v("Click para mas informacion "+t._s(e.item.inventario?` - ${e.item.inventario}`:e.item.modelo?` - ${e.item.modelo}`:"")+" ")])])],1)]}}]),model:{value:t.seleccionados,callback:function(a){t.seleccionados=a},expression:"seleccionados"}},[a(g.A,{attrs:{color:"blue",indeterminate:""}})],1),a(l.A,{attrs:{flat:"",color:"terciary lighten-2"}},[a("download-excel",{attrs:{data:t.selecteccionFiltroExcel(t.dataTable),fields:t.columnasExcel,name:t.nombreExcel,type:"xls","before-finish":t.ocultarLoading}},[a(i.A,{staticClass:"white--text",attrs:{round:"",color:"terciary darken-1",disabled:t.loading.estado,loading:t.loading.estado},on:{click:function(a){return t.descargarExcel(t.dataTable)}}},[a(f.A,{attrs:{color:"white",left:""}},[t._v("far fa-file-excel")]),t._v("Exportar a Excel")],1)],1),a(x.hc),a(m.A,{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("download-excel",{attrs:{data:t.selecteccionFiltroExcel(t.seleccionados),fields:t.columnasExcel,name:t.nombreExcel,type:"xls","before-finish":t.ocultarLoading}},[a(i.A,{staticClass:"white--text",attrs:{round:"",color:"terciary darken-1",disabled:t.loading.estado,loading:t.loading.estado},on:{click:function(a){return t.descargarExcel(t.seleccionados)}}},[a(f.A,{attrs:{color:"white",left:""}},[t._v("far fa-file-excel")]),t._v("Descargar Excel de Seleccionados")],1)],1)],1),a("patrimonioInfo",{attrs:{persona:t.persona,loading:t.loading,datosInfo:t.datosInfo,datosInfoOff:t.datosInfoOff}})],1)],1),a("dialogStockDeposito",{attrs:{closeFinish:t.recargarDataTable}})],1)},A=[],k=(e(44114),e(18111),e(22489),e(7588),e(95353)),y=e(42681),C=e(87202),w=function(){var t=this,a=t._self._c;return a("div",[a(h.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(r.A,{attrs:{items:t.categorias,label:"Categoria / Cuenta Patrimonial","prepend-icon":"assignment",color:"cuarto","background-color":"cuarto lighten-4",clearable:""},on:{change:function(a){t.filtro.categoria=`${null==t.filtro.categoria?"":t.filtro.categoria}`},"click:clear":function(a){t.$nextTick((()=>t.filtro.categoria=""))}},model:{value:t.filtro.categoria,callback:function(a){t.$set(t.filtro,"categoria",a)},expression:"filtro.categoria"}})],1),"Varios"===t.filtro.categoria?a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(b.W,{attrs:{"prepend-icon":"assignment",label:"Categoria / Cuenta Patrimonial",type:"text",clearable:"",color:"cuarto","background-color":"cuarto lighten-5",hint:"BUSCAR Categoria/Cuenta Patrimonial Que NO esta en la Lista","persistent-hint":""},model:{value:t.filtro.categoriaVarios,callback:function(a){t.$set(t.filtro,"categoriaVarios",a)},expression:"filtro.categoriaVarios"}})],1):a(p.A,{attrs:{xs0:"",sm6:"","px-3":""}}),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(b.W,{attrs:{"prepend-icon":"local_offer",type:"text",color:"cuarto",label:""+("Insumos"!==t.filtro.categoria?"Nº Inventario":"Nº Inventario (NO UTILIZADO)"),readonly:"Insumos"===t.filtro.categoria,clearable:"Insumos"!==t.filtro.categoria,"background-color":""+("Insumos"!==t.filtro.categoria?"cuarto lighten-5":"cuarto darken-5")},model:{value:t.filtro.inventario,callback:function(a){t.$set(t.filtro,"inventario",a)},expression:"filtro.inventario"}})],1),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(b.W,{attrs:{"prepend-icon":"local_offer",type:"text",color:"cuarto",label:""+("Insumos"!==t.filtro.categoria&&"Muebles"!==t.filtro.categoria?"Nº Serie":"Nº Serie (NO UTILIZADO)"),readonly:"Insumos"===t.filtro.categoria||"Muebles"===t.filtro.categoria,clearable:"Insumos"!==t.filtro.categoria&&"Muebles"!==t.filtro.categoria,"background-color":""+("Insumos"!==t.filtro.categoria&&"Muebles"!==t.filtro.categoria?"cuarto lighten-5":"cuarto darken-5")},model:{value:t.filtro.serie,callback:function(a){t.$set(t.filtro,"serie",a)},expression:"filtro.serie"}})],1),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(b.W,{attrs:{"prepend-icon":"copyright",label:"Marca",type:"text",clearable:"",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:t.filtro.marca,callback:function(a){t.$set(t.filtro,"marca",a)},expression:"filtro.marca"}})],1),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(b.W,{attrs:{"prepend-icon":"more",label:"Modelo",type:"text",clearable:"",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:t.filtro.modelo,callback:function(a){t.$set(t.filtro,"modelo",a)},expression:"filtro.modelo"}})],1),a(p.A,{attrs:{xs0:"",sm3:"","px-3":""}}),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(r.A,{attrs:{readonly:!t.permisoOtrasAreas(),clearable:t.permisoOtrasAreas(),"background-color":t.permisoOtrasAreas()?"cuarto lighten-5":"cuarto","item-value":"id","item-text":"nombre",items:t.lugaresDB,label:"Lugar","prepend-icon":"fas fa-map-marked-alt",color:"cuarto"},on:{"click:clear":function(a){t.$nextTick((()=>t.filtro.lugar=""))}},model:{value:t.filtro.lugar,callback:function(a){t.$set(t.filtro,"lugar",a)},expression:"filtro.lugar"}})],1),a(p.A,{attrs:{xs0:"",sm3:"","px-3":""}}),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(r.A,{attrs:{readonly:!t.permisoOtrasAreas(),clearable:t.permisoOtrasAreas(),"background-color":t.permisoOtrasAreas()?"cuarto lighten-5":"cuarto","item-value":"id","item-text":"area",items:t.areas,label:"Area","prepend-icon":"location_city",color:"cuarto"},on:{"click:clear":function(a){t.$nextTick((()=>t.filtro.area=""))}},model:{value:t.filtro.area,callback:function(a){t.$set(t.filtro,"area",a)},expression:"filtro.area"}})],1),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(b.W,{attrs:{"prepend-icon":"location_pin",label:"Ubicacion en el Area(Recepcion, consultorio n..)",type:"text",clearable:"",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:t.filtro.ubicacion,callback:function(a){t.$set(t.filtro,"ubicacion",a)},expression:"filtro.ubicacion"}})],1),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(r.A,{attrs:{items:t.funcionaList,label:"Estado","prepend-icon":"check_circle",color:"cuarto","background-color":"cuarto lighten-5",clearable:""},on:{change:function(a){t.filtro.funciona=`${null==t.filtro.funciona?"":t.filtro.funciona}`},"click:clear":function(a){t.$nextTick((()=>t.filtro.funciona=""))}},model:{value:t.filtro.funciona,callback:function(a){t.$set(t.filtro,"funciona",a)},expression:"filtro.funciona"}})],1),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(r.A,{attrs:{clearable:"",items:t.booleanOpc,label:"Verificado","prepend-icon":"check_circle",color:"cuarto","background-color":"cuarto lighten-5"},on:{"click:clear":function(a){t.$nextTick((()=>t.filtro.verificado=""))}},model:{value:t.filtro.verificado,callback:function(a){t.$set(t.filtro,"verificado",a)},expression:"filtro.verificado"}})],1),this.persona.informatica&&0!==this.persona.informatica?a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(b.W,{attrs:{"prepend-icon":"compare_arrows",label:"Insumo - Compatibilidad",type:"text",clearable:"",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:t.filtro.compatibilidad,callback:function(a){t.$set(t.filtro,"compatibilidad",a)},expression:"filtro.compatibilidad"}})],1):t._e(),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(b.W,{attrs:{"prepend-icon":"description",label:"Descripcion",type:"text",clearable:"",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:t.filtro.detalle,callback:function(a){t.$set(t.filtro,"detalle",a)},expression:"filtro.detalle"}})],1)],1),t.filtro.categoria.includes("PCs")?a(h.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[a(p.A,{attrs:{xs12:"","ma-2":""}},[a(s.A,{attrs:{dark:"",color:"cuarto darken-1"}},[a(n.OQ,{staticClass:"px-0"},[t._v(" === "+t._s(t.filtro.categoria)+" === ")])],1)],1),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(b.W,{attrs:{"prepend-icon":"fas fa-microchip",label:"Microprocesador",type:"text",clearable:"",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:t.filtro.micro,callback:function(a){t.$set(t.filtro,"micro",a)},expression:"filtro.micro"}})],1),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(b.W,{attrs:{"prepend-icon":"developer_board",label:"Mother",type:"text",clearable:"",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:t.filtro.mother,callback:function(a){t.$set(t.filtro,"mother",a)},expression:"filtro.mother"}})],1),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(b.W,{attrs:{"prepend-icon":"fas fa-memory",label:"Arquitectura de Memoria RAM",type:"text",clearable:"",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:t.filtro.memoria_tipo,callback:function(a){t.$set(t.filtro,"memoria_tipo",a)},expression:"filtro.memoria_tipo"}})],1),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(b.W,{attrs:{"prepend-icon":"fas fa-memory",label:"Memoria/s RAM Instalada/s",type:"text",clearable:"",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:t.filtro.memoria,callback:function(a){t.$set(t.filtro,"memoria",a)},expression:"filtro.memoria"}})],1),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(b.W,{attrs:{"prepend-icon":"fas fa-hdd",label:"Tipo de Almacenamiento",type:"text",clearable:"",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:t.filtro.disco_tipo,callback:function(a){t.$set(t.filtro,"disco_tipo",a)},expression:"filtro.disco_tipo"}})],1),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(b.W,{attrs:{"prepend-icon":"fas fa-hdd",label:"Capacidad de Almacenamiento",type:"text",clearable:"",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:t.filtro.disco,callback:function(a){t.$set(t.filtro,"disco",a)},expression:"filtro.disco"}})],1),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(b.W,{attrs:{"prepend-icon":"fas fa-car-battery",label:"Fuente",type:"text",clearable:"",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:t.filtro.fuente,callback:function(a){t.$set(t.filtro,"fuente",a)},expression:"filtro.fuente"}})],1)],1):t._e(),"Insumos"===t.filtro.categoria?a(h.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[a(p.A,{attrs:{xs12:"","ma-2":""}},[a(s.A,{attrs:{dark:"",color:"cuarto darken-1"}},[a(n.OQ,{staticClass:"px-0 text-uppercase"},[t._v(" === Insumos === ")])],1)],1),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(b.W,{attrs:{"prepend-icon":"compare_arrows",label:"Compatibilidad",type:"text",clearable:"",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:t.filtro.compatibilidad,callback:function(a){t.$set(t.filtro,"compatibilidad",a)},expression:"filtro.compatibilidad"}})],1),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(C.d,{attrs:{"prepend-icon":"assignment",label:"SubCategoria",clearable:"",color:"cuarto","background-color":"cuarto lighten-5",items:t.subcategorias},on:{"click:clear":function(a){t.$nextTick((()=>t.filtro.subcategoria=""))}},model:{value:t.filtro.subcategoria,callback:function(a){t.$set(t.filtro,"subcategoria",a)},expression:"filtro.subcategoria"}})],1),a(x.hc)],1):t._e(),"Monitor"===t.filtro.categoria?a(h.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[a(p.A,{attrs:{xs12:"","ma-2":""}},[a(s.A,{attrs:{dark:"",color:"cuarto darken-1"}},[a(n.OQ,{staticClass:"px-0 text-uppercase"},[t._v(" === Monitor === ")])],1)],1),a(p.A,{attrs:{xs0:"",sm3:"","px-3":""}}),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(b.W,{attrs:{"prepend-icon":"desktop_windows",label:"PC asosiada (Nº Inventario)",type:"text",clearable:"",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:t.filtro.PC,callback:function(a){t.$set(t.filtro,"PC",a)},expression:"filtro.PC"}})],1),a(p.A,{attrs:{xs0:"",sm3:"","px-3":""}}),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(b.W,{attrs:{"prepend-icon":"settings_overscan",label:"Pulgadas",type:"number",clearable:"",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:t.filtro.pulgadas,callback:function(a){t.$set(t.filtro,"pulgadas",a)},expression:"filtro.pulgadas"}})],1),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(b.W,{attrs:{"prepend-icon":"remove_from_queue",label:"Tipo de Pantalla",type:"text",clearable:"",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:t.filtro.tipoPantalla,callback:function(a){t.$set(t.filtro,"tipoPantalla",a)},expression:"filtro.tipoPantalla"}})],1)],1):t._e(),"Impresora"===t.filtro.categoria?a(h.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[a(p.A,{attrs:{xs12:"","ma-2":""}},[a(s.A,{attrs:{dark:"",color:"cuarto darken-1"}},[a(n.OQ,{staticClass:"px-0 text-uppercase"},[t._v(" === Impresora === ")])],1)],1),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(r.A,{attrs:{clearable:"",items:t.impresoras,label:"Sistema de Impresion","prepend-icon":"print",color:"cuarto","background-color":"cuarto lighten-5"},on:{"click:clear":function(a){t.$nextTick((()=>t.filtro.impresora_tipo=""))}},model:{value:t.filtro.impresora_tipo,callback:function(a){t.$set(t.filtro,"impresora_tipo",a)},expression:"filtro.impresora_tipo"}})],1),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(r.A,{attrs:{clearable:"",items:t.booleanOpc,label:"Multifuncion","prepend-icon":"print",color:"cuarto","background-color":"cuarto lighten-5"},on:{"click:clear":function(a){t.$nextTick((()=>t.filtro.impresora_multifuncion=""))}},model:{value:t.filtro.impresora_multifuncion,callback:function(a){t.$set(t.filtro,"impresora_multifuncion",a)},expression:"filtro.impresora_multifuncion"}})],1)],1):t._e(),"Telefono"===t.filtro.categoria?a(h.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[a(p.A,{attrs:{xs12:"","ma-2":""}},[a(s.A,{attrs:{dark:"",color:"cuarto darken-1"}},[a(n.OQ,{staticClass:"px-0 text-uppercase"},[t._v(" === Telefono === ")])],1)],1),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(b.W,{attrs:{"prepend-icon":"phone",label:"Numero de Interno",type:"text",clearable:"",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:t.filtro.telefono_interno,callback:function(a){t.$set(t.filtro,"telefono_interno",a)},expression:"filtro.telefono_interno"}})],1)],1):t._e()],1)},I=[],D={name:"formFiltro",props:["filtro"],data(){return{categorias:[],subcategorias:[],funcionaList:[],impresoras:[],areas:[],lugaresDB:[],booleanOpc:[{text:"No buscar por este Campo",value:""},{text:"Si",value:!0},{text:"No",value:!1}]}},computed:{...(0,k.aH)(["persona"]),...(0,k.aH)("patrimonio",["objetoCategorias","objetoSubcategorias","objetoFuncionaList","objetoImpresoraTipos"])},async created(){if(this.categorias=[{text:"No buscar por Categoria",value:""},...this.objetoCategorias,"Varios"],this.subcategorias=[{text:"No buscar por subCategoria",value:""},...this.objetoSubcategorias],this.funcionaList=[{text:"No buscar por Estado",value:""},...this.objetoFuncionaList],this.impresoras=[{text:"No buscar por Sistema",value:""},...this.objetoImpresoraTipos],this.persona.informatica&&0!==this.persona.informatica);else if(this.persona.patrimonio&&0!==this.persona.patrimonio){let t=this.categorias.indexOf("Insumos");t>-1&&this.categorias.splice(t,1)}else if(this.persona.patrimonioArea&&0!==this.persona.patrimonioArea){let t=this.categorias.indexOf("Insumos");t>-1&&this.categorias.splice(t,1)}this.areas=await this.buscarAreaFiltros({filtro:"todos",populate:"no",select:"area"}),this.lugaresDB=await this.buscarLugarFiltros({select:"nombre"})},methods:{...(0,k.i0)("main",["buscarAreaFiltros","buscarLugarFiltros"]),permisoOtrasAreas(){return!(!this.persona.informatica||0===this.persona.informatica)||(!(!this.persona.patrimonio||0===this.persona.patrimonio)||(!this.persona.patrimonioArea||0===this.persona.patrimonioArea)&&void 0)}}},$=D,O=e(81656),j=(0,O.A)($,w,I,!1,null,null,null),E=j.exports,S=e(79305),P=e(45621),F=function(){var t=this,a=t._self._c;return a(S.A,{attrs:{persistent:"","max-width":"80%",scrollable:""},model:{value:t.datosInfo.estado,callback:function(a){t.$set(t.datosInfo,"estado",a)},expression:"datosInfo.estado"}},[a(s.A,{attrs:{tile:"",color:"terciary lighten-5"}},[a(l.A,[a(h.A,{attrs:{row:"",wrap:""}},[a("span",{staticClass:"display-1"},[t._v(" PATRIMONIO ")]),a(m.A,{staticClass:"mx-2",attrs:{light:"",vertical:""}}),a("span",{staticClass:"display-1 mx-2 text-uppercase"},[t._v(" "+t._s(t.datosInfo.datos.categoria)+" "+t._s(t.datosInfo.datos.inventario??t.datosInfo.datos.modelo??"")+" ")]),a(x.hc),a(_.A,{attrs:{top:"","close-delay":"0"},scopedSlots:t._u([{key:"activator",fn:function({on:e}){return[a(f.A,t._g({attrs:{color:"error darken-1","x-large":""},on:{click:t.datosInfoOff}},e),[t._v(" cancel ")])]}}])},[a("span",[t._v("Cerrar")])])],1)],1),a(m.A),a(n.OQ,[a(d.A,{attrs:{terciary:"","lighten-1":"","grid-list-sm":""}},[a(h.A,{attrs:{row:"",wrap:""}},[a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Nº Inventario : "+t._s(t.datosInfo.datos.inventario)+" ")])],1)],1),a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Nº Serie : "+t._s(t.datosInfo.datos.serie)+" ")])],1)],1),a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Marca : "+t._s(t.datosInfo.datos.marca)+" ")])],1)],1),a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Modelo : "+t._s(t.datosInfo.datos.modelo)+" ")])],1)],1),a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Dependencia : "+t._s(t.datosInfo.datos.dependencia)+" ")])],1)],1),a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Fecha de Alta : "+t._s(t.mostrarFecha(t.datosInfo.datos.fec_alta))+" ")])],1)],1),a(p.A,{attrs:{xs12:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title text-capitalize"},[t._v(" Lugar : "+t._s(t.datosInfo.datos.lugar?.nombre??"Sin Dato")+" ")])],1)],1),a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title text-capitalize"},[t._v(" Area : "+t._s(t.datosInfo.datos.area?.area??"Sin Dato")+" ")])],1)],1),a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Ubicacion : "+t._s(t.datosInfo.datos.ubicacion)+" ")])],1)],1),a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Estado : "+t._s(t.datosInfo.datos.funciona)+" ")])],1)],1),a(p.A,{attrs:{xs12:""}},[a(P.A,{staticClass:"text-sm-left title",attrs:{readonly:"",label:"DESCRIPCION",type:"text",color:"black","background-color":"terciary lighten-4","auto-grow":"",rows:"2"},model:{value:t.datosInfo.datos.detalle,callback:function(a){t.$set(t.datosInfo.datos,"detalle",a)},expression:"datosInfo.datos.detalle"}})],1)],1)],1),"PCs-Desktop"===t.datosInfo.datos.categoria||"PCs-Notebook"===t.datosInfo.datos.categoria||"PCs-AllInOne"===t.datosInfo.datos.categoria?a(d.A,{attrs:{terciary:"","lighten-2":"","grid-list-xs":""}},[a(n.OQ,{staticClass:"px-2 headline"},[t._v(t._s(t.datosInfo.datos.categoria))]),a(h.A,{attrs:{row:"",wrap:""}},[a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Microprocesador : "+t._s(t.datosInfo.datos.micro)+" ")])],1)],1),a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Motherboard : "+t._s(t.datosInfo.datos.mother)+" ")])],1)],1),a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Tipo de Memoria : "+t._s(t.datosInfo.datos.memoria_tipo)+" ")])],1)],1),a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Memoria : "+t._s(t.datosInfo.datos.memoria)+" ")])],1)],1),a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Tipo de Disco : "+t._s(t.datosInfo.datos.disco_tipo)+" ")])],1)],1),a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Disco : "+t._s(t.datosInfo.datos.disco)+" ")])],1)],1),a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Fuente : "+t._s(t.datosInfo.datos.fuente)+" ")])],1)],1)],1)],1):t._e(),"Insumos"===t.datosInfo.datos.categoria?a(d.A,{attrs:{terciary:"","lighten-2":"","grid-list-xs":""}},[a(n.OQ,{staticClass:"px-2 headline"},[t._v("Insumos - "+t._s(t.datosInfo.datos.subcategoria))]),a(h.A,{attrs:{row:"",wrap:""}},[a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Cantidad : "+t._s(t.datosInfo.datos.cantidad)+" ")])],1)],1),a(p.A,{attrs:{xs0:"",md6:""}}),"Toner"===t.datosInfo.datos.subcategoria?a(p.A,{attrs:{xs12:""}},[a(P.A,{staticClass:"text-sm-left title",attrs:{readonly:"",label:"COMPATIBILIDAD",type:"text",color:"black","background-color":"terciary lighten-4","auto-grow":"",rows:"2"},model:{value:t.datosInfo.datos.compatibilidad,callback:function(a){t.$set(t.datosInfo.datos,"compatibilidad",a)},expression:"datosInfo.datos.compatibilidad"}})],1):t._e()],1)],1):t._e(),"Monitor"===t.datosInfo.datos.categoria?a(d.A,{attrs:{terciary:"","lighten-2":"","grid-list-xs":""}},[a(n.OQ,{staticClass:"px-2 headline"},[t._v("Monitor")]),a(h.A,{attrs:{row:"",wrap:""}},[a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" PC Asociada : "+t._s(t.datosInfo.datos.PC)+" ")])],1)],1),a(p.A,{attrs:{xs0:"",md6:""}}),a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Pulgadas : "+t._s(t.datosInfo.datos.pulgadas)+" ")])],1)],1),a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Tipo de Pantalla : "+t._s(t.datosInfo.datos.tipoPantalla)+" ")])],1)],1)],1)],1):t._e(),"Impresora"===t.datosInfo.datos.categoria?a(d.A,{attrs:{terciary:"","lighten-2":"","grid-list-xs":""}},[a(n.OQ,{staticClass:"px-2 headline"},[t._v("Impresora")]),a(h.A,{attrs:{row:"",wrap:""}},[a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Sistema de Impresion : "+t._s(t.datosInfo.datos.impresora_tipo)+" ")])],1)],1),a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Multifuncion : "+t._s(!0===t.datosInfo.datos.impresora_multifuncion?"Si":!1===t.datosInfo.datos.impresora_multifuncion?"No":"Sin Dato")+" ")])],1)],1)],1)],1):t._e(),"Telefono"===t.datosInfo.datos.categoria?a(d.A,{attrs:{terciary:"","lighten-2":"","grid-list-xs":""}},[a(n.OQ,{staticClass:"px-2 headline"},[t._v("Telefono")]),a(h.A,{attrs:{row:"",wrap:""}},[a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Numero de Interno : "+t._s(t.datosInfo.datos.telefono_interno)+" ")])],1)],1),a(p.A,{attrs:{xs0:"",md6:""}})],1)],1):t._e(),"Robo/Hurto"===t.datosInfo.datos.funciona||"Extravio"===t.datosInfo.datos.funciona?a(d.A,{attrs:{orange:"","lighten-2":"","grid-list-xs":""}},[a(n.OQ,{staticClass:"px-2 headline"},[t._v(t._s(t.datosInfo.datos.funciona))]),a(h.A,{attrs:{row:"",wrap:""}},[a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Fecha Percance : "+t._s(t.datosInfo.datos.fec_percance?t.mostrarFecha(t.datosInfo.datos.fec_percance):"Sin Dato.")+" ")])],1)],1),a(p.A,{attrs:{xs12:""}},[a(P.A,{staticClass:"text-sm-left title",attrs:{readonly:"",label:"RESUMEN DEL PERCANCE",type:"text",color:"black","background-color":"terciary lighten-4","auto-grow":"",rows:"2"},model:{value:t.datosInfo.datos.resumen_percance,callback:function(a){t.$set(t.datosInfo.datos,"resumen_percance",a)},expression:"datosInfo.datos.resumen_percance"}})],1),a(p.A,{attrs:{xs0:"",md6:""}})],1)],1):t._e(),"Baja"===t.datosInfo.datos.funciona||"Baja Oficial"===t.datosInfo.datos.funciona?a(d.A,{attrs:{orange:"","lighten-2":"","grid-list-xs":""}},[a(n.OQ,{staticClass:"px-2 headline"},[t._v(t._s(t.datosInfo.datos.funciona))]),a(h.A,{attrs:{row:"",wrap:""}},[a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Fecha : "+t._s(t.datosInfo.datos.fec_baja?t.mostrarFecha(t.datosInfo.datos.fec_baja):"Sin Dato.")+" ")])],1)],1),a(p.A,{attrs:{xs12:""}},[a(P.A,{staticClass:"text-sm-left title",attrs:{readonly:"",label:"MOTIVO",type:"text",color:"black","background-color":"terciary lighten-4","auto-grow":"",rows:"2"},model:{value:t.datosInfo.datos.motivo_baja,callback:function(a){t.$set(t.datosInfo.datos,"motivo_baja",a)},expression:"datosInfo.datos.motivo_baja"}})],1),a(p.A,{attrs:{xs0:"",md6:""}})],1)],1):t._e(),!1===t.datosInfo.datos.estado?a(d.A,{attrs:{orange:"","lighten-2":"","grid-list-xs":""}},[a(n.OQ,{staticClass:"px-2 headline"},[t._v("Eliminado")]),a(h.A,{attrs:{row:"",wrap:""}},[a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Fecha : "+t._s(t.mostrarFecha(t.datosInfo.datos.fec_eliminacion))+" ")])],1)],1),a(p.A,{attrs:{xs12:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title text-capitalize"},[t._v(" "+t._s(t.datosInfo.datos.usuario_eliminacion?`Eliminado por: ${t.datosInfo.datos.usuario_eliminacion.nombreC}.`:"Se elimino desde edicion o No se actualizo la pagina.")+" ")])],1)],1),a(p.A,{attrs:{xs12:""}},[a(P.A,{staticClass:"text-sm-left title",attrs:{readonly:"",label:"MOTIVO",type:"text",color:"black","background-color":"terciary lighten-4","auto-grow":"",rows:"2"},model:{value:t.datosInfo.datos.motivo_eliminacion,callback:function(a){t.$set(t.datosInfo.datos,"motivo_eliminacion",a)},expression:"datosInfo.datos.motivo_eliminacion"}})],1),a(p.A,{attrs:{xs0:"",md6:""}})],1)],1):t._e(),t.datosInfo.datos.verificado?a(d.A,{attrs:{primary:"","lighten-1":"","grid-list-xs":""}},[a(n.OQ,{staticClass:"px-2 headline"},[t._v("Verificado")]),a(h.A,{attrs:{row:"",wrap:""}},[a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" Fecha : "+t._s(t.mostrarFecha(t.datosInfo.datos.fec_verifico))+" ")])],1)],1),a(p.A,{attrs:{xs12:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title text-capitalize"},[t._v(" "+t._s(t.datosInfo.datos.usuario_verifico?`Verificado por: ${t.datosInfo.datos.usuario_verifico.nombreC}.`:"Falta verificar")+" ")])],1)],1)],1)],1):a(d.A,{attrs:{info:"","lighten-1":"","grid-list-xs":""}},[a(n.OQ,{staticClass:"px-2 headline"},[t._v("Ultima vez Verificado")]),a(h.A,{attrs:{row:"",wrap:""}},[a(p.A,{attrs:{xs12:"",md6:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title"},[t._v(" "+t._s(t.datosInfo.datos.fec_verifico?"Fecha : "+t.mostrarFecha(t.datosInfo.datos.fec_verifico):"Fecha : Nunca se Verifico")+" ")])],1)],1),a(p.A,{attrs:{xs12:""}},[a(s.A,{attrs:{color:"terciary lighten-4"}},[a(n.OQ,{staticClass:"px-2 title text-capitalize"},[t._v(" "+t._s(t.datosInfo.datos.usuario_verifico?`Verificado por: ${t.datosInfo.datos.usuario_verifico.nombreC}.`:"Nunca se Verifico")+" ")])],1)],1)],1)],1)],1)],1)],1)},M=[],T={name:"patrimonioInfo",props:["persona","loading","datosInfo","datosInfoOff"],data:()=>({computed:{},methods:{}})},L=T,N=(0,O.A)(L,F,M,!1,null,null,null),Q=N.exports,B=e(21939),z=e(69490),V=e(70134),H=function(){var t=this,a=t._self._c;return a(S.A,{attrs:{"max-width":"80%",persistent:"",scrollable:""},model:{value:t.dialogStockDeposito.state,callback:function(a){t.$set(t.dialogStockDeposito,"state",a)},expression:"dialogStockDeposito.state"}},[a(s.A,{staticClass:"dialog-draggable-window"},[a(V.A,{staticClass:"dialog-draggable ma-0 pa-0",attrs:{color:"grey lighten-2",height:"auto",window:""}},[a(f.A,{staticClass:"dialog-draggable pl-2",attrs:{medium:"",color:"black darken-2"}},[t._v("warehouse")]),a("span",{staticClass:"display-1 font-weight-bold text-capitalize black--text text--darken-2 dialog-draggable"},[t._v("Stock Deposito: "+t._s(t.dataEdit.modelo))]),a(x.hc),a(f.A,{attrs:{large:"",disabled:t.loading.estado,color:"error darken-1"},on:{click:t.close}},[t._v("cancel_presentation")])],1),a(n.OQ,[a(B.A,{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valido,callback:function(a){t.valido=a},expression:"valido"}},[a(d.A,{attrs:{"grid-list-md":""}},[a(h.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[a(p.A,{attrs:{xs12:"",sm5:"","px-3":""}},[a(b.W,{staticClass:"input__text--align",staticStyle:{"--align":"center"},attrs:{readonly:"","background-color":(t.dataEdit.cantidad<=0?"error":"terciary")+" lighten-1","prepend-icon":"grain",label:"Cantidad Local",type:"number",color:"terciary"},model:{value:t.dataEdit.cantidad,callback:function(a){t.$set(t.dataEdit,"cantidad",a)},expression:"dataEdit.cantidad"}})],1),a(p.A,{attrs:{xs12:"",sm2:"","px-3":""}}),a(p.A,{attrs:{xs12:"",sm5:"","px-3":""}},[a(b.W,{staticClass:"input__text--align",staticStyle:{"--align":"center"},attrs:{readonly:"","background-color":(t.dataEdit.cantidad_deposito<=0?"error":"terciary")+" lighten-1","prepend-icon":"warehouse",label:"Cantidad Deposito",type:"number",color:"terciary"},model:{value:t.dataEdit.cantidad_deposito,callback:function(a){t.$set(t.dataEdit,"cantidad_deposito",a)},expression:"dataEdit.cantidad_deposito"}})],1),a(p.A,{attrs:{xs12:"",sm3:"","px-3":""}}),a(p.A,{attrs:{xs12:"",sm6:"","px-3":""}},[a(b.W,{attrs:{clearable:"","background-color":"terciary lighten-5","prepend-icon":"compare_arrows",label:"Cantidad a depositar",type:"number",onkeydown:"return event.key !== 'e' && event.key !== 'E' && event.key !== '.' && event.key !== ',' && event.key !== '+' && event.key !== '-'",rules:[...t.rules.requerido,...t.rules.soloNumero,t.rules.minNumber(-t.dataEdit.cantidad_deposito),t.rules.maxNumber(t.dataEdit.cantidad),t=>{try{return"0"!==t||"La cantidad a depositar no puede ser cero."}catch(a){return"Error Inesperado (dialogStockDeposito)."}}],color:"terciary"},model:{value:t.dataEdit.sumar,callback:function(a){t.$set(t.dataEdit,"sumar",a)},expression:"dataEdit.sumar"}}),a(z.A,{attrs:{color:"terciary",max:t.dataEdit.cantidad,min:-t.dataEdit.cantidad_deposito,rules:[...t.rules.requerido],"thumb-label":"always","thumb-size":28,"append-icon":"warehouse","prepend-icon":"grain"},on:{"click:append":()=>{t.dataEdit.sumar+=1},"click:prepend":()=>{t.dataEdit.sumar-=1}},model:{value:t.dataEdit.sumar,callback:function(a){t.$set(t.dataEdit,"sumar",a)},expression:"dataEdit.sumar"}})],1),a(p.A,{attrs:{xs12:"",sm3:"","px-3":""}}),a(p.A,{attrs:{xs12:"",sm5:"","px-3":""}},[a(b.W,{staticClass:"input__text--align",staticStyle:{"--align":"center"},attrs:{readonly:"","background-color":(t.futuro.cantidad<=0?"error":"terciary")+" lighten-1","prepend-icon":"grain",label:"Cantidad Futura en Local",type:"number",color:"terciary"},model:{value:t.futuro.cantidad,callback:function(a){t.$set(t.futuro,"cantidad",a)},expression:"futuro.cantidad"}})],1),a(p.A,{attrs:{xs12:"",sm2:"","px-3":""}}),a(p.A,{attrs:{xs12:"",sm5:"","px-3":""}},[a(b.W,{staticClass:"input__text--align",staticStyle:{"--align":"center"},attrs:{readonly:"","background-color":(t.futuro.cantidad_deposito<=0?"error":"terciary")+" lighten-1","prepend-icon":"warehouse",label:"Cantidad Futura en Deposito",type:"number",color:"terciary"},model:{value:t.futuro.cantidad_deposito,callback:function(a){t.$set(t.futuro,"cantidad_deposito",a)},expression:"futuro.cantidad_deposito"}})],1)],1)],1)],1)],1),a(n.SL,[a(h.A,{attrs:{row:"",wrap:""}},[a(x.hc),a(i.A,{staticClass:"error darken-1",attrs:{disabled:t.loading.estado,round:"",loading:t.loading.estado},on:{click:t.close}},[t._v(" Cancelar ")]),a(i.A,{staticClass:"primary darken-1 white--text",attrs:{disabled:t.loading.estado,loading:t.loading.estado,round:""},on:{click:function(a){return t.actualizarStockDeposito({data:t.dataEdit,validate:t.$refs.form.validate,finish:t.close})}}},[t._v(" "+t._s(t.valido?"Realizar Cambio":"Formulario No valido")+" ")])],1)],1)],1)],1)},W=[],R={name:"dialogStockDeposito",props:["closeFinish"],components:{},data:()=>({valido:!0,futuro:{cantidad:"",cantidad_deposito:""},dataEdit:{},dataEditBase:{_id:"",cantidad:"0",cantidad_deposito:"0",sumar:"0",modelo:""}}),computed:{...(0,k.aH)(["loading","rules"]),...(0,k.aH)("patrimonio",["dialogStockDeposito"])},watch:{async"dialogStockDeposito.state"(t){t?setTimeout((async()=>{let t=await this.buscarObjetosFiltro({filtro:{_id:this.dialogStockDeposito.id},select:"cantidad cantidad_deposito modelo"});this.dataEdit=Object.assign(this._cloneDeep(this.dataEditBase),t[0]),this.$refs.form.resetValidation()}),350):(this.dataEdit=this._cloneDeep(this.dataEditBase),this.$refs.form.resetValidation())},"dataEdit.sumar"(t){t?(this.futuro.cantidad=this.dataEdit.cantidad-t,this.futuro.cantidad_deposito=Number(this.dataEdit.cantidad_deposito)+Number(t)):(this.futuro.cantidad=this.dataEdit.cantidad,this.futuro.cantidad_deposito=this.dataEdit.cantidad_deposito)}},beforeMount(){this.dataEdit=this._cloneDeep(this.dataEditBase)},methods:{...(0,k.i0)("patrimonio",["actualizarDialogStockDeposito","buscarObjetosFiltro","actualizarStockDeposito"]),close(){this.actualizarDialogStockDeposito({state:!1}),this.closeFinish()}}},q=R,U=(0,O.A)(q,H,W,!1,null,null,null),Y=U.exports,G={name:"objetoBuscar",components:{bodyDataTableDinamic:y.A,formFiltro:E,patrimonioInfo:Q,dialogStockDeposito:Y},data:()=>({dataTable:[],ultimoFiltro:{},filtro:{categoria:"",inventario:"",serie:"",marca:"",modelo:"",dependencia:"",fec_alta:"",detalle:"",funciona:"",verificado:"",ubicacion:"",lugar:"",area:"",estado:"",micro:"",memoria:"",disco:"",mother:"",memoria_tipo:"",disco_tipo:"",fuente:"",cantidad:"",cantidad_deposito:"",subcategoria:"",compatibilidad:"",PC:"",pulgadas:"",tipoPantalla:"",impresora_tipo:"",impresora_multifuncion:"",telefono_interno:"",categoriaVarios:""},PCs:["micro","memoria","disco","mother","memoria_tipo","disco_tipo","fuente"],Monitor:["PC","pulgadas","tipoPantalla"],Impresora:["impresora_tipo","impresora_multifuncion"],search:"",paginacion:{sortBy:"area.area",descending:!1,rowsPerPage:10,page:1},reRenderizarTable:!0,filtroHeaderOptions:["Categoria","Descripcion","Estado","Marca","Modelo","N° serie","Ubicacion","Verificado","Dependencia","Fecha de Alta","Fecha de Baja"],filtroHeaderSelected:["Categoria","Estado","Modelo"],seleccionados:[],columnasExcel:{Categoria:"categoria","N° Inventario":{field:"inventario",callback:t=>{try{return"0"===t?.trim?.()[0]||"-"===t?.trim?.()[0]&&"0"===t?.trim?.()[1]?`"${t}"`:t}catch(a){return t}}},"N° serie":{field:"serie",callback:t=>{try{return"0"===t?.trim?.()[0]||"-"===t?.trim?.()[0]&&"0"===t?.trim?.()[1]?`"${t}"`:t}catch(a){return t}}},Marca:"marca",Modelo:"modelo",Dependencia:"dependencia","Fecha de Alta":{field:"fec_alta",callback:t=>{try{let a=new Date(t).toISOString().substring(0,10);return a}catch(a){return t}}},Detalle:"detalle",Estado:"funciona",Lugar:{field:"lugar",callback:t=>{try{return t?t.nombre:t}catch(a){return t}}},Area:{field:"area",callback:t=>{try{return t?t.area:t}catch(a){return t}}},Ubicacion:"ubicacion","PC-Micro":"micro","PC-Mother":"mother","PC-Memoria-Tipo":"memoria_tipo","PC-Memoria":"memoria","PC-Disco-Tipo":"disco_tipo","PC-Disco":"disco","PC-Fuente":"fuente","Monitor-PC Asosiada":"PC","Monitor-Pulgadas":"pulgadas","Monitor-Tipo de Pantalla":"tipoPantalla","Impresora-Sistema":"impresora_tipo","Impresora-Multifuncion":"impresora_multifuncion","Insumo-Subcategoria":"subcategoria","Insumo-Cantidad":"cantidad","Insumo-Cantidad-Deposito":"cantidad_deposito","Insumo-Cantidad-Total":{callback:t=>{try{let a=0;return t.cantidad&&(a+=t.cantidad),t.cantidad_deposito&&(a+=t.cantidad_deposito),a}catch(a){return""}}},"Insumo-Compatibilidad":"compatibilidad","Telefono-Interno":"telefono_interno","Motivo de Baja":"motivo_baja","Fecha de Baja":{field:"fec_baja",callback:t=>{try{let a=new Date(t).toISOString().substring(0,10);return a}catch(a){return t}}},Verificado:"verificado",Borrado:{field:"estado",callback:t=>{try{return""+(t?"No":"Si")}catch(a){return t}}}}}),computed:{...(0,k.aH)(["loading","hoy","persona","datosInfo"]),headers(){if(0!=this.dataTable?.length){let t=[{text:"Acciones",value:"_id",align:"center",sortable:!1,width:"5%",ignore:!0},{text:"Lugar",value:"lugar.nombre",class:"text-sm-left",ruta:"lugar.nombre"},{text:"Area",value:"area.area",class:"text-sm-left",ruta:"area.area"},{text:"N° Inventario",value:"inventario",class:"text-sm-right",width:"10%",ruta:"inventario"}];return this.filtroHeaderSelected.includes("Ubicacion")&&t.push({text:"Ubicacion",value:"ubicacion",class:"text-sm-left",ruta:"ubicacion"}),this.filtroHeaderSelected.includes("Categoria")&&t.push({text:"Categoria",value:"categoria",class:"text-sm-left",ruta:"categoria"}),this.filtroHeaderSelected.includes("Marca")&&t.push({text:"Marca",value:"marca",class:"text-sm-left",width:"10%",ruta:"marca"}),this.filtroHeaderSelected.includes("Modelo")&&t.push({text:"Modelo",value:"modelo",class:"text-sm-left",width:"10%",ruta:"modelo"}),this.filtroHeaderSelected.includes("N° serie")&&t.push({text:"N° serie",value:"serie",class:"text-sm-right",width:"15%",ruta:"serie"}),this.filtroHeaderSelected.includes("Descripcion")&&t.push({text:"Descripcion",value:"detalle",class:"text-sm-center",ruta:"detalle"}),this.filtroHeaderSelected.includes("Cantidad")&&t.push({text:"Cantidad",value:"cantidad",class:"font-weight-bold text-sm-center",width:"5%",ruta:"cantidad",numeric:!0}),this.filtroHeaderSelected.includes("Cantidad Deposito")&&t.push({text:"Cantidad Deposito",value:"cantidad_deposito",class:"font-weight-bold text-sm-center",width:"5%",ruta:"cantidad_deposito",numeric:!0}),this.filtroHeaderSelected.includes("Estado")&&t.push({text:"Estado",value:"funciona",class:"text-sm-left",width:"10%",ruta:"funciona"}),this.filtroHeaderSelected.includes("Verificado")&&t.push({text:"Verificado",value:"verificado",class:"text-sm-center",width:"5%",ruta:"verificado",boolean:!0}),this.filtroHeaderSelected.includes("Dependencia")&&t.push({text:"Dependencia",value:"dependencia",class:"text-sm-center",width:"10%",ruta:"dependencia"}),this.filtroHeaderSelected.includes("Fecha de Alta")&&t.push({text:"Fecha de Alta",value:"fec_alta",class:"text-sm-center",width:"10%",ruta:"fec_alta",date:!0}),this.filtroHeaderSelected.includes("Fecha de Baja")&&t.push({text:"Fecha de Baja",value:"fec_baja",class:"text-sm-center",width:"10%",ruta:"fec_baja",date:!0}),t}return[]},headersDinamics(){return this.reRenderizarTable=!this.reRenderizarTable,[...this.headers.filter((t=>!0!==t.ignore))]},nombreExcel(){return`PatrimonioObjetos-${this.hoy}.xls`}},async created(){this.persona.informatica&&0!==this.persona.informatica?(this.filtroHeaderOptions.unshift("Cantidad"),this.filtroHeaderSelected.unshift("Cantidad"),this.filtroHeaderOptions.unshift("Cantidad Deposito"),this.filtroHeaderSelected.unshift("Cantidad Deposito")):this.persona.patrimonio&&0!==this.persona.patrimonio||this.persona.patrimonioArea&&0!==this.persona.patrimonioArea&&(this.filtro.area=this.persona.area)},methods:{...(0,k.PY)(["mostrarLoading","ocultarLoading","mostrarError","mostrarMensaje","datosInfoOn","datosInfoOff"]),...(0,k.i0)(["requestAPI"]),...(0,k.i0)("patrimonio",["actualizarDialogStockDeposito","buscarObjetosFiltro"]),backgroundClass(t){if(!t)return"";try{return t.estado?t.cantidad<=0&&(!t.cantidad_deposito||t.cantidad_deposito<=0)?"background-color: red lighten-3":"Funcionando"===t.funciona?"background-color: green lighten-5"+(t.verificado?"":" font-italic"):"Espera Asignacion"===t.funciona||"Deposito"===t.funciona?"background-color: blue lighten-5"+(t.verificado?"":" font-italic"):"Robo/Hurto"===t.funciona||"Extravio"===t.funciona||"Baja"===t.funciona||"Baja Oficial"===t.funciona||"Obsoleto"===t.funciona?"background-color: red lighten-3"+(t.verificado?"":" font-italic"):"En Reparacion"===t.funciona||"Espera Garantia"===t.funciona?"background-color: yellow lighten-5"+(t.verificado?"":" font-italic"):"background-color: grey lighten-3"+(t.verificado?"":" font-italic"):"background-color: red darken-2 white--text"}catch(a){return""}},async deleteObjeto(t){if(await this.$root.$confirm.open({titulo:"DESACTIVAR",msj:["Dejara de ser Visible para los no Admins.\nPara re-Activarlo debera modificar su 'Visibilidad' desde la edicion del mismo.",`El Bien: ${t.inventario??t.modelo}, sera DESACTIVADO.\n¿Desea continuar?`]})){let e=prompt("Ingrese el motivo por el cual se Borrara el objeto: ");if(e&&""!==e.trim())try{this.mostrarLoading({titulo:"Dando de Baja al Objeto..."});let a=null;return a=await this.requestAPI({method:"delete",url:`/patrimonio/${t._id}?motivo=${e}`}),!!a?.data?.ok&&(t.estado=!1,t.motivo_eliminacion=e,t.verificado=!0,t.usuario_verifico=this.persona,t.fec_verifico=Date.now(),this.mostrarMensaje({msj:"Objeto Borrado Exitosamente.",titulo:"Borrado"}),!0)}catch(a){return this.mostrarError({mensaje:a,titulo:"Inesperado"}),!1}finally{this.ocultarLoading()}else null===e||this.mostrarError({mensaje:"No se especifico un motivo para la eliminacion.",titulo:"Valores Requeridos."})}},buscar(){let t=Object.assign({},this.filtro);if(t.categoria.includes("PCs")||this.PCs.forEach((a=>{delete t[a]})),"Insumos"!==t.categoria&&(t.categoria&&delete t["compatibilidad"],["cantidad","subcategoria"].forEach((a=>{delete t[a]}))),"Monitor"!==t.categoria&&this.Monitor.forEach((a=>{delete t[a]})),"Impresora"!==t.categoria&&this.Impresora.forEach((a=>{delete t[a]})),"Telefono"!==t.categoria&&delete t["telefono_interno"],"Varios"!==t.categoria&&delete t["categoriaVarios"],"Insumos"===t.categoria&&(delete t["serie"],delete t["inventario"]),"Muebles"===t.categoria&&delete t["serie"],"Varios"===t.categoria&&(t["categoria"]=t["categoriaVarios"],delete t["categoriaVarios"]),t.inventario?.includes(",")){t.inventario=t.inventario.split(",").filter((t=>t.trim()));for(let a=0;a<t.inventario.length;a++)t.inventario[a]=t.inventario[a].trim()}let a=!0;for(const e in t)t.hasOwnProperty(e)&&(""===t[e]||null===t[e]||void 0===t[e]||0===t[e].length?delete t[e]:a=!1);!0!==a?this.recargarDataTable({filtro:t,populate:{area:!0,lugar:!0,usuario_eliminacion:!0,usuario_verifico:!0}}):this.mostrarError({mensaje:"Complete por lo menos un campo de busqueda.",titulo:"Valores Requeridos."})},async validarObjeto(t){if(await this.$root.$confirm.open({titulo:"VALIDAR",msj:["Asegura la existencia del Bien, en el Area registrada.",`El Bien: ${t.inventario??t.modelo}, sera VALIDADO.\n¿Desea continuar?`]}))try{this.mostrarLoading({titulo:"Validando Objeto..."});let a=null;return a=await this.requestAPI({method:"put",url:`/patrimonio/validar/${t._id}`,update:t}),!!a?.data?.ok&&("Insumos"===t.categoria?t.verificado=!1:t.verificado=!0,t.usuario_verifico=this.persona,t.fec_verifico=Date.now(),this.mostrarMensaje({msj:"Objeto Validado Exitosamente.",titulo:"Objeto Validado"}),!0)}catch(a){return this.mostrarError({mensaje:a,titulo:"Inesperado"}),!1}finally{this.ocultarLoading()}},descargarExcel(t){0===this.selecteccionFiltroExcel(t).length?this.mostrarError({mensaje:"No hay elementos para exportar.",titulo:"Excel (Capa 8)"}):this.mostrarLoading({titulo:"Creando Excel..."})},selecteccionFiltroExcel(t){if("ADMIN_ROLE"!==this.persona.role){let a=[];for(let e=0;e<t.length;e++)t[e].estado&&a.push(t[e]);return a}return t},async recargarDataTable(t){if(t){let a=await this.buscarObjetosFiltro(t);a&&(this.dataTable=a,this.ultimoFiltro=this._cloneDeep(t))}else this.dataTable=await this.buscarObjetosFiltro(this.ultimoFiltro);this.paginacion.page>Math.ceil(this.dataTable?.length/this.paginacion.rowsPerPage)&&(this.paginacion.page=1)}}},Z=G,J=(0,O.A)(Z,v,A,!1,null,null,null),K=J.exports},22985:function(t,a,e){e.r(a),e.d(a,{default:function(){return j}});var o=e(21999),r=e(28597),i=e(28383),s=e(3150),n=e(1899),l=e(37471),c=e(48122),d=e(81851),u=e(97001),m=e(79305),p=e(34172),f=e(41614),h=e(21939),g=e(21527),x=e(69155),b=e(21522),_=e(17912),v=e(55731),A=e(57e3),k=e(17087),y=(e(44114),function(){var t=this,a=t._self._c;return a(c.A,{attrs:{fluid:"","grid-list-xs":""}},[a(x.A,{attrs:{"align-center":"","justify-center":"","ma-0":"",wrap:"","text-xs-center":""}},[a(f.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[a(s.A,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[a(n.OQ,{staticClass:"px-0 text-uppercase"},[t._v("====== Patrimonio ======")])],1)],1),a(f.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[a(s.A,{staticClass:"white--text",attrs:{color:"cuarto darken-1"}},[a(n.OQ,{staticClass:"px-0 text-uppercase"},[t._v("====== ====== Buscar ====== ======")])],1),a(s.A,{staticClass:"elevation-6",attrs:{color:"grey lighten-2"}},[a(n.OQ,{staticClass:"px-0"},[a(x.A,{attrs:{row:"",wrap:""}},[a(v.hc),a(f.A,{attrs:{xs12:"",sm5:"",md4:""}},[a(b.A,{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function({on:e}){return[a(A.W,t._g({attrs:{label:"Fecha Desde","prepend-icon":"event",readonly:"",color:"cuarto darken-3"},model:{value:t.filtro.fecha.$gte,callback:function(a){t.$set(t.filtro.fecha,"$gte",a)},expression:"filtro.fecha.$gte"}},e))]}}]),model:{value:t.menufecha1,callback:function(a){t.menufecha1=a},expression:"menufecha1"}},[a(u.A,{attrs:{color:"cuarto darken-3","header-color":"cuarto darken-1",locale:"mx",max:t.filtro.fecha.$lte},on:{input:function(a){t.menufecha1=!1}},model:{value:t.filtro.fecha.$gte,callback:function(a){t.$set(t.filtro.fecha,"$gte",a)},expression:"filtro.fecha.$gte"}})],1)],1),a(v.hc),a(p.A,{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a(v.hc),a(f.A,{attrs:{xs12:"",sm5:"",md4:""}},[a(b.A,{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function({on:e}){return[a(A.W,t._g({attrs:{label:"Fecha Hasta","prepend-icon":"event",readonly:"",color:"cuarto darken-3"},model:{value:t.filtro.fecha.$lte,callback:function(a){t.$set(t.filtro.fecha,"$lte",a)},expression:"filtro.fecha.$lte"}},e))]}}]),model:{value:t.menufecha2,callback:function(a){t.menufecha2=a},expression:"menufecha2"}},[a(u.A,{attrs:{color:"cuarto darken-3","header-color":"cuarto darken-1",locale:"mx",min:t.filtro.fecha.$gte},on:{input:function(a){t.menufecha2=!1}},model:{value:t.filtro.fecha.$lte,callback:function(a){t.$set(t.filtro.fecha,"$lte",a)},expression:"filtro.fecha.$lte"}})],1)],1),a(v.hc)],1),a(x.A,{attrs:{row:"",wrap:""}},[a(v.hc),a(f.A,{attrs:{xs12:"",sm6:"","d-flex":""}},[a(r.A,{staticClass:"capitalizar",attrs:{readonly:!t.permisoOtrasAreas(),clearable:t.permisoOtrasAreas(),"background-color":t.permisoOtrasAreas()?"cuarto lighten-4":"cuarto lighten-2","item-value":"id","item-text":"area",items:t.areas,label:"Area","prepend-icon":"location_city",color:"cuarto darken-4"},model:{value:t.filtro.oficina,callback:function(a){t.$set(t.filtro,"oficina",a)},expression:"filtro.oficina"}})],1),a(v.hc)],1)],1),a(x.A,{attrs:{wrap:""}},[a(i.A,{staticClass:"white--text",attrs:{round:"",color:"cuarto lighten-1",disabled:t.loading.estado,loading:t.loading.estado},on:{click:function(a){return t.buscarDeclaracion()}}},[t._v("Cargar TODO")]),a(v.hc),a(v.hc),a(v.hc),a(i.A,{staticClass:"white--text",attrs:{round:"",color:"cuarto darken-3",disabled:t.loading.estado,loading:t.loading.estado},on:{click:function(a){return t.buscarDeclaracion(t.filtro)}}},[t._v("Buscar")]),a(v.hc)],1)],1)],1),a(f.A,{attrs:{"pa-1":"","ma-1":"",xs12:"",terciary:"","lighten-1":""}},[a(s.A,{staticClass:"elevation-6"},[a(x.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",terciary:""}},[a(f.A,{attrs:{"text-xs-left":"","px-3":""}},[a(g.A,{attrs:{medium:"",color:"white",left:""}},[t._v("fas fa-file-invoice")]),a("span",{staticClass:"title white--text"},[t._v("Declaración de Bienes")])],1),a(v.hc),a(p.A,{staticClass:"hidden-xs-only mx-2 my-1 white",attrs:{vertical:""}}),a(i.A,{staticClass:"white--text",attrs:{round:"",color:"terciary darken-1",disabled:t.loading.estado||!(t.persona.patrimonio>1||t.persona.patrimonioArea>1),loading:t.loading.estado},on:{click:function(a){return t.$router.push({name:"PatrimonioDeclaracionCarga"})}}},[t._v("Nueva Declaración")])],1),a("div",[a(x.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",terciary:""}},[a(v.hc),a(p.A,{staticClass:"hidden-xs-only mx-2 my-1 white",attrs:{vertical:""}}),a(f.A,{attrs:{xs12:"",sm6:"","ma-1":""}},[a(A.W,{attrs:{"append-icon":"search",label:"Filtrar","background-color":"terciary lighten-4",color:"black","hide-details":"",clearable:""},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}})],1)],1),a(d.A,{staticClass:"elevation-6",staticStyle:{"table-layout":"fixed"},attrs:{headers:t.headers,items:t.declaraciones,"item-key":"_id",pagination:t.paginacion,"rows-per-page-items":[5,10,25,50],loading:t.loading.estado,search:t.search},on:{"update:pagination":function(a){t.paginacion=a}},scopedSlots:t._u([{key:"no-results",fn:function(){return[a(o.A,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[t._v(' No se encontraron resultados para "'+t._s(t.search)+'". ')])]},proxy:!0},{key:"no-data",fn:function(){return[a(o.A,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[t._v(" No hay datos para mostrar. ")])]},proxy:!0},{key:"items",fn:function(e){return[a("tr",[a(k.A,{attrs:{bottom:"","close-delay":"0"},scopedSlots:t._u([{key:"activator",fn:function({on:o}){return[a("td",t._g({staticClass:"text-capitalize text-xs-left",on:{click:function(a){return t.mostrarInfo(e.item)}}},o),[t._v(" "+t._s(e.item.fecha.substring(0,10))+" ")]),a("td",t._g({staticClass:"text-capitalize text-xs-left",on:{click:function(a){return t.mostrarInfo(e.item)}}},o),[t._v(" "+t._s(e.item.tipo)+" ")]),a("td",t._g({staticClass:"text-capitalize text-xs-left",on:{click:function(a){return t.mostrarInfo(e.item)}}},o),[t._v(" "+t._s(e.item.oficina?e.item.oficina.area:"Oficina Borrada")+" ")]),a("td",t._g({staticClass:"text-capitalize text-xs-left",on:{click:function(a){return t.mostrarInfo(e.item)}}},o),[t._v(" "+t._s(e.item.custodia)+" ")]),a("td",t._g({staticClass:"text-capitalize text-xs-center",on:{click:function(a){return t.mostrarInfo(e.item)}}},o),[t._v(" "+t._s(e.item.inventariador)+" ")])]}}],null,!0)},[a("span",[t._v("Click para mas informacion")])])],1)]}}])},[a(_.A,{attrs:{color:"terciary",indeterminate:""}})],1),a(m.A,{attrs:{"max-width":"670px",scrollable:""},model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[a(h.A,{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valido,callback:function(a){t.valido=a},expression:"valido"}},[a(s.A,[a(l.A,[a(x.A,{attrs:{row:""}},[a("pre",{staticClass:"headline text-capitalize"},[t._v(t._s(t.formTitle))]),a(v.hc),a(i.A,{attrs:{icon:"",disabled:t.loading.estado,loading:t.loading.estado,color:"error darken-1"},on:{click:t.close}},[a(g.A,{attrs:{large:""}},[t._v("cancel")])],1)],1)],1),a(n.OQ,[a(c.A,{attrs:{"grid-list-md":""}},[a(x.A,{attrs:{wrap:""}},[a(p.A,{staticClass:"mx-2",attrs:{color:"black"}}),a(f.A,{attrs:{xs12:"","px-2":""}},[a(d.A,{staticClass:"elevation-1",attrs:{headers:t.headersMuestra,items:t.mostrarItem.objetos},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.inventario))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.descripcion))])]}}])})],1)],1)],1)],1),a(n.SL,[a(x.A,{attrs:{row:"",wrap:""}},[a(v.hc),a(k.A,{attrs:{bottom:"","close-delay":"0"},scopedSlots:t._u([{key:"activator",fn:function({on:e}){return[a(i.A,t._g({staticClass:"terciary darken-1",attrs:{round:"",large:"",dark:"",disabled:t.loading.estado||!t.valido,loading:t.loading.estado},on:{click:function(a){return t.generarPDF({descarga:!0})}}},e),[a(g.A,{attrs:{"x-large":"",dark:""}},[t._v("cloud_download")])],1)]}}])},[a("span",[t._v("Descargar PDF")])]),a(p.A,{staticClass:"mx-2",attrs:{dark:"",vertical:""}}),a(k.A,{attrs:{bottom:"","close-delay":"0"},scopedSlots:t._u([{key:"activator",fn:function({on:e}){return[a(i.A,t._g({staticClass:"terciary darken-1",attrs:{round:"",large:"",dark:"",disabled:t.loading.estado||!t.valido,loading:t.loading.estado},on:{click:function(a){return t.generarPDF({descarga:!1})}}},e),[a(g.A,{attrs:{"x-large":"",dark:""}},[t._v("print")])],1)]}}])},[a("span",[t._v("Imprimir PDF")])])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)}),C=[],w=e(95353),I={name:"patrimonioDeclaracionBuscar",components:{},data:()=>({menufecha1:!1,menufecha2:!1,areas:[{area:"No buscar por Area",id:""}],filtro:{fecha:{$gte:(new Date).getFullYear()-1+"-"+((new Date).getMonth()+1).toString().padStart(2,0)+"-01",$lte:""},oficina:""},dialog:!1,valido:!0,search:"",paginacion:{sortBy:"fecha",descending:!0,rowsPerPage:10,page:1},headers:[{text:"Fecha",value:"fecha",align:"left",width:"20%"},{text:"Tipo",value:"tipo",align:"left",width:"20%"},{text:"Oficina",value:"oficina.area",align:"left",width:"*"},{text:"Custodia",value:"custodia",align:"left",width:"20%"},{text:"Inventariador",value:"inventariador",align:"center",width:"15%"}],headersMuestra:[{text:"Inventario N°",value:"inventario",align:"left",width:"20%",sortable:!1},{text:"Descripcion",value:"descripcion",align:"center",width:"*",sortable:!1}],declaraciones:[],formTitle:"Fecha - Tipo de Oficina(Nro)",mostrarIndex:-1,mostrarItem:{tipo:"",fecha:"",oficina:"",oficina_nro:"",custodia:"",inventariador:"",objetos:[{inventario:"",descripcion:""}]},defaultItem:{tipo:"",fecha:"",oficina:"",oficina_nro:"",custodia:"",inventariador:"",objetos:[{inventario:"",descripcion:""}]}}),computed:{...(0,w.aH)(["APIURL","axiosConfig","loading","hoy","persona"])},watch:{dialog(t){t||this.close()}},async created(){this.filtro.fecha.$lte=this.hoy,this.areas.push(...await this.buscarAreaFiltros({filtro:"todos",populate:"no",select:"area"})),this.persona.informatica&&0!==this.persona.informatica||this.persona.patrimonio&&0!==this.persona.patrimonio||this.persona.patrimonioArea&&0!==this.persona.patrimonioArea&&(this.filtro.oficina=this.persona.area)},methods:{...(0,w.PY)(["mostrarLoading","ocultarLoading","mostrarError","mostrarMensaje"]),...(0,w.i0)("main",["buscarAreaFiltros"]),permisoOtrasAreas(){return!(!this.persona.informatica||0===this.persona.informatica)||(!(!this.persona.patrimonio||0===this.persona.patrimonio)||(!this.persona.patrimonioArea||0===this.persona.patrimonioArea)&&void 0)},mostrarInfo(t){this.formTitle=`\t${t.fecha.substring(0,10)} - ${t.tipo}.\n${t.oficina?t.oficina.area:"Oficina Borrada"} (${t.oficina_nro})`,this.mostrarIndex=this.areas.indexOf(t),this.mostrarItem=Object.assign({},t),this.dialog=!0},close(){this.dialog=!1,setTimeout((()=>{this.mostrarItem=Object.assign({},this.defaultItem),this.mostrarIndex=-1,this.formTitle="Fecha - Tipo de Oficina(Nro)",this.$refs.form.resetValidation()}),300)},async buscarDeclaracion(t){try{t=t?JSON.stringify(t):"todos",this.mostrarLoading({titulo:"Cargando datos...",color:"primary"});let e=await this.axios.get(this.APIURL+"/patrimonioDeclaracion/buscar?busqueda="+t,this.axiosConfig);if(e.data.ok)this.declaraciones=e.data.declaraciones,this.paginacion.page>Math.ceil(this.declaraciones.length/this.paginacion.rowsPerPage)&&(this.paginacion.page=1);else try{this.mostrarError({errores:"",mensaje:e.data.err.message,titulo:e.status})}catch(a){this.mostrarError({errores:"",mensaje:"Problemas con el servidor, Intente mas tarde.",titulo:500})}}catch(a){try{this.mostrarError({errores:a.response.data.err.errors,mensaje:a.response.data.err.message,titulo:a.response.status})}catch(a){this.mostrarError({errores:"",mensaje:"Problemas con el servidor, Intente mas tarde.",titulo:500})}}finally{this.ocultarLoading()}},generarPDF({descarga:t}){this.dialog=!1,this.mostrarMensaje({msj:["Generando PDF en una ventana nueva del navegador.",`${this.mostrarItem.fecha.substring(0,10)} - ${this.mostrarItem.tipo}.\n${this.mostrarItem.oficina?this.mostrarItem.oficina.area:"Oficina Borrada"} (${this.mostrarItem.oficina_nro})`,"Si tiene problemas para ver el documento, revise los permisos del navegador para popups o bloqueadores(Adblock)."],titulo:"Generar PDF."}),setTimeout((()=>{this.mostrarItem=Object.assign({},this.defaultItem),this.mostrarIndex=-1,this.formTitle="Fecha - Tipo de Oficina(Nro)",this.$refs.form.resetValidation()}),300);let a=this.$router.resolve({name:"PatrimonioDeclaracionImprimir",params:{id:this.mostrarItem._id},query:{descarga:t}});window.open(a.href,"_blank")}}},D=I,$=e(81656),O=(0,$.A)(D,y,C,!1,null,null,null),j=O.exports},56430:function(t,a,e){e.r(a),e.d(a,{default:function(){return O}});var o=e(21999),r=e(28597),i=e(28383),s=e(3150),n=e(1899),l=e(37471),c=e(16717),d=e(48122),u=e(81851),m=e(34172),p=e(41614),f=e(21527),h=e(69155),g=e(17912),x=e(55731),b=e(57e3),_=e(17087),v=function(){var t=this,a=t._self._c;return a(d.A,{attrs:{fluid:"","grid-list-xs":""}},[a(h.A,{attrs:{"align-center":"","justify-center":"","ma-0":"",wrap:"","text-xs-center":""}},[a(p.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[a(s.A,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[a(n.OQ,{staticClass:"px-0 text-uppercase"},[t._v("====== Patrimonio ======")])],1)],1),a(p.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[a(s.A,{staticClass:"white--text",attrs:{color:"cuarto darken-1"}},[a(n.OQ,{staticClass:"px-0 text-uppercase"},[t._v("====== ====== Consultas de Movimientos ====== ======")])],1),a(s.A,{staticClass:"elevation-6",attrs:{color:"grey lighten-2"}},[a(n.OQ,{staticClass:"px-0"},[a(h.A,{attrs:{row:"",wrap:""}},[a(x.hc),a(p.A,{attrs:{xs12:"",sm5:"",md4:"","px-3":""}},[a("dateSelect",{attrs:{value:t.filtro.desde,color:"cuarto",label:"Fecha Desde",icon:"event"},model:{value:t.filtro.desde,callback:function(a){t.$set(t.filtro,"desde",a)},expression:"filtro.desde"}})],1),a(x.hc),a(p.A,{attrs:{xs12:"",sm5:"",md4:"","px-3":""}},[a("dateSelect",{attrs:{value:t.filtro.hasta,color:"cuarto",label:"Fecha Hasta",icon:"event"},model:{value:t.filtro.hasta,callback:function(a){t.$set(t.filtro,"hasta",a)},expression:"filtro.hasta"}})],1),a(x.hc)],1),a(h.A,{attrs:{row:"",wrap:""}},[a(x.hc),a(p.A,{attrs:{xs12:"",sm6:"",md5:"","px-3":""}},[a(r.A,{attrs:{"item-value":"id","item-text":"area",items:t.areas,label:"Area Desde","prepend-icon":"location_city",color:"cuarto","background-color":"cuarto lighten-5",clearable:""},on:{"click:clear":function(a){t.$nextTick((()=>t.filtro.area_desde=""))}},model:{value:t.filtro.area_desde,callback:function(a){t.$set(t.filtro,"area_desde",a)},expression:"filtro.area_desde"}})],1),a(p.A,{attrs:{xs12:"",sm6:"",md5:"","px-3":""}},[a(r.A,{attrs:{"item-value":"id","item-text":"area",items:t.areas,label:"Area Destino","prepend-icon":"location_city",color:"cuarto","background-color":"cuarto lighten-5",clearable:""},on:{"click:clear":function(a){t.$nextTick((()=>t.filtro.area_destino=""))}},model:{value:t.filtro.area_destino,callback:function(a){t.$set(t.filtro,"area_destino",a)},expression:"filtro.area_destino"}})],1),a(x.hc)],1),a(h.A,{attrs:{row:"",wrap:""}},[a(x.hc),a(p.A,{attrs:{xs12:"",sm6:"",md5:"","px-3":""}},[a(r.A,{attrs:{"item-value":"id","item-text":"nombre",items:t.lugaresDB,label:"Lugar Desde","prepend-icon":"fas fa-map-marked-alt",color:"cuarto","background-color":"cuarto lighten-5",clearable:""},on:{"click:clear":function(a){t.$nextTick((()=>t.filtro.lugar_anterior=""))}},model:{value:t.filtro.lugar_anterior,callback:function(a){t.$set(t.filtro,"lugar_anterior",a)},expression:"filtro.lugar_anterior"}})],1),a(p.A,{attrs:{xs12:"",sm6:"",md5:"","px-3":""}},[a(r.A,{attrs:{"item-value":"id","item-text":"nombre",items:t.lugaresDB,label:"Lugar Destino","prepend-icon":"fas fa-map-marked-alt",color:"cuarto","background-color":"cuarto lighten-5",clearable:""},on:{"click:clear":function(a){t.$nextTick((()=>t.filtro.lugar_destino=""))}},model:{value:t.filtro.lugar_destino,callback:function(a){t.$set(t.filtro,"lugar_destino",a)},expression:"filtro.lugar_destino"}})],1),a(x.hc)],1)],1),a(h.A,{attrs:{wrap:""}},[a(i.A,{staticClass:"white--text",attrs:{round:"",color:"cuarto lighten-1",disabled:t.loading.estado,loading:t.loading.estado},on:{click:function(a){return t.cargarmes()}}},[t._v(" Cargar Mes Anterior-Actual")]),a(x.hc),a(x.hc),a(x.hc),a(i.A,{staticClass:"white--text",attrs:{round:"",color:"cuarto darken-3",disabled:t.loading.estado,loading:t.loading.estado},on:{click:function(a){return t.buscar(t.filtro)}}},[t._v(" Buscar"),a(f.A,{attrs:{color:"white",right:""}},[t._v("search")])],1),a(x.hc)],1)],1)],1),a(p.A,{attrs:{"pa-1":"","ma-2":"",terciary:"","lighten-1":"",xs12:""}},[a(l.A,{staticClass:"elevation-6"},[a(f.A,{attrs:{left:"",color:"white"}},[t._v("fas fa-people-carry")]),a("span",{staticClass:"title white--text"},[t._v("Historial de Movimientos")]),a(x.hc),a(b.W,{attrs:{"append-icon":"search",label:"Filtrar",color:"black","background-color":"terciary lighten-4","hide-details":"",clearable:""},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}})],1),a(l.A,{attrs:{flat:"",color:"terciary lighten-2"}},[a(f.A,{attrs:{medium:"",color:"white",left:""}},[t._v("info")]),a("div",[a(h.A,{attrs:{row:""}},[a("span",{staticClass:"body-2 white--text"},[t._v("Seleccione los que imprimira como PDF")])])],1),a(m.A,{staticClass:"hidden-xs-only mx-2 my-1 white",attrs:{vertical:""}}),a(x.hc),a(i.A,{staticClass:"white--text",attrs:{round:"",to:{name:"PatrimonioBuscar"},color:"terciary darken-1",disabled:t.loading.estado,loading:t.loading.estado}},[a(f.A,{attrs:{color:"white",left:""}},[t._v("search")]),t._v("Buscar Objetos")],1)],1),a(u.A,{staticClass:"elevation-6",staticStyle:{"table-layout":"fixed"},attrs:{headers:t.headers,items:t.movimientos,"item-key":"_id",pagination:t.paginacion,"rows-per-page-items":[5,10,25,50],loading:t.loading.estado,search:t.search,"select-all":""},on:{"update:pagination":function(a){t.paginacion=a}},scopedSlots:t._u([{key:"no-data",fn:function(){return[a(o.A,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[t._v(" No hay datos para mostrar. ")])]},proxy:!0},{key:"no-results",fn:function(){return[a(o.A,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[t._v(' No se encontraron resultados para "'+t._s(t.search)+'". ')])]},proxy:!0},{key:"items",fn:function(e){return[a("tr",{staticClass:"background-color: terciary lighten-5"},[a("td",[a(c.A,{attrs:{color:"terciary darken-2","hide-details":""},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"props.selected"}})],1),a("td",{staticClass:"text-sm-center"},[a("div",{staticClass:"text-xs-center",staticStyle:{width:"88px"}},[a(_.A,{attrs:{top:"","close-delay":"0"},scopedSlots:t._u([{key:"activator",fn:function({on:o}){return[a(i.A,t._g({attrs:{flat:"",icon:"","mx-0":"",small:"",color:"gray"},on:{click:function(a){return t.PDF_print([e.item])}}},o),[a(f.A,{attrs:{color:"green"}},[t._v(" print ")])],1)]}}],null,!0)},[a("span",[t._v("Imprimir")])]),a(_.A,{attrs:{top:"","close-delay":"0"},scopedSlots:t._u([{key:"activator",fn:function({on:o}){return[a(i.A,t._g({attrs:{flat:"",icon:"","mx-0":"",small:"",color:"gray"},on:{click:function(a){return t.PDF_print([e.item],!0)}}},o),[a(f.A,{attrs:{color:"red"}},[t._v(" file_download ")])],1)]}}],null,!0)},[a("span",[t._v("Descargar PDF")])]),a(_.A,{attrs:{top:"","close-delay":"0"},scopedSlots:t._u([{key:"activator",fn:function({on:o}){return[a(i.A,t._g({attrs:{flat:"",icon:"","mx-0":"",disabled:e.item.fec_entregado||!(t.persona.informatica>1||t.persona.patrimonio>1||t.persona.patrimonioArea>1),small:"",color:"gray"},on:{click:function(a){return t.actualizarMovimiento(e.item,{fec_entregado:!0})}}},o),[a(f.A,{attrs:{color:"orange"}},[t._v("check_circle_outline")])],1)]}}],null,!0)},[a("span",[t._v("Ya Entregado")])]),a(_.A,{attrs:{top:"","close-delay":"0"},scopedSlots:t._u([{key:"activator",fn:function({on:o}){return[a(i.A,t._g({attrs:{flat:"",icon:"","mx-0":"",disabled:e.item.fec_patrimonio||!(t.persona.informatica>1||t.persona.patrimonio>1||t.persona.patrimonioArea>1),small:"",color:"gray"},on:{click:function(a){return t.actualizarMovimiento(e.item,{fec_patrimonio:!0})}}},o),[a(f.A,{attrs:{color:"green"}},[t._v(" fas fa-stamp ")])],1)]}}],null,!0)},[a("span",[t._v("Entregado a Patrimonio")])])],1)]),t._l(t.headersDinamics,(function(t){return a("td",{key:t.text,class:t.class},[a("bodyDataTableDinamic",{attrs:{props:e,field:t}})],1)}))],2)]}}]),model:{value:t.seleccionados,callback:function(a){t.seleccionados=a},expression:"seleccionados"}},[a(g.A,{attrs:{color:"blue",indeterminate:""}})],1),a(l.A,{attrs:{flat:"",color:"terciary lighten-2"}},[a("download-excel",{attrs:{data:t.movimientos,fields:t.columnasExcel,name:t.nombreExcel,type:"xls","before-finish":t.ocultarLoading}},[a(i.A,{staticClass:"white--text",attrs:{round:"",color:"terciary darken-1",disabled:t.loading.estado,loading:t.loading.estado},on:{click:function(a){return t.descargarExcel(t.movimientos)}}},[a(f.A,{attrs:{color:"white",left:""}},[t._v("far fa-file-excel")]),t._v("Exportar a Excel")],1)],1),a(x.hc),a(i.A,{staticClass:"white--text",attrs:{round:"",color:"terciary darken-1",disabled:t.loading.estado,loading:t.loading.estado},on:{click:function(a){return t.PDF_print(t.seleccionados,!0)}}},[a(f.A,{attrs:{color:"white",left:""}},[t._v("file_download")]),t._v("Seleccionados")],1),a(m.A,{staticClass:"mx-2 my-1",attrs:{vertical:""}}),a(i.A,{staticClass:"white--text",attrs:{round:"",color:"terciary darken-1",disabled:t.loading.estado,loading:t.loading.estado},on:{click:function(a){return t.PDF_print(t.seleccionados)}}},[a(f.A,{attrs:{color:"white",left:""}},[t._v("print")]),t._v("Seleccionados")],1)],1)],1)],1)],1)},A=[],k=(e(44114),e(18111),e(22489),e(95353)),y=e(96853),C=e(42681),w={name:"PatrimonioMoverConsultas",components:{dateSelect:y.A,bodyDataTableDinamic:C.A},data:()=>({lugaresDB:[],areas:[{area:"No buscar por Area",id:""}],filtro:{area_desde:"",area_destino:"",lugar_anterior:"",lugar_destino:"",desde:"",hasta:""},ultimoFiltro:{},movimientos:[],search:"",paginacion:{sortBy:"fec_movio",descending:!0,rowsPerPage:10,page:1},headers:[{text:"Acciones",value:"_id",align:"center",sortable:!1,width:"5%",ignore:!0},{text:"Fecha de Movimiento",value:"fec_movio",class:"text-sm-center",ruta:"fec_movio",date:!0},{text:"Nº Inventario",value:"id_objeto.inventario",class:"text-sm-center",ruta:"id_objeto.inventario"},{text:"Categoria",value:"id_objeto.categoria",class:"text-sm-left text-capitalize",ruta:"id_objeto.categoria"},{text:"Desde Area",value:"area_anterior.area",class:"text-sm-left text-capitalize",ruta:"area_anterior.area"},{text:"Destino Area",value:"area_destino.area",class:"text-sm-left text-capitalize",ruta:"area_destino.area"},{text:"Desde Lugar",value:"lugar_anterior.nombre",class:"text-sm-left",ruta:"lugar_anterior.nombre"},{text:"Destino Lugar",value:"lugar_destino.nombre",class:"text-sm-left",ruta:"lugar_destino.nombre"},{text:"Desde Ubicacion",value:"ubicacion_anterior",class:"text-sm-left",ruta:"ubicacion_anterior"},{text:"Destino Ubicacion",value:"ubicacion_destino",class:"text-sm-left",ruta:"ubicacion_destino"},{text:"Persona Recibio",value:"usuario_movio",class:"text-sm-left text-capitalize",ruta:"usuario_movio"},{text:"Legajo Recibio",value:"usuario_legajo",class:"text-sm-right",ruta:"usuario_legajo"},{text:"Motivo del Cambio",value:"motivo_movio",class:"text-sm-left",ruta:"motivo_movio"},{text:"Fec. Entregado",value:"fec_entregado",class:"text-sm-center",ruta:"fec_entregado",date:!0},{text:"Fec. Entr. Patrimonio",value:"fec_patrimonio",class:"text-sm-center",ruta:"fec_patrimonio",date:!0}],seleccionados:[],seleccionados:[],columnasExcel:{"Fecha de Movimiento":{field:"fec_movio",callback:t=>{try{return`${new Date(t).toISOString().substring(0,10)}`}catch(a){return`${t}`}}},"Nro Inventario":"id_objeto.inventario",Categoria:"id_objeto.categoria","Desde Area":"area_anterior.area","Destino Area":"area_destino.area","Desde Lugar":"lugar_anterior.nombre","Destino Lugar":"lugar_destino.nombre","Desde Ubicacion":"ubicacion_anterior","Destino Ubicacion":"ubicacion_destino","Persona Recibio":"usuario_movio","Legajo Recibio":"usuario_legajo","Motivo del Cambio":"motivo_movio","Fecha de Entregado":{field:"fec_entregado",callback:t=>{try{return`${new Date(t).toISOString().substring(0,10)}`}catch(a){return`${t}`}}},"Fecha de Entr. Patrimonio":{field:"fec_patrimonio",callback:t=>{try{return`${new Date(t).toISOString().substring(0,10)}`}catch(a){return`${t}`}}}}}),computed:{...(0,k.aH)(["loading","hoy","yearBefore","monthBefore","monthLastDay","persona"]),nombreExcel(){return`PatrimonioMovimientosConsultas-${this.hoy}.xls`},headersDinamics:function(){return this.headers.filter((t=>!0!==t.ignore))}},async created(){this.filtro.desde=this.yearBefore,this.filtro.hasta=this.hoy,this.areas=await this.buscarAreaFiltros({filtro:"todos",populate:"no",select:"area"}),this.lugaresDB=await this.buscarLugarFiltros({select:"nombre"})},methods:{...(0,k.PY)(["mostrarLoading","ocultarLoading","mostrarError","mostrarMensaje","mostrarDialogIframe"]),...(0,k.PY)("patrimonio",["guardarPdf"]),...(0,k.i0)(["requestAPI"]),...(0,k.i0)("main",["buscarAreaFiltros","buscarLugarFiltros"]),async buscar(t){try{this.mostrarLoading({titulo:"Cargando datos...",color:"primary"});let a=await this.requestAPI({method:"get",url:`/patrimonioMover/buscar?inicio=${t.desde}&fin=${t.hasta}&from=${t.area_desde}&destiny=${t.area_destino}&l_from=${t.lugar_anterior}&l_destiny=${t.lugar_destino}`});return!!a?.data?.ok&&(this.movimientos=a.data.movimientos,this.ultimoFiltro=Object.assign({},t),this.paginacion.page>Math.ceil(this.movimientos.length/this.paginacion.rowsPerPage)&&(this.paginacion.page=1),!0)}catch(a){return this.mostrarError({mensaje:a,titulo:"Inesperado (buscar)"}),!1}finally{this.ocultarLoading()}},async cargarmes(){let t={area_desde:"",area_destino:"",lugar_anterior:"",lugar_destino:"",desde:this.monthBefore,hasta:this.monthLastDay};this.buscar(t)},PDF_print(t,a){if(0===t.length)this.mostrarError({mensaje:"No se ha seleccionado ningun elemento.",titulo:"PDF (Capa 8)"});else try{this.mostrarLoading({titulo:"Cargando PDF...",color:"primary"});let e=[];for(let a=0;a<t.length;a++){let o={fecha:this.mostrarFecha(t[a].fec_movio),inventario:t[a].id_objeto.inventario,descripcion:`${t[a].id_objeto.categoria}, ${t[a].id_objeto.marca} ${t[a].id_objeto.modelo} ${t[a].id_objeto.serie?`\nSerie: ${t[a].id_objeto.serie}\n`:""}${t[a].id_objeto.micro} ${t[a].id_objeto.mother}${t[a].id_objeto.micro||t[a].id_objeto.mother?"\n":""}${t[a].id_objeto.memoria} ${t[a].id_objeto.memoria_tipo}${t[a].id_objeto.memoria||t[a].id_objeto.memoria_tipo?"\n":""}${t[a].id_objeto.disco} ${t[a].id_objeto.disco_tipo}${t[a].id_objeto.disco||t[a].id_objeto.disco_tipo?"\n":""}${t[a].id_objeto.fuente} ${t[a].id_objeto.pulgadas} ${t[a].id_objeto.tipoPantalla}`.replaceAll(" undefined","").replaceAll("undefined","").trim(),desde:`${t[a].area_anterior?.area||"S/D"}${t[a].area_anterior?.oficina_nro?`\n[${t[a].area_anterior?.oficina_nro}]`:""}`,destino:`${t[a].area_destino?.area||"S/D"}${t[a].area_destino?.oficina_nro?`\n[${t[a].area_destino?.oficina_nro}]`:""}`};e.push(o)}this.guardarPdf({objetos:e});let o=this.$router.resolve({name:"patrimonioMoverImprimir",query:{descarga:!!a}});return this.mostrarDialogIframe({src:o.href,titulo_name:"Movimiento Patrimonial"}),!0}catch(e){return this.mostrarError({mensaje:e,titulo:"Inesperado (PDF_print)"}),!1}finally{this.ocultarLoading()}},async actualizarMovimiento(t,a){let e={};if(await this.$root.$confirm.open({titulo:""+(a.fec_entregado?"ENTREGADO":"DOCUMENTADO"),msj:[`Esta por marcar la Fecha de Entrega ${a.fec_entregado?"al Area Destino":"de la Documentacion del Movimiento a Patrimonio"}, la misma no se podra editar mas tarde.`,"¿Desea continuar?"]})){e=Object.assign({},t,a||{});try{this.mostrarLoading({titulo:"Actualizando datos...",color:"primary"});let a=await this.requestAPI({method:"post",url:"/patrimonioMover",update:e});return!!a?.data?.ok&&(t.id_objeto.inventario?this.mostrarMensaje({msj:["Objeto Editado exitosamente.",`<##> Nº Inventario: ${t.id_objeto.inventario.toString()} <##>`],titulo:"Editado Exitoso"}):this.mostrarMensaje({msj:["Objeto Editado exitosamente."],titulo:"Editado Exitoso"}),this.buscar(this.ultimoFiltro),!0)}catch(o){return this.mostrarError({mensaje:o,titulo:"Inesperado (actualizarMovimiento)"}),!1}finally{this.ocultarLoading()}}},descargarExcel(t){0===t.length?this.mostrarError({mensaje:"No hay elementos para exportar.",titulo:"Excel (Capa 8)"}):this.mostrarLoading({titulo:"Creando Excel..."})}}},I=w,D=e(81656),$=(0,D.A)(I,v,A,!1,null,null,null),O=$.exports}}]);