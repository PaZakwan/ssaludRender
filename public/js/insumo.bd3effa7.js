"use strict";(self["webpackChunksecretaria_de_salud_moreno_frontend"]=self["webpackChunksecretaria_de_salud_moreno_frontend"]||[]).push([[284],{4747:function(a,t,e){e.r(t),e.d(t,{default:function(){return q}});var i=e(8469),r=e(6194),s=e(8956),o=e(2353),l=e(9418),n=e(6530),c=e(7352),d=e(108),u=e(683),g=e(3667),m=e(9456),p=e(6446),h=e(8143),f=e(4618),b=e(1415),x=function(){var a=this,t=a._self._c;return t(n.Z,{attrs:{fluid:"","grid-list-xs":""}},[t(m.Z,{attrs:{"align-center":"","justify-center":"","ma-0":"",wrap:"","text-xs-center":""}},[t(u.Z,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[t(s.Z,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[t(o.ZB,{staticClass:"px-0 text-uppercase"},[a._v("====== Gestion de Farmacia ======")])],1)],1),t(u.Z,{attrs:{"pa-1":"","ma-1":"",xs12:"",cuarto:"","lighten-1":""}},[t(s.Z,{staticClass:"elevation-6"},[t(m.Z,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",primary:""}},[t(u.Z,{attrs:{"px-3":""}},[t(g.Z,{attrs:{medium:"",color:"white",left:""}},[a._v("fa-solid fa-pills")]),t("span",{staticClass:"title white--text"},[a._v("Gestion de Insumos")])],1),t(h.Cl),t(d.Z,{staticClass:"hidden-xs-only mx-2 my-1 white",attrs:{vertical:""}}),t(r.Z,{staticClass:"mb-2",attrs:{color:"primary",disabled:a.loading.estado},on:{click:a.recargarDataTable}},[t(g.Z,{attrs:{medium:"",left:""}},[a._v("refresh")]),a._v(" Recargar Insumos")],1)],1),t("div",[t(l.Z,[t(u.Z,{attrs:{xs12:"",sm4:"","px-2":""}},[t(f.h,{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":"",clearable:""},model:{value:a.search,callback:function(t){a.search=t},expression:"search"}})],1),t(h.Cl),t(d.Z,{staticClass:"hidden-xs-only mx-2 primary",attrs:{inset:"",vertical:""}}),t(r.Z,{staticClass:"mb-2",attrs:{color:"primary",disabled:a.soloLectura||a.loading.estado},on:{click:function(t){return a.actualizarDialogInsumo({state:!0})}}},[t(g.Z,{attrs:{medium:"",left:""}},[a._v("add_circle_outline")]),a._v(" Nuevo Insumo")],1)],1),t(c.Z,{staticClass:"elevation-6",staticStyle:{"table-layout":"fixed"},attrs:{id:"tablita",headers:a.headers,items:a.dataTable,"item-key":"_id",pagination:a.paginacion,loading:a.loading.estado,search:a.search},on:{"update:pagination":function(t){a.paginacion=t}},scopedSlots:a._u([{key:"no-results",fn:function(){return[t(i.Z,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[a._v(' No se encontraron resultados para "'+a._s(a.search)+'". ')])]},proxy:!0},{key:"no-data",fn:function(){return[t(i.Z,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[a._v(" No hay datos para mostrar. ")])]},proxy:!0},{key:"items",fn:function(e){return[t("tr",{class:a.backgroundClass(e.item)},[t("td",{staticClass:"text-sm-left"},[t("div",{staticClass:"text-xs-center",staticStyle:{width:"60px"}},[t(b.Z,{attrs:{top:""},scopedSlots:a._u([{key:"activator",fn:function({on:i}){return[t(g.Z,a._g({staticClass:"mr-2",attrs:{disabled:a.soloLectura||a.loading.estado,color:"primary"},on:{click:function(t){return a.actualizarDialogInsumo({state:!0,id:e.item.id})}}},i),[a._v(" edit ")])]}}],null,!0)},[t("span",[a._v("Editar - "+a._s(e.item.nombre))])]),t(b.Z,{attrs:{top:""},scopedSlots:a._u([{key:"activator",fn:function({on:i}){return[t(g.Z,a._g({attrs:{disabled:!0,color:"error"},on:{click:function(t){return a.borrarInsumo({insumo:e.item,finish:a.recargarDataTable})}}},i),[a._v(" delete ")])]}}],null,!0)},[t("span",[a._v("Borrar - "+a._s(e.item.nombre))])])],1)]),a._l(a.headersDinamics,(function(a){return t("td",{key:a.text,class:a.class},[t("bodyDataTableDinamic",{attrs:{props:e,field:a}})],1)}))],2)]}}])},[t(p.Z,{attrs:{color:"blue",indeterminate:""}})],1)],1)],1)],1)],1),t("dialogInsumo",{attrs:{close:a.close}})],1)},v=[],y=e(629),Z=e(5167),_=e(7416),k=e(7441),w=e(5049),C=e(445),E=e(4920),D=e(5730),I=function(){var a=this,t=a._self._c;return t(w.Z,{attrs:{"max-width":"80%",persistent:"",scrollable:""},model:{value:a.dialogInsumo.state,callback:function(t){a.$set(a.dialogInsumo,"state",t)},expression:"dialogInsumo.state"}},[t(s.Z,[t(E.Z,{attrs:{color:"grey lighten-2",height:"auto",window:""}},[t(g.Z,{attrs:{medium:"",color:"black darken-2"}},[a._v("fa-solid fa-pills")]),t("span",{staticClass:"display-1 font-weight-bold text-capitalize black--text text--darken-2"},[a._v(a._s(a.dialogInsumo.id?`Editar: ${a.insumo.nombre}`:"Nuevo Insumo"))]),t(h.Cl),t(g.Z,{attrs:{large:"",disabled:a.loading.estado,color:"error darken-1"},on:{click:a.close}},[a._v("cancel_presentation")])],1),t(o.ZB,[t(C.Z,{ref:"form",attrs:{"lazy-validation":""},model:{value:a.valido,callback:function(t){a.valido=t},expression:"valido"}},[t(n.Z,{attrs:{"grid-list-md":""}},[t(m.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(_.Z,{staticClass:"capitalizar",attrs:{readonly:a.dialogInsumo.soloLectura,clearable:!a.dialogInsumo.soloLectura,"background-color":a.dialogInsumo.soloLectura?"primary lighten-1":"primary lighten-5",items:a.insumoCategorias,label:"Categoria","prepend-icon":"description",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},model:{value:a.insumo.categoria,callback:function(t){a.$set(a.insumo,"categoria",t)},expression:"insumo.categoria"}})],1),t(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(f.h,{attrs:{readonly:a.dialogInsumo.soloLectura,clearable:!a.dialogInsumo.soloLectura,"background-color":a.dialogInsumo.soloLectura?"primary lighten-1":"primary lighten-5","prepend-icon":"fa-solid fa-pills",label:"Nombre",type:"text",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},model:{value:a.insumo.nombre,callback:function(t){a.$set(a.insumo,"nombre",t)},expression:"insumo.nombre"}})],1),t(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(f.h,{attrs:{readonly:a.dialogInsumo.soloLectura,clearable:!a.dialogInsumo.soloLectura,"background-color":a.dialogInsumo.soloLectura?"primary lighten-1":"primary lighten-5","prepend-icon":"pin",label:"Codigo Unico (opcional)",type:"text",color:"primary"},model:{value:a.insumo.unique_code,callback:function(t){a.$set(a.insumo,"unique_code",t)},expression:"insumo.unique_code"}})],1),t(u.Z,{attrs:{xs12:"","mx-3":""}},[t(D.Z,{attrs:{readonly:a.dialogInsumo.soloLectura,clearable:!a.dialogInsumo.soloLectura,"background-color":a.dialogInsumo.soloLectura?"primary lighten-1":"primary lighten-5",label:"Descripcion",color:"primary","prepend-icon":"description","auto-grow":"",rows:"2"},model:{value:a.insumo.descripcion,callback:function(t){a.$set(a.insumo,"descripcion",t)},expression:"insumo.descripcion"}})],1)],1),"ADMIN_ROLE"===a.persona.role&&a.dialogInsumo.id?t(m.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t(u.Z,{attrs:{xs12:"","ma-2":""}},[t(s.Z,{attrs:{dark:"",color:"error darken-1"}},[t(o.ZB,{staticClass:"px-0 text-xs-center text-uppercase"},[a._v(" === Visibilidad del Insumo === ")])],1)],1),t(u.Z,{attrs:{xs0:"",sm3:"","px-3":""}}),t(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(k.Z,{attrs:{readonly:a.dialogInsumo.soloLectura,clearable:!a.dialogInsumo.soloLectura,"background-color":a.dialogInsumo.soloLectura?"primary lighten-3":"primary lighten-5",color:"primary lighten-1"},scopedSlots:a._u([{key:"label",fn:function(){return[t("div",[t(g.Z,[a._v(a._s(a.insumo.estado?"visibility":"visibility_off"))]),a._v(" Visibilidad: "+a._s(a.insumo.estado?"Visible":"Borrado")+" ")],1)]},proxy:!0}],null,!1,3748839232),model:{value:a.insumo.estado,callback:function(t){a.$set(a.insumo,"estado",t)},expression:"insumo.estado"}})],1),t(u.Z,{attrs:{xs0:"",sm3:"","px-3":""}})],1):a._e()],1)],1)],1),t(o.h7,[t(m.Z,{attrs:{row:"",wrap:""}},[t(h.Cl),t(r.Z,{staticClass:"error darken-1",attrs:{disabled:a.loading.estado,round:"",loading:a.loading.estado},on:{click:a.close}},[a._v(" Cancelar ")]),t(r.Z,{staticClass:"primary darken-1 white--text",attrs:{disabled:a.loading.estado||a.dialogInsumo.soloLectura,loading:a.loading.estado,round:""},on:{click:function(t){return a.guardarInsumo({insumo:a.insumo,validate:a.$refs.form.validate,finish:a.close})}}},[a._v(" "+a._s(a.valido?a.dialogInsumo.id?"Guardar Cambios":"Crear Insumo":"Formulario No valido")+" ")])],1)],1)],1)],1)},B=[],F={name:"dialogInsumo",props:["close"],components:{},data:()=>({valido:!0,insumo:{},insumoBase:{categoria:"",nombre:"",descripcion:"",unique_code:"",estado:!0}}),computed:{...(0,y.rn)(["loading","persona","rules"]),...(0,y.rn)("farmacia",["dialogInsumo","insumoCategorias"])},watch:{async"dialogInsumo.state"(a){a&&(this.dialogInsumo.id?this.insumo=Object.assign(this._cloneDeep(this.insumoBase),{estado:!1},...await this.buscarInsumosFiltro({filtro:{_id:this.dialogInsumo.id}})):this.insumo=this._cloneDeep(this.insumoBase)),this.$refs.form.resetValidation()}},beforeMount(){this.insumo=this._cloneDeep(this.insumoBase)},methods:{...(0,y.nv)("farmacia",["buscarInsumosFiltro","guardarInsumo"])}},P=F,z=e(1001),L=(0,z.Z)(P,I,B,!1,null,null,null),S=L.exports,$={name:"insumoBuscar",components:{bodyDataTableDinamic:Z.Z,dialogInsumo:S},data:()=>({dataTable:[],search:"",paginacion:{sortBy:"nombre",descending:!1,page:1,rowsPerPage:10},headers:[{text:"Acciones",value:"id",align:"center",sortable:!1,width:"5%",ruta:"area",ignore:!0},{text:"Categoria",value:"categoria",align:"left",class:"text-capitalize text-xs-left",width:"15%",ruta:"categoria"},{text:"Nombre",value:"nombre",align:"left",class:"text-capitalize text-xs-left",width:"30%",ruta:"nombre"},{text:"Descripcion",value:"descripcion",align:"left",class:"text-capitalize text-xs-left",width:"35%",ruta:"descripcion"},{text:"Codigo Unico (opcional)",value:"unique_code",align:"left",class:"text-capitalize text-xs-left",width:"15%",ruta:"unique_code"}]}),computed:{...(0,y.rn)(["loading","persona"]),soloLectura(){return!(this.persona.farmacia.insumos||this.persona.farmacia.general?.admin)},headersDinamics(){return[...this.headers.filter((a=>!0!==a.ignore))]}},async created(){this.recargarDataTable()},methods:{...(0,y.nv)("farmacia",["actualizarDialogInsumo","buscarInsumosFiltro","borrarInsumo"]),backgroundClass(a){if(!a)return"";try{return!0===a.estado?"background-color: primary lighten-5":"background-color: error lighten-4"}catch(t){return""}},close(){this.actualizarDialogInsumo({state:!1}),this.recargarDataTable()},async recargarDataTable(){this.dataTable=await this.buscarInsumosFiltro()}}},T=$,N=(0,z.Z)(T,x,v,!1,null,null,null),q=N.exports},6590:function(a,t,e){e.r(t),e.d(t,{default:function(){return q}});var i=e(8469),r=e(7416),s=e(6194),o=e(8956),l=e(2353),n=e(9418),c=e(6530),d=e(7352),u=e(108),g=e(683),m=e(3667),p=e(9456),h=e(6446),f=e(8143),b=e(4618),x=function(){var a=this,t=a._self._c;return t(c.Z,{attrs:{fluid:"","grid-list-xs":""}},[t(p.Z,{attrs:{row:"",wrap:"","align-center":"","justify-center":"","text-xs-center":""}},[t(g.Z,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[t(o.Z,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[t(l.ZB,{staticClass:"px-0 text-uppercase"},[a._v("====== Gestion de Farmacia ======")])],1)],1)],1),t(p.Z,{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[t(g.Z,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[t(p.Z,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",cuarto:"","darken-1":""}},[t(g.Z,{attrs:{"px-3":""}},[t(m.Z,{attrs:{medium:"",color:"white",left:""}},[a._v("fa-solid fa-pills")]),t("span",{staticClass:"title white--text"},[a._v("Insumos / Entregas")])],1),t(f.Cl),t(s.Z,{attrs:{fab:"",small:"",color:"primary darken-2"},on:{click:function(t){return a.retroceder()}}},[t(m.Z,[a._v("far fa-arrow-alt-circle-left")])],1)],1),t(o.Z,{staticClass:"elevation-6",attrs:{color:"grey lighten-2"}},[t(l.ZB,{staticClass:"px-0"},[t(p.Z,{attrs:{row:"",wrap:"","align-center":"","justify-center":"","text-xs-center":""}},[t(g.Z,{attrs:{xs12:"","px-3":""}},[t(o.Z,{staticClass:"grey lighten-3"},[t(p.Z,{attrs:{"justify-center":"",row:"",wrap:""},on:{keypress:function(t){return!t.type.indexOf("key")&&a._k(t.keyCode,"enter",13,t.key,"Enter")?null:a.recargarDataTable(a.filtro)}}},[t(g.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t("dateSelect",{staticClass:"capitalizar",attrs:{value:a.filtro.desde,"background-color":"cuarto lighten-5",color:"cuarto",label:"Desde",icon:"today",max:a.filtro.hasta,requerido:"true"},model:{value:a.filtro.desde,callback:function(t){a.$set(a.filtro,"desde",t)},expression:"filtro.desde"}})],1),t(g.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t("dateSelect",{staticClass:"capitalizar",attrs:{value:a.filtro.hasta,"background-color":"cuarto lighten-5",color:"cuarto",label:"Hasta",icon:"event",min:a.filtro.desde,requerido:"true"},model:{value:a.filtro.hasta,callback:function(t){a.$set(a.filtro,"hasta",t)},expression:"filtro.hasta"}})],1),t(g.Z,{attrs:{xs12:"",sm9:"","px-3":""}},[t(r.Z,{staticClass:"capitalizar",attrs:{clearable:"","background-color":"cuarto lighten-5","item-value":"id","item-text":"area",items:a.areasFiltro,label:"Unidad Sanitaria","prepend-icon":"fa-house-medical-flag",color:"cuarto",multiple:"",chips:"","deletable-chips":""},on:{"click:clear":function(t){a.$nextTick((()=>a.filtro.areas=[]))}},model:{value:a.filtro.areas,callback:function(t){a.$set(a.filtro,"areas",t)},expression:"filtro.areas"}})],1),t(g.Z,{attrs:{xs12:"",sm9:"","px-3":""}},[t(r.Z,{staticClass:"capitalizar",attrs:{clearable:"","background-color":"cuarto lighten-5","item-value":"id","item-text":"nombreC",items:a.insumosDB,label:"Medicamento / Vacuna (Opcional)","prepend-icon":"fa-solid fa-pills",color:"cuarto",multiple:"",chips:"","deletable-chips":""},on:{"click:clear":function(t){a.$nextTick((()=>a.filtro.insumos=[]))}},model:{value:a.filtro.insumos,callback:function(t){a.$set(a.filtro,"insumos",t)},expression:"filtro.insumos"}})],1)],1),t(l.h7,[t(f.Cl),t(s.Z,{staticClass:"white--text mb-2",attrs:{round:"",color:"cuarto darken-2",disabled:a.loading.estado,loading:a.loading.estado},on:{click:function(t){return a.recargarDataTable(a.filtro)}}},[t(m.Z,{attrs:{medium:"",left:""}},[a._v("search")]),a._v(" Buscar Entregas")],1),t(f.Cl)],1)],1)],1)],1)],1)],1)],1),t(g.Z,{attrs:{"pa-1":"","ma-1":"",xs12:"",cuarto:"","lighten-1":""}},[t(o.Z,{staticClass:"elevation-6"},[t(p.Z,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",primary:""}},[t(g.Z,{attrs:{"px-3":""}},[t(m.Z,{attrs:{medium:"",color:"white",left:""}},[a._v("fas fa-hand-holding-medical")]),t("span",{staticClass:"title white--text"},[a._v("Entregas de Insumos")])],1),t(f.Cl)],1),t(n.Z,[t(g.Z,{attrs:{xs12:"",sm4:"","px-2":""}},[t(b.h,{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":"",clearable:""},model:{value:a.search,callback:function(t){a.search=t},expression:"search"}})],1),t(f.Cl),t(u.Z,{staticClass:"hidden-xs-only mx-2 primary",attrs:{inset:"",vertical:""}}),t(s.Z,{staticClass:"mb-2",attrs:{round:"",color:"primary",disabled:a.loading.estado||!(a.persona.farmacia.entregas?.length>0||a.persona.farmacia.general?.admin),loading:a.loading.estado},on:{click:function(t){return a.actualizarDialogEntrega({state:!0})}}},[t(m.Z,{attrs:{medium:"",left:""}},[a._v("output")]),a._v(" Nueva Entrega")],1)],1),t(d.Z,{staticClass:"elevation-6",staticStyle:{"table-layout":"fixed"},attrs:{id:"tablita",headers:a.headers,items:a.dataTable,"item-key":"_id",pagination:a.paginacion,loading:a.loading.estado,search:a.search},on:{"update:pagination":function(t){a.paginacion=t}},scopedSlots:a._u([{key:"no-results",fn:function(){return[t(i.Z,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[a._v(' No se encontraron resultados para "'+a._s(a.search)+'". ')])]},proxy:!0},{key:"no-data",fn:function(){return[t(i.Z,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[a._v(" No hay datos para mostrar. ")])]},proxy:!0},{key:"items",fn:function(e){return[t("tr",{class:a.backgroundClass(e.item)},a._l(a.headersDinamics,(function(a){return t("td",{key:a.text,class:a.class},[t("bodyDataTableDinamic",{attrs:{props:e,field:a}})],1)})),0)]}}])},[t(h.Z,{attrs:{color:"blue",indeterminate:""}})],1)],1)],1)],1),t("dialogEntrega",{attrs:{closeFinish:a.recargarDataTable}})],1)},v=[],y=e(629),Z=e(5967),_=e(5167),k=e(5049),w=e(445),C=e(4920),E=function(){var a=this,t=a._self._c;return t(k.Z,{attrs:{"max-width":"80%",persistent:"",scrollable:""},model:{value:a.dialogEntrega.state,callback:function(t){a.$set(a.dialogEntrega,"state",t)},expression:"dialogEntrega.state"}},[t(o.Z,{staticClass:"dialog-draggable-window"},[t(C.Z,{staticClass:"dialog-draggable ma-0 pa-0",attrs:{color:"grey lighten-2",height:"auto",window:""}},[t(m.Z,{staticClass:"dialog-draggable pl-2",attrs:{medium:"",color:"black darken-2"}},[a._v("fas fa-hand-holding-medical")]),t("span",{staticClass:"display-1 font-weight-bold text-capitalize black--text text--darken-2 dialog-draggable"},[a._v(a._s(a.dialogEntrega.entrega?"Insumo Entregado":"Nueva Entrega"))]),t(f.Cl),t(m.Z,{attrs:{large:"",disabled:a.loading.estado,color:"error darken-1"},on:{click:a.close}},[a._v("cancel_presentation")])],1),t(l.ZB,{staticClass:"my-0 py-0"},[t(w.Z,{ref:"form",attrs:{"lazy-validation":""},model:{value:a.valido,callback:function(t){a.valido=t},expression:"valido"}},[t(p.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t(g.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t("dateSelect",{staticClass:"capitalizar",attrs:{soloLectura:a.dialogEntrega.soloLectura,clearable:!a.dialogEntrega.soloLectura,color:"primary",label:"Fecha",icon:"event",value:a.dataEdit.fecha,max:a.hoy,requerido:"true"},model:{value:a.dataEdit.fecha,callback:function(t){a.$set(a.dataEdit,"fecha",t)},expression:"dataEdit.fecha"}})],1),t(g.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(r.Z,{staticClass:"capitalizar",attrs:{readonly:a.dialogEntrega.soloLectura,clearable:!a.dialogEntrega.soloLectura,"background-color":a.dialogEntrega.soloLectura?"primary lighten-1":"primary lighten-5","item-value":"id","item-text":"area",items:a.areasFiltro,label:"Origen","prepend-icon":"fa-house-medical-flag",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},model:{value:a.dataEdit.origen,callback:function(t){a.$set(a.dataEdit,"origen",t)},expression:"dataEdit.origen"}})],1),t(g.Z,{attrs:{xs12:"","px-3":""}},[t(r.Z,{staticClass:"capitalizar",attrs:{readonly:a.dialogEntrega.soloLectura,clearable:!a.dialogEntrega.soloLectura,"background-color":a.dialogEntrega.soloLectura?"primary lighten-1":"primary lighten-5","item-value":"id","item-text":"nombreDocumento",items:a.pacientesDB,label:"Apellido, Nombre del Paciente (Documento)","prepend-icon":"personal_injury",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},scopedSlots:a._u([{key:"selection",fn:function(t){return[a._v(" "+a._s(t.item.nombreDocumento)+" ")]}},{key:"item",fn:function(t){return[a._v(" "+a._s(t.item.nombreDocumento)+" ")]}}]),model:{value:a.dataEdit.paciente,callback:function(t){a.$set(a.dataEdit,"paciente",t)},expression:"dataEdit.paciente"}})],1),t(g.Z,{attrs:{xs12:"","px-3":"",primary:"","darken-3":""}},[t("h4",{staticClass:"title float: left white--text"},[a._v("Insumos a Entregar")])]),a._l(a.dataEdit.insumos,(function(e,i){return t(g.Z,{key:`insumos-${i}`,attrs:{xs12:""}},[t("componentEgresoInsumo",{attrs:{egreso:e,index:i,stockDB:a.stockFiltrado,agregarFila:a.agregarFila,borrarFila:a.borrarFila,actualizar:a.actualizarStockFiltrado,noGestionEnOrigen:!1}})],1)})),a.dialogEntrega.soloLectura?t(g.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(b.h,{attrs:{readonly:"","background-color":"primary lighten-1","prepend-icon":"local_shipping",label:"Fecha de Retirado",placeholder:"Sin Salir",type:"text",color:"primary"},model:{value:a.dataEdit.retirado,callback:function(t){a.$set(a.dataEdit,"retirado",t)},expression:"dataEdit.retirado"}})],1):a._e()],2)],1)],1),t(l.h7,[t(p.Z,{attrs:{row:"",wrap:""}},[t(s.Z,a._g({attrs:{disabled:a.loading.estado||a.dialogEntrega.soloLectura,round:"",color:"primary"},on:{click:function(t){return a.agregarFila()}}},a.on),[t(m.Z,{attrs:{large:"",left:""}},[a._v("control_point")]),a._v("Insumo Entrega ")],1),t(s.Z,{staticClass:"white--text",attrs:{round:"",color:"primary",disabled:a.loading.estado,loading:a.loading.estado},on:{click:function(t){return a.openPaciente(a.dataEdit.paciente)}}},[a._v(a._s(a.dataEdit.paciente?"Editar Paciente":"Alta Nuevo Paciente"))]),t(f.Cl),t(s.Z,{staticClass:"error darken-1",attrs:{disabled:a.loading.estado,round:"",loading:a.loading.estado},on:{click:a.close}},[a._v(" Cancelar ")]),t(s.Z,{staticClass:"primary darken-1 white--text",attrs:{disabled:a.loading.estado||a.dialogEntrega.soloLectura,loading:a.loading.estado,round:""},on:{click:function(t){return a.guardarEntrega({entrega:a.dataEdit,validate:a.$refs.form.validate,finish:a.close})}}},[a._v(" "+a._s(a.valido?a.dialogEntrega.entrega?"Guardar Cambios":"Realizar Entrega":"Formulario No valido")+" ")])],1)],1)],1),t("dialogPaciente",{attrs:{close:a.closePaciente}})],1)},D=[],I=e(9820),B=e(7698),F={name:"dialogEntrega",props:["closeFinish"],components:{dateSelect:Z.Z,dialogPaciente:I.Z,componentEgresoInsumo:B.Z},data:()=>({valido:!0,areasFiltro:[],pacientesDB:[],stockEntregaDB:[],stockFiltrado:[],dataEdit:{},dataEditBase:{fecha:"",origen:"",profesional:"",paciente:"",insumos:[{insumo:void 0,cantidad:null}],retirado:""}}),computed:{...(0,y.rn)(["loading","hoy","persona","rules"]),...(0,y.rn)("farmacia",["dialogEntrega"])},watch:{async"dialogEntrega.state"(a){if(a){this.dataEdit=this._cloneDeep(this.dataEditBase);let a=[...await this.buscarAreaFiltros({filtro:{farmacia:!0},populate:"no",select:"area"})];this.areasFiltro=await this.filtrarArrayParaSelectsDisabled({arraySelects:a,arrayEnable:this.persona.farmacia?.entregas,propCompare:"_id"}),this.pacientesDB=await this.cargarPacientesBusqueda()}this.$refs.form.resetValidation()},async"dataEdit.origen"(a){this.stockEntregaDB=a?await this.buscarStockParaEntregas({area:a,categoria:["Medicamento","Vacuna"]}):[],this.dataEdit.insumos=[{...this.dataEditBase.insumos[0]}],this.actualizarStockFiltrado()}},beforeMount(){this.dataEditBase.fecha=this.hoy,this.dataEdit=this._cloneDeep(this.dataEditBase)},methods:{...(0,y.OI)("paciente",["actualizarDialogPaciente","actualizarPacienteID"]),...(0,y.nv)(["filtrarArrayParaSelectsDisabled"]),...(0,y.nv)("main_areas",["buscarAreaFiltros"]),...(0,y.nv)("paciente",["cargarPacientesBusqueda"]),...(0,y.nv)("farmacia",["actualizarDialogEntrega","buscarStockParaEntregas","guardarEntrega"]),close(){this.actualizarDialogEntrega({state:!1}),this.closeFinish()},async actualizarStockFiltrado(){let a=[];this.dataEdit.insumos.forEach((t=>{t.insumo?._id&&a.push(t.insumo._id)})),a.length>0?this.stockFiltrado=await this.filtrarArrayParaSelectsDisabled({arraySelects:this.stockEntregaDB,arrayDisable:a,propCompare:"_id"}):this.stockFiltrado=this.stockEntregaDB},agregarFila(){this.dataEdit.insumos.push({...this.dataEditBase.insumos[0]})},borrarFila(a){this.dataEdit.insumos.splice(a,1),this.actualizarStockFiltrado()},openPaciente(a){setTimeout((()=>{this.actualizarPacienteID(a),this.actualizarDialogPaciente(!0)}),300)},async closePaciente(){setTimeout((()=>{this.actualizarPacienteID(""),this.actualizarDialogPaciente(!1)}),300),this.pacientesDB=await this.cargarPacientesBusqueda()}}},P=F,z=e(1001),L=(0,z.Z)(P,E,D,!1,null,null,null),S=L.exports,$={name:"insumoEntregaBuscar",components:{dateSelect:Z.Z,bodyDataTableDinamic:_.Z,dialogEntrega:S},data:()=>({insumosDB:[],areasFiltro:[],dataTable:[],filtro:{desde:(new Date).getFullYear()-1+"-"+((new Date).getMonth()+1).toString().padStart(2,0)+"-01",hasta:"",areas:[],insumos:[]},ultimoFiltro:{},search:"",paginacion:{sortBy:"fecha",descending:!0,page:1,rowsPerPage:10},headers:[{text:"Fecha",value:"fecha",align:"left",class:"text-xs-left",width:"15%",ruta:"fecha",date:!0},{text:"Origen",value:"origenDB",align:"left",class:"text-capitalize text-xs-left",width:"15%",ruta:"origenDB"},{text:"Paciente",value:"pacienteDB",align:"left",class:"text-capitalize text-xs-left",width:"15%",ruta:"pacienteDB"},{text:"Documento",value:"pacienteDocDB",align:"left",class:"text-capitalize text-xs-right",width:"15%",ruta:"pacienteDocDB"},{text:"O. Social",value:"pacienteOSocDB",align:"left",class:"text-capitalize text-xs-left",width:"10%",ruta:"pacienteOSocDB"},{text:"Categoria Ins.",value:"categoriaDB",align:"left",class:"text-xs-left",width:"10%",ruta:"categoriaDB"},{text:"Insumo",value:"insumoDB",align:"left",class:"text-capitalize text-xs-left",width:"10%",ruta:"insumoDB"},{text:"Cantidad",value:"cantidad",align:"left",class:"text-xs-right",width:"5%",ruta:"cantidad"},{text:"Procedencia",value:"procedencia",align:"left",class:"text-xs-left",width:"10%",ruta:"procedencia"},{text:"Lote",value:"lote",align:"left",class:"text-xs-right",width:"10%",ruta:"lote"},{text:"Vencimiento",value:"vencimiento",align:"left",class:"text-xs-left",width:"10%",ruta:"vencimiento",date:!0}]}),computed:{...(0,y.rn)(["loading","hoy","persona"]),headersDinamics(){return[...this.headers.filter((a=>!0!==a.ignore))]}},async created(){this.filtro.hasta=this.hoy;let a=[...await this.buscarAreaFiltros({filtro:{farmacia:!0},populate:"no",select:"area"})];this.insumosDB=await this.buscarInsumosFiltro({filtro:{categoria:{$in:["Medicamento","Vacuna"]}},select:"nombre descripcion nombreC"}),this.persona.farmacia.general?.reportes||this.persona.farmacia.general?.admin?(this.areasFiltro=a,this.filtro.areas=a.map((a=>a.id))):(this.areasFiltro=await this.filtrarArrayParaSelectsDisabled({arraySelects:a,arrayEnable:this.persona.farmacia.entregas,propCompare:"_id"}),this.filtro.areas=[...this.persona.farmacia.entregas]),await this.recargarDataTable(this.filtro)},methods:{...(0,y.nv)(["retroceder","filtrarArrayParaSelectsDisabled"]),...(0,y.nv)("main_areas",["buscarAreaFiltros"]),...(0,y.nv)("farmacia",["actualizarDialogEntrega","buscarInsumosFiltro","buscarEntregasFiltro"]),backgroundClass(a){if(!a)return"";try{return a.retirado?"background-color: green lighten-5":"background-color: orange lighten-4"}catch(t){return""}},async recargarDataTable(a){if(a){let t=await this.buscarEntregasFiltro(a);t&&(this.dataTable=t,this.ultimoFiltro=this._cloneDeep(a))}else this.dataTable=await this.buscarEntregasFiltro(this.ultimoFiltro)}}},T=$,N=(0,z.Z)(T,x,v,!1,null,null,null),q=N.exports},9820:function(a,t,e){e.d(t,{Z:function(){return _}});var i=e(6194),r=e(8956),s=e(2353),o=e(5049),l=e(683),n=e(445),c=e(3667),d=e(9456),u=e(4036),g=e(8143),m=e(4920),p=function(){var a=this,t=a._self._c;return t(o.Z,{attrs:{"max-width":"80%",persistent:"",scrollable:""},model:{value:a.dialogPaciente,callback:function(t){a.dialogPaciente=t},expression:"dialogPaciente"}},[t(r.Z,{staticClass:"dialog-draggable-window",attrs:{tile:""}},[t(m.Z,{staticClass:"dialog-draggable ma-0 pa-0",attrs:{color:"grey lighten-2",height:"auto",window:""}},[a.pacienteId?t(c.Z,{staticClass:"dialog-draggable pl-2",attrs:{medium:"",color:"black darken-2"}},[a._v("fas fa-user-edit")]):t(c.Z,{staticClass:"dialog-draggable pl-2",attrs:{large:"",color:"black darken-2"}},[a._v("person_add")]),t("span",{staticClass:"display-1 font-weight-bold text-capitalize black--text text--darken-2 dialog-draggable"},[a._v(a._s(a.pacienteId?`Editar: ${a.paciente.nombreC}`:"Alta Nuevo Paciente"))]),t(g.Cl),t(c.Z,{attrs:{large:"",disabled:a.loading.estado,color:"error darken-1"},on:{click:a.close}},[a._v("cancel_presentation")])],1),t(s.ZB,{staticClass:"my-0 py-0"},[t(n.Z,{ref:"form",attrs:{"lazy-validation":""},model:{value:a.valido,callback:function(t){a.valido=t},expression:"valido"}},[t(d.Z,{attrs:{wrap:""}},[t("formPaciente",{attrs:{paciente:a.paciente,editar:!a.pacienteId}})],1),"ADMIN_ROLE"===a.persona.role&&a.pacienteId?t(d.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t(l.Z,{attrs:{xs12:"","ma-2":""}},[t(r.Z,{attrs:{dark:"",color:"error darken-1"}},[t(s.ZB,{staticClass:"px-0 text-xs-center text-uppercase"},[a._v(" === Visibilidad del Objeto === ")])],1)],1),t(l.Z,{attrs:{xs0:"",sm3:"","px-3":""}}),t(l.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(u.r,{attrs:{rules:[...a.rules.requerido],"item-value":"valor","item-text":"label",items:a.estados,label:"Estado","prepend-icon":"check_circle","background-color":"true"==a.paciente.estado?"green lighten-1":"error lighten-1",color:"terciary"},model:{value:a.paciente.estado,callback:function(t){a.$set(a.paciente,"estado",t)},expression:"paciente.estado"}})],1),t(l.Z,{attrs:{xs0:"",sm3:"","px-3":""}})],1):a._e()],1)],1),t(s.h7,[t(g.Cl),t(i.Z,{staticClass:"error darken-1",attrs:{disabled:a.loading.estado,round:"",loading:a.loading.estado},on:{click:a.close}},[a._v(" Cancelar ")]),t(i.Z,{staticClass:"terciary darken-1 white--text",attrs:{disabled:a.loading.estado||a.soloLecturaPaciente,loading:a.loading.estado,round:""},on:{click:function(t){return a.guardarPaciente({paciente:a.paciente,validate:a.$refs.form.validate,finish:a.close})}}},[a._v(" "+a._s(a.valido?a.pacienteId?"Guardar Cambios":"Alta Paciente":"Formulario No valido")+" ")])],1)],1)],1)},h=[],f=e(629),b=e(178),x={name:"dialogPaciente",props:["close"],components:{formPaciente:b.Z},data:()=>({valido:!0,paciente:{}}),computed:{...(0,f.rn)(["loading","persona","rules"]),...(0,f.rn)("paciente",["dialogPaciente","pacienteId","estados","pacienteBase","soloLecturaPaciente"])},watch:{async dialogPaciente(a){if(a){if(this.paciente=this._cloneDeep(this.pacienteBase),this.pacienteId){let a=await this.buscarPacienteID(this.pacienteId);0===a.hist_salitas?.length&&(a.hist_salitas=this.paciente.hist_salitas),this.paciente=Object.assign(this.paciente,a)}this.actualizarLecturaPaciente({editar:!!this.pacienteId})}this.$refs.form.resetValidation()}},beforeMount(){this.paciente=this._cloneDeep(this.pacienteBase)},methods:{...(0,f.nv)("paciente",["buscarPacienteID","guardarPaciente","actualizarLecturaPaciente"])}},v=x,y=e(1001),Z=(0,y.Z)(v,p,h,!1,null,null,null),_=Z.exports}}]);