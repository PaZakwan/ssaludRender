"use strict";(globalThis["webpackChunksecretaria_de_salud_moreno_frontend"]=globalThis["webpackChunksecretaria_de_salud_moreno_frontend"]||[]).push([[153],{4959:(a,r,e)=>{e.r(r),e.d(r,{default:()=>j});var s=e(6194),o=e(8956),t=e(2353),i=e(9418),l=e(6530),n=e(108),u=e(683),c=e(445),p=e(3667),d=e(9456),m=e(8143),h=function(){var a=this,r=a._self._c;return r(l.Z,{attrs:{"grid-list-xs":""}},[r(d.Z,{attrs:{"align-center":"","justify-center":"","ma-0":"",wrap:"","text-xs-center":""}},[r(u.Z,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[r(o.Z,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[r(t.ZB,{staticClass:"px-0"},[a._v("====== PERFIL DE USUARIO ======")])],1)],1),r(u.Z,{attrs:{"pa-1":"","ma-1":"",xs12:"",primary:"","lighten-1":""}},[r(o.Z,{staticClass:"elevation-6"},[r(i.Z,{staticClass:"align-center justify-center primary"},[r(p.Z,{attrs:{medium:"",left:"",color:"white"}},[a._v("person")]),r("span",{staticClass:"title white--text"},[a._v("Mis Datos")]),r(n.Z,{staticClass:"hidden-xs-only mx-2 white",attrs:{vertical:""}}),r(m.Cl)],1),r(t.ZB,[r(c.Z,{ref:"form",attrs:{"lazy-validation":""},model:{value:a.valido,callback:function(r){a.valido=r},expression:"valido"}},[r(d.Z,{attrs:{row:"",wrap:""},on:{keypress:function(r){return!r.type.indexOf("key")&&a._k(r.keyCode,"enter",13,r.key,"Enter")?null:a.editarPerfil.apply(null,arguments)}}},[r("formPerfil",{attrs:{usuario:a.usuario},on:{checkPassword:function(r){return a.cambiarPassword(r)}}})],1)],1)],1),r(i.Z,{staticClass:"align-center justify-center primary lighten-2"},[r(p.Z,{attrs:{medium:"",color:"black",left:""}},[a._v("info")]),r("div",[r(d.Z,{attrs:{row:""}},[r("span",{staticClass:"body-2 black--text"},[a._v("Los campos mas oscuros pueden ser modificados por un Admin.")])]),r(d.Z,{attrs:{row:""}},[r("span",{staticClass:"body-2 black--text"},[a._v("La constraseña anterior siempre sera requerida para editar el Perfil.")])])],1),r(m.Cl),r(n.Z,{staticClass:"hidden-xs-only mx-2 black",attrs:{inset:"",vertical:""}}),r(s.Z,{class:(a.valido?"primary":"error")+" darken-1",attrs:{round:"",disabled:a.loading.estado,loading:a.loading.estado},on:{click:a.editarPerfil}},[r(p.Z,{attrs:{left:"",color:"white"}},[a._v("edit")]),a._v(a._s(a.valido?"Editar Perfil":"Formulario No valido"))],1)],1)],1)],1)],1)],1)},x=[],b=e(629),f=e(7441),y=e(4036),g=e(4618),k=function(){var a=this,r=a._self._c;return r(d.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[r(u.Z,{attrs:{xs12:""}},[r(d.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[r(u.Z,{attrs:{xs2:"","px-3":""}}),r(u.Z,{attrs:{xs8:"","px-3":""}},[r(g.h,{attrs:{readonly:"","prepend-icon":"person",label:"Usuario",type:"text",color:"primary","background-color":"primary lighten-3",autocomplete:"username"},model:{value:a.usuario.usuario,callback:function(r){a.$set(a.usuario,"usuario",r)},expression:"usuario.usuario"}})],1),r(u.Z,{attrs:{xs2:"","px-3":""}}),r(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[r(g.h,{staticClass:"capitalizar",attrs:{readonly:"","prepend-icon":"person",label:"Nombre",type:"text",color:"primary","background-color":"primary lighten-2"},model:{value:a.usuario.nombre,callback:function(r){a.$set(a.usuario,"nombre",r)},expression:"usuario.nombre"}})],1),r(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[r(g.h,{staticClass:"capitalizar",attrs:{readonly:"","prepend-icon":"person",label:"Apellido",type:"text",color:"primary","background-color":"primary lighten-2"},model:{value:a.usuario.apellido,callback:function(r){a.$set(a.usuario,"apellido",r)},expression:"usuario.apellido"}})],1),r(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[r(g.h,{attrs:{"prepend-icon":"phone",label:"Telefono",type:"text",color:"primary","background-color":"primary lighten-5",rules:[...a.rules.soloNumero],clearable:"","validate-on-blur":""},model:{value:a.usuario.telefono,callback:function(r){a.$set(a.usuario,"telefono",r)},expression:"usuario.telefono"}})],1),r(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[r(g.h,{attrs:{"prepend-icon":"mail",label:"Email",type:"email",color:"primary","background-color":"primary lighten-5",rules:[...a.rules.mail],clearable:"","validate-on-blur":""},model:{value:a.usuario.email,callback:function(r){a.$set(a.usuario,"email",r)},expression:"usuario.email"}})],1),r(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[r(g.h,{staticClass:"capitalizar",attrs:{readonly:"",value:a.usuario.area?a.usuario.area.area:"","prepend-icon":"location_city",label:"Area",type:"text",color:"primary","background-color":"primary lighten-2"}})],1),r(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[r(g.h,{attrs:{readonly:"","prepend-icon":"work",label:"Actividad en el Area",type:"text",color:"primary","background-color":"primary lighten-2"},model:{value:a.usuario.actividad,callback:function(r){a.$set(a.usuario,"actividad",r)},expression:"usuario.actividad"}})],1)],1)],1),r(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[r(f.Z,{attrs:{label:"Cambiar Contraseña: "+(a.checkPass?"SI":"NO")},on:{change:function(r){a.checkPassword(),a.usuario.password=null,a.usuario.password2=null}},model:{value:a.checkPass,callback:function(r){a.checkPass=r},expression:"checkPass"}})],1),r(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}}),!0===a.checkPass?r(u.Z,{attrs:{xs12:""}},[r(d.Z,{attrs:{grey:"","lighten-2":"",row:"",wrap:""}},[r(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[r(g.h,{attrs:{"prepend-icon":"lock",label:"Contraseña",type:"password",rules:[...a.rules.requerido,a.rules.minLength(4)],color:"primary",clearable:"","background-color":"primary lighten-5","validate-on-blur":"",autocomplete:"new-password"},model:{value:a.usuario.password,callback:function(r){a.$set(a.usuario,"password",r)},expression:"usuario.password"}})],1),r(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[r(g.h,{attrs:{"prepend-icon":"lock",label:"Repetir Contraseña",type:"password",rules:[...a.rules.requerido,a.rules.minLength(4),r=>r===a.usuario.password||"Las Constraseñas no coinciden."],color:"primary",clearable:"","background-color":"primary lighten-5","validate-on-blur":"",autocomplete:"new-password"},model:{value:a.usuario.password2,callback:function(r){a.$set(a.usuario,"password2",r)},expression:"usuario.password2"}})],1)],1)],1):a._e(),"ADMIN_ROLE"===a.persona.role?r(u.Z,{attrs:{xs12:""}},[r(d.Z,{attrs:{grey:"","lighten-2":"",row:"",wrap:""}},[r(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[r(y.r,{attrs:{readonly:"","item-value":"valor","item-text":"label",items:a.opcionesRoles,label:"Rol","prepend-icon":"supervisor_account",color:"primary","background-color":"primary lighten-2"},model:{value:a.usuario.role,callback:function(r){a.$set(a.usuario,"role",r)},expression:"usuario.role"}})],1),r(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[r(y.r,{attrs:{readonly:"","item-value":"valor","item-text":"label",items:a.opcionesEstados,label:"Estado","prepend-icon":"true"==a.usuario.estado?"check_circle":"cancel",color:"true"==a.usuario.estado?"green lighten-1":"error lighten-1","background-color":"true"==a.usuario.estado?"green lighten-1":"error lighten-1"},model:{value:a.usuario.estado,callback:function(r){a.$set(a.usuario,"estado",r)},expression:"usuario.estado"}})],1)],1)],1):a._e(),r(u.Z,{attrs:{grey:"","lighten-4":"",xs12:""}},[r("treeProperties",{attrs:{data:a.usuario,treeRead:a.permisos,opcionesSelect:a.opcionesPermiso,soloLectura:"soloLectura",mensajeSoloLectura:{icon:"warning_amber",msj:"Los permisos para utilizar los diferentes Modulos del Sistema los otorga Informatica de la Secretaria de Salud, para agregar/modificar los mismos comuniquese con ellos."}}})],1),r(u.Z,{attrs:{xs12:""}},[r(d.Z,{attrs:{grey:"","lighten-2":"",row:"",wrap:""}},[r(u.Z,{attrs:{xs2:"","px-3":""}}),r(u.Z,{attrs:{xs8:"","px-3":""}},[r(g.h,{attrs:{clearable:"","prepend-icon":"lock",label:"Contraseña Anterior",type:"password",rules:[...a.rules.requerido,a.rules.minLength(4)],color:"cuarto darken-4","background-color":"cuarto lighten-5","validate-on-blur":"",autocomplete:"current-password"},model:{value:a.usuario.password_anterior,callback:function(r){a.$set(a.usuario,"password_anterior",r)},expression:"usuario.password_anterior"}})],1),r(u.Z,{attrs:{xs2:"","px-3":""}})],1)],1)],1)},v=[],w=e(8718);const Z={name:"formPerfil",props:["usuario"],components:{treeProperties:w.Z},data(){return{checkPass:!0}},computed:{...(0,b.rn)(["persona","rules"]),...(0,b.rn)("main_usuario",["permisos","opcionesPermiso","opcionesRoles","opcionesEstados"])},methods:{checkPassword(){this.$emit("checkPassword",this.checkPass)}}},_=Z;var P=e(1001),C=(0,P.Z)(_,k,v,!1,null,null,null);const $=C.exports,L={name:"usuarioPerfil",components:{formPerfil:$},data(){return{valido:!0,cambiarPass:!0,usuario:{}}},computed:{...(0,b.rn)(["loading"]),...(0,b.rn)("main_usuario",["usuarioBase"])},async created(){this.usuario={...this._merge(this._cloneDeep(this.usuarioBase),await this.buscarUsuarioID(this.$route.params.id))}},methods:{...(0,b.OI)(["mostrarError"]),...(0,b.nv)("main_usuario",["buscarUsuarioID","guardarPerfil"]),cambiarPassword(a){this.cambiarPass=a},async editarPerfil(){let a=JSON.parse(JSON.stringify(this.usuario));if(!1===this.cambiarPass)delete a.password,delete a.password2;else if(a.password!==a.password2)return this.$refs.form.validate(),void this.mostrarError({titulo:"Contraseña",mensaje:"Las contraseñas no coinciden."});await this.guardarPerfil({usuario:a,validate:this.$refs.form.validate,finish:"retroceder"})}}},E=L;var S=(0,P.Z)(E,h,x,!1,null,null,null);const j=S.exports}}]);