"use strict";(self["webpackChunksecretaria_de_salud_moreno_frontend"]=self["webpackChunksecretaria_de_salud_moreno_frontend"]||[]).push([[634],{8121:function(t,e,i){i.d(e,{Z:function(){return g}});var a=i(7416),o=i(8956),r=i(4791),s=i(4694),l=i(683),n=i(9456),c=i(4618),d=function(){var t=this,e=t._self._c;return e(n.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(l.Z,{attrs:{xs0:"",sm3:"","px-3":""}}),e(l.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[e(c.h,{attrs:{onkeydown:"return event.key !== 'e' && event.key !== 'E' && event.key !== '.' && event.key !== ',' && event.key !== '+' && event.key !== '-'","prepend-icon":"far fa-id-card",label:"Documento",type:"number",color:"cuarto",clearable:"","background-color":"cuarto lighten-5"},model:{value:t.filtro.documento,callback:function(e){t.$set(t.filtro,"documento",e)},expression:"filtro.documento"}})],1),e(l.Z,{attrs:{xs0:"",sm3:"","px-3":""}}),e(l.Z,{attrs:{xs12:"",md10:"","px-3":"","mb-3":""}},[e(n.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(r.Z,{model:{value:t.panel,callback:function(e){t.panel=e},expression:"panel"}},[e(s.Z,{scopedSlots:t._u([{key:"header",fn:function(){return[t._v("Filtro Avanzado")]},proxy:!0}])},[e(o.Z,[e(n.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(l.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[e(c.h,{attrs:{"prepend-icon":"person",label:"Apellido",type:"text",color:"cuarto",clearable:"","background-color":"cuarto lighten-5"},model:{value:t.filtro.apellido,callback:function(e){t.$set(t.filtro,"apellido",e)},expression:"filtro.apellido"}})],1),e(l.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[e(c.h,{attrs:{"prepend-icon":"person",label:"Nombre",type:"text",color:"cuarto",clearable:"","background-color":"cuarto lighten-5"},model:{value:t.filtro.nombre,callback:function(e){t.$set(t.filtro,"nombre",e)},expression:"filtro.nombre"}})],1),e(l.Z,{attrs:{xs12:"",sm4:"","px-3":""}},[e(c.h,{attrs:{"prepend-icon":"far fa-map",label:"Barrio",type:"text",color:"cuarto",clearable:"","background-color":"cuarto lighten-5"},model:{value:t.filtro.dir_barrio,callback:function(e){t.$set(t.filtro,"dir_barrio",e)},expression:"filtro.dir_barrio"}})],1),e(l.Z,{attrs:{xs12:"",sm4:"","px-3":""}},[e(a.Z,{staticClass:"capitalizar",attrs:{items:t.optionsJson.opcLocalidades,"item-value":"description","item-text":"description",label:"Localidad","prepend-icon":"fas fa-city",color:"cuarto",clearable:"","background-color":"cuarto lighten-5"},on:{"click:clear":function(e){t.$nextTick((()=>t.filtro.dir_localidad=null))}},model:{value:t.filtro.dir_localidad,callback:function(e){t.$set(t.filtro,"dir_localidad",e)},expression:"filtro.dir_localidad"}})],1)],1)],1)],1)],1)],1)],1),e(l.Z,{attrs:{xs11:"",cuarto:"","lighten-1":"","px-3":""}},[e("h4",{staticClass:"title white--text"},[t._v("Historiales Clinicos en Unidades de Atencion")])]),e(l.Z,{attrs:{xs12:"",sm5:"","px-3":""}},[e(a.Z,{staticClass:"capitalizar",attrs:{clearable:"","background-color":"cuarto lighten-5",color:"cuarto","item-value":"id","item-text":"area",items:t.unidadesAtencion,label:"Unidad de Atencion","prepend-icon":"fa-house-medical-flag"},on:{"click:clear":function(e){t.$nextTick((()=>t.filtro.hist_salitas.area=null))}},model:{value:t.filtro.hist_salitas.area,callback:function(e){t.$set(t.filtro.hist_salitas,"area",e)},expression:"filtro.hist_salitas.area"}})],1),e(l.Z,{attrs:{xs12:"",sm5:"","px-3":""}},[e(c.h,{attrs:{clearable:"","background-color":"cuarto lighten-5",color:"cuarto",onkeydown:"return event.key !== 'e' && event.key !== 'E' && event.key !== '.' && event.key !== ',' && event.key !== '+' && event.key !== '-'",type:"number",label:"# Historial","prepend-icon":"fas fa-file-medical",counter:"9"},model:{value:t.filtro.hist_salitas.historial,callback:function(e){t.$set(t.filtro.hist_salitas,"historial",e)},expression:"filtro.hist_salitas.historial"}})],1)],1)},u=[],m=i(629),p={name:"formFiltroPaciente",props:["filtro"],data(){return{panel:[],unidadesAtencion:[],optionsJson:{opcLocalidades:[]}}},async created(){this.optionsJson.opcLocalidades=await this.returnOptionsJSON({key:"106",opcion:"opcLocalidades"}),this.unidadesAtencion.push(...await this.buscarAreaFiltros({filtro:{uas:!0},populate:"no",select:"area"}))},methods:{...(0,m.nv)(["returnOptionsJSON"]),...(0,m.nv)("main_areas",["buscarAreaFiltros"])}},h=p,f=i(1001),b=(0,f.Z)(h,d,u,!1,null,"1c9b1a3b",null),g=b.exports},3151:function(t,e,i){i.r(e),i.d(e,{default:function(){return V}});var a=i(8469),o=i(6194),r=i(8956),s=i(2353),l=i(9418),n=i(7441),c=i(6530),d=i(7352),u=i(108),m=i(683),p=i(3667),h=i(9456),f=i(6446),b=i(8143),g=i(4618),_=i(1415),x=function(){var t=this,e=t._self._c;return e(c.Z,{attrs:{fluid:"","grid-list-xs":""}},[e(h.Z,{attrs:{"align-center":"","justify-center":"","ma-0":"",wrap:"","text-xs-center":""}},[e(m.Z,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[e(r.Z,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[e(s.ZB,{staticClass:"px-0 text-uppercase"},[t._v("====== Tuberculosis ======")])],1)],1),e(m.Z,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[e(r.Z,{staticClass:"white--text",attrs:{color:"cuarto darken-1"}},[e(s.ZB,{staticClass:"px-0 text-uppercase"},[t._v("====== ====== Buscar ====== ======")])],1),e(r.Z,{staticClass:"elevation-6",attrs:{color:"grey lighten-2"}},[e(s.ZB,{staticClass:"px-0"},[e(h.Z,{attrs:{row:"",wrap:""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.buscar(t.filtroPacientes)}}},[e(m.Z,{attrs:{xs12:""}},[e("formFiltroPaciente",{attrs:{filtro:t.filtroPacientes}})],1),e(u.Z,{staticClass:"mx-4 my-2 cuarto"}),e(m.Z,{attrs:{xs12:""}},[e("formFiltroTubeculosis",{attrs:{filtro:t.filtroPacientes,casos:t.casos}})],1)],1)],1),e(h.Z,{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},["ADMIN_ROLE"===t.persona.role?e(o.Z,{staticClass:"white--text",attrs:{round:"",color:"cuarto darken-4",disabled:t.loading.estado,loading:t.loading.estado},on:{click:function(e){return t.cargarTodo()}}},[t._v("Cargar Toda la BD")]):t._e(),e(b.Cl),e(b.Cl),e(b.Cl),e(o.Z,{staticClass:"white--text",attrs:{round:"",color:"cuarto darken-2",disabled:t.loading.estado,loading:t.loading.estado},on:{click:function(e){return t.buscar(t.filtroPacientes)}}},[t._v("Buscar")]),e(b.Cl)],1)],1)],1),e(m.Z,{attrs:{"pa-1":"","ma-1":"",terciary:"","lighten-1":"",xs12:""}},[e(l.Z,{staticClass:"title text-capitalize terciary elevation-6"},[e(p.Z,{attrs:{medium:"",color:"white",left:""}},[t._v("people")]),e("span",{staticClass:"title white--text"},[t._v("Pacientes")]),e(b.Cl),e(u.Z,{staticClass:"hidden-xs-only mx-2 my-1 white",attrs:{vertical:""}}),e(g.h,{attrs:{"append-icon":"search",label:"Filtrar","hide-details":"",clearable:"",color:"black","background-color":"terciary lighten-4"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e(l.Z,{attrs:{flat:"",color:"terciary lighten-2"}},[e(p.Z,{attrs:{medium:"",color:"white",left:""}},[t._v("info")]),e("div",[e(h.Z,{attrs:{row:""}},[e("span",{staticClass:"body-2 white--text"},[t._v("Seleccione los que descargara como excel")])])],1),e(u.Z,{staticClass:"hidden-xs-only mx-2 my-1 white",attrs:{vertical:""}}),e(b.Cl),e("download-excel",{attrs:{data:t.selecteccionFiltroExcel,fields:t.columnasExcel,name:t.nombreExcel,type:"xls","before-finish":t.ocultarLoading}},[e(o.Z,{staticClass:"white--text",attrs:{round:"",color:"terciary darken-1",disabled:t.loading.estado,loading:t.loading.estado},on:{click:function(e){return t.descargarExcel()}}},[e(p.Z,{attrs:{left:"",dark:""}},[t._v("far fa-file-excel")]),t._v(" Descargar Excel ")],1)],1),e(o.Z,{staticClass:"white--text",attrs:{round:"",color:"terciary darken-1",disabled:t.persona.tuberculosis<2||t.loading.estado,loading:t.loading.estado},on:{click:function(e){return t.actualizarDialogPaciente({state:!0})}}},[t._v("Alta Nuevo Paciente")])],1),e(d.Z,{staticClass:"elevation-6",staticStyle:{"table-layout":"fixed"},attrs:{id:"tablita",headers:t.headers,items:t.listPacientes,"item-key":"_id",pagination:t.paginacion,"rows-per-page-items":[5,10,25,50],loading:t.loading.estado,search:t.search,"select-all":""},on:{"update:pagination":function(e){t.paginacion=e}},scopedSlots:t._u([{key:"no-data",fn:function(){return[e(a.Z,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[t._v(" No hay datos para mostrar. ")])]},proxy:!0},{key:"no-results",fn:function(){return[e(a.Z,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[t._v(' No se encontraron resultados para "'+t._s(t.search)+'". ')])]},proxy:!0},{key:"items",fn:function(i){return[e("tr",{class:t.backgroundClass(i.item)},[e("td",[e(_.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[i.item.estado&&i.item.hist_tuberculosis&&i.item.hist_tuberculosis.estado?e(n.Z,t._g({attrs:{color:"terciary darken-2","hide-details":""},model:{value:i.selected,callback:function(e){t.$set(i,"selected",e)},expression:"props.selected"}},a)):t._e()]}}],null,!0)},[e("span",[t._v("Seleccionar")])])],1),e("td",{staticClass:"text-sm-left"},[e("div",{staticStyle:{width:"70px"}},[e(h.Z,{attrs:{row:"",wrap:""}},[e(m.Z,{attrs:{xs12:"",sm5:""}},[e(_.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(o.Z,t._g({attrs:{flat:"",icon:"",disabled:t.loading.estado,color:"terciary"},on:{click:function(e){return t.actualizarDialogPaciente({state:!0,id:i.item._id})}}},a),[e(p.Z,[t._v("fas fa-user-edit")])],1)]}}],null,!0)},[e("span",[t._v("Datos Paciente")])])],1),e(m.Z,{attrs:{xs12:"",sm5:""}},[e(_.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(o.Z,t._g({attrs:{flat:"",icon:"",disabled:t.loading.estado,color:"orange darken-2"},on:{click:function(e){return t.editItem(i.item)}}},a),[e(p.Z,[t._v("fa-book-medical")])],1)]}}],null,!0)},[e("span",[t._v("Datos Tuberculosis")])])],1)],1)],1)]),e("td",{staticClass:"text-capitalize text-sm-left"},[t._v(t._s(i.item.nombreC))]),e("td",{staticClass:"text-sm-left"},[t._v(t._s(i.item.documentoC))]),e("td",{staticClass:"text-sm-left"},[t._v(" "+t._s(i.item.fec_nac+" ("+t.filtroEdad(i.item.fec_nac)+")")+" ")]),e("td",{staticClass:"text-sm-left"},[t._v(t._s(i.item.telefono))]),e("td",{staticClass:"text-capitalize text-sm-left"},[t._v(" "+t._s(t.mostrarExiste(i.item.hist_tuberculosis,"clasificacion"))+" ")]),e("td",{staticClass:"text-capitalize text-sm-left"},[t._v(t._s(i.item.direccion))])])]}}]),model:{value:t.seleccionados,callback:function(e){t.seleccionados=e},expression:"seleccionados"}},[e(f.Z,{attrs:{color:"blue",indeterminate:""}})],1),e(h.Z,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",terciary:"","lighten-2":""}},[e(b.Cl),e(u.Z,{staticClass:"hidden-xs-only mx-2 my-1 black",attrs:{vertical:""}}),e("download-excel",{attrs:{data:t.selecteccionFiltroExcel,fields:t.columnasExcel,name:t.nombreExcel,type:"xls","before-finish":t.ocultarLoading}},[e(o.Z,{staticClass:"white--text",attrs:{round:"",color:"terciary darken-1",disabled:t.loading.estado,loading:t.loading.estado},on:{click:function(e){return t.descargarExcel()}}},[e(p.Z,{attrs:{left:"",dark:""}},[t._v("far fa-file-excel")]),t._v(" Descargar Excel ")],1)],1)],1)],1),e("formTuberculosis",{attrs:{dialog:t.dialog,editedItem:t.editedItem,editedIndex:t.editedIndex,casos:t.casos,close:t.closeTuberculosis,listPacientes:t.listPacientes}}),e("dialogPaciente",{attrs:{closeFinish:t.actualizarList}})],1)],1)},v=[],y=i(629),k=i(8121),Z=i(7416),C=i(4036),I=function(){var t=this,e=t._self._c;return e(h.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(m.Z,{attrs:{xs0:"",sm3:"","px-3":""}}),e(m.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[e(C.r,{attrs:{"item-value":"valor","item-text":"label",items:t.clasificaciones,label:"Clasificacion","prepend-icon":"fas fa-file-medical",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:t.filtro.hist_tuberculosis.clasificacion,callback:function(e){t.$set(t.filtro.hist_tuberculosis,"clasificacion",e)},expression:"filtro.hist_tuberculosis.clasificacion"}})],1),e(m.Z,{attrs:{xs0:"",sm3:"","px-3":""}}),e(m.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[e(Z.Z,{staticClass:"capitalizar",attrs:{"item-value":"id","item-text":"nombreC",items:t.casos,label:"Caso Indice","prepend-icon":"fas fa-head-side-cough",color:"cuarto","background-color":"cuarto lighten-5",clearable:""},on:{"click:clear":function(e){t.$nextTick((()=>t.filtro.hist_tuberculosis["indice.id"]=null))}},model:{value:t.filtro.hist_tuberculosis["indice.id"],callback:function(e){t.$set(t.filtro.hist_tuberculosis,"indice.id",e)},expression:"filtro.hist_tuberculosis['indice.id']"}})],1),e(m.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[e(g.h,{attrs:{"prepend-icon":"description",label:"Observacion",type:"text",color:"cuarto",clearable:"","background-color":"cuarto lighten-5"},model:{value:t.filtro.hist_tuberculosis.observacion,callback:function(e){t.$set(t.filtro.hist_tuberculosis,"observacion",e)},expression:"filtro.hist_tuberculosis.observacion"}})],1)],1)},$=[],w={name:"formFiltro",props:["filtro","casos"],data(){return{otrosCasos:!1,clasificaciones:[{label:"No Buscar por este campo",valor:""},{label:"Caso",valor:"caso"},{label:"Contacto",valor:"contacto"},{label:"Fin de Seguimiento",valor:"fin de seguimiento"},{label:"Sin Clasificar",valor:"$!exists"}]}},watch:{otrosCasos:function(t){t?this.filtro.hist_tuberculosis["indice.id"]=null:this.filtro.hist_tuberculosis["indice.caso"]=""}},created(){},methods:{}},L=w,E=i(1001),P=(0,E.Z)(L,I,$,!1,null,null,null),S=P.exports,D=i(5049),F=i(445),T=i(5730),A=function(){var t=this,e=t._self._c;return e(D.Z,{attrs:{"max-width":"80%",persistent:"",scrollable:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(F.Z,{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valido,callback:function(e){t.valido=e},expression:"valido"}},[e(r.Z,[e(l.Z,[e(h.Z,{attrs:{grey:"","lighten-2":"",row:""}},[e("span",{staticClass:"display-2 text-capitalize"},[t._v("Paciente: "+t._s(t.editedItem.nombreC)+".")]),e(b.Cl),e(o.Z,{attrs:{icon:"",disabled:t.loading.estado,loading:t.loading.estado,color:"error darken-1"},on:{click:t.close}},[e(p.Z,{attrs:{large:""}},[t._v("cancel")])],1)],1)],1),e(s.ZB,[e(c.Z,{attrs:{"grid-list-md":""}},[e(h.Z,{attrs:{wrap:""}},[e(m.Z,{attrs:{xs12:""}},[e(h.Z,{attrs:{grey:"","lighten-2":"",row:"",wrap:""}},[e(m.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e(g.h,{attrs:{readonly:"","prepend-icon":"fas fa-id-card",label:"Documento",type:"text",color:"primary","background-color":"primary lighten-2"},model:{value:t.editedItem.documento,callback:function(e){t.$set(t.editedItem,"documento",e)},expression:"editedItem.documento"}})],1),e(m.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e(g.h,{attrs:{readonly:"","prepend-icon":"phone",label:"Telefono",type:"text",color:"primary","background-color":"primary lighten-2"},model:{value:t.editedItem.telefono,callback:function(e){t.$set(t.editedItem,"telefono",e)},expression:"editedItem.telefono"}})],1)],1)],1),e(m.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e(Z.Z,{attrs:{readonly:t.soloLectura(),"background-color":t.soloLectura()?"primary lighten-2":"primary lighten-5",rules:t.requerido,"item-value":"valor","item-text":"label",items:t.clasificacion,label:"Clasificacion","prepend-icon":"fas fa-file-medical",color:"primary"},model:{value:t.editedItem.hist_tuberculosis.clasificacion,callback:function(e){t.$set(t.editedItem.hist_tuberculosis,"clasificacion",e)},expression:"editedItem.hist_tuberculosis.clasificacion"}})],1),e(m.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e(Z.Z,{attrs:{readonly:t.soloLectura(),clearable:!t.soloLectura(),"background-color":t.soloLectura()?"primary lighten-2":"primary lighten-5","item-value":"valor","item-text":"label",items:t.tratamientos,label:"Estado de Tratamiento","prepend-icon":"fa-book-medical",color:"primary",rules:"caso"===t.editedItem.hist_tuberculosis.clasificacion?t.requerido:[]},model:{value:t.editedItem.hist_tuberculosis.tratamiento,callback:function(e){t.$set(t.editedItem.hist_tuberculosis,"tratamiento",e)},expression:"editedItem.hist_tuberculosis.tratamiento"}})],1),e(m.Z,{attrs:{xs12:"",primary:"","lighten-2":""}},[e("h4",[t._v("Casos Indice")])]),t._l(t.editedItem.hist_tuberculosis.indice,(function(i,a){return e(m.Z,{key:`casos-${a}`,attrs:{xs12:"",primary:"","lighten-3":""}},[e(h.Z,{attrs:{"align-center":"",row:"",wrap:""}},[e(m.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e(Z.Z,{attrs:{readonly:t.soloLectura(),clearable:!t.soloLectura(),"background-color":t.soloLectura()?"primary lighten-2":"primary lighten-5","item-value":"id","item-text":"nombreC",items:t.casos,label:"Apellido, Nombre del Caso","prepend-icon":"fas fa-portrait",color:"primary",rules:0!=a||"contacto"===t.editedItem.hist_tuberculosis.clasificacion?t.requerido:[]},scopedSlots:t._u([{key:"selection",fn:function(e){return[t._v(" "+t._s(t.capitalizarString(e.item.nombreC))+" "+t._s(e.item.documentoC?"("+e.item.documentoC+")":"(Documento)")+" ")]}},{key:"item",fn:function(e){return[t._v(" "+t._s(e.item.nombreC)+" "+t._s(e.item.documentoC?"("+e.item.documentoC+")":"(Documento)")+" ")]}}],null,!0),model:{value:t.editedItem.hist_tuberculosis.indice[a].id,callback:function(e){t.$set(t.editedItem.hist_tuberculosis.indice[a],"id",e)},expression:"editedItem.hist_tuberculosis.indice[index].id"}})],1),e(m.Z,{attrs:{xs12:"",sm5:"","px-2":""}},[null!=t.editedItem.hist_tuberculosis.indice[a].id?e(Z.Z,{staticClass:"capitalizar",attrs:{readonly:"",color:"primary","background-color":"primary lighten-2","item-value":"id","item-text":"nombreC",items:t.casos,label:"Estado Tratamiento Caso Indice","prepend-icon":"fa-book-medical"},scopedSlots:t._u([{key:"selection",fn:function(e){return[t._v(" "+t._s(e.item.hist_tuberculosis.tratamiento?t.capitalizarString(e.item.hist_tuberculosis.tratamiento):"sin dato")+" ")]}}],null,!0),model:{value:t.editedItem.hist_tuberculosis.indice[a].id,callback:function(e){t.$set(t.editedItem.hist_tuberculosis.indice[a],"id",e)},expression:"editedItem.hist_tuberculosis.indice[index].id"}}):t._e()],1),0==a?e(_.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(o.Z,t._g({attrs:{disabled:t.soloLectura(),flat:"",icon:"",color:"blue lighten-2"},on:{click:function(e){return t.agregarFila(t.editedItem.hist_tuberculosis.indice,{id:null,caso:"",documento:"",tratamiento:""})}}},i),[e(p.Z,{attrs:{large:""}},[t._v("add_circle")])],1)]}}],null,!0)},[e("span",[t._v("Agregar Caso Indice")])]):t._e(),0!=a?e(_.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(o.Z,t._g({attrs:{small:"",disabled:t.soloLectura(),flat:"",icon:"",color:"red lighten-2"},on:{click:function(e){return t.borrarFila(t.editedItem.hist_tuberculosis.indice,a)}}},i),[e(p.Z,[t._v("delete_forever")])],1)]}}],null,!0)},[e("span",[t._v("Eliminar Caso Indice "+t._s(t.editedItem.hist_tuberculosis.indice[a].id?`- ${t.editedItem.hist_tuberculosis.indice[a].id.nombreC}`:""))])]):t._e()],1)],1)})),e(m.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e("dateSelect",{key:`${t.editedItem.nombreC}-iTratamiento`,attrs:{value:t.editedItem.hist_tuberculosis.fec_tratamiento,label:"Inicio Tratamiento",color:"primary",icon:"event",soloLectura:t.soloLectura(),requerido:!1,min:"",max:"",filtro:""},on:{input:function(e){t.editedItem.hist_tuberculosis.fec_tratamiento=e}}})],1),e(m.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e("dateSelect",{key:`${t.editedItem.nombreC}-quimio`,attrs:{value:t.editedItem.hist_tuberculosis.fec_quimio,label:"Inicio Quimiopx",color:"primary",icon:"fas fa-diagnoses",soloLectura:t.soloLectura(),requerido:!1,min:"",max:"",filtro:""},on:{input:function(e){t.editedItem.hist_tuberculosis.fec_quimio=e}}})],1),e(m.Z,{attrs:{xs0:"",sm6:"","px-2":""}}),t._l(t.editedItem.hist_tuberculosis.ppd,(function(i,a){return e(m.Z,{key:`ppd-${a}`,attrs:{xs12:"","px-2":"",primary:"","lighten-4":""}},[e(h.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(m.Z,{attrs:{xs12:"",sm6:"","pr-3":""}},[e("dateSelect",{key:`${t.editedItem.nombreC}-ppd-${a}`,attrs:{value:t.editedItem.hist_tuberculosis.ppd[a].fecha,label:"Fecha PPD (Derivado Proteico Purificado)",color:"primary",icon:"fas fa-allergies",soloLectura:t.soloLectura(),requerido:0!=a,min:"",max:"",filtro:""},on:{input:function(e){t.editedItem.hist_tuberculosis.ppd[a].fecha=e}}})],1),e(m.Z,{attrs:{xs12:"",sm5:"","px-2":""}},[e(g.h,{attrs:{readonly:t.soloLectura(),clearable:!t.soloLectura(),"background-color":t.soloLectura()?"primary lighten-2":"primary lighten-5",onkeydown:"return event.key !== 'e' && event.key !== 'E' && event.key !== '+'","prepend-icon":"",label:"Resultado PPD",type:"number",color:"primary"},model:{value:t.editedItem.hist_tuberculosis.ppd[a].valor,callback:function(e){t.$set(t.editedItem.hist_tuberculosis.ppd[a],"valor",e)},expression:"editedItem.hist_tuberculosis.ppd[index].valor"}})],1),0==a?e(_.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(o.Z,t._g({attrs:{disabled:t.soloLectura(),flat:"",icon:"",color:"blue lighten-2"},on:{click:function(e){return t.agregarFila(t.editedItem.hist_tuberculosis.ppd,{fecha:"",valor:""})}}},i),[e(p.Z,{attrs:{large:""}},[t._v("add_circle")])],1)]}}],null,!0)},[e("span",[t._v("Agregar PPD")])]):t._e(),0!=a?e(_.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(o.Z,t._g({attrs:{small:"",disabled:t.soloLectura(),flat:"",icon:"",color:"red lighten-2"},on:{click:function(e){return t.borrarFila(t.editedItem.hist_tuberculosis.ppd,a)}}},i),[e(p.Z,[t._v("delete_forever")])],1)]}}],null,!0)},[e("span",[t._v("Eliminar PPD")])]):t._e()],1)],1)})),t._l(t.editedItem.hist_tuberculosis.rx_torax,(function(i,a){return e(m.Z,{key:`rx_torax-${a}`,attrs:{xs12:"","px-2":"",primary:"","lighten-3":""}},[e(h.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(m.Z,{attrs:{xs12:"",sm6:"","pr-3":""}},[e("dateSelect",{key:`${t.editedItem.nombreC}-rx_torax-${a}`,attrs:{value:t.editedItem.hist_tuberculosis.rx_torax[a].fecha,label:"Fecha RX Torax (Radiografia)",color:"primary",icon:"fas fa-file-prescription",soloLectura:t.soloLectura(),requerido:0!=a,min:"",max:"",filtro:""},on:{input:function(e){t.editedItem.hist_tuberculosis.rx_torax[a].fecha=e}}})],1),e(m.Z,{attrs:{xs12:"",sm5:"","px-2":""}},[e(g.h,{attrs:{readonly:t.soloLectura(),clearable:!t.soloLectura(),"background-color":t.soloLectura()?"primary lighten-2":"primary lighten-5","prepend-icon":"",label:"Resultado RX Torax",type:"text",color:"primary"},model:{value:t.editedItem.hist_tuberculosis.rx_torax[a].valor,callback:function(e){t.$set(t.editedItem.hist_tuberculosis.rx_torax[a],"valor",e)},expression:"editedItem.hist_tuberculosis.rx_torax[index].valor"}})],1),0==a?e(_.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(o.Z,t._g({attrs:{disabled:t.soloLectura(),flat:"",icon:"",color:"blue lighten-2"},on:{click:function(e){return t.agregarFila(t.editedItem.hist_tuberculosis.rx_torax,{fecha:"",valor:""})}}},i),[e(p.Z,{attrs:{large:""}},[t._v("add_circle")])],1)]}}],null,!0)},[e("span",[t._v("Agregar RX Torax")])]):t._e(),0!=a?e(_.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(o.Z,t._g({attrs:{small:"",disabled:t.soloLectura(),flat:"",icon:"",color:"red lighten-2"},on:{click:function(e){return t.borrarFila(t.editedItem.hist_tuberculosis.rx_torax,a)}}},i),[e(p.Z,[t._v("delete_forever")])],1)]}}],null,!0)},[e("span",[t._v("Eliminar RX Torax")])]):t._e()],1)],1)})),e(m.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e(Z.Z,{attrs:{clearable:!t.soloLectura(),readonly:t.soloLectura(),"background-color":t.soloLectura()?"primary lighten-2":"primary lighten-5","item-value":"valor","item-text":"label",items:t.si_no,label:"Laboratorio","prepend-icon":"fas fa-vials",color:"primary"},model:{value:t.editedItem.hist_tuberculosis.laboratorio,callback:function(e){t.$set(t.editedItem.hist_tuberculosis,"laboratorio",e)},expression:"editedItem.hist_tuberculosis.laboratorio"}})],1),e(m.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e(Z.Z,{attrs:{clearable:!t.soloLectura(),readonly:t.soloLectura(),"background-color":t.soloLectura()?"primary lighten-2":"primary lighten-5","item-value":"valor","item-text":"label",items:t.quimioprofilaxis,label:"Quimioprofilaxis","prepend-icon":"fas fa-prescription",color:"primary"},model:{value:t.editedItem.hist_tuberculosis.quimioprofilaxis,callback:function(e){t.$set(t.editedItem.hist_tuberculosis,"quimioprofilaxis",e)},expression:"editedItem.hist_tuberculosis.quimioprofilaxis"}})],1),e(m.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e(Z.Z,{attrs:{clearable:!t.soloLectura(),readonly:t.soloLectura(),"background-color":t.soloLectura()?"primary lighten-2":"primary lighten-5","item-value":"valor","item-text":"label",items:t.duracion,label:"Duracion (Meses)","prepend-icon":"far fa-calendar-alt",color:"primary"},model:{value:t.editedItem.hist_tuberculosis.duracion,callback:function(e){t.$set(t.editedItem.hist_tuberculosis,"duracion",e)},expression:"editedItem.hist_tuberculosis.duracion"}})],1),e(m.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e(Z.Z,{attrs:{clearable:!t.soloLectura(),readonly:t.soloLectura(),"background-color":t.soloLectura()?"primary lighten-2":"primary lighten-5","item-value":"valor","item-text":"label",items:t.si_no,label:"Completado","prepend-icon":"fas fa-check-circle",color:"primary"},model:{value:t.editedItem.hist_tuberculosis.completado,callback:function(e){t.$set(t.editedItem.hist_tuberculosis,"completado",e)},expression:"editedItem.hist_tuberculosis.completado"}})],1),e(m.Z,{attrs:{xs12:"","px-2":""}},[e(T.Z,{attrs:{clearable:!t.soloLectura(),readonly:t.soloLectura(),"background-color":t.soloLectura()?"primary lighten-2":"primary lighten-5","auto-grow":"",label:"Observacion",rows:"2","prepend-icon":"description",color:"primary"},model:{value:t.editedItem.hist_tuberculosis.observacion,callback:function(e){t.$set(t.editedItem.hist_tuberculosis,"observacion",e)},expression:"editedItem.hist_tuberculosis.observacion"}})],1)],2)],1)],1),e(s.h7,[e(o.Z,{staticClass:"terciary darken-1 white--text",attrs:{disabled:t.loading.estado,round:"",loading:t.loading.estado},on:{click:t.verHistorial}},[t._v(" Historial")]),e(_.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(o.Z,t._g({staticClass:"primary darken-1",attrs:{disabled:t.loading.estado||!t.valido||t.soloLectura(),round:"",loading:t.loading.estado},on:{click:t.guardarHistorial}},i),[t._v(" "+t._s(t.valido?"Archivar en Historial":"Formulario No valido"))])]}}])},[e("span",[t._v("Archiva el Tratamiento para comenzar uno nuevo")])]),e(b.Cl),e(u.Z,{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),e(o.Z,{staticClass:"error darken-1",attrs:{disabled:t.loading.estado,round:"",loading:t.loading.estado},on:{click:t.close}},[t._v(" Cancelar")]),e(o.Z,{staticClass:"primary darken-1",attrs:{disabled:t.loading.estado||!t.valido||t.soloLectura(),round:"",loading:t.loading.estado},on:{click:t.editar}},[t._v(" "+t._s(t.valido?"Guardar Cambios":"Formulario No valido"))])],1)],1)],1)],1)},j=[],O=i(3979),N={name:"formTuberculosis",props:["dialog","editedItem","editedIndex","casos","close","listPacientes"],components:{dateSelect:O.Z},data:()=>({valido:!0,requerido:[t=>t&&(!t||"string"!==typeof t||""!==t.trim())||"Este campo es requerido."],positivo:[t=>isNaN(t)?"Debe ser un numero valido.":!(t&&Number(t)<=0)||"El numero debe ser positivo."],clasificacion:[{label:"Caso",valor:"caso"},{label:"Contacto",valor:"contacto"},{label:"Fin de Seguimiento",valor:"fin de seguimiento"}],tratamientos:[{label:"Alta",valor:"alta"},{label:"Fase 1",valor:"fase 1"},{label:"Fase 2",valor:"fase 2"},{label:"Retratamiento",valor:"retratamiento"},{label:"Retratamiento (Resis. H)",valor:"retratamiento Res H"},{label:"???",valor:"???"}],si_no:[{label:"Si",valor:"si"},{label:"No",valor:"no"}],quimioprofilaxis:[{label:"No",valor:"no"},{label:"H",valor:"H"},{label:"R",valor:"R"},{label:"Otras",valor:"otras"}],duracion:["0","3","6","9"]}),computed:{...(0,y.rn)(["APIURL","axiosConfig","loading","persona"])},methods:{...(0,y.OI)(["mostrarLoading","ocultarLoading","mostrarError","mostrarMensaje"]),capitalizarString(t){return"string"===typeof t?t.trim().toLowerCase().replace(/\w\S*/g,(t=>t.replace(/^\w/,(t=>t.toUpperCase())))):t},soloLectura(){return this.persona.tuberculosis<2},async agregarFila(t,e){let i=e||"";t.push(i)},async borrarFila(t,e){t.splice(e,1)},async editar(){if(this.$refs.form.validate()){let e=Object.assign({},this.editedItem);try{this.mostrarLoading({titulo:"Enviando datos...",color:"primary"});let i=await this.axios.put(this.APIURL+"/tuberculosis/paciente/"+e._id,e,this.axiosConfig);if(i.data.ok)i.data.paciente.documentoC?this.mostrarMensaje({msj:["Paciente Editado exitosamente.","<##> Documento: "+i.data.paciente.documentoC.toString()+" <##>"],titulo:"Modificacion Exitosa"}):this.mostrarMensaje({msj:["Paciente Editado exitosamente."],titulo:"Modificacion Exitosa"}),this.$set(this.listPacientes,this.editedIndex,i.data.paciente),this.close();else try{this.mostrarError({mensaje:i.data.err.message,titulo:i.status})}catch(t){this.mostrarError()}}catch(t){try{this.mostrarError({errores:t.response.data.err.errors,mensaje:t.response.data.err.message,titulo:t.response.status})}catch(t){this.mostrarError()}}finally{this.ocultarLoading()}}else this.mostrarError({mensaje:"Revise los campos obligatorios.",titulo:"Valores Requeridos."})},async guardarHistorial(){this.$refs.form.validate()?(console.log("EN DESARROLLO"),this.mostrarMensaje({msj:["Guardar el historial, se encuentra en desarrollo."],titulo:"EN DESARROLLO"})):this.mostrarError({mensaje:"Revise los campos obligatorios.",titulo:"Valores Requeridos."})},async verHistorial(){console.log("EN DESARROLLO"),this.mostrarMensaje({msj:["Visualizacion del historial, se encuentra en desarrollo."],titulo:"EN DESARROLLO"})}}},R=N,q=(0,E.Z)(R,A,j,!1,null,null,null),B=q.exports,z=i(9354),M={name:"pacienteBuscar",components:{formFiltroPaciente:k.Z,formFiltroTubeculosis:S,formTuberculosis:B,dialogPaciente:z.Z},data:()=>({paginacion:{sortBy:"nombreC",descending:!1,rowsPerPage:10,page:1},search:"",headers:[{text:"Acciones",value:"_id",sortable:!1,width:"5%"},{text:"Nombre Completo",value:"nombreC",width:"25%"},{text:"Documento",value:"documentoC",width:"5%"},{text:"Fec. de Nac (Edad)",value:"fec_nac",width:"15%"},{text:"Telefono",value:"telefono",width:"10%"},{text:"Clasificacion",value:"hist_tuberculosis.clasificacion",width:"10%"},{text:"Domicilio",value:"direccion",width:"25%"}],listPacientes:[],filtroPacientes:{apellido:"",nombre:"",documento:"",dir_barrio:"",dir_localidad:"",hist_salitas:{area:null,historial:""},hist_tuberculosis:{clasificacion:"","indice.id":null,"indice.caso":"",observacion:""}},ultimoFiltro:{},casos:[],noNexo:{nombreC:"Sin Nexo",id:null},dialog:!1,editedIndex:-1,editedItem:{apellido:"",nombre:"",documento:"",telefono:"",hist_tuberculosis:{indice:[{id:null,caso:"",documento:"",tratamiento:""}],clasificacion:"",tratamiento:"",fec_tratamiento:"",fec_quimio:"",ppd:[{fecha:"",valor:""}],rx_torax:[{fecha:"",valor:""}],laboratorio:"",quimioprofilaxis:"",duracion:"",completado:"",observacion:"",historial:[]}},defaultItem:{apellido:"",nombre:"",documento:"",telefono:"",hist_tuberculosis:{indice:[{id:null,caso:"",documento:"",tratamiento:""}],clasificacion:"",tratamiento:"",fec_tratamiento:"",fec_quimio:"",ppd:[{fecha:"",valor:""}],rx_torax:[{fecha:"",valor:""}],laboratorio:"",quimioprofilaxis:"",duracion:"",completado:"",observacion:"",historial:[]}},seleccionados:[],columnasExcel:{Apellido:"apellido",Nombre:"nombre","Tipo Documento":"tipo_doc",Documento:"documento",Calle:"dir_calle",Numero:"dir_numero",Piso:"dir_piso",Depto:"dir_depto",Barrio:"dir_barrio",Localidad:"dir_localidad",Telefono:"telefono","Fecha de Nacimiento":{field:"fec_nac",callback:t=>{try{let e=new Date(t).toISOString().substring(0,10);return`${e}`}catch(e){return`${t}`}}},Edad:{field:"fec_nac",callback:t=>{if(!t)return"";try{let e=new Date,i=new Date(t),a=e.getFullYear()-i.getFullYear(),o=e.getMonth()-i.getMonth();if((o<0||0===o&&e.getDate()<=i.getDate())&&a--,a<=0){let t=Math.floor((e.getTime()-i.getTime())/864e5);return 1===t?`${t} dia`:`${t} dias`}return 1===a?`${a} año`:`${a} años`}catch(e){return`${t}`}}},Sexo:"sexo","Obra Social":"oSocial","Enf.Previas/Comorbilidades":"enf_previas",Clasificacion:"hist_tuberculosis.clasificacion","Caso Indice":{field:"hist_tuberculosis.indice",callback:t=>{try{let e="";if(t.length>1)for(let i=0;i<t.length;i++){e+="Caso Nº"+(i+1)+" (\n";const a=t[i];a.id?(e+="Apellido, Nombre: "+(a.id.nombreC?`${a.id.nombreC}`:"sin dato"),e+="\nDocumento: "+(a.id.documentoC?`${a.id.documentoC}`:"sin dato"),e+="\nTratamiento: "+(a.id.hist_tuberculosis?""+(a.id.hist_tuberculosis.tratamiento?`${a.id.hist_tuberculosis.tratamiento}`:"sin dato"):"sin dato")):(e+="Apellido, Nombre: "+(a.caso?`${a.caso}`:"sin dato"),e+="\nDocumento: "+(a.documento?`${a.documento}`:"sin dato"),e+="\nTratamiento: "+(a.tratamiento?`${a.tratamiento}`:"sin dato")),i<t.length-1?e+="\n)\n":e+="\n)"}else t[0].id?e+=""+(t[0].id.nombreC?`Apellido, Nombre: ${t[0].id.nombreC}\n                    Documento: ${t[0].id.documentoC?`${t[0].id.documentoC}`:"sin dato"}\n                    Tratamiento: ${t[0].id.hist_tuberculosis&&t[0].id.hist_tuberculosis.tratamiento?`${t[0].id.hist_tuberculosis.tratamiento}`:"sin dato"}`:"sin dato"):e+=""+(t[0].caso?`Apellido, Nombre: ${t[0].caso}\n                    Documento: ${t[0].documento?`${t[0].documento}`:"sin dato"}\n                    Tratamiento: ${t[0].tratamiento?`${t[0].tratamiento}`:"sin dato"}`:"sin dato");return e}catch(e){return`${t}`}}},"Estado Tratamiento":"hist_tuberculosis.tratamiento","Inicio Quimiopx":"hist_tuberculosis.fec_quimio",PPD:{field:"hist_tuberculosis.ppd",callback:t=>{try{let e="";if(!(t.length>1)){let e=new Date(t[0].fecha),i=e.getUTCFullYear(),a=(e.getUTCMonth()+1).toString().padStart(2,0),o=e.getUTCDate().toString().padStart(2,0);return e=[o,a,i].join("/"),`Fecha: ${t[0].fecha?`${e}`:"sin dato"}\nValor: ${t[0].valor?`${t[0].valor}`:"sin dato"}`}for(let i=0;i<t.length;i++){e+="PPD Nº"+(i+1)+" (\n";const a=t[i];let o=new Date(a.fecha),r=o.getUTCFullYear(),s=(o.getUTCMonth()+1).toString().padStart(2,0),l=o.getUTCDate().toString().padStart(2,0);o=[l,s,r].join("/"),e+=`Fecha: ${a.fecha?`${o}`:"sin dato"}\n`,e+="Valor: "+(a.valor?`${a.valor}`:"sin dato"),i<t.length-1?e+="\n)\n":e+="\n)"}return e}catch(e){return`${t}`}}},"RX Torax":{field:"hist_tuberculosis.rx_torax",callback:t=>{try{let e="";if(!(t.length>1)){let e=new Date(t[0].fecha),i=e.getUTCFullYear(),a=(e.getUTCMonth()+1).toString().padStart(2,0),o=e.getUTCDate().toString().padStart(2,0);return e=[o,a,i].join("/"),`Fecha: ${t[0].fecha?`${e}`:"sin dato"}\nValor: ${t[0].valor?`${t[0].valor}`:"sin dato"}`}for(let i=0;i<t.length;i++){e+="RX Torax Nº"+(i+1)+" (\n";const a=t[i];let o=new Date(a.fecha),r=o.getUTCFullYear(),s=(o.getUTCMonth()+1).toString().padStart(2,0),l=o.getUTCDate().toString().padStart(2,0);o=[l,s,r].join("/"),e+=`Fecha: ${a.fecha?`${o}`:"sin dato"}\n`,e+="Valor: "+(a.valor?`${a.valor}`:"sin dato"),i<t.length-1?e+="\n)\n":e+="\n)"}return e}catch(e){return`${t}`}}},Laboratorio:"hist_tuberculosis.laboratorio",Quimioprofilaxis:"hist_tuberculosis.quimioprofilaxis",Duracion:"hist_tuberculosis.duracion",Completado:"hist_tuberculosis.completado",Observacion:"hist_tuberculosis.observacion"}}),computed:{...(0,y.rn)(["APIURL","axiosConfig","loading","hoy","persona"]),nombreExcel(){return`Tuberculosis-${this.hoy}.xls`},selecteccionFiltroExcel(){let t=[];for(let e=0;e<this.seleccionados.length;e++){let i=this.seleccionados[e];i.estado&&i.hist_tuberculosis&&i.hist_tuberculosis.estado&&t.push(i)}return t}},mounted(){this.cargarCasos()},methods:{...(0,y.OI)(["mostrarLoading","ocultarLoading","mostrarError"]),...(0,y.nv)("paciente",["actualizarDialogPaciente"]),backgroundClass(t){if(!t)return"";try{if(!t.hist_tuberculosis)return t.estado?"background-color: terciary lighten-4":"background-color: error lighten-4";if(!t.hist_tuberculosis.estado)return"background-color: info lighten-3";if(t.estado&&"caso"===t.hist_tuberculosis.clasificacion)return"background-color: primary lighten-1";if(t.estado&&"contacto"===t.hist_tuberculosis.clasificacion)return"background-color: primary lighten-3";if(t.estado&&"fin de seguimiento"===t.hist_tuberculosis.clasificacion)return"background-color: green lighten-3";if(!t.estado&&"caso"===t.hist_tuberculosis.clasificacion)return"background-color: primary darken-4";if(!t.estado&&"contacto"===t.hist_tuberculosis.clasificacion)return"background-color: primary darken-1";if(!t.estado&&"fin de seguimiento"===t.hist_tuberculosis.clasificacion)return"background-color: green darken-1"}catch(e){return""}},mostrarExiste(t,e){if(!t)return"clasificacion"===e?"sin clasificar":"";try{return t[e]}catch(i){return""}},filtroEdad(t){if(!t)return"XX";try{let a=new Date,o=new Date(t);var e=a.getFullYear()-o.getFullYear(),i=a.getMonth()-o.getMonth();if((i<0||0===i&&a.getDate()<=o.getDate())&&e--,e<=0){let t=Math.floor((a.getTime()-o.getTime())/864e5);return 1===t?`${t} dia`:`${t} dias`}return 1===e?`${e} año`:`${e} años`}catch(a){return t}},editItem(t){this.editedIndex=this.listPacientes.indexOf(t),this.editedItem=Object.assign({},this._cloneDeep(this.defaultItem),this._cloneDeep(t)),this.editedItem.hist_tuberculosis.fec_quimio&&(this.editedItem.hist_tuberculosis.fec_quimio=new Date(this.editedItem.hist_tuberculosis.fec_quimio).toISOString().substring(0,10)),this.editedItem.hist_tuberculosis.fec_tratamiento&&(this.editedItem.hist_tuberculosis.fec_tratamiento=new Date(this.editedItem.hist_tuberculosis.fec_tratamiento).toISOString().substring(0,10)),this.dialog=!0},closeTuberculosis(){this.dialog=!1,setTimeout((()=>{this.editedItem=Object.assign({},this._cloneDeep(this.defaultItem)),this.editedIndex=-1}),300),this.actualizarList()},async cargarCasos(){let t={hist_tuberculosis:{estado:!0}},e=JSON.stringify(t),i="apellido nombre nombreC tipo_doc documento documentoC hist_tuberculosis";try{this.mostrarLoading({titulo:"Cargando casos...",color:"primary"});let t=await this.axios.get(this.APIURL+"/paciente/buscar?filtro="+e+"&select="+i,this.axiosConfig);if(t.data.ok)this.casos=[],this.casos.push(this.noNexo),this.casos.push(...t.data.pacientes);else try{this.mostrarError({mensaje:t.data.err.message,titulo:t.status})}catch(a){this.mostrarError()}}catch(a){try{this.mostrarError({errores:a.response.data.err.errors,mensaje:a.response.data.err.message,titulo:a.response.status})}catch(a){this.mostrarError()}}finally{this.ocultarLoading()}},async cargarTodo(){try{this.mostrarLoading({titulo:"Cargando pacientes...",color:"primary"});let e=await this.axios.get(this.APIURL+"/paciente",this.axiosConfig);if(e.data.ok)this.listPacientes=e.data.pacientes,this.ultimoFiltro=Object.assign({}),this.paginacion.page>Math.ceil(this.listPacientes.length/this.paginacion.rowsPerPage)&&(this.paginacion.page=1);else try{this.mostrarError({mensaje:e.data.err.message,titulo:e.status})}catch(t){this.mostrarError()}}catch(t){try{this.mostrarError({errores:t.response.data.err.errors,mensaje:t.response.data.err.message,titulo:t.response.status})}catch(t){this.mostrarError()}}finally{this.ocultarLoading()}},async buscar(t){let e=Object.assign({},t),i=!0;for(const o in e)if(e.hasOwnProperty(o))if("hist_tuberculosis"===o){if(e["hist_tuberculosis"])for(const t in e["hist_tuberculosis"])e["hist_tuberculosis"].hasOwnProperty(t)&&(""!==e["hist_tuberculosis"][t]&&null!==e["hist_tuberculosis"][t]?i=!1:delete e["hist_tuberculosis"][t])}else""!==e[o]&&null!==e[o]?i=!1:delete e[o];if(!0!==i){e["hist_tuberculosis"]&&0===Object.keys(e["hist_tuberculosis"]).length&&delete e["hist_tuberculosis"],e=JSON.stringify(e);try{this.mostrarLoading({titulo:"Cargando pacientes...",color:"primary"});let t=await this.axios.get(this.APIURL+"/paciente/buscar?filtro="+e,this.axiosConfig);if(t.data.ok)this.listPacientes=t.data.pacientes,this.ultimoFiltro=Object.assign({},JSON.parse(e)),this.paginacion.page>Math.ceil(this.listPacientes.length/this.paginacion.rowsPerPage)&&(this.paginacion.page=1);else try{this.mostrarError({mensaje:t.data.err.message,titulo:t.status})}catch(a){this.mostrarError()}}catch(a){try{this.mostrarError({errores:a.response.data.err.errors,mensaje:a.response.data.err.message,titulo:a.response.status})}catch(a){this.mostrarError()}}finally{this.ocultarLoading()}}else this.mostrarError({mensaje:"Complete por lo menos un campo de busqueda.",titulo:"Valores Requeridos."})},async actualizarList(){this.cargarCasos(),0!==Object.keys(this.ultimoFiltro).length?this.buscar(this.ultimoFiltro):"ADMIN_ROLE"===this.persona.role&&this.cargarTodo()},descargarExcel(){0===this.selecteccionFiltroExcel.length?this.mostrarError({mensaje:"No se ha seleccionado ningun elemento.",titulo:"Sin Seleccion"}):this.mostrarLoading({titulo:"Creando Excel...",color:"primary"})}}},U=M,H=(0,E.Z)(U,x,v,!1,null,null,null),V=H.exports},4791:function(t,e,i){i.d(e,{Z:function(){return l}});var a=i(5721),o=i(21),r=i(5530),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},l=(0,r.Z)(a.Z,(0,o.J)("expansionPanel")).extend({name:"v-expansion-panel",provide:function(){return{expansionPanel:this}},props:{disabled:Boolean,readonly:Boolean,expand:Boolean,focusable:Boolean,inset:Boolean,popout:Boolean,value:{type:[Number,Array],default:function(){return null}}},data:function(){return{items:[],open:[]}},computed:{classes:function(){return s({"v-expansion-panel--focusable":this.focusable,"v-expansion-panel--popout":this.popout,"v-expansion-panel--inset":this.inset},this.themeClasses)}},watch:{expand:function(t){var e=-1;if(!t){var i=this.open.reduce((function(t,e){return e?t+1:t}),0),a=Array(this.items.length).fill(!1);1===i&&(e=this.open.indexOf(!0)),e>-1&&(a[e]=!0),this.open=a}this.$emit("input",t?this.open:e>-1?e:null)},value:function(t){this.updateFromValue(t)}},mounted:function(){null!==this.value&&this.updateFromValue(this.value)},methods:{updateFromValue:function(t){if(!Array.isArray(t)||this.expand){var e=Array(this.items.length).fill(!1);"number"===typeof t?e[t]=!0:null!==t&&(e=t),this.updatePanels(e)}},updatePanels:function(t){this.open=t;for(var e=0;e<this.items.length;e++)this.items[e].toggle(t&&t[e])},panelClick:function(t){for(var e=this.expand?this.open.slice():Array(this.items.length).fill(!1),i=0;i<this.items.length;i++)this.items[i]._uid===t&&(e[i]=!this.open[i],!this.expand&&this.$emit("input",e[i]?i:null));this.updatePanels(e),this.expand&&this.$emit("input",e)},register:function(t){var e=this.items.push(t)-1;null!==this.value&&this.updateFromValue(this.value),t.toggle(!!this.open[e])},unregister:function(t){var e=this.items.findIndex((function(e){return e._uid===t._uid}));this.items.splice(e,1),this.open.splice(e,1)}},render:function(t){return t("ul",{staticClass:"v-expansion-panel",class:this.classes},this.$slots.default)}})},4694:function(t,e,i){var a=i(2482),o=i(6815),r=i(4735),s=i(8197),l=i(21),n=i(9524),c=i(5530),d=i(8219);function u(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}e["Z"]=(0,c.Z)(o.Z,r.Z,s.Z,(0,l.f)("expansionPanel","v-expansion-panel-content","v-expansion-panel")).extend({name:"v-expansion-panel-content",props:{disabled:Boolean,readonly:Boolean,expandIcon:{type:String,default:"$vuetify.icons.expand"},hideActions:Boolean,ripple:{type:[Boolean,Object],default:!1}},data:function(){return{height:"auto"}},computed:{containerClasses:function(){return{"v-expansion-panel__container--active":this.isActive,"v-expansion-panel__container--disabled":this.isDisabled}},isDisabled:function(){return this.expansionPanel.disabled||this.disabled},isReadonly:function(){return this.expansionPanel.readonly||this.readonly}},beforeMount:function(){this.expansionPanel.register(this),"undefined"!==typeof this.value&&(0,d.Kd)("v-model has been deprecated",this)},beforeDestroy:function(){this.expansionPanel.unregister(this)},methods:{onKeydown:function(t){13===t.keyCode&&this.$el===document.activeElement&&this.expansionPanel.panelClick(this._uid)},onHeaderClick:function(){this.isReadonly||this.expansionPanel.panelClick(this._uid)},genBody:function(){return this.$createElement("div",{ref:"body",class:"v-expansion-panel__body",directives:[{name:"show",value:this.isActive}]},this.showLazyContent(this.$slots.default))},genHeader:function(){var t=[].concat(u(this.$slots.header||[]));return this.hideActions||t.push(this.genIcon()),this.$createElement("div",{staticClass:"v-expansion-panel__header",directives:[{name:"ripple",value:this.ripple}],on:{click:this.onHeaderClick}},t)},genIcon:function(){var t=this.$slots.actions||[this.$createElement(n.Z,this.expandIcon)];return this.$createElement("transition",{attrs:{name:"fade-transition"}},[this.$createElement("div",{staticClass:"v-expansion-panel__header__icon",directives:[{name:"show",value:!this.isDisabled}]},t)])},toggle:function(t){var e=this;t&&(this.isBooted=!0),this.$nextTick((function(){return e.isActive=t}))}},render:function(t){return t("li",{staticClass:"v-expansion-panel__container",class:this.containerClasses,attrs:{tabindex:this.isReadonly||this.isDisabled?null:0,"aria-expanded":Boolean(this.isActive)},on:{keydown:this.onKeydown}},[this.$slots.header&&this.genHeader(),t(a.Fx,[this.genBody()])])}})}}]);