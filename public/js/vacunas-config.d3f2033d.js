"use strict";(globalThis["webpackChunksecretaria_de_salud_moreno_frontend"]=globalThis["webpackChunksecretaria_de_salud_moreno_frontend"]||[]).push([[3133],{77765:(a,e,t)=>{t.d(e,{Z:()=>d});var o=function(){var a=this,e=a._self._c;return a.field.array?e("span",[a.field.object?e("span",a._l(a._get(a.props.item,a.field.ruta),(function(t,o){return e("code",{key:`${a.field.text}-${o}`,attrs:{STYLE:"margin:4px"}},[a.field.keyShow?e("span",[a._v(a._s(a.field.date?a.mostrarFecha(t[a.field.keyShow],a.field.time)||"--------":t[a.field.keyShow]??"--------"))]):e("span",a._l(t,(function(r,i,s){return e("span",{key:`${a.field.text}-${o}-${i}`},[a._v(a._s(i)+": "),e("kbd",[a._v(a._s(isNaN(r)&&"Invalid Date"!==a.mostrarFecha(r,a.field.time)?a.mostrarFecha(r,a.field.time)||"--------":r??"--------"))]),s!=Object.keys(t).length-1?e("span",[a._v(a._s("\n"))]):a._e()])})),0)])})),0):e("span",a._l(a._get(a.props.item,a.field.ruta),(function(t,o){return e("code",{key:`${a.field.text}-${o}`,attrs:{STYLE:"margin:4px"}},[a._v(a._s(a.field.date?a.mostrarFecha(t,a.field.time)||"--------":t??"--------"))])})),0)]):a.field.object?e("span",[e("code",{attrs:{STYLE:"margin:4px"}},[a.field.keyShow?e("span",[a._v(a._s(a.field.date?a.mostrarFecha(a._get(a.props.item,a.field.ruta)[a.field.keyShow],a.field.time)||"--------":a._get(a.props.item,a.field.ruta)[a.field.keyShow]??"--------"))]):e("span",a._l(a._get(a.props.item,a.field.ruta),(function(t,o,r){return e("span",{key:`${a.field.text}-${o}`},[a._v(a._s(o)+": "),e("kbd",[a._v(a._s(isNaN(t)&&"Invalid Date"!==a.mostrarFecha(t,a.field.time)?`${a.mostrarFecha(t,a.field.time)}`||"--------":t??"--------"))]),r!=Object.keys(a._get(a.props.item,a.field.ruta)).length-1?e("span",[a._v(a._s("\n"))]):a._e()])})),0)])]):e("span",{style:""+(a.field.numeric&&a._get(a.props.item,a.field.ruta)<0?"color: red;":"")},[a._v(a._s(a.field.date?a.mostrarFecha(a.props.item[a.field.ruta],a.field.time)||"--------":a.field.boolean?""+(a._get(a.props.item,a.field.ruta)&&"false"!=a._get(a.props.item,a.field.ruta)&&"0"!=a._get(a.props.item,a.field.ruta)?"Si":"No"):a._get(a.props.item,a.field.ruta)?.toLocaleString("es-AR")??"--------"))])},r=[];const i={name:"body-data-table-dinamic",props:["props","field"]},s=i;var n=t(1001),l=(0,n.Z)(s,o,r,!1,null,null,null);const d=l.exports},16039:(a,e,t)=>{t.r(e),t.d(e,{default:()=>q});var o=t(58469),r=t(66194),i=t(18956),s=t(32353),n=t(19418),l=t(66530),d=t(47352),c=t(50108),u=t(60683),m=t(73667),p=t(59456),g=t(36446),h=t(98143),f=t(74618),v=t(21415),_=function(){var a=this,e=a._self._c;return e(l.Z,{attrs:{fluid:"","grid-list-xs":""}},[e(p.Z,{attrs:{"align-center":"","justify-center":"","ma-0":"",wrap:"","text-xs-center":""}},[e(u.Z,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[e(i.Z,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[e(s.ZB,{staticClass:"px-0 text-uppercase"},[a._v("====== Gestion de Vacunas ======")])],1)],1),e(u.Z,{attrs:{"pa-1":"","ma-1":"",red:"","darken-2":"",xs12:""}},[e(i.Z,{attrs:{color:"yellow darken-1"}},[e(s.ZB,{staticClass:"px-3 font-weight-medium"},[e("p",[e(m.Z,{attrs:{color:"red darken-3",left:""}},[a._v(" warning ")]),e("b",[e("u",[a._v("Antes de Crear una Nueva Vacuna:")])])],1),a._v(" Por favor, utilizar la funcion de "),e("b",[e("u",[a._v("Buscar")])]),a._v(" para ver si ya esta "),e("b",[e("u",[a._v("Creada")])]),a._v(" dicha Vacuna porque al generar una nueva Vacuna con nombre similar va generar "),e("b",[e("u",[a._v("confusion")])]),a._v(" y "),e("b",[e("u",[a._v("reportes erroneos")])]),a._v(", si conoce la Vacuna por otro "),e("b",[e("u",[a._v("sinonimo")])]),a._v(" puede agregarselo al ya Creado utilizando el boton de "),e("b",[e("u",[a._v("Edicion")])]),a._v(" y agregando dicho sinonimo a su "),e("b",[e("u",[a._v("Nombre")])]),a._v(" (Visible en todas las etapas) o "),e("b",[e("u",[a._v("Descripcion")])]),a._v(" (Visible solamente al momento de generar un Ingreso o Solicitudes). ")])],1)],1),e(u.Z,{attrs:{"pa-1":"","ma-1":"",xs12:"",cuarto:"","lighten-1":""}},[e(i.Z,{staticClass:"elevation-6"},[e(p.Z,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",primary:""}},[e(u.Z,{attrs:{"px-3":""}},[e(m.Z,{attrs:{medium:"",color:"white",left:""}},[a._v("fas fa-syringe")]),e("span",{staticClass:"title white--text"},[a._v("Alta de Vacunas")])],1),e(h.Cl),e(c.Z,{staticClass:"hidden-xs-only mx-2 my-1 white",attrs:{vertical:""}}),e(r.Z,{staticClass:"mb-2",attrs:{color:"primary",disabled:a.loading.estado},on:{click:a.recargarDataTable}},[e(m.Z,{attrs:{medium:"",left:""}},[a._v("refresh")]),a._v(" Recargar Vacunas")],1)],1),e("div",[e(n.Z,[e(u.Z,{attrs:{xs12:"",sm4:"","px-2":""}},[e(f.h,{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":"",clearable:""},model:{value:a.search,callback:function(e){a.search=e},expression:"search"}})],1),e(h.Cl),e(c.Z,{staticClass:"hidden-xs-only mx-2 primary",attrs:{inset:"",vertical:""}}),e(r.Z,{staticClass:"mb-2",attrs:{color:"primary",disabled:a.soloLectura||a.loading.estado},on:{click:function(e){return a.actualizarDialogInsumo({state:!0})}}},[e(m.Z,{attrs:{medium:"",left:""}},[a._v("add_circle_outline")]),a._v(" Nueva Vacuna")],1)],1),e(d.Z,{staticClass:"elevation-6",staticStyle:{"table-layout":"fixed"},attrs:{id:"tablita",headers:a.headers,items:a.dataTable,"item-key":"_id",pagination:a.paginacion,"rows-per-page-items":[5,10,25,50],loading:a.loading.estado,search:a.search},on:{"update:pagination":function(e){a.paginacion=e}},scopedSlots:a._u([{key:"no-results",fn:function(){return[e(o.Z,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[a._v(' No se encontraron resultados para "'+a._s(a.search)+'". ')])]},proxy:!0},{key:"no-data",fn:function(){return[e(o.Z,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[a._v(" No hay datos para mostrar. ")])]},proxy:!0},{key:"items",fn:function(t){return[e("tr",{class:a.backgroundClass(t.item)},[e("td",{staticClass:"text-sm-left"},[e("div",{staticClass:"text-xs-center",staticStyle:{width:"60px"}},[e(v.Z,{attrs:{top:""},scopedSlots:a._u([{key:"activator",fn:function({on:o}){return[e(m.Z,a._g({staticClass:"mr-2",attrs:{disabled:a.soloLectura||a.loading.estado,color:"primary"},on:{click:function(e){return a.actualizarDialogInsumo({state:!0,id:t.item.id})}}},o),[a._v(" edit ")])]}}],null,!0)},[e("span",[a._v("Editar - "+a._s(t.item.nombre))])]),e(v.Z,{attrs:{top:""},scopedSlots:a._u([{key:"activator",fn:function({on:o}){return[e(m.Z,a._g({attrs:{disabled:a.soloLectura||a.loading.estado,color:"error"},on:{click:function(e){return a.borrarInsumo({insumo:t.item})}}},o),[a._v(" delete ")])]}}],null,!0)},[e("span",[a._v("Borrar - "+a._s(t.item.nombre))])])],1)]),a._l(a.headersDinamics,(function(a){return e("td",{key:a.text,class:a.class},[e("bodyDataTableDinamic",{attrs:{props:t,field:a}})],1)}))],2)]}}])},[e(g.Z,{attrs:{color:"blue",indeterminate:""}})],1)],1)],1)],1)],1),e("dialogInsumoVacuna",{attrs:{close:a.close}})],1)},b=[],y=t(20629),x=t(77765),Z=t(95049),k=t(50445),w=t(14036),I=t(24920),E=t(25730),C=function(){var a=this,e=a._self._c;return e(Z.Z,{attrs:{"max-width":"80%",persistent:"",scrollable:""},model:{value:a.dialogInsumo.state,callback:function(e){a.$set(a.dialogInsumo,"state",e)},expression:"dialogInsumo.state"}},[e(i.Z,[e(I.Z,{attrs:{color:"grey lighten-2",height:"auto",window:""}},[e(m.Z,{attrs:{medium:"",color:"black darken-2"}},[a._v("fas fa-syringe")]),e("span",{staticClass:"display-1 font-weight-bold black--text text--darken-2"},[a._v(a._s(a.dialogInsumo.id?`Editar: ${a.insumo.nombre}`:"Nueva Vacuna"))]),e(h.Cl),e(m.Z,{attrs:{large:"",disabled:a.loading.estado,color:"error darken-1"},on:{click:a.close}},[a._v("cancel_presentation")])],1),e(s.ZB,[e(k.Z,{ref:"form",attrs:{"lazy-validation":""},model:{value:a.valido,callback:function(e){a.valido=e},expression:"valido"}},[e(p.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[e(f.h,{attrs:{readonly:a.dialogInsumo.soloLectura,clearable:!a.dialogInsumo.soloLectura,"background-color":a.dialogInsumo.soloLectura?"primary lighten-1":"primary lighten-5","prepend-icon":"fas fa-syringe",label:"Nombre",type:"text",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},model:{value:a.insumo.nombre,callback:function(e){a.$set(a.insumo,"nombre",e)},expression:"insumo.nombre"}})],1),e(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[e(f.h,{attrs:{readonly:a.dialogInsumo.soloLectura,clearable:!a.dialogInsumo.soloLectura,"background-color":a.dialogInsumo.soloLectura?"primary lighten-1":"primary lighten-5","prepend-icon":"pin",label:"Codigo Unico (opcional)",type:"text",color:"primary"},model:{value:a.insumo.unique_code,callback:function(e){a.$set(a.insumo,"unique_code",e)},expression:"insumo.unique_code"}})],1),e(u.Z,{attrs:{xs12:"","px-3":""}},[e(E.Z,{attrs:{readonly:a.dialogInsumo.soloLectura,clearable:!a.dialogInsumo.soloLectura,"background-color":a.dialogInsumo.soloLectura?"primary lighten-1":"primary lighten-5",label:"Descripcion",color:"primary","prepend-icon":"description","auto-grow":"",rows:"2"},model:{value:a.insumo.descripcion,callback:function(e){a.$set(a.insumo,"descripcion",e)},expression:"insumo.descripcion"}})],1),e(p.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(u.Z,{attrs:{xs12:"","px-3":""}},[e(w.r,{attrs:{readonly:a.dialogInsumo.soloLectura,clearable:!a.dialogInsumo.soloLectura,"background-color":a.dialogInsumo.soloLectura?"primary lighten-2":"primary lighten-5",items:a.optionsJsonVacunas.vacunas_dosis_posibles,label:"Opciones de Dosis al Aplicar la Vacuna","prepend-icon":"list",color:"primary","menu-props":{auto:!0},rules:[...a.rules.requerido],multiple:"",chips:"","deletable-chips":""},model:{value:a.insumo.dosis_posibles,callback:function(e){a.$set(a.insumo,"dosis_posibles",e)},expression:"insumo.dosis_posibles"}})],1),e(u.Z,{attrs:{xs12:"","px-3":""}},[e(w.r,{attrs:{readonly:a.dialogInsumo.soloLectura,clearable:!a.dialogInsumo.soloLectura,"background-color":a.dialogInsumo.soloLectura?"primary lighten-2":"primary lighten-5",items:a.optionsJsonVacunas.vacunas_condiciones,label:"Condiciones de Aplicacion (Opcional)","prepend-icon":"block",color:"primary","menu-props":{auto:!0},multiple:"",chips:"","deletable-chips":""},model:{value:a.insumo.condiciones,callback:function(e){a.$set(a.insumo,"condiciones",e)},expression:"insumo.condiciones"}})],1),e(u.Z,{attrs:{"pa-1":"","ma-1":"",red:"","darken-2":"",xs12:""}},[e(i.Z,[e(s.ZB,{staticClass:"px-3 font-weight-medium"},[e("p",[e(m.Z,{attrs:{color:"yellow darken-3",left:""}},[a._v(" warning ")]),e("b",[e("u",[a._v("Los Antecedentes Patologicos son los siguientes:")])])],1),e("ul",a._l(a.optionsJsonHiclem.consulta_antecedentes,(function(t,o){return e("li",{key:`antecedentes-${t}`,attrs:{type:"square"}},[e("b",[a._v(a._s(t))]),a._v(". ")])})),0)])],1)],1),e(u.Z,{attrs:{xs12:"","px-3":"",primary:"","darken-3":""}},[e(p.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e("h4",{staticClass:"title float: left white--text"},[a._v("Reporte - Grupo Etario")]),e(h.Cl),e(v.Z,{attrs:{top:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:t}){return[e(r.Z,a._g({attrs:{disabled:a.loading.estado||a.dialogInsumo.soloLectura,flat:"",icon:"",color:"white",small:"",right:""},on:{click:function(e){return a.agregarFila()}}},t),[e(m.Z,{attrs:{large:""}},[a._v("control_point")])],1)]}}])},[e("span",[a._v("Agregar Grupo Etario")])])],1)],1),a._l(a.insumo.grupo_etario,(function(t,o){return e(u.Z,{key:`grupo_etario-${o}`,attrs:{xs12:""}},[e(p.Z,{class:"grey lighten-"+(o%2===0?"3":"2"),attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(u.Z,{attrs:{xs12:"",sm5:"",md5:"","px-3":""}},[e(p.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(u.Z,{attrs:{xs12:"","text-xs-center":"","px-3":""}},[e("h4",{staticClass:"title"},[a._v("Minimo [Incluye]")])]),e(u.Z,{class:{md6:"Menor al Maximo"!==t.min.unidad},attrs:{xs12:"","px-3":""}},[e(w.r,{attrs:{readonly:a.dialogInsumo.soloLectura,"background-color":a.dialogInsumo.soloLectura?"primary lighten-1":"primary lighten-5",items:["Año","Mes","Semana","Dia","Hora","Menor al Maximo"],label:"Edad Unidad","prepend-icon":"cake",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},on:{change:function(e){return a.changeUnidad({index:o,unidad:e})}},model:{value:t.min.unidad,callback:function(e){a.$set(t.min,"unidad",e)},expression:"grupo.min.unidad"}})],1),"Menor al Maximo"!==t.min.unidad?e(u.Z,{attrs:{xs12:"",md6:"","px-3":""}},[e(f.h,{attrs:{readonly:a.dialogInsumo.soloLectura||!t.min.unidad,clearable:!(a.dialogInsumo.soloLectura||!t.min.unidad),"background-color":a.dialogInsumo.soloLectura||!t.min.unidad?"primary lighten-1":"primary lighten-5","prepend-icon":"cake",label:"Edad"+(t.min.unidad?` [${t.min.unidad[0]}]`:""),type:"number",color:"primary",rules:[...a.rules.requerido,...a.rules.soloNumero,a.rules.minNumber(0)],placeholder:"Primero 'Edad Unidad'.",messages:""+(t.min.unidad?"":"Primero seleccionar la 'Edad Unidad'.")},model:{value:t.min.valor,callback:function(e){a.$set(t.min,"valor",e)},expression:"grupo.min.valor"}})],1):a._e()],1)],1),e(u.Z,{attrs:{xs12:"",sm5:"",md5:"","px-3":""}},[e(p.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(u.Z,{attrs:{xs12:"","text-xs-center":"","px-3":""}},[e("h4",{staticClass:"title"},[a._v("Maximo (Excluye)")])]),e(u.Z,{class:{md6:"Mayor al Minimo"!==t.max.unidad},attrs:{xs12:"","px-3":""}},[e(w.r,{attrs:{readonly:a.dialogInsumo.soloLectura,"background-color":a.dialogInsumo.soloLectura?"primary lighten-1":"primary lighten-5",items:["Año","Mes","Semana","Dia","Hora","Mayor al Minimo"],label:"Edad Unidad","prepend-icon":"cake",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},on:{change:function(e){return a.changeUnidad({index:o,unidad:e})}},model:{value:t.max.unidad,callback:function(e){a.$set(t.max,"unidad",e)},expression:"grupo.max.unidad"}})],1),"Mayor al Minimo"!==t.max.unidad?e(u.Z,{attrs:{xs12:"",md6:"","px-3":""}},[e(f.h,{attrs:{readonly:a.dialogInsumo.soloLectura||!t.max.unidad,clearable:!(a.dialogInsumo.soloLectura||!t.max.unidad),"background-color":a.dialogInsumo.soloLectura||!t.max.unidad?"primary lighten-1":"primary lighten-5","prepend-icon":"cake",label:"Edad"+(t.max.unidad?` [${t.max.unidad[0]}]`:""),type:"number",color:"primary",rules:[...a.rules.requerido,...a.rules.soloNumero,a.rules.minNumber(t.min.valor??0)],placeholder:"Primero 'Edad Unidad'.",messages:""+(t.max.unidad?"":"Primero seleccionar la 'Edad Unidad'.")},model:{value:t.max.valor,callback:function(e){a.$set(t.max,"valor",e)},expression:"grupo.max.valor"}})],1):a._e()],1)],1),e(h.Cl),e(v.Z,{attrs:{top:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:t}){return[e(r.Z,a._g({attrs:{disabled:a.loading.estado,color:"white",icon:"",small:""},on:{click:function(e){return a.borrarFila(o)}}},t),[e(m.Z,{attrs:{color:"red lighten-2"}},[a._v("delete_forever")])],1)]}}],null,!0)},[e("span",[a._v("Eliminar Grupo Etario")])]),e(h.Cl,{staticClass:"hidden-xs-only"})],1)],1)})),0===a.insumo.grupo_etario?.length?e(p.Z,{attrs:{row:"",wrap:""}},[e(u.Z,{attrs:{xs12:"","mx-3":"","pb-0":""}},[e(f.h,{attrs:{readonly:"","background-color":"orange lighten-4",label:"No Hay Grupos Etarios, Debe haber por lo menos uno.","prepend-icon":"warning",color:"orange",solo:"",rules:[...a.rules.requerido]}})],1),e(h.Cl),e(r.Z,{staticClass:"my-0",attrs:{disabled:a.loading.estado||a.dialogInsumo.soloLectura,round:"",color:"primary"},on:{click:function(e){return a.agregarFila()}}},[e(m.Z,{attrs:{left:""}},[a._v("control_point")]),a._v("Agregar Grupo Etario ")],1),e(h.Cl)],1):a._e()],2)],1)],1)],1),e(s.h7,[e(p.Z,{attrs:{row:"",wrap:""}},[e(h.Cl),e(r.Z,{staticClass:"red darken-1 white--text",attrs:{disabled:a.loading.estado,round:"",loading:a.loading.estado},on:{click:function(e){return a.close()}}},[e(m.Z,{attrs:{left:""}},[a._v("cancel_presentation")]),a._v("Cancelar ")],1),e(r.Z,{staticClass:"primary darken-1 white--text",attrs:{disabled:a.loading.estado||a.dialogInsumo.soloLectura,loading:a.loading.estado,round:""},on:{click:function(e){return a.guardarInsumo()}}},[e(m.Z,{attrs:{left:""}},[a._v("save")]),a._v(a._s(a.valido?a.dialogInsumo.id?"Guardar":"Crear":"Formulario No valido")+" ")],1)],1)],1)],1)],1)},L=[];t(70560);const V={name:"dialogInsumoVacuna",props:["close"],data:()=>({valido:!0,optionsJsonVacunas:{},optionsJsonHiclem:{},insumo:{},insumoBase:{categoria:"Vacuna",nombre:"",descripcion:"",unique_code:"",condiciones:[],grupo_etario:[{min:{valor:"",unidad:""},max:{valor:"",unidad:""}}],dosis_posibles:[],estado:!0}}),computed:{...(0,y.rn)(["loading","persona","rules"]),...(0,y.rn)("vacunas",["dialogInsumo"])},watch:{async"dialogInsumo.state"(a){a?(setTimeout((async()=>{this.dialogInsumo.id?this.insumo=Object.assign(this._cloneDeep(this.insumoBase),{estado:!1},...await this.buscarInsumosFiltro({filtro:{_id:this.dialogInsumo.id}})):this.insumo=this._cloneDeep(this.insumoBase),this.$refs.form.resetValidation()}),350),this.optionsJsonVacunas=await this.returnOptionsJSON({key:"vacunas",opcion:"base"})):(this.insumo=this._cloneDeep(this.insumoBase),this.$refs.form.resetValidation())},"insumo.categoria"(a){"Vacuna"!==a&&(this.insumo.condiciones=[],this.insumo.grupo_etario=[this._cloneDeep(this.insumoBase.grupo_etario[0])],this.insumo.dosis_posibles=[])}},async beforeMount(){this.insumo=this._cloneDeep(this.insumoBase),this.optionsJsonVacunas=await this.returnOptionsJSON({key:"vacunas",opcion:"base"}),this.optionsJsonHiclem=await this.returnOptionsJSON({key:"hiclem",opcion:"base"})},methods:{...(0,y.OI)(["mostrarLoading","mostrarError","mostrarMensaje","ocultarLoading"]),...(0,y.nv)(["returnOptionsJSON","requestAPI"]),...(0,y.nv)("vacunas",["buscarInsumosFiltro"]),agregarFila(){this.insumo.grupo_etario.push(this._cloneDeep(this.insumoBase.grupo_etario[0]))},borrarFila(a){this.insumo.grupo_etario.splice(a,1)},changeUnidad({index:a,unidad:e}){"Menor al Maximo"===e&&(this.insumo.grupo_etario[a].min.valor=""),"Mayor al Minimo"===e&&(this.insumo.grupo_etario[a].max.valor="")},async guardarInsumo(){if(!this.$refs.form.validate())return this.mostrarError({mensaje:"Revise los campos obligatorios.",titulo:"Valores Requeridos."}),!1;try{let a=this._cloneDeep(this.insumo);if(a._id){if(!await this.$root.$confirm.open({titulo:"EDITAR",msj:["Las modificaciones efectuadas repercutiran en todas las cargas Futuras y las Ya Realizadas de este Insumo.","¿Desea continuar?"]}))return!1}else{let e=this.isVacio(a,!0);if(!0===e.vacio)return this.mostrarError({mensaje:"Complete por lo menos un dato.",titulo:"Valores Requeridos"}),!1;a=e.dato}this.mostrarLoading({titulo:"Guardando Insumo..."});let e=null;return e=await this.requestAPI({method:"put",url:"/vacunas/insumo",update:a}),!!e?.data?.ok&&(this.mostrarMensaje({msj:[`Insumo ${a._id?"Editado":"Guardado"} exitosamente.`],titulo:"Completado"}),this.close(),!0)}catch(a){return this.mostrarError({mensaje:a,titulo:"Inesperado (guardarInsumo)"}),!1}finally{this.ocultarLoading()}}}},D=V;var $=t(1001),O=(0,$.Z)(D,C,L,!1,null,null,null);const B=O.exports,j={name:"vacunaInsumoBuscar",components:{bodyDataTableDinamic:x.Z,dialogInsumoVacuna:B},data:()=>({dataTable:[],search:"",paginacion:{sortBy:"nombre",descending:!1,rowsPerPage:10,page:1},headers:[{text:"Acciones",value:"id",align:"center",sortable:!1,width:"5%",ruta:"area",ignore:!0},{text:"Nombre",value:"nombre",align:"left",class:"text-xs-left",width:"30%",ruta:"nombre"},{text:"Descripcion",value:"descripcion",align:"left",class:"text-xs-left",width:"35%",ruta:"descripcion"},{text:"Posibles Dosis",value:"dosis_posibles",align:"left",class:"text-xs-left",width:"15%",ruta:"dosis_posibles",array:!0},{text:"Codigo Unico (opcional)",value:"unique_code",align:"left",class:"text-xs-left",width:"15%",ruta:"unique_code"}]}),computed:{...(0,y.rn)(["loading","persona"]),soloLectura(){return!this.persona.vacunas.config},headersDinamics(){return[...this.headers.filter((a=>!0!==a.ignore))]}},async created(){this.recargarDataTable()},methods:{...(0,y.OI)(["mostrarLoading","mostrarError","mostrarMensaje","ocultarLoading"]),...(0,y.nv)(["requestAPI"]),...(0,y.nv)("vacunas",["actualizarDialogInsumo","buscarInsumosFiltro"]),backgroundClass(a){if(!a)return"";try{return!0===a.estado?"background-color: primary lighten-5":"background-color: error lighten-4"}catch(e){return""}},close(){this.actualizarDialogInsumo({state:!1}),this.recargarDataTable()},async recargarDataTable(){this.dataTable=await this.buscarInsumosFiltro(),this.paginacion.page>Math.ceil(this.dataTable?.length/this.paginacion.rowsPerPage)&&(this.paginacion.page=1)},async borrarInsumo({insumo:a}){if(await this.$root.$confirm.open({titulo:"ELIMINAR",msj:["Podra Eliminarlo solamente si todavia no se utilizo para ningun ingreso/solicitud.","Dejara de estar disponible para la carga de ingresos y filtros de busqueda.",`El Insumo: ${a.nombre}, sera Eliminado.\n¿Desea continuar?`]}))try{this.mostrarLoading({titulo:"Borrando Insumo..."});let e=null;return e=await this.requestAPI({method:"delete",url:`/vacunas/insumo/${a.id}`}),!!e?.data?.ok&&(this.mostrarMensaje({msj:["Borrado exitosamente."],titulo:"Borrado Exitoso"}),this.recargarDataTable(),!0)}catch(e){return this.mostrarError({mensaje:e,titulo:"Inesperado (borrarInsumo)"}),!1}finally{this.ocultarLoading()}}}},F=j;var M=(0,$.Z)(F,_,b,!1,null,null,null);const q=M.exports},60656:(a,e,t)=>{t.r(e),t.d(e,{default:()=>k});var o=t(67416),r=t(66194),i=t(18956),s=t(32353),n=t(66530),l=t(50108),d=t(60683),c=t(50445),u=t(73667),m=t(59456),p=t(98143),g=t(74618),h=t(21415),f=function(){var a=this,e=a._self._c;return e(n.Z,{attrs:{fluid:"","grid-list-xs":""}},[e(m.Z,{attrs:{"align-center":"","justify-center":"","ma-0":"",wrap:"","text-xs-center":""}},[e(d.Z,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[e(i.Z,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[e(s.ZB,{staticClass:"px-0 text-uppercase"},[a._v("====== Gestion de Vacunas ======")])],1)],1),e(d.Z,{attrs:{"pa-1":"","ma-1":"",red:"","darken-2":"",xs12:""}},[e(i.Z,{attrs:{color:"yellow darken-1"}},[e(s.ZB,{staticClass:"px-3 font-weight-medium"},[e("p",[e(u.Z,{attrs:{color:"red darken-3",left:""}},[a._v(" warning ")]),e("b",[e("u",[a._v("Leer Antes de Usar Vacunatorio/s Destino/s:")])])],1),a._v(" Se tomaran todas las opciones del "),e("b",[e("u",[a._v("Origen")])]),a._v(" y se actualizaran o crearan en caso de que no existan los valores previos en los "),e("b",[e("u",[a._v("Destinos")])]),a._v(". ")])],1)],1),e(d.Z,{attrs:{"pa-1":"","ma-1":"",xs12:"",primary:"","lighten-1":""}},[e(i.Z,{staticClass:"elevation-6"},[e(m.Z,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",primary:""}},[e(d.Z,{attrs:{"px-3":""}},[e(u.Z,{attrs:{medium:"",color:"white",left:""}},[a._v("tune")]),e("span",{staticClass:"title white--text"},[a._v("Vacunas / Opciones")])],1),e(p.Cl),e(r.Z,{attrs:{fab:"",small:"",color:"primary darken-2"},on:{click:function(e){return a.retroceder()}}},[e(u.Z,[a._v("far fa-arrow-alt-circle-left")])],1)],1),e(s.ZB,[e(c.Z,{ref:"form",attrs:{"lazy-validation":""},model:{value:a.valido,callback:function(e){a.valido=e},expression:"valido"}},[e(m.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(p.Cl),e(d.Z,{attrs:{xs12:"",sm5:"","px-3":""}},[e(o.Z,{attrs:{clearable:"","background-color":"primary lighten-5","item-value":"id","item-text":"area",items:a.areasFiltro,label:"Vacunatorio Origen","prepend-icon":"fa-house-medical-flag",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},model:{value:a.dataEdit.area,callback:function(e){a.$set(a.dataEdit,"area",e)},expression:"dataEdit.area"}})],1),e(p.Cl,{staticClass:"hidden-xs-only"}),e(d.Z,{attrs:{xs12:"","px-3":""}},[e(o.Z,{attrs:{clearable:"","background-color":"primary lighten-5","item-value":"id","item-text":"area",items:a.areasFiltro,label:"Vacunatorio/s Destino/s (Opcional)","prepend-icon":"fa-house-medical-flag",color:"primary",multiple:"",chips:"","deletable-chips":""},model:{value:a.dataEdit.destinos,callback:function(e){a.$set(a.dataEdit,"destinos",e)},expression:"dataEdit.destinos"}})],1),e(d.Z,{attrs:{xs12:"","px-3":"",primary:"","darken-3":""}},[e(m.Z,{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[e("h4",{staticClass:"title float: left white--text my-1"},[a._v("Opciones de Vacunas")]),e(p.Cl),e(h.Z,{attrs:{top:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:t}){return[e(r.Z,a._g({attrs:{disabled:a.loading.estado,flat:"",icon:"",color:"white",small:"",right:""},on:{click:function(e){return a.agregarFila(a.dataEdit.opciones,{...a.dataEditBase.opciones[0]})}}},t),[e(u.Z,{attrs:{large:""}},[a._v("control_point")])],1)]}}])},[e("span",[a._v("Agregar Vacuna a Opciones")])])],1)],1),a._l(a.dataEdit.opciones,(function(t,i){return e(d.Z,{key:`insumos-${i}`,attrs:{xs12:""}},[e(m.Z,{class:"grey lighten-"+(i%2===0?"3":"2"),attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(d.Z,{attrs:{xs12:"",lg8:"","px-3":""}},[e(o.Z,{attrs:{clearable:"","background-color":"primary lighten-5","item-value":"id","item-text":"nombreC",items:a.insumosOpcionesFiltrado,label:"Vacuna","prepend-icon":"fas fa-syringe",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},model:{value:a.dataEdit.opciones[i].insumo,callback:function(e){a.$set(a.dataEdit.opciones[i],"insumo",e)},expression:"dataEdit.opciones[index].insumo"}})],1),e(d.Z,{attrs:{xs12:"",sm8:"",lg3:"","px-3":""}},[e(g.h,{attrs:{clearable:"","background-color":"primary lighten-5","prepend-icon":"shield",label:"Cantidad Minima Recomendada",type:"number",onkeydown:"return event.key !== 'e' && event.key !== 'E' && event.key !== '.' && event.key !== ',' && event.key !== '+' && event.key !== '-'",color:"primary",rules:[...a.rules.requerido,...a.rules.soloNumero,a.rules.minNumber(1)],"validate-on-blur":""},model:{value:a.dataEdit.opciones[i].cant_min,callback:function(e){a.$set(a.dataEdit.opciones[i],"cant_min",e)},expression:"dataEdit.opciones[index].cant_min"}})],1),e(p.Cl),e(h.Z,{attrs:{top:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:t}){return[e(r.Z,a._g({attrs:{disabled:a.loading.estado,small:"",icon:"",color:"black"},on:{click:function(e){return a.borrarOpcion({opcion:a.dataEdit.opciones[i],index:i})}}},t),[e(u.Z,{attrs:{color:"red lighten-2"}},[a._v("delete_forever")])],1)]}}],null,!0)},[e("span",[a._v("Borrar la Opcion (Minimo Recomendado) de la Vacuna en Vacunatorio Origen")])]),e(p.Cl,{staticClass:"hidden-xs-only"})],1)],1)})),0===a.dataEdit.opciones?.length?e(m.Z,{attrs:{row:"",wrap:""}},[e(d.Z,{attrs:{xs12:"","mx-3":"","pb-0":""}},[e(g.h,{attrs:{readonly:"","background-color":"orange lighten-4",label:"No Hay Opciones, Debe haber por lo menos una.","prepend-icon":"warning",color:"orange",solo:"",rules:[...a.rules.requerido]}})],1),e(p.Cl),e(r.Z,{staticClass:"my-0",attrs:{disabled:a.loading.estado,round:"",color:"primary"},on:{click:function(e){return a.agregarFila(a.dataEdit.opciones,{...a.dataEditBase.opciones[0]})}}},[e(u.Z,{attrs:{left:""}},[a._v("control_point")]),a._v("Agregar Vacuna a Opciones ")],1),e(p.Cl)],1):a._e()],2)],1)],1),e(m.Z,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",primary:"","lighten-2":""}},[e(r.Z,a._g({staticClass:"white--text",attrs:{round:"",disabled:a.loading.estado,loading:a.loading.estado,color:"blue-grey"},on:{click:function(e){return a.agregarFila(a.dataEdit.opciones,{...a.dataEditBase.opciones[0]})}}},a.on),[a._v(" Agregar Vacuna a Opciones "),e(u.Z,a._g({attrs:{right:"",color:"white",large:""}},a.on),[a._v(" control_point ")])],1),e(p.Cl),e(l.Z,{staticClass:"hidden-xs-only mx-2 my-1 white",attrs:{vertical:""}}),e(r.Z,{class:{"primary darken-1":a.valido,"error darken-1":!a.valido},attrs:{round:"",disabled:a.loading.estado,loading:a.loading.estado},on:{click:a.editarOpciones}},[a._v(" "+a._s(a.valido?"Guardar Cambios":"Formulario No valido"))])],1)],1)],1)],1)],1)},v=[],_=(t(70560),t(20629));const b={name:"vacunaOpciones",data(){return{valido:!0,areasFiltro:[],insumosDB:[],insumosOpcionesFiltrado:[],dataEdit:{},dataEditBase:{area:"",opciones:[{insumo:"",cant_min:0}],destinos:[]}}},computed:{...(0,_.rn)(["loading","rules"]),insumosOpciones(){return this.dataEdit.opciones?.map((({insumo:a})=>a))}},watch:{async"dataEdit.area"(a){if(a){let e=await this.buscarOpcionesVacunatorio({area:a});this.dataEdit=e||{...this._cloneDeep(this.dataEditBase),area:a}}},async insumosOpciones(){this.insumosOpcionesFiltrado=await this.filtrarArrayParaSelectsDisabled({arraySelects:this.insumosDB,arrayDisable:this.insumosOpciones,propCompare:"_id"})}},async created(){this.insumosDB=await this.buscarInsumosFiltro({select:"nombre descripcion nombreC"}),this.areasFiltro=[...await this.buscarAreaFiltros({filtro:{vacunatorio:!0},populate:"no",select:"area"})],this.dataEdit=this._cloneDeep(this.dataEditBase)},methods:{...(0,_.OI)(["mostrarLoading","ocultarLoading","mostrarError","mostrarMensaje"]),...(0,_.nv)(["retroceder","requestAPI","filtrarArrayParaSelectsDisabled"]),...(0,_.nv)("main",["buscarAreaFiltros"]),...(0,_.nv)("vacunas",["buscarInsumosFiltro"]),async buscarOpcionesVacunatorio({area:a}){try{this.mostrarLoading({titulo:"Cargando Opciones..."});let e=null;return e=await this.requestAPI({method:"get",url:`/vacunas/opciones?area=${a}`}),e?.data?.ok?e.data.opciones:this._cloneDeep(this.dataEditBase)}catch(e){return this.mostrarError({mensaje:e,titulo:"Inesperado (buscarOpcionesVacunatorio)"}),this._cloneDeep(this.dataEditBase)}finally{this.ocultarLoading()}},async editarOpciones(){if(this.$refs.form.validate())try{this.mostrarLoading({titulo:"Guardando Opciones...",color:"primary"});let a=this._cloneDeep(this.dataEdit),e=null;e=await this.requestAPI({method:"put",url:"/vacunas/opciones",update:a}),e&&this.mostrarMensaje({titulo:"Guardado Exitoso",msj:["Cambios efectuados exitosamente."]})}catch(a){this.mostrarError({titulo:"Inesperado (editarOpciones)",mensaje:a})}finally{this.ocultarLoading(),this.dataEdit=await this.buscarOpcionesVacunatorio({area:this.dataEdit.area})}else this.mostrarError({titulo:"Valores Requeridos.",mensaje:"Revise los campos obligatorios."})},async borrarOpcion({opcion:a,index:e}){if(a._id){if(await this.$root.$confirm.open({titulo:"ELIMINAR",msj:["Se Borrara la Opcion (Minimo Recomendado) sin posibilidad de deshacer esta accion.",`La Opcion de "${this.insumosDB.find((e=>e.id===a.insumo))?.nombre}", sera Eliminada.\n¿Desea continuar??`]}))try{this.mostrarLoading({titulo:"Borrando Opcion..."});let e=null;if(e=await this.requestAPI({method:"delete",url:`/vacunas/opciones/${a._id}`}),e?.data?.ok)return void this.mostrarMensaje({titulo:"Borrado Exitoso",msj:["Borrado efectuado exitosamente."]})}catch(t){return this.mostrarError({mensaje:t,titulo:"Inesperado (borrarOpcion)"}),!1}finally{this.ocultarLoading(),this.dataEdit=await this.buscarOpcionesVacunatorio({area:this.dataEdit.area})}}else this.borrarFila(this.dataEdit.opciones,e)},agregarFila(a,e){a.length<this.insumosDB.length&&a.push(e||"")},borrarFila(a,e){a.splice(e,1)}}},y=b;var x=t(1001),Z=(0,x.Z)(y,f,v,!1,null,null,null);const k=Z.exports},50445:(a,e,t)=>{t.d(e,{Z:()=>r});var o=t(30021);const r={name:"v-form",mixins:[(0,o.J)("form")],inheritAttrs:!1,props:{value:Boolean,lazyValidation:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(){var a=Object.values(this.errorBag).includes(!0);this.$emit("input",!a)},deep:!0,immediate:!0}},methods:{watchInput:function(a){var e=this,t=function(a){return a.$watch("hasError",(function(t){e.$set(e.errorBag,a._uid,t)}),{immediate:!0})},o={_uid:a._uid,valid:void 0,shouldValidate:void 0};return this.lazyValidation?o.shouldValidate=a.$watch("shouldValidate",(function(r){r&&(e.errorBag.hasOwnProperty(a._uid)||(o.valid=t(a)))})):o.valid=t(a),o},validate:function(){var a=this.inputs.filter((function(a){return!a.validate(!0)})).length;return!a},reset:function(){for(var a=this,e=this.inputs.length;e--;)this.inputs[e].reset();this.lazyValidation&&setTimeout((function(){a.errorBag={}}),0)},resetValidation:function(){for(var a=this,e=this.inputs.length;e--;)this.inputs[e].resetValidation();this.lazyValidation&&setTimeout((function(){a.errorBag={}}),0)},register:function(a){var e=this.watchInput(a);this.inputs.push(a),this.watchers.push(e)},unregister:function(a){var e=this.inputs.find((function(e){return e._uid===a._uid}));if(e){var t=this.watchers.find((function(a){return a._uid===e._uid}));t.valid&&t.valid(),t.shouldValidate&&t.shouldValidate(),this.watchers=this.watchers.filter((function(a){return a._uid!==e._uid})),this.inputs=this.inputs.filter((function(a){return a._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(a){var e=this;return a("form",{staticClass:"v-form",attrs:Object.assign({novalidate:!0},this.$attrs),on:{submit:function(a){return e.$emit("submit",a)}}},this.$slots.default)}}}}]);