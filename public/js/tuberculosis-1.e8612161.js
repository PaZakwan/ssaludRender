"use strict";(self["webpackChunksecretaria_de_salud_moreno_frontend"]=self["webpackChunksecretaria_de_salud_moreno_frontend"]||[]).push([[634],{5967:function(t,e,a){a.d(e,{Z:function(){return p}});var i=a(6961),o=a(683),r=a(9456),s=a(5084),l=a(4618),n=function(){var t=this,e=t._self._c;return e(r.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(o.Z,{attrs:{xs12:"","px-2":""}},[e(s.Z,{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(l.h,t._g({attrs:{clearable:!t.soloLect&&!!t.clear,"background-color":t.soloLect?`${t.color} lighten-2`:`${t.color} lighten-5`,label:t.label,"prepend-icon":t.prepend,readonly:"",color:`${t.color} darken-3`,rules:t.req?t.validate:[]},on:{"click:clear":function(e){return t.$emit("input","")}},model:{value:t.fecha,callback:function(e){t.fecha=e},expression:"fecha"}},a))]}}]),model:{value:t.menufecha1,callback:function(e){t.menufecha1=e},expression:"menufecha1"}},[e(i.Z,{attrs:{readonly:t.soloLect,"allowed-dates":t.allowedDates,min:t.fecMin,max:t.fecMax,color:`${t.color} darken-3`,"header-color":`${t.color} darken-1`,locale:"mx"},on:{input:function(e){t.menufecha1=!1,t.$emit("input",e)}},model:{value:t.fecha,callback:function(e){t.fecha=e},expression:"fecha"}})],1)],1)],1)},c=[],d={name:"date-select",props:["value","label","icon","color","soloLectura","requerido","min","max","filtro","clearable"],data(){return{menufecha1:!1,validate:[t=>t?""===t.trim()?"Este campo es requerido.":!(t&&t.length<10)||"Ingrese fecha valida (AAAA-MM-DD).":"Este campo es requerido."]}},computed:{fecha:function(){return this.value},soloLect:function(){return this.soloLectura||!1},prepend:function(){return this.icon||"event"},req:function(){return this.requerido||!1},clear:function(){return this.clearable||!1},fecMin:function(){return"-1"===this.min?new Date((new Date).setFullYear((new Date).getFullYear()-1)).toISOString().substr(0,10):this.min?this.min:void 0},fecMax:function(){return"+1"===this.max?new Date((new Date).setFullYear((new Date).getFullYear()+1)).toISOString().substr(0,10):this.max?this.max:void 0},restriction:function(){return this.filtro||[]}},methods:{allowedDates:function(t){return!this.restriction.includes(new Date(t).getUTCDay())}}},u=d,m=a(1001),h=(0,m.Z)(u,n,c,!1,null,null,null),p=h.exports},6018:function(t,e,a){a.d(e,{Z:function(){return p}});var i=a(7416),o=a(683),r=a(9456),s=a(4618),l=function(){var t=this,e=t._self._c;return e("div",[e(r.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(o.Z,{attrs:{xs0:"",sm3:"","px-3":""}}),e(o.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[e(s.h,{attrs:{onkeydown:"return event.key !== 'e' && event.key !== 'E' && event.key !== '.' && event.key !== ',' && event.key !== '+' && event.key !== '-'","prepend-icon":"far fa-id-card",label:"Documento",type:"number",color:"cuarto",clearable:"","background-color":"cuarto lighten-5"},model:{value:t.filtro.documento,callback:function(e){t.$set(t.filtro,"documento",e)},expression:"filtro.documento"}})],1),e(o.Z,{attrs:{xs0:"",sm3:"","px-3":""}}),e(o.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[e(s.h,{attrs:{"prepend-icon":"person",label:"Apellido",type:"text",color:"cuarto",clearable:"","background-color":"cuarto lighten-5"},model:{value:t.filtro.apellido,callback:function(e){t.$set(t.filtro,"apellido",e)},expression:"filtro.apellido"}})],1),e(o.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[e(s.h,{attrs:{"prepend-icon":"person",label:"Nombre",type:"text",color:"cuarto",clearable:"","background-color":"cuarto lighten-5"},model:{value:t.filtro.nombre,callback:function(e){t.$set(t.filtro,"nombre",e)},expression:"filtro.nombre"}})],1),e(o.Z,{attrs:{xs12:"",sm4:"","px-3":""}},[e(s.h,{attrs:{"prepend-icon":"far fa-map",label:"Barrio",type:"text",color:"cuarto",clearable:"","background-color":"cuarto lighten-5"},model:{value:t.filtro.dir_barrio,callback:function(e){t.$set(t.filtro,"dir_barrio",e)},expression:"filtro.dir_barrio"}})],1),e(o.Z,{attrs:{xs12:"",sm4:"","px-3":""}},[e(i.Z,{staticClass:"capitalizar",attrs:{items:t.optionsJson.opcLocalidades,"item-value":"description","item-text":"description",label:"Localidad","prepend-icon":"fas fa-city",color:"cuarto",clearable:"","background-color":"cuarto lighten-5"},on:{"click:clear":function(e){t.$nextTick((()=>t.filtro.dir_localidad=null))}},model:{value:t.filtro.dir_localidad,callback:function(e){t.$set(t.filtro,"dir_localidad",e)},expression:"filtro.dir_localidad"}})],1)],1)],1)},n=[],c=a(629),d={name:"formFiltroPaciente",props:["filtro"],data(){return{optionsJson:{opcLocalidades:[]}}},async created(){this.optionsJson.opcLocalidades=await this.returnOptionsJSON({key:"106",opcion:"opcLocalidades"})},methods:{...(0,c.nv)(["returnOptionsJSON"])}},u=d,m=a(1001),h=(0,m.Z)(u,l,n,!1,null,null,null),p=h.exports},1279:function(t,e,a){a.r(e),a.d(e,{default:function(){return V}});var i=a(8469),o=a(6194),r=a(8956),s=a(2353),l=a(9418),n=a(7441),c=a(6530),d=a(7352),u=a(108),m=a(683),h=a(3667),p=a(9456),f=a(6446),b=a(8143),g=a(4618),_=a(1415),x=function(){var t=this,e=t._self._c;return e(c.Z,{attrs:{fluid:"","grid-list-xs":""}},[e(p.Z,{attrs:{"align-center":"","justify-center":"","ma-0":"",wrap:"","text-xs-center":""}},[e(m.Z,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[e(r.Z,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[e(s.ZB,{staticClass:"px-0 text-uppercase"},[t._v("====== Tuberculosis ======")])],1)],1),e(m.Z,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[e(r.Z,{staticClass:"white--text",attrs:{color:"cuarto darken-1"}},[e(s.ZB,{staticClass:"px-0 text-uppercase"},[t._v("====== ====== Buscar ====== ======")])],1),e(r.Z,{staticClass:"elevation-6",attrs:{color:"grey lighten-2"}},[e(s.ZB,{staticClass:"px-0"},[e(p.Z,{attrs:{row:"",wrap:""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.buscar(t.filtroPacientes)}}},[e(m.Z,{attrs:{xs12:""}},[e("formFiltroPaciente",{attrs:{filtro:t.filtroPacientes,persona:t.persona}})],1),e(m.Z,{attrs:{xs12:""}},[e("formFiltroTubeculosis",{attrs:{filtro:t.filtroPacientes,casos:t.casos}})],1)],1)],1),e(s.h7,[e(o.Z,{staticClass:"white--text",attrs:{round:"",color:"cuarto darken-4",disabled:t.loading.estado,loading:t.loading.estado},on:{click:function(e){return t.cargarTodo()}}},[t._v("Cargar Toda la BD")]),e(b.Cl),e(b.Cl),e(b.Cl),e(o.Z,{staticClass:"white--text",attrs:{round:"",color:"cuarto darken-2",disabled:t.loading.estado,loading:t.loading.estado},on:{click:function(e){return t.buscar(t.filtroPacientes)}}},[t._v("Buscar")]),e(b.Cl)],1)],1)],1),e(m.Z,{attrs:{"pa-1":"","ma-1":"",terciary:"","lighten-1":"",xs12:""}},[e(l.Z,{staticClass:"title text-capitalize terciary elevation-6"},[e(h.Z,{attrs:{medium:"",color:"white",left:""}},[t._v("people")]),e("span",{staticClass:"title white--text"},[t._v("Pacientes")]),e(b.Cl),e(u.Z,{staticClass:"hidden-xs-only mx-2 my-1 white",attrs:{vertical:""}}),e(g.h,{attrs:{"append-icon":"search",label:"Filtrar","hide-details":"",clearable:"",color:"black","background-color":"terciary lighten-4"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e(l.Z,{attrs:{flat:"",color:"terciary lighten-2"}},[e(h.Z,{attrs:{medium:"",color:"white",left:""}},[t._v("info")]),e("div",[e(p.Z,{attrs:{row:""}},[e("span",{staticClass:"body-2 white--text"},[t._v("Seleccione los que descargara como excel")])])],1),e(u.Z,{staticClass:"hidden-xs-only mx-2 my-1 white",attrs:{vertical:""}}),e(b.Cl),e("download-excel",{attrs:{data:t.selecteccionFiltroExcel,fields:t.columnasExcel,name:t.nombreExcel,type:"xls","before-finish":t.ocultarLoading}},[e(o.Z,{staticClass:"white--text",attrs:{round:"",color:"terciary darken-1",disabled:t.loading.estado,loading:t.loading.estado},on:{click:function(e){return t.descargarExcel()}}},[e(h.Z,{attrs:{left:"",dark:""}},[t._v("far fa-file-excel")]),t._v(" Descargar Excel ")],1)],1),e(o.Z,{staticClass:"white--text",attrs:{round:"",to:{name:"PacienteCrear"},color:"terciary darken-1",disabled:t.persona.tuberculosis<2||t.loading.estado,loading:t.loading.estado}},[t._v("Alta Nuevo Paciente")])],1),e(d.Z,{staticClass:"elevation-6",staticStyle:{"table-layout":"fixed"},attrs:{id:"tablita",headers:t.headers,items:t.listPacientes,"item-key":"_id",pagination:t.paginacion,"rows-per-page-items":[5,10,25,50],loading:t.loading.estado,search:t.search,"select-all":""},on:{"update:pagination":function(e){t.paginacion=e}},scopedSlots:t._u([{key:"no-data",fn:function(){return[e(i.Z,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[t._v(" No hay datos para mostrar. ")])]},proxy:!0},{key:"no-results",fn:function(){return[e(i.Z,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[t._v(' No se encontraron resultados para "'+t._s(t.search)+'". ')])]},proxy:!0},{key:"items",fn:function(a){return[e("tr",{class:t.backgroundClass(a.item)},[e("td",[e(_.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[a.item.estado&&a.item.hist_tuberculosis&&a.item.hist_tuberculosis.estado?e(n.Z,t._g({attrs:{color:"terciary darken-2","hide-details":""},model:{value:a.selected,callback:function(e){t.$set(a,"selected",e)},expression:"props.selected"}},i)):t._e()]}}],null,!0)},[e("span",[t._v("Seleccionar")])])],1),e("td",{staticClass:"text-sm-left"},[e("div",{staticStyle:{width:"70px"}},[e(p.Z,{attrs:{row:"",wrap:""}},[e(m.Z,{attrs:{xs12:"",sm5:""}},[e(_.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(o.Z,t._g({attrs:{flat:"",icon:"",disabled:t.loading.estado,color:"terciary",to:{name:"PacienteEditar",params:{id:a.item._id}}}},i),[e(h.Z,[t._v("fas fa-user-edit")])],1)]}}],null,!0)},[e("span",[t._v("Datos Paciente")])])],1),e(m.Z,{attrs:{xs12:"",sm5:""}},[e(_.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(o.Z,t._g({attrs:{flat:"",icon:"",disabled:t.loading.estado,color:"orange darken-2"},on:{click:function(e){return t.editItem(a.item)}}},i),[e(h.Z,[t._v("fa-book-medical")])],1)]}}],null,!0)},[e("span",[t._v("Datos Tuberculosis")])])],1)],1)],1)]),e("td",{staticClass:"text-capitalize text-sm-left"},[t._v(t._s(a.item.nombreC))]),e("td",{staticClass:"text-sm-left"},[t._v(t._s(a.item.documentoC))]),e("td",{staticClass:"text-sm-left"},[t._v(" "+t._s(a.item.fec_nac+" ("+t.filtroEdad(a.item.fec_nac)+")")+" ")]),e("td",{staticClass:"text-sm-left"},[t._v(t._s(a.item.telefono))]),e("td",{staticClass:"text-capitalize text-sm-left"},[t._v(" "+t._s(t.mostrarExiste(a.item.hist_tuberculosis,"clasificacion"))+" ")]),e("td",{staticClass:"text-capitalize text-sm-left"},[t._v(t._s(a.item.direccion))])])]}}]),model:{value:t.seleccionados,callback:function(e){t.seleccionados=e},expression:"seleccionados"}},[e(f.Z,{attrs:{color:"blue",indeterminate:""}})],1),e(p.Z,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",terciary:"","lighten-2":""}},[e(b.Cl),e(u.Z,{staticClass:"hidden-xs-only mx-2 my-1 black",attrs:{vertical:""}}),e("download-excel",{attrs:{data:t.selecteccionFiltroExcel,fields:t.columnasExcel,name:t.nombreExcel,type:"xls","before-finish":t.ocultarLoading}},[e(o.Z,{staticClass:"white--text",attrs:{round:"",color:"terciary darken-1",disabled:t.loading.estado,loading:t.loading.estado},on:{click:function(e){return t.descargarExcel()}}},[e(h.Z,{attrs:{left:"",dark:""}},[t._v("far fa-file-excel")]),t._v(" Descargar Excel ")],1)],1)],1)],1),e("formTuberculosis",{attrs:{dialog:t.dialog,editedItem:t.editedItem,editedIndex:t.editedIndex,casos:t.casos,close:t.close,listPacientes:t.listPacientes},on:{actualizar:t.actualizarList}})],1)],1)},v=[],y=a(629),k=a(6018),Z=a(7416),C=a(4036),I=function(){var t=this,e=t._self._c;return e(p.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(m.Z,{attrs:{xs0:"",sm3:"","px-3":""}}),e(m.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[e(C.r,{attrs:{"item-value":"valor","item-text":"label",items:t.clasificaciones,label:"Clasificacion","prepend-icon":"fas fa-file-medical",color:"cuarto","background-color":"cuarto lighten-5"},model:{value:t.filtro.hist_tuberculosis.clasificacion,callback:function(e){t.$set(t.filtro.hist_tuberculosis,"clasificacion",e)},expression:"filtro.hist_tuberculosis.clasificacion"}})],1),e(m.Z,{attrs:{xs0:"",sm3:"","px-3":""}}),e(m.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[e(Z.Z,{staticClass:"capitalizar",attrs:{"item-value":"id","item-text":"nombreC",items:t.casos,label:"Caso Indice","prepend-icon":"fas fa-head-side-cough",color:"cuarto","background-color":"cuarto lighten-5",clearable:""},on:{"click:clear":function(e){t.$nextTick((()=>t.filtro.hist_tuberculosis["indice.id"]=null))}},model:{value:t.filtro.hist_tuberculosis["indice.id"],callback:function(e){t.$set(t.filtro.hist_tuberculosis,"indice.id",e)},expression:"filtro.hist_tuberculosis['indice.id']"}})],1),e(m.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[e(g.h,{attrs:{"prepend-icon":"description",label:"Observacion",type:"text",color:"cuarto",clearable:"","background-color":"cuarto lighten-5"},model:{value:t.filtro.hist_tuberculosis.observacion,callback:function(e){t.$set(t.filtro.hist_tuberculosis,"observacion",e)},expression:"filtro.hist_tuberculosis.observacion"}})],1)],1)},w=[],$={name:"formFiltro",props:["filtro","casos"],data(){return{otrosCasos:!1,clasificaciones:[{label:"No Buscar por este campo",valor:""},{label:"Caso",valor:"caso"},{label:"Contacto",valor:"contacto"},{label:"Fin de Seguimiento",valor:"fin de seguimiento"},{label:"Sin Clasificar",valor:"$!exists"}]}},watch:{otrosCasos:function(t){t?this.filtro.hist_tuberculosis["indice.id"]=null:this.filtro.hist_tuberculosis["indice.caso"]=""}},created(){},methods:{}},L=$,S=a(1001),E=(0,S.Z)(L,I,w,!1,null,null,null),D=E.exports,P=a(5049),T=a(445),F=a(5730),j=function(){var t=this,e=t._self._c;return e(P.Z,{attrs:{"max-width":"80%",persistent:"",scrollable:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(T.Z,{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valido,callback:function(e){t.valido=e},expression:"valido"}},[e(r.Z,[e(l.Z,[e(p.Z,{attrs:{grey:"","lighten-2":"",row:""}},[e("span",{staticClass:"display-2 text-capitalize"},[t._v("Paciente: "+t._s(t.editedItem.nombreC)+".")]),e(b.Cl),e(o.Z,{attrs:{icon:"",disabled:t.loading.estado,loading:t.loading.estado,color:"error darken-1"},on:{click:t.close}},[e(h.Z,{attrs:{large:""}},[t._v("cancel")])],1)],1)],1),e(s.ZB,[e(c.Z,{attrs:{"grid-list-md":""}},[e(p.Z,{attrs:{wrap:""}},[e(m.Z,{attrs:{xs12:""}},[e(p.Z,{attrs:{grey:"","lighten-2":"",row:"",wrap:""}},[e(m.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e(g.h,{attrs:{readonly:"","prepend-icon":"fas fa-id-card",label:"Documento",type:"text",color:"primary","background-color":"primary lighten-2"},model:{value:t.editedItem.documento,callback:function(e){t.$set(t.editedItem,"documento",e)},expression:"editedItem.documento"}})],1),e(m.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e(g.h,{attrs:{readonly:"","prepend-icon":"phone",label:"Telefono",type:"text",color:"primary","background-color":"primary lighten-2"},model:{value:t.editedItem.telefono,callback:function(e){t.$set(t.editedItem,"telefono",e)},expression:"editedItem.telefono"}})],1)],1)],1),e(m.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e(Z.Z,{attrs:{readonly:t.soloLectura(),"background-color":t.soloLectura()?"primary lighten-2":"primary lighten-5",rules:t.requerido,"item-value":"valor","item-text":"label",items:t.clasificacion,label:"Clasificacion","prepend-icon":"fas fa-file-medical",color:"primary"},model:{value:t.editedItem.hist_tuberculosis.clasificacion,callback:function(e){t.$set(t.editedItem.hist_tuberculosis,"clasificacion",e)},expression:"editedItem.hist_tuberculosis.clasificacion"}})],1),e(m.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e(Z.Z,{attrs:{readonly:t.soloLectura(),clearable:!t.soloLectura(),"background-color":t.soloLectura()?"primary lighten-2":"primary lighten-5","item-value":"valor","item-text":"label",items:t.tratamientos,label:"Estado de Tratamiento","prepend-icon":"fa-book-medical",color:"primary",rules:"caso"===t.editedItem.hist_tuberculosis.clasificacion?t.requerido:[]},model:{value:t.editedItem.hist_tuberculosis.tratamiento,callback:function(e){t.$set(t.editedItem.hist_tuberculosis,"tratamiento",e)},expression:"editedItem.hist_tuberculosis.tratamiento"}})],1),e(m.Z,{attrs:{xs12:"",primary:"","lighten-2":""}},[e("h4",[t._v("Casos Indice")])]),t._l(t.editedItem.hist_tuberculosis.indice,(function(a,i){return e(m.Z,{key:`casos-${i}`,attrs:{xs12:"",primary:"","lighten-3":""}},[e(p.Z,{attrs:{"align-center":"",row:"",wrap:""}},[e(m.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e(Z.Z,{attrs:{readonly:t.soloLectura(),clearable:!t.soloLectura(),"background-color":t.soloLectura()?"primary lighten-2":"primary lighten-5","item-value":"id","item-text":"nombreC",items:t.casos,label:"Apellido, Nombre del Caso","prepend-icon":"fas fa-portrait",color:"primary",rules:0!=i||"contacto"===t.editedItem.hist_tuberculosis.clasificacion?t.requerido:[]},scopedSlots:t._u([{key:"selection",fn:function(e){return[t._v(" "+t._s(t.capitalizarString(e.item.nombreC))+" "+t._s(e.item.documentoC?"("+e.item.documentoC+")":"(Documento)")+" ")]}},{key:"item",fn:function(e){return[t._v(" "+t._s(e.item.nombreC)+" "+t._s(e.item.documentoC?"("+e.item.documentoC+")":"(Documento)")+" ")]}}],null,!0),model:{value:t.editedItem.hist_tuberculosis.indice[i].id,callback:function(e){t.$set(t.editedItem.hist_tuberculosis.indice[i],"id",e)},expression:"editedItem.hist_tuberculosis.indice[index].id"}})],1),e(m.Z,{attrs:{xs12:"",sm5:"","px-2":""}},[null!=t.editedItem.hist_tuberculosis.indice[i].id?e(Z.Z,{staticClass:"capitalizar",attrs:{readonly:"",color:"primary","background-color":"primary lighten-2","item-value":"id","item-text":"nombreC",items:t.casos,label:"Estado Tratamiento Caso Indice","prepend-icon":"fa-book-medical"},scopedSlots:t._u([{key:"selection",fn:function(e){return[t._v(" "+t._s(e.item.hist_tuberculosis.tratamiento?t.capitalizarString(e.item.hist_tuberculosis.tratamiento):"sin dato")+" ")]}}],null,!0),model:{value:t.editedItem.hist_tuberculosis.indice[i].id,callback:function(e){t.$set(t.editedItem.hist_tuberculosis.indice[i],"id",e)},expression:"editedItem.hist_tuberculosis.indice[index].id"}}):t._e()],1),0==i?e(_.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(o.Z,t._g({attrs:{disabled:t.soloLectura(),flat:"",icon:"",color:"blue lighten-2"},on:{click:function(e){return t.agregarFila(t.editedItem.hist_tuberculosis.indice,{id:null,caso:"",documento:"",tratamiento:""})}}},a),[e(h.Z,{attrs:{large:""}},[t._v("add_circle")])],1)]}}],null,!0)},[e("span",[t._v("Agregar Caso Indice")])]):t._e(),0!=i?e(_.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(o.Z,t._g({attrs:{small:"",disabled:t.soloLectura(),flat:"",icon:"",color:"red lighten-2"},on:{click:function(e){return t.borrarFila(t.editedItem.hist_tuberculosis.indice,i)}}},a),[e(h.Z,[t._v("delete_forever")])],1)]}}],null,!0)},[e("span",[t._v("Eliminar Caso Indice "+t._s(t.editedItem.hist_tuberculosis.indice[i].id?`- ${t.editedItem.hist_tuberculosis.indice[i].id.nombreC}`:""))])]):t._e()],1)],1)})),e(m.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e("dateSelect",{key:`${t.editedItem.nombreC}-iTratamiento`,attrs:{value:t.editedItem.hist_tuberculosis.fec_tratamiento,label:"Inicio Tratamiento",color:"primary",icon:"event",soloLectura:t.soloLectura(),requerido:!1,min:"",max:"",filtro:""},on:{input:function(e){t.editedItem.hist_tuberculosis.fec_tratamiento=e}}})],1),e(m.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e("dateSelect",{key:`${t.editedItem.nombreC}-quimio`,attrs:{value:t.editedItem.hist_tuberculosis.fec_quimio,label:"Inicio Quimiopx",color:"primary",icon:"fas fa-diagnoses",soloLectura:t.soloLectura(),requerido:!1,min:"",max:"",filtro:""},on:{input:function(e){t.editedItem.hist_tuberculosis.fec_quimio=e}}})],1),e(m.Z,{attrs:{xs0:"",sm6:"","px-2":""}}),t._l(t.editedItem.hist_tuberculosis.ppd,(function(a,i){return e(m.Z,{key:`ppd-${i}`,attrs:{xs12:"","px-2":"",primary:"","lighten-4":""}},[e(p.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(m.Z,{attrs:{xs12:"",sm6:"","pr-3":""}},[e("dateSelect",{key:`${t.editedItem.nombreC}-ppd-${i}`,attrs:{value:t.editedItem.hist_tuberculosis.ppd[i].fecha,label:"Fecha PPD (Derivado Proteico Purificado)",color:"primary",icon:"fas fa-allergies",soloLectura:t.soloLectura(),requerido:0!=i,min:"",max:"",filtro:""},on:{input:function(e){t.editedItem.hist_tuberculosis.ppd[i].fecha=e}}})],1),e(m.Z,{attrs:{xs12:"",sm5:"","px-2":""}},[e(g.h,{attrs:{readonly:t.soloLectura(),clearable:!t.soloLectura(),"background-color":t.soloLectura()?"primary lighten-2":"primary lighten-5",onkeydown:"return event.key !== 'e' && event.key !== 'E' && event.key !== '+'","prepend-icon":"",label:"Resultado PPD",type:"number",color:"primary"},model:{value:t.editedItem.hist_tuberculosis.ppd[i].valor,callback:function(e){t.$set(t.editedItem.hist_tuberculosis.ppd[i],"valor",e)},expression:"editedItem.hist_tuberculosis.ppd[index].valor"}})],1),0==i?e(_.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(o.Z,t._g({attrs:{disabled:t.soloLectura(),flat:"",icon:"",color:"blue lighten-2"},on:{click:function(e){return t.agregarFila(t.editedItem.hist_tuberculosis.ppd,{fecha:"",valor:""})}}},a),[e(h.Z,{attrs:{large:""}},[t._v("add_circle")])],1)]}}],null,!0)},[e("span",[t._v("Agregar PPD")])]):t._e(),0!=i?e(_.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(o.Z,t._g({attrs:{small:"",disabled:t.soloLectura(),flat:"",icon:"",color:"red lighten-2"},on:{click:function(e){return t.borrarFila(t.editedItem.hist_tuberculosis.ppd,i)}}},a),[e(h.Z,[t._v("delete_forever")])],1)]}}],null,!0)},[e("span",[t._v("Eliminar PPD")])]):t._e()],1)],1)})),t._l(t.editedItem.hist_tuberculosis.rx_torax,(function(a,i){return e(m.Z,{key:`rx_torax-${i}`,attrs:{xs12:"","px-2":"",primary:"","lighten-3":""}},[e(p.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(m.Z,{attrs:{xs12:"",sm6:"","pr-3":""}},[e("dateSelect",{key:`${t.editedItem.nombreC}-rx_torax-${i}`,attrs:{value:t.editedItem.hist_tuberculosis.rx_torax[i].fecha,label:"Fecha RX Torax (Radiografia)",color:"primary",icon:"fas fa-file-prescription",soloLectura:t.soloLectura(),requerido:0!=i,min:"",max:"",filtro:""},on:{input:function(e){t.editedItem.hist_tuberculosis.rx_torax[i].fecha=e}}})],1),e(m.Z,{attrs:{xs12:"",sm5:"","px-2":""}},[e(g.h,{attrs:{readonly:t.soloLectura(),clearable:!t.soloLectura(),"background-color":t.soloLectura()?"primary lighten-2":"primary lighten-5","prepend-icon":"",label:"Resultado RX Torax",type:"text",color:"primary"},model:{value:t.editedItem.hist_tuberculosis.rx_torax[i].valor,callback:function(e){t.$set(t.editedItem.hist_tuberculosis.rx_torax[i],"valor",e)},expression:"editedItem.hist_tuberculosis.rx_torax[index].valor"}})],1),0==i?e(_.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(o.Z,t._g({attrs:{disabled:t.soloLectura(),flat:"",icon:"",color:"blue lighten-2"},on:{click:function(e){return t.agregarFila(t.editedItem.hist_tuberculosis.rx_torax,{fecha:"",valor:""})}}},a),[e(h.Z,{attrs:{large:""}},[t._v("add_circle")])],1)]}}],null,!0)},[e("span",[t._v("Agregar RX Torax")])]):t._e(),0!=i?e(_.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(o.Z,t._g({attrs:{small:"",disabled:t.soloLectura(),flat:"",icon:"",color:"red lighten-2"},on:{click:function(e){return t.borrarFila(t.editedItem.hist_tuberculosis.rx_torax,i)}}},a),[e(h.Z,[t._v("delete_forever")])],1)]}}],null,!0)},[e("span",[t._v("Eliminar RX Torax")])]):t._e()],1)],1)})),e(m.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e(Z.Z,{attrs:{clearable:!t.soloLectura(),readonly:t.soloLectura(),"background-color":t.soloLectura()?"primary lighten-2":"primary lighten-5","item-value":"valor","item-text":"label",items:t.si_no,label:"Laboratorio","prepend-icon":"fas fa-vials",color:"primary"},model:{value:t.editedItem.hist_tuberculosis.laboratorio,callback:function(e){t.$set(t.editedItem.hist_tuberculosis,"laboratorio",e)},expression:"editedItem.hist_tuberculosis.laboratorio"}})],1),e(m.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e(Z.Z,{attrs:{clearable:!t.soloLectura(),readonly:t.soloLectura(),"background-color":t.soloLectura()?"primary lighten-2":"primary lighten-5","item-value":"valor","item-text":"label",items:t.quimioprofilaxis,label:"Quimioprofilaxis","prepend-icon":"fas fa-prescription",color:"primary"},model:{value:t.editedItem.hist_tuberculosis.quimioprofilaxis,callback:function(e){t.$set(t.editedItem.hist_tuberculosis,"quimioprofilaxis",e)},expression:"editedItem.hist_tuberculosis.quimioprofilaxis"}})],1),e(m.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e(Z.Z,{attrs:{clearable:!t.soloLectura(),readonly:t.soloLectura(),"background-color":t.soloLectura()?"primary lighten-2":"primary lighten-5","item-value":"valor","item-text":"label",items:t.duracion,label:"Duracion (Meses)","prepend-icon":"far fa-calendar-alt",color:"primary"},model:{value:t.editedItem.hist_tuberculosis.duracion,callback:function(e){t.$set(t.editedItem.hist_tuberculosis,"duracion",e)},expression:"editedItem.hist_tuberculosis.duracion"}})],1),e(m.Z,{attrs:{xs12:"",sm6:"","px-2":""}},[e(Z.Z,{attrs:{clearable:!t.soloLectura(),readonly:t.soloLectura(),"background-color":t.soloLectura()?"primary lighten-2":"primary lighten-5","item-value":"valor","item-text":"label",items:t.si_no,label:"Completado","prepend-icon":"fas fa-check-circle",color:"primary"},model:{value:t.editedItem.hist_tuberculosis.completado,callback:function(e){t.$set(t.editedItem.hist_tuberculosis,"completado",e)},expression:"editedItem.hist_tuberculosis.completado"}})],1),e(m.Z,{attrs:{xs12:"","px-2":""}},[e(F.Z,{attrs:{clearable:!t.soloLectura(),readonly:t.soloLectura(),"background-color":t.soloLectura()?"primary lighten-2":"primary lighten-5","auto-grow":"",label:"Observacion",rows:"2","prepend-icon":"description",color:"primary"},model:{value:t.editedItem.hist_tuberculosis.observacion,callback:function(e){t.$set(t.editedItem.hist_tuberculosis,"observacion",e)},expression:"editedItem.hist_tuberculosis.observacion"}})],1)],2)],1)],1),e(s.h7,[e(o.Z,{staticClass:"terciary darken-1 white--text",attrs:{disabled:t.loading.estado,round:"",loading:t.loading.estado},on:{click:t.verHistorial}},[t._v(" Historial")]),e(_.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(o.Z,t._g({staticClass:"primary darken-1",attrs:{disabled:t.loading.estado||!t.valido||t.soloLectura(),round:"",loading:t.loading.estado},on:{click:t.guardarHistorial}},a),[t._v(" "+t._s(t.valido?"Archivar en Historial":"Formulario No valido"))])]}}])},[e("span",[t._v("Archiva el Tratamiento para comenzar uno nuevo")])]),e(b.Cl),e(u.Z,{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),e(o.Z,{staticClass:"error darken-1",attrs:{disabled:t.loading.estado,round:"",loading:t.loading.estado},on:{click:t.close}},[t._v(" Cancelar")]),e(o.Z,{staticClass:"primary darken-1",attrs:{disabled:t.loading.estado||!t.valido||t.soloLectura(),round:"",loading:t.loading.estado},on:{click:t.editar}},[t._v(" "+t._s(t.valido?"Guardar Cambios":"Formulario No valido"))])],1)],1)],1)],1)},O=[],N=a(5967),q={name:"formTuberculosis",props:["dialog","editedItem","editedIndex","casos","close","listPacientes"],components:{dateSelect:N.Z},data:()=>({valido:!0,requerido:[t=>t&&(!t||"string"!==typeof t||""!==t.trim())||"Este campo es requerido."],positivo:[t=>isNaN(t)?"Debe ser un numero valido.":!(t&&Number(t)<=0)||"El numero debe ser positivo."],clasificacion:[{label:"Caso",valor:"caso"},{label:"Contacto",valor:"contacto"},{label:"Fin de Seguimiento",valor:"fin de seguimiento"}],tratamientos:[{label:"Alta",valor:"alta"},{label:"Fase 1",valor:"fase 1"},{label:"Fase 2",valor:"fase 2"},{label:"Retratamiento",valor:"retratamiento"},{label:"Retratamiento (Resis. H)",valor:"retratamiento Res H"},{label:"???",valor:"???"}],si_no:[{label:"Si",valor:"si"},{label:"No",valor:"no"}],quimioprofilaxis:[{label:"No",valor:"no"},{label:"H",valor:"H"},{label:"R",valor:"R"},{label:"Otras",valor:"otras"}],duracion:["0","3","6","9"]}),computed:{...(0,y.rn)(["APIURL","axiosConfig","loading","persona"])},methods:{...(0,y.OI)(["mostrarLoading","ocultarLoading","mostrarError","mostrarMensaje"]),capitalizarString(t){return"string"===typeof t?t.trim().toLowerCase().replace(/\w\S*/g,(t=>t.replace(/^\w/,(t=>t.toUpperCase())))):t},soloLectura(){return this.persona.tuberculosis<2},async agregarFila(t,e){let a=e||"";t.push(a)},async borrarFila(t,e){t.splice(e,1)},async editar(){if(this.$refs.form.validate()){let e=Object.assign({},this.editedItem);try{this.mostrarLoading({titulo:"Enviando datos...",color:"primary"});let a=await this.axios.put(this.APIURL+"/tuberculosis/paciente/"+e._id,e,this.axiosConfig);if(a.data.ok)a.data.paciente.documentoC?this.mostrarMensaje({msj:["Paciente Editado exitosamente.","<##> Documento: "+a.data.paciente.documentoC.toString()+" <##>"],titulo:"Modificacion Exitosa"}):this.mostrarMensaje({msj:["Paciente Editado exitosamente."],titulo:"Modificacion Exitosa"}),this.$set(this.listPacientes,this.editedIndex,a.data.paciente),this.$emit("actualizar"),this.close();else try{this.mostrarError({mensaje:a.data.err.message,titulo:a.status})}catch(t){this.mostrarError()}}catch(t){try{this.mostrarError({errores:t.response.data.err.errors,mensaje:t.response.data.err.message,titulo:t.response.status})}catch(t){this.mostrarError()}}finally{this.ocultarLoading()}}else this.mostrarError({mensaje:"Revise los campos obligatorios.",titulo:"Valores Requeridos."})},async guardarHistorial(){this.$refs.form.validate()?(console.log("EN DESARROLLO"),this.mostrarMensaje({msj:["Guardar el historial, se encuentra en desarrollo."],titulo:"EN DESARROLLO"})):this.mostrarError({mensaje:"Revise los campos obligatorios.",titulo:"Valores Requeridos."})},async verHistorial(){console.log("EN DESARROLLO"),this.mostrarMensaje({msj:["Visualizacion del historial, se encuentra en desarrollo."],titulo:"EN DESARROLLO"})}}},R=q,A=(0,S.Z)(R,j,O,!1,null,null,null),M=A.exports,z={name:"pacienteBuscar",components:{formFiltroPaciente:k.Z,formFiltroTubeculosis:D,formTuberculosis:M},data:()=>({paginacion:{sortBy:"nombreC",descending:!1,rowsPerPage:10,page:1},search:"",headers:[{text:"Acciones",value:"_id",sortable:!1,width:"5%"},{text:"Nombre Completo",value:"nombreC",width:"25%"},{text:"Documento",value:"documentoC",width:"5%"},{text:"Fec. de Nac (Edad)",value:"fec_nac",width:"15%"},{text:"Telefono",value:"telefono",width:"10%"},{text:"Clasificacion",value:"hist_tuberculosis.clasificacion",width:"10%"},{text:"Domicilio",value:"direccion",width:"25%"}],listPacientes:[],filtroPacientes:{apellido:"",nombre:"",tipo_doc:"",documento:"",dir_calle:"",dir_numero:"",dir_piso:"",dir_depto:"",dir_barrio:"",dir_localidad:"",zona:"",telefono:"",fec_nac:"",sexo:"",oSocial:"",hist_tuberculosis:{clasificacion:"","indice.id":null,"indice.caso":"",observacion:""}},ultimoFiltro:{},casos:[],noNexo:{nombreC:"Sin Nexo",id:null},dialog:!1,editedIndex:-1,editedItem:{apellido:"",nombre:"",documento:"",telefono:"",hist_tuberculosis:{indice:[{id:null,caso:"",documento:"",tratamiento:""}],clasificacion:"",tratamiento:"",fec_tratamiento:"",fec_quimio:"",ppd:[{fecha:"",valor:""}],rx_torax:[{fecha:"",valor:""}],laboratorio:"",quimioprofilaxis:"",duracion:"",completado:"",observacion:"",historial:[]}},defaultItem:{apellido:"",nombre:"",documento:"",telefono:"",hist_tuberculosis:{indice:[{id:null,caso:"",documento:"",tratamiento:""}],clasificacion:"",tratamiento:"",fec_tratamiento:"",fec_quimio:"",ppd:[{fecha:"",valor:""}],rx_torax:[{fecha:"",valor:""}],laboratorio:"",quimioprofilaxis:"",duracion:"",completado:"",observacion:"",historial:[]}},seleccionados:[],columnasExcel:{Apellido:"apellido",Nombre:"nombre","Tipo Documento":"tipo_doc",Documento:"documento",Calle:"dir_calle",Numero:"dir_numero",Piso:"dir_piso",Depto:"dir_depto",Barrio:"dir_barrio",Localidad:"dir_localidad",Telefono:"telefono","Fecha de Nacimiento":{field:"fec_nac",callback:t=>{try{let e=new Date(t).toISOString().substr(0,10);return`${e}`}catch(e){return`${t}`}}},Edad:{field:"fec_nac",callback:t=>{if(!t)return"";try{let e=new Date,a=new Date(t),i=e.getFullYear()-a.getFullYear(),o=e.getMonth()-a.getMonth();if((o<0||0===o&&e.getDate()<=a.getDate())&&i--,i<=0){let t=Math.floor((e.getTime()-a.getTime())/864e5);return 1===t?`${t} dia`:`${t} dias`}return 1===i?`${i} año`:`${i} años`}catch(e){return`${t}`}}},Sexo:"sexo","Obra Social":"oSocial","Enf.Previas/Comorbilidades":"enf_previas",Clasificacion:"hist_tuberculosis.clasificacion","Caso Indice":{field:"hist_tuberculosis.indice",callback:t=>{try{let e="";if(t.length>1)for(let a=0;a<t.length;a++){e+="Caso Nº"+(a+1)+" (\n";const i=t[a];i.id?(e+="Apellido, Nombre: "+(i.id.nombreC?`${i.id.nombreC}`:"sin dato"),e+="\nDocumento: "+(i.id.documentoC?`${i.id.documentoC}`:"sin dato"),e+="\nTratamiento: "+(i.id.hist_tuberculosis?""+(i.id.hist_tuberculosis.tratamiento?`${i.id.hist_tuberculosis.tratamiento}`:"sin dato"):"sin dato")):(e+="Apellido, Nombre: "+(i.caso?`${i.caso}`:"sin dato"),e+="\nDocumento: "+(i.documento?`${i.documento}`:"sin dato"),e+="\nTratamiento: "+(i.tratamiento?`${i.tratamiento}`:"sin dato")),a<t.length-1?e+="\n)\n":e+="\n)"}else t[0].id?e+=""+(t[0].id.nombreC?`Apellido, Nombre: ${t[0].id.nombreC}\n                    Documento: ${t[0].id.documentoC?`${t[0].id.documentoC}`:"sin dato"}\n                    Tratamiento: ${t[0].id.hist_tuberculosis&&t[0].id.hist_tuberculosis.tratamiento?`${t[0].id.hist_tuberculosis.tratamiento}`:"sin dato"}`:"sin dato"):e+=""+(t[0].caso?`Apellido, Nombre: ${t[0].caso}\n                    Documento: ${t[0].documento?`${t[0].documento}`:"sin dato"}\n                    Tratamiento: ${t[0].tratamiento?`${t[0].tratamiento}`:"sin dato"}`:"sin dato");return e}catch(e){return`${t}`}}},"Estado Tratamiento":"hist_tuberculosis.tratamiento","Inicio Quimiopx":"hist_tuberculosis.fec_quimio",PPD:{field:"hist_tuberculosis.ppd",callback:t=>{try{let e="";if(!(t.length>1)){let e=new Date(t[0].fecha),a=e.getUTCFullYear(),i=(e.getUTCMonth()+1).toString().padStart(2,0),o=e.getUTCDate().toString().padStart(2,0);return e=[o,i,a].join("/"),`Fecha: ${t[0].fecha?`${e}`:"sin dato"}\nValor: ${t[0].valor?`${t[0].valor}`:"sin dato"}`}for(let a=0;a<t.length;a++){e+="PPD Nº"+(a+1)+" (\n";const i=t[a];let o=new Date(i.fecha),r=o.getUTCFullYear(),s=(o.getUTCMonth()+1).toString().padStart(2,0),l=o.getUTCDate().toString().padStart(2,0);o=[l,s,r].join("/"),e+=`Fecha: ${i.fecha?`${o}`:"sin dato"}\n`,e+="Valor: "+(i.valor?`${i.valor}`:"sin dato"),a<t.length-1?e+="\n)\n":e+="\n)"}return e}catch(e){return`${t}`}}},"RX Torax":{field:"hist_tuberculosis.rx_torax",callback:t=>{try{let e="";if(!(t.length>1)){let e=new Date(t[0].fecha),a=e.getUTCFullYear(),i=(e.getUTCMonth()+1).toString().padStart(2,0),o=e.getUTCDate().toString().padStart(2,0);return e=[o,i,a].join("/"),`Fecha: ${t[0].fecha?`${e}`:"sin dato"}\nValor: ${t[0].valor?`${t[0].valor}`:"sin dato"}`}for(let a=0;a<t.length;a++){e+="RX Torax Nº"+(a+1)+" (\n";const i=t[a];let o=new Date(i.fecha),r=o.getUTCFullYear(),s=(o.getUTCMonth()+1).toString().padStart(2,0),l=o.getUTCDate().toString().padStart(2,0);o=[l,s,r].join("/"),e+=`Fecha: ${i.fecha?`${o}`:"sin dato"}\n`,e+="Valor: "+(i.valor?`${i.valor}`:"sin dato"),a<t.length-1?e+="\n)\n":e+="\n)"}return e}catch(e){return`${t}`}}},Laboratorio:"hist_tuberculosis.laboratorio",Quimioprofilaxis:"hist_tuberculosis.quimioprofilaxis",Duracion:"hist_tuberculosis.duracion",Completado:"hist_tuberculosis.completado",Observacion:"hist_tuberculosis.observacion"}}),computed:{...(0,y.rn)(["APIURL","axiosConfig","loading","hoy","persona"]),nombreExcel(){return`Tuberculosis-${this.hoy}.xls`},selecteccionFiltroExcel(){let t=[];for(let e=0;e<this.seleccionados.length;e++){let a=this.seleccionados[e];a.estado&&a.hist_tuberculosis&&a.hist_tuberculosis.estado&&t.push(a)}return t}},mounted(){this.cargarCasos()},methods:{...(0,y.OI)(["mostrarLoading","ocultarLoading","mostrarError"]),backgroundClass(t){if(!t)return"";try{if(!t.hist_tuberculosis)return t.estado?"background-color: terciary lighten-4":"background-color: error lighten-4";if(!t.hist_tuberculosis.estado)return"background-color: info lighten-3";if(t.estado&&"caso"===t.hist_tuberculosis.clasificacion)return"background-color: primary lighten-1";if(t.estado&&"contacto"===t.hist_tuberculosis.clasificacion)return"background-color: primary lighten-3";if(t.estado&&"fin de seguimiento"===t.hist_tuberculosis.clasificacion)return"background-color: green lighten-3";if(!t.estado&&"caso"===t.hist_tuberculosis.clasificacion)return"background-color: primary darken-4";if(!t.estado&&"contacto"===t.hist_tuberculosis.clasificacion)return"background-color: primary darken-1";if(!t.estado&&"fin de seguimiento"===t.hist_tuberculosis.clasificacion)return"background-color: green darken-1"}catch(e){return""}},mostrarExiste(t,e){if(!t)return"clasificacion"===e?"sin clasificar":"";try{return t[e]}catch(a){return""}},filtroEdad(t){if(!t)return"XX";try{let i=new Date,o=new Date(t);var e=i.getFullYear()-o.getFullYear(),a=i.getMonth()-o.getMonth();if((a<0||0===a&&i.getDate()<=o.getDate())&&e--,e<=0){let t=Math.floor((i.getTime()-o.getTime())/864e5);return 1===t?`${t} dia`:`${t} dias`}return 1===e?`${e} año`:`${e} años`}catch(i){return t}},editItem(t){this.editedIndex=this.listPacientes.indexOf(t),this.editedItem=Object.assign({},this._cloneDeep(this.defaultItem),this._cloneDeep(t)),this.editedItem.hist_tuberculosis.fec_quimio&&(this.editedItem.hist_tuberculosis.fec_quimio=new Date(this.editedItem.hist_tuberculosis.fec_quimio).toISOString().substr(0,10)),this.editedItem.hist_tuberculosis.fec_tratamiento&&(this.editedItem.hist_tuberculosis.fec_tratamiento=new Date(this.editedItem.hist_tuberculosis.fec_tratamiento).toISOString().substr(0,10)),this.dialog=!0},close(){this.dialog=!1,this.actualizarList(),setTimeout((()=>{this.editedItem=Object.assign({},this._cloneDeep(this.defaultItem)),this.editedIndex=-1}),300)},async cargarCasos(){let t={hist_tuberculosis:{estado:!0}},e=JSON.stringify(t),a="apellido nombre nombreC tipo_doc documento documentoC hist_tuberculosis";try{this.mostrarLoading({titulo:"Cargando casos...",color:"primary"});let t=await this.axios.get(this.APIURL+"/paciente/buscar?filtro="+e+"&select="+a,this.axiosConfig);if(t.data.ok)this.casos=[],this.casos.push(this.noNexo),this.casos.push(...t.data.pacientes);else try{this.mostrarError({mensaje:t.data.err.message,titulo:t.status})}catch(i){this.mostrarError()}}catch(i){try{this.mostrarError({errores:i.response.data.err.errors,mensaje:i.response.data.err.message,titulo:i.response.status})}catch(i){this.mostrarError()}}finally{this.ocultarLoading()}},async cargarTodo(){try{this.mostrarLoading({titulo:"Cargando pacientes...",color:"primary"});let e=await this.axios.get(this.APIURL+"/paciente",this.axiosConfig);if(e.data.ok)this.listPacientes=e.data.pacientes,this.ultimoFiltro=Object.assign({}),this.paginacion.page>Math.ceil(this.listPacientes.length/this.paginacion.rowsPerPage)&&(this.paginacion.page=1);else try{this.mostrarError({mensaje:e.data.err.message,titulo:e.status})}catch(t){this.mostrarError()}}catch(t){try{this.mostrarError({errores:t.response.data.err.errors,mensaje:t.response.data.err.message,titulo:t.response.status})}catch(t){this.mostrarError()}}finally{this.ocultarLoading()}},async buscar(t){let e=Object.assign({},t),a=!0;for(const o in e)if(e.hasOwnProperty(o))if("hist_tuberculosis"===o){if(e["hist_tuberculosis"])for(const t in e["hist_tuberculosis"])e["hist_tuberculosis"].hasOwnProperty(t)&&(""!==e["hist_tuberculosis"][t]&&null!==e["hist_tuberculosis"][t]?a=!1:delete e["hist_tuberculosis"][t])}else""!==e[o]&&null!==e[o]?a=!1:delete e[o];if(!0!==a){e["hist_tuberculosis"]&&0===Object.keys(e["hist_tuberculosis"]).length&&delete e["hist_tuberculosis"],e=JSON.stringify(e);try{this.mostrarLoading({titulo:"Cargando pacientes...",color:"primary"});let t=await this.axios.get(this.APIURL+"/paciente/buscar?filtro="+e,this.axiosConfig);if(t.data.ok)this.listPacientes=t.data.pacientes,this.ultimoFiltro=Object.assign({},JSON.parse(e)),this.paginacion.page>Math.ceil(this.listPacientes.length/this.paginacion.rowsPerPage)&&(this.paginacion.page=1);else try{this.mostrarError({mensaje:t.data.err.message,titulo:t.status})}catch(i){this.mostrarError()}}catch(i){try{this.mostrarError({errores:i.response.data.err.errors,mensaje:i.response.data.err.message,titulo:i.response.status})}catch(i){this.mostrarError()}}finally{this.ocultarLoading()}}else this.mostrarError({mensaje:"Complete por lo menos un campo de busqueda.",titulo:"Valores Requeridos."})},async actualizarList(){0===Object.keys(this.ultimoFiltro).length?(this.cargarCasos(),this.cargarTodo()):(this.cargarCasos(),this.buscar(this.ultimoFiltro))},descargarExcel(){0===this.selecteccionFiltroExcel.length?this.mostrarError({mensaje:"No se ha seleccionado ningun elemento.",titulo:"Sin Seleccion"}):this.mostrarLoading({titulo:"Creando Excel...",color:"primary"})}}},B=z,U=(0,S.Z)(B,x,v,!1,null,null,null),V=U.exports},445:function(t,e,a){a.d(e,{Z:function(){return o}});var i=a(21),o={name:"v-form",mixins:[(0,i.J)("form")],inheritAttrs:!1,props:{value:Boolean,lazyValidation:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(){var t=Object.values(this.errorBag).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,a=function(t){return t.$watch("hasError",(function(a){e.$set(e.errorBag,t._uid,a)}),{immediate:!0})},i={_uid:t._uid,valid:void 0,shouldValidate:void 0};return this.lazyValidation?i.shouldValidate=t.$watch("shouldValidate",(function(o){o&&(e.errorBag.hasOwnProperty(t._uid)||(i.valid=a(t)))})):i.valid=a(t),i},validate:function(){var t=this.inputs.filter((function(t){return!t.validate(!0)})).length;return!t},reset:function(){for(var t=this,e=this.inputs.length;e--;)this.inputs[e].reset();this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){for(var t=this,e=this.inputs.length;e--;)this.inputs[e].resetValidation();this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},register:function(t){var e=this.watchInput(t);this.inputs.push(t),this.watchers.push(e)},unregister:function(t){var e=this.inputs.find((function(e){return e._uid===t._uid}));if(e){var a=this.watchers.find((function(t){return t._uid===e._uid}));a.valid&&a.valid(),a.shouldValidate&&a.shouldValidate(),this.watchers=this.watchers.filter((function(t){return t._uid!==e._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object.assign({novalidate:!0},this.$attrs),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}}}}]);