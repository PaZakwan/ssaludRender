"use strict";(self["webpackChunksecretaria_de_salud_moreno_frontend"]=self["webpackChunksecretaria_de_salud_moreno_frontend"]||[]).push([[8562],{53651:(t,e,a)=>{a.r(e),a.d(e,{default:()=>F});var r=a(81166),i=a(55669),s=a(15852),o=a(1899),n=a(37471),l=a(48122),c=a(85832),d=a(16251),u=a(41614),h=a(46227),p=a(69155),m=a(31911),f=a(55731),g=a(57e3),v=function(){var t=this,e=t._self._c;return e(l.A,{attrs:{fluid:"","grid-list-xs":""}},[e(p.A,{attrs:{"align-center":"","justify-center":"","ma-0":"",wrap:""}},[e(u.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[e(s.A,{staticClass:"cuarto darken-2"},[e(o.OQ,{staticClass:"white--text text-xs-center text-uppercase"},[t._v("====== Sistema de Gestion Integral para Emision de Turnos ======")])],1)],1),e(u.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[e(s.A,{staticClass:"cuarto darken-1"},[e(o.OQ,{staticClass:"white--text text-xs-center"},[t._v("====== ====== BUSCAR TURNOS ====== ======")])],1),e(s.A,{staticClass:"elevation-6 grey lighten-2"},[e(u.A,{attrs:{"xs-12":""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.buscar.apply(null,arguments)}}},[e("formFiltroPaciente",{attrs:{filtro:t.filtroTurnoPacientes}})],1),e(o.SL,[e(p.A,{attrs:{row:"",wrap:""}},[e(i.A,{staticClass:"white--text terciary darken-1",attrs:{round:"",to:{name:"TurneroEmitir"},disabled:t.loading.estado,loading:t.loading.estado}},[e(h.A,{attrs:{color:"white",left:""}},[t._v("fas fa-receipt")]),t._v("Emitir Nuevo Turno")],1),e(f.hc),e(f.hc),e(f.hc),e(i.A,{staticClass:"white--text cuarto darken-2",attrs:{round:"",disabled:t.loading.estado,loading:t.loading.estado},on:{click:function(e){return t.buscar()}}},[t._v(" Buscar"),e(h.A,{attrs:{color:"white",right:""}},[t._v("search")])],1),e(f.hc)],1)],1)],1)],1),e(u.A,{attrs:{"pa-1":"","ma-1":"",terciary:"","lighten-1":"",xs12:""}},[e(n.A,{staticClass:"title text-capitalize terciary elevation-6"},[e(h.A,{attrs:{medium:"",left:"",color:"white"}},[t._v("fas fa-receipt")]),t._v(" Turnos "),e(f.hc),e(d.A,{staticClass:"mx-2",attrs:{inset:"",vertical:"",color:"white"}}),e(g.W,{staticClass:"input__text--color",staticStyle:{"--color":"white"},attrs:{"append-icon":"search",label:"Filtrar","single-line":"","hide-details":"",color:"grey lighten-3"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e(c.A,{staticClass:"elevation-6",staticStyle:{"table-layout":"fixed"},attrs:{id:"tablita",headers:t.headers,items:t.listTurnos,"item-key":"_id",pagination:t.paginacion,"rows-per-page-items":[5,10,25,50],loading:t.loading.estado,search:t.search},on:{"update:pagination":function(e){t.paginacion=e}},scopedSlots:t._u([{key:"no-data",fn:function(){return[e(r.A,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[t._v(" No hay datos para mostrar. ")])]},proxy:!0},{key:"no-results",fn:function(){return[e(r.A,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[t._v(' No se encontraron resultados para "'+t._s(t.search)+'". ')])]},proxy:!0},{key:"items",fn:function(a){return[e("tr",{class:t.backgroundClass(a.item)},[e("td",{staticClass:"text-sm-left"},[t._v(t._s(a.item.fecha.substring(0,10)))]),e("td",{staticClass:"text-sm-left"},[t._v(t._s(t.mostrarExiste(a.item.horario,"0")))]),e("td",{staticClass:"text-capitalize text-sm-left"},[t._v(" "+t._s(t.mostrarExiste(a.item.uas,"area"))+" ")]),e("td",{staticClass:"text-capitalize text-sm-left"},[t._v(" "+t._s(t.mostrarExiste(a.item.profesional,"nombreC"))+" ")]),e("td",{staticClass:"text-capitalize text-sm-left"},[t._v(t._s(a.item.especialidad))]),e("td",{staticClass:"text-capitalize text-sm-left"},[t._v(t._s(a.item.fase))]),e("td",{staticClass:"text-capitalize text-sm-center"},[t._v(" "+t._s(t.mostrarExiste(a.item.derivado,"area")?t.mostrarExiste(a.item.derivado,"area"):"-----")+" ")])])]}}])},[e(m.A,{attrs:{color:"blue",indeterminate:""}})],1)],1)],1)],1)},y=[],x=a(95353),_=a(28597),k=function(){var t=this,e=t._self._c;return e(p.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(u.A,{attrs:{xs12:"","px-2":""}},[e(_.A,{staticClass:"capitalizar",attrs:{clearable:"","background-color":"cuarto lighten-5","item-value":"id","item-text":"nombreDocumento",items:t.pacientesDB,label:"Apellido, Nombre del Paciente (Documento)","prepend-icon":"personal_injury",color:"cuarto"},model:{value:t.filtro.paciente,callback:function(e){t.$set(t.filtro,"paciente",e)},expression:"filtro.paciente"}})],1),e(u.A,{attrs:{xs12:"",sm6:""}},[e("dateSelect",{staticClass:"capitalizar",attrs:{value:t.filtro.fechaDesde,"background-color":"cuarto lighten-5",color:"cuarto",label:"Fecha Desde",icon:"event",clearable:!0},model:{value:t.filtro.fechaDesde,callback:function(e){t.$set(t.filtro,"fechaDesde",e)},expression:"filtro.fechaDesde"}})],1),e(u.A,{attrs:{xs12:"",sm6:"","px-2":""}},[e(_.A,{staticClass:"capitalizar",attrs:{clearable:"","background-color":"cuarto lighten-5",color:"cuarto",items:t.especialidades,"item-text":"nombre","item-value":"nombre",label:"Especialidad","prepend-icon":"work"},model:{value:t.filtro.especialidad,callback:function(e){t.$set(t.filtro,"especialidad",e)},expression:"filtro.especialidad"}})],1)],1)},T=[],A=a(69006);const b={name:"formFiltroPaciente",props:["filtro"],components:{dateSelect:A.A},data(){return{especialidades:[],pacientesDB:[]}},computed:{},async created(){this.especialidades=await this.returnConfig("profEspecialidades")||[],this.pacientesDB=await this.cargarPacientesBusqueda()},methods:{...(0,x.i0)(["returnConfig"]),...(0,x.i0)("paciente",["cargarPacientesBusqueda"])}},w=b;var C=a(81656),E=(0,C.A)(w,k,T,!1,null,null,null);const S=E.exports,D={name:"turneroBuscar",components:{formFiltroPaciente:S},data:()=>({paginacion:{sortBy:"fecha",descending:!0,rowsPerPage:10,page:1},search:"",headers:[{text:"Fecha",value:"fecha",width:"15%"},{text:"Horario",value:"horario[0]",width:"1%"},{text:"Unidad Atencion",value:"uas.area",width:"15%"},{text:"Profesional",value:"profesional.nombreC",width:"20%"},{text:"Especialidad",value:"especialidad",width:"10%"},{text:"Fase",value:"fase",width:"15%"},{text:"Derivado de..",value:"derivado.area",width:"15%"}],filtroTurnoPacientes:{fechaDesde:"",paciente:"",especialidad:""},listTurnos:[]}),computed:{...(0,x.aH)(["APIURL","axiosConfig","loading","hoy"])},created(){},async mounted(){this.filtroTurnoPacientes.fechaDesde=this.hoy},methods:{...(0,x.PY)(["mostrarLoading","ocultarLoading","mostrarError"]),backgroundClass(t){if(!t)return"";try{return"espera atencion"===t.fase?"background-color: grey lighten-4":"asistio"===t.fase?"background-color: green lighten-3":"no asistio"===t.fase?"background-color: error lighten-4":"reprogramado personal"===t.fase||"reprogramado institucional"===t.fase?"background-color: yellow lighten-4":""}catch(e){return""}},mostrarExiste(t,e){if(!t)return"numero_hist"===e?"Sin Registrar":"";try{return t[e]}catch(a){return""}},async buscar(){let t=this._cloneDeep(this.filtroTurnoPacientes);if(t.paciente&&""!==t.paciente){for(const e in t)t.hasOwnProperty(e)&&(""!==t[e]&&null!==t[e]||delete t[e]);t=JSON.stringify(t);try{this.mostrarLoading({titulo:"Cargando turnos...",color:"primary"});let a=await this.axios.get(this.APIURL+"/turnos/buscar?filtro="+t,this.axiosConfig);if(a.data.ok)this.listTurnos=a.data.turnos,this.paginacion.page>Math.ceil(this.listTurnos.length/this.paginacion.rowsPerPage)&&(this.paginacion.page=1);else try{this.mostrarError({errores:"",mensaje:a.data.err.message,titulo:a.status})}catch(e){this.mostrarError({errores:"",mensaje:"Problemas con el servidor, Intente mas tarde.",titulo:500})}}catch(e){try{this.mostrarError({errores:e.response.data.err.errors,mensaje:e.response.data.err.message,titulo:e.response.status})}catch(e){this.mostrarError({errores:"",mensaje:"Problemas con el servidor, Intente mas tarde.",titulo:500})}}finally{this.ocultarLoading()}}else this.mostrarError({errores:"",mensaje:"Los datos del PACIENTE son requeridos para realizar la Busqueda.",titulo:"Valores Requeridos."})}}},P=D;var $=(0,C.A)(P,v,y,!1,null,null,null);const F=$.exports},42437:(t,e,a)=>{a.r(e),a.d(e,{default:()=>_t});var r=a(55669),i=a(72006),s=a(677),o=a(47971),n=a(62893),l=a(97466);const c=n.Ay.extend({name:"times",props:{now:{type:String,validator:l.xw}},data:function(){return{times:{now:(0,l.EH)("0000-00-00 00:00"),today:(0,l.EH)("0000-00-00")}}},computed:{parsedNow:function(){return this.now?(0,l.EH)(this.now):null}},watch:{parsedNow:"updateTimes"},created:function(){this.updateTimes(),this.setPresent()},methods:{setPresent:function(){this.times.now.present=this.times.today.present=!0,this.times.now.past=this.times.today.past=!1,this.times.now.future=this.times.today.future=!1},updateTimes:function(){var t=this.parsedNow||this.getNow();this.updateDay(t,this.times.now),this.updateTime(t,this.times.now),this.updateDay(t,this.times.today)},getNow:function(){return(0,l._U)(new Date)},updateDay:function(t,e){t.date!==e.date&&(e.year=t.year,e.month=t.month,e.day=t.day,e.weekday=t.weekday,e.date=t.date)},updateTime:function(t,e){t.time!==e.time&&(e.hour=t.hour,e.minute=t.minute,e.time=t.time)}}});function d(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const u=n.Ay.extend({name:"mouse",methods:{getDefaultMouseEventHandlers:function(t,e){var a;return this.getMouseEventHandlers((a={},d(a,"click"+t,{event:"click"}),d(a,"contextmenu"+t,{event:"contextmenu",prevent:!0,result:!1}),d(a,"mousedown"+t,{event:"mousedown"}),d(a,"mousemove"+t,{event:"mousemove"}),d(a,"mouseup"+t,{event:"mouseup"}),d(a,"mouseenter"+t,{event:"mouseenter"}),d(a,"mouseleave"+t,{event:"mouseleave"}),d(a,"touchstart"+t,{event:"touchstart"}),d(a,"touchmove"+t,{event:"touchmove"}),d(a,"touchend"+t,{event:"touchend"}),a),e)},getMouseEventHandlers:function(t,e){var a=this,r={},i=function(i){var s=t[i];if(!a.$listeners[i])return"continue";var o=s.passive?"&":(s.once?"~":"")+(s.capture?"!":""),n=o+s.event,l=function(t){var r=t;return(void 0===s.button||r.buttons>0&&r.button===s.button)&&(s.prevent&&t.preventDefault(),s.stop&&t.stopPropagation(),a.$emit(i,e(t))),s.result};n in r?Array.isArray(r[n])?r[n].push(l):r[n]=[r[n],l]:r[n]=l};for(var s in t)i(s);return r}}}),h={base:{start:{type:String,validate:l.xw,default:function(){return(0,l._U)(new Date).date}},end:{type:String,validate:l.xw,default:"0000-00-00"},weekdays:{type:Array,default:function(){return[0,1,2,3,4,5,6]}},hideHeader:{type:Boolean,default:!1},shortWeekdays:{type:Boolean,default:!0},weekdayFormat:{type:Function,default:null},dayFormat:{type:Function,default:null},locale:{type:String,default:"en-us"}},intervals:{maxDays:{type:Number,default:7},shortIntervals:{type:Boolean,default:!0},intervalHeight:{type:[Number,String],default:40,validate:p},intervalMinutes:{type:[Number,String],default:60,validate:p},firstInterval:{type:[Number,String],default:0,validate:p},intervalCount:{type:[Number,String],default:24,validate:p},intervalFormat:{type:Function,default:null},intervalStyle:{type:Function,default:null},showIntervalLabel:{type:Function,default:null}},weeks:{minWeeks:{validate:p,default:1},shortMonths:{type:Boolean,default:!0},showMonthOnFirst:{type:Boolean,default:!0},monthFormat:{type:Function,default:null}},calendar:{type:{type:String,default:"month"},value:{type:String,validate:l.xw}}};function p(t){return isFinite(parseInt(t))}const m=(0,i.A)(o.A,s.A,c,u).extend({name:"calendar-base",props:h.base,computed:{weekdaySkips:function(){return(0,l.HV)(this.weekdays)},parsedStart:function(){return(0,l.EH)(this.start)},parsedEnd:function(){return(0,l.EH)(this.end)},days:function(){return(0,l.pM)(this.parsedStart,this.parsedEnd,this.times.today,this.weekdaySkips)},dayFormatter:function(){if(this.dayFormat)return this.dayFormat;var t={timeZone:"UTC",day:"numeric"};return(0,l.co)(this.locale,(function(e,a){return t}))},weekdayFormatter:function(){if(this.weekdayFormat)return this.weekdayFormat;var t={timeZone:"UTC",weekday:"long"},e={timeZone:"UTC",weekday:"short"};return(0,l.co)(this.locale,(function(a,r){return r?e:t}))}},methods:{getRelativeClasses:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{"v-present":t.present,"v-past":t.past,"v-future":t.future,"v-outside":e}},getStartOfWeek:function(t){return(0,l.mK)(t,this.weekdays,this.times.today)},getEndOfWeek:function(t){return(0,l.to)(t,this.weekdays,this.times.today)}}});var f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t};function g(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}const v=m.extend({name:"v-calendar-weekly",props:h.weeks,computed:{staticClass:function(){return"v-calendar-weekly"},classes:function(){return this.themeClasses},parsedMinWeeks:function(){return parseInt(this.minWeeks)},days:function(){var t=this.parsedMinWeeks*this.weekdays.length,e=this.getStartOfWeek(this.parsedStart),a=this.getEndOfWeek(this.parsedEnd);return(0,l.pM)(e,a,this.times.today,this.weekdaySkips,Number.MAX_SAFE_INTEGER,t)},todayWeek:function(){var t=this.times.today,e=this.getStartOfWeek(t),a=this.getEndOfWeek(t);return(0,l.pM)(e,a,t,this.weekdaySkips,this.weekdays.length,this.weekdays.length)},monthFormatter:function(){if(this.monthFormat)return this.monthFormat;var t={timeZone:"UTC",month:"long"},e={timeZone:"UTC",month:"short"};return(0,l.co)(this.locale,(function(a,r){return r?e:t}))}},methods:{isOutside:function(t){var e=(0,l.We)(t);return e<(0,l.We)(this.parsedStart)||e>(0,l.We)(this.parsedEnd)},genHead:function(){return this.$createElement("div",{staticClass:"v-calendar-weekly__head"},this.genHeadDays())},genHeadDays:function(){return this.todayWeek.map(this.genHeadDay)},genHeadDay:function(t,e){var a=this.isOutside(this.days[e]),r=t.present?this.color:void 0;return this.$createElement("div",this.setTextColor(r,{key:t.date,staticClass:"v-calendar-weekly__head-weekday",class:this.getRelativeClasses(t,a)}),this.weekdayFormatter(t,this.shortWeekdays))},genWeeks:function(){for(var t=this.days,e=this.weekdays.length,a=[],r=0;r<t.length;r+=e)a.push(this.genWeek(t.slice(r,r+e)));return a},genWeek:function(t){return this.$createElement("div",{key:t[0].date,staticClass:"v-calendar-weekly__week"},t.map(this.genDay))},genDay:function(t){var e=this.isOutside(t),a=this.$scopedSlots.day,r=f({outside:e},t),i=1===t.day&&this.showMonthOnFirst;return this.$createElement("div",{key:t.date,staticClass:"v-calendar-weekly__day",class:this.getRelativeClasses(t,e),on:this.getDefaultMouseEventHandlers(":day",(function(e){return t}))},[this.genDayLabel(t),i?this.genDayMonth(t):"",a?a(r):""])},genDayLabel:function(t){var e=t.present?this.color:void 0,a=this.$scopedSlots.dayLabel;return this.$createElement("div",this.setTextColor(e,{staticClass:"v-calendar-weekly__day-label",on:this.getMouseEventHandlers({"click:date":{event:"click",stop:!0},"contextmenu:date":{event:"contextmenu",stop:!0,prevent:!0,result:!1}},(function(e){return t}))}),a?a(t):this.dayFormatter(t,!1))},genDayMonth:function(t){var e=t.present?this.color:void 0,a=this.$scopedSlots.dayMonth;return this.$createElement("div",this.setTextColor(e,{staticClass:"v-calendar-weekly__day-month"}),a?a(t):this.monthFormatter(t,this.shortMonths))}},render:function(t){return t("div",{staticClass:this.staticClass,class:this.classes,nativeOn:{dragstart:function(t){t.preventDefault()}}},[this.hideHeader?"":this.genHead()].concat(g(this.genWeeks())))}}),y=v.extend({name:"v-calendar-monthly",computed:{staticClass:function(){return"v-calendar-monthly v-calendar-weekly"},parsedStart:function(){return(0,l.Mw)((0,l.EH)(this.start))},parsedEnd:function(){return(0,l.Xf)((0,l.EH)(this.end))}}});var x=a(27250);const _=m.extend({name:"calendar-with-intervals",props:h.intervals,computed:{parsedFirstInterval:function(){return parseInt(this.firstInterval)},parsedIntervalMinutes:function(){return parseInt(this.intervalMinutes)},parsedIntervalCount:function(){return parseInt(this.intervalCount)},parsedIntervalHeight:function(){return parseFloat(this.intervalHeight)},firstMinute:function(){return this.parsedFirstInterval*this.parsedIntervalMinutes},bodyHeight:function(){return this.parsedIntervalCount*this.parsedIntervalHeight},days:function(){return(0,l.pM)(this.parsedStart,this.parsedEnd,this.times.today,this.weekdaySkips,this.maxDays)},intervals:function(){var t=this.days,e=this.parsedFirstInterval,a=this.parsedIntervalMinutes,r=this.parsedIntervalCount,i=this.times.now;return t.map((function(t){return(0,l.aS)(t,e,a,r,i)}))},intervalFormatter:function(){if(this.intervalFormat)return this.intervalFormat;var t={timeZone:"UTC",hour12:!0,hour:"2-digit",minute:"2-digit"},e={timeZone:"UTC",hour12:!0,hour:"numeric",minute:"2-digit"},a={timeZone:"UTC",hour12:!0,hour:"numeric"};return(0,l.co)(this.locale,(function(r,i){return i?0===r.minute?a:e:t}))}},methods:{showIntervalLabelDefault:function(t){var e=this.intervals[0][0],a=e.hour===t.hour&&e.minute===t.minute;return!a&&0===t.minute},intervalStyleDefault:function(t){},getTimestampAtEvent:function(t,e){var a=(0,l.ch)(e),r=t.currentTarget.getBoundingClientRect(),i=this.firstMinute,s=t,o=t,n=s.changedTouches||s.touches,c=n&&n[0]?n[0].clientY:o.clientY,d=(c-r.top)/this.parsedIntervalHeight,u=Math.floor(d*this.parsedIntervalMinutes),h=i+u;return(0,l.tY)(a,h,this.times.now)},getSlotScope:function(t){var e=(0,l.ch)(t);return e.timeToY=this.timeToY,e.minutesToPixels=this.minutesToPixels,e},scrollToTime:function(t){var e=this.timeToY(t),a=this.$refs.scrollArea;return!(!1===e||!a)&&(a.scrollTop=e,!0)},minutesToPixels:function(t){return t/this.parsedIntervalMinutes*this.parsedIntervalHeight},timeToY:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=(0,l.pe)(t);if(!1===a)return!1;var r=this.firstMinute,i=this.parsedIntervalCount*this.parsedIntervalMinutes,s=(a-r)/i,o=s*this.bodyHeight;return e&&(o<0&&(o=0),o>this.bodyHeight&&(o=this.bodyHeight)),o}}});var k=a(69463),T=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t};function A(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}const b=_.extend({name:"v-calendar-daily",directives:{Resize:x.A},data:function(){return{scrollPush:0}},computed:{classes:function(){return T({"v-calendar-daily":!0},this.themeClasses)}},mounted:function(){this.init()},methods:{init:function(){this.$nextTick(this.onResize)},onResize:function(){this.scrollPush=this.getScrollPush()},getScrollPush:function(){var t=this.$refs.scrollArea,e=this.$refs.pane;return t&&e?t.offsetWidth-e.offsetWidth:0},genHead:function(){return this.$createElement("div",{staticClass:"v-calendar-daily__head",style:{marginRight:this.scrollPush+"px"}},[this.genHeadIntervals()].concat(A(this.genHeadDays())))},genHeadIntervals:function(){return this.$createElement("div",{staticClass:"v-calendar-daily__intervals-head"})},genHeadDays:function(){return this.days.map(this.genHeadDay)},genHeadDay:function(t){var e=this,a=this.$scopedSlots.dayHeader;return this.$createElement("div",{key:t.date,staticClass:"v-calendar-daily_head-day",class:this.getRelativeClasses(t),on:this.getDefaultMouseEventHandlers(":day",(function(a){return e.getSlotScope(t)}))},[this.genHeadWeekday(t),this.genHeadDayLabel(t),a?a(t):""])},genHeadWeekday:function(t){var e=t.present?this.color:void 0;return this.$createElement("div",this.setTextColor(e,{staticClass:"v-calendar-daily_head-weekday"}),this.weekdayFormatter(t,this.shortWeekdays))},genHeadDayLabel:function(t){var e=t.present?this.color:void 0;return this.$createElement("div",this.setTextColor(e,{staticClass:"v-calendar-daily_head-day-label",on:this.getMouseEventHandlers({"click:date":{event:"click",stop:!0},"contextmenu:date":{event:"contextmenu",stop:!0,prevent:!0,result:!1}},(function(e){return t}))}),this.dayFormatter(t,!1))},genBody:function(){return this.$createElement("div",{staticClass:"v-calendar-daily__body"},[this.genScrollArea()])},genScrollArea:function(){return this.$createElement("div",{ref:"scrollArea",staticClass:"v-calendar-daily__scroll-area"},[this.genPane()])},genPane:function(){return this.$createElement("div",{ref:"pane",staticClass:"v-calendar-daily__pane",style:{height:(0,k.Dg)(this.bodyHeight)}},[this.genDayContainer()])},genDayContainer:function(){return this.$createElement("div",{staticClass:"v-calendar-daily__day-container"},[this.genBodyIntervals()].concat(A(this.genDays())))},genDays:function(){return this.days.map(this.genDay)},genDay:function(t,e){var a=this,r=this.$scopedSlots.dayBody,i=this.getSlotScope(t);return this.$createElement("div",{key:t.date,staticClass:"v-calendar-daily__day",class:this.getRelativeClasses(t),on:this.getDefaultMouseEventHandlers(":time",(function(e){return a.getSlotScope(a.getTimestampAtEvent(e,t))}))},[].concat(A(this.genDayIntervals(e)),[r?r(i):""]))},genDayIntervals:function(t){return this.intervals[t].map(this.genDayInterval)},genDayInterval:function(t){var e=(0,k.Dg)(this.intervalHeight),a=this.intervalStyle||this.intervalStyleDefault,r=this.$scopedSlots.interval,i=this.getSlotScope(t),s={key:t.time,staticClass:"v-calendar-daily__day-interval",style:T({height:e},a(t))},o=r?r(i):void 0;return this.$createElement("div",s,o)},genBodyIntervals:function(){var t=this,e={staticClass:"v-calendar-daily__intervals-body",on:this.getDefaultMouseEventHandlers(":interval",(function(e){return t.getTimestampAtEvent(e,t.parsedStart)}))};return this.$createElement("div",e,this.genIntervalLabels())},genIntervalLabels:function(){return this.intervals[0].map(this.genIntervalLabel)},genIntervalLabel:function(t){var e=(0,k.Dg)(this.intervalHeight),a=this.shortIntervals,r=this.showIntervalLabel||this.showIntervalLabelDefault,i=r(t),s=i?this.intervalFormatter(t,a):void 0;return this.$createElement("div",{key:t.time,staticClass:"v-calendar-daily__interval",style:{height:e}},[this.$createElement("div",{staticClass:"v-calendar-daily__interval-text"},s)])}},render:function(t){return t("div",{class:this.classes,nativeOn:{dragstart:function(t){t.preventDefault()}},directives:[{modifiers:{quiet:!0},name:"resize",value:this.onResize}]},[this.hideHeader?"":this.genHead(),this.genBody()])}});var w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t};const C=m.extend({name:"v-calendar",props:w({},h.calendar,h.weeks,h.intervals),data:function(){return{lastStart:null,lastEnd:null}},computed:{parsedValue:function(){return(0,l.EH)(this.value)||this.parsedStart||this.times.today},renderProps:function(){var t=this.parsedValue,e="div",a=this.maxDays,r=t,i=t;switch(this.type){case"month":e=y,r=(0,l.Mw)(t),i=(0,l.Xf)(t);break;case"week":e=b,r=this.getStartOfWeek(t),i=this.getEndOfWeek(t),a=7;break;case"day":e=b,a=1;break;case"4day":e=b,i=(0,l.gG)((0,l.ch)(i),l.s_,4),(0,l.MF)(i),a=4;break;case"custom-weekly":e=v,r=this.parsedStart||t,i=this.parsedEnd;break;case"custom-daily":e=b,r=this.parsedStart||t,i=this.parsedEnd;break}return{component:e,start:r,end:i,maxDays:a}}},watch:{renderProps:"checkChange"},methods:{checkChange:function(){var t=this.renderProps,e=t.start,a=t.end;e===this.lastStart&&a===this.lastEnd||(this.lastStart=e,this.lastEnd=a,this.$emit("change",{start:e,end:a}))},move:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=(0,l.ch)(this.parsedValue),a=t>0,r=a?l.s_:l.S7,i=a?l.mG:l.O9,s=a?t:-t;while(--s>=0)switch(this.type){case"month":e.day=i,r(e);break;case"week":(0,l.gG)(e,r,l.f9);break;case"day":r(e);break;case"4day":(0,l.gG)(e,r,4);break}(0,l.uZ)(e),(0,l.MF)(e),(0,l.G6)(e,this.times.now),this.$emit("input",e.date),this.$emit("moved",e)},next:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.move(t)},prev:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.move(-t)},timeToY:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this.$children[0];return!(!a||!a.timeToY)&&a.timeToY(t,e)},minutesToPixels:function(t){var e=this.$children[0];return e&&e.minutesToPixels?e.minutesToPixels(t):-1},scrollToTime:function(t){var e=this.$children[0];return!(!e||!e.scrollToTime)&&e.scrollToTime(t)}},render:function(t){var e=this,a=this.renderProps,r=a.start,i=a.end,s=a.maxDays,o=a.component;return t(o,{staticClass:"v-calendar",props:w({},this.$props,{start:r.date,end:i.date,maxDays:s}),on:w({},this.$listeners,{"click:date":function(t){e.$listeners["input"]&&e.$emit("input",t.date),e.$listeners["click:date"]&&e.$emit("click:date",t)}}),scopedSlots:this.$scopedSlots})}});var E=a(15852),S=a(1899),D=a(37471),P=a(48122),$=a(52111),F=a(16251),I=a(41614),M=a(59594),L=a(46227),H=a(69155),N=a(34917),O=a(55731),j=a(66816),R=a(52540),z=function(){var t=this,e=t._self._c;return e(P.A,{attrs:{fluid:"","grid-list-xs":""}},[e(H.A,{attrs:{"align-center":"","justify-center":"","ma-0":"",wrap:"","text-xs-center":""}},[e(I.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[e(E.A,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[e(S.OQ,{staticClass:"px-0 text-uppercase"},[t._v("====== Sistema de Gestion Integral para Emision de Turnos ======")])],1)],1),e(I.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[e(E.A,{staticClass:"white--text",attrs:{color:"cuarto darken-1"}},[e(S.OQ,{staticClass:"px-0 text-uppercase"},[t._v("====== ====== Gestionar Turnos ====== ======")])],1),e(E.A,{staticClass:"elevation-6",attrs:{color:"grey lighten-2"}},[e(S.OQ,{staticClass:"px-0"},[e(H.A,{attrs:{row:"",wrap:""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.buscar.apply(null,arguments)}}},[e(I.A,{attrs:{xs12:""}},[e("formFiltroProfesional",{attrs:{filtro:t.busqueda}})],1)],1)],1),e(H.A,{attrs:{wrap:""}},[e(r.A,{staticClass:"white--text",attrs:{round:"",to:{name:"TurneroBuscar"},color:"terciary darken-1",disabled:t.loading.estado,loading:t.loading.estado}},[e(L.A,{attrs:{color:"white",left:""}},[t._v("person")]),t._v("Buscar Turno De Paciente")],1),e(O.hc),e(O.hc),e(O.hc),e(r.A,{staticClass:"white--text",attrs:{round:"",color:"cuarto darken-2",disabled:t.loading.estado,loading:t.loading.estado},on:{click:function(e){return t.buscar()}}},[t._v(" Buscar"),e(L.A,{attrs:{color:"white",right:""}},[t._v("search")])],1),e(O.hc)],1)],1)],1),e(I.A,{attrs:{"pa-1":"","ma-1":"",terciary:"","lighten-1":"",xs12:""}},[e(D.A,{staticClass:"body-2 text-capitalize terciary darken-1 elevation-6"},[e(L.A,{attrs:{large:"",color:"white"}},[t._v("event_note")]),e(F.A,{staticClass:"mx-2 my-1 white",attrs:{vertical:""}}),e("h1",{staticStyle:{color:"white"}},[t._v(" "+t._s(t.today.split("-")[0])+" - "+t._s(t.mesFullNames[t.today.split("-")[1]-1])+" ")]),e(F.A,{staticClass:"mx-2 my-1 white",attrs:{vertical:""}}),e("h1",{staticStyle:{color:"white"}},[t._v(t._s(t.filtro.especialidad))]),e(O.hc),"ADMIN_ROLE"===t.persona.role?e(r.A,{staticClass:"white--text",attrs:{round:"",to:{name:"OpcionesProfesionales"},color:"terciary",disabled:t.loading.estado,loading:t.loading.estado}},[e(L.A,{attrs:{color:"white",left:""}},[t._v("fas fa-user-tie")]),t._v("Registrar Nuevo Profesional")],1):t._e(),e(r.A,{staticClass:"white--text",attrs:{round:"",color:"terciary",disabled:t.loading.estado||t.persona.turnero<2,loading:t.loading.estado},on:{click:function(e){return t.actualizarDialogPaciente({state:!0})}}},[e(L.A,{attrs:{color:"white",left:""}},[t._v("person_add")]),t._v("Alta Paciente")],1)],1),e(N.A,{attrs:{outlined:""}},[e(C,{ref:"calendar",attrs:{now:t.today,value:t.today,"short-weekdays":!1,"short-months":!1,type:"month",color:"terciary",locale:"es-ar",weekdays:[0,1,2,3,4,5,6]},scopedSlots:t._u([{key:"day",fn:function({date:a}){return[t._l(t.turnos[a],(function(r){return[e("div",t._g({directives:[{def:R.A,name:"ripple",rawName:"v-ripple"}],key:`${a}-${r._id}`,staticClass:"calendar-profesional",domProps:{innerHTML:t._s(r.nombreC)},on:{click:function(e){return t.openFecha(a,r)}}},t.on))]}))]}}])})],1),e(H.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",terciary:"","lighten-2":""}},[e(O.hc),e(r.A,{attrs:{disabled:-1===t.paginaCalendario},on:{click:t.anteriorCalendario}},[e(L.A,{attrs:{dark:"",left:""}},[t._v(" keyboard_arrow_left ")]),t._v(" Anterior ")],1),e(O.hc),e(r.A,{attrs:{disabled:1===t.paginaCalendario},on:{click:t.siguienteCalendario}},[t._v(" Siguiente "),e(L.A,{attrs:{right:"",dark:""}},[t._v(" keyboard_arrow_right ")])],1),e(O.hc)],1)],1),e($.A,{attrs:{"max-width":"80%",persistent:"",scrollable:""},model:{value:t.dialogFecha,callback:function(e){t.dialogFecha=e},expression:"dialogFecha"}},[e(E.A,{attrs:{color:"grey lighten-4","min-width":"350px",flat:""}},[e(D.A,[e(H.A,{attrs:{grey:"","lighten-2":"",wrap:""}},[e("span",{staticClass:"display-1 font-weight-bold text-capitalize"},[t._v("Profesional: "+t._s(t.turnoClickeado.profesional.nombreC))]),e(O.hc),e(j.A,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(r.A,t._g({attrs:{icon:"",disabled:t.loading.estado,loading:t.loading.estado,color:"error darken-1"},on:{click:t.closeFecha}},a),[e(L.A,{attrs:{large:""}},[t._v("cancel")])],1)]}}])},[e("span",[t._v("Cerrar")])])],1)],1),e(H.A,{attrs:{wrap:""}},[e(I.A,{attrs:{xs0:"",sm1:""}}),e(I.A,{attrs:{xs12:"",sm11:"","px-2":""}},[e("kbd",{staticClass:"display-1 font-weight-medium text-capitalize terciary--text text--lighten-3"},[t._v(" "+t._s(new Date(t.turnoClickeado.fecha).toLocaleString("es-AR",{weekday:"long",year:"numeric",month:"long",day:"numeric",timeZone:"UTC"}))+" ")])])],1),e(S.OQ,[e("cardHorarios",{attrs:{fecha:t.turnoClickeado.fecha,especialidades:t.turnoClickeado.profesional.especialidades,profesional:t.turnoClickeado.profesional.nombreC,turnosActivos:t.turnosActivos,openTurno:t.openTurno,guardarTurno:t.guardarTurno,eliminarTurno:t.eliminarTurno}})],1)],1)],1),e($.A,{attrs:{"max-width":"65%",persistent:"",scrollable:""},model:{value:t.dialogTurno,callback:function(e){t.dialogTurno=e},expression:"dialogTurno"}},[e(E.A,{attrs:{color:"grey lighten-4","min-width":"350px","max-height":"700",flat:""}},[e(D.A,[e(H.A,{attrs:{grey:"","lighten-2":"",wrap:""}},[e("span",{staticClass:"display-1 font-weight-bold text-capitalize"},[t._v(t._s(t.turnoNuevo?"Emitir Turno":"Editar Turno"))]),e(O.hc),e(j.A,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(r.A,t._g({attrs:{icon:"",disabled:t.loading.estado,loading:t.loading.estado,color:"error darken-1"},on:{click:t.closeTurno}},a),[e(L.A,{attrs:{large:""}},[t._v("cancel")])],1)]}}])},[e("span",[t._v("Cerrar")])])],1)],1),e(H.A,{attrs:{wrap:""}},[e(I.A,{attrs:{xs0:"",sm1:""}}),e(I.A,{attrs:{xs12:"",sm11:"","px-2":""}},[e("kbd",{staticClass:"display-1 font-weight-medium text-capitalize terciary--text text--lighten-3"},[t._v(" "+t._s(new Date(t.turnoClickeado.fecha).toLocaleString("es-AR",{weekday:"long",year:"numeric",month:"long",day:"numeric",timeZone:"UTC"}))+" ")])])],1),e(S.OQ,[e(M.A,{ref:"formTurno",attrs:{"lazy-validation":""},model:{value:t.turnoValido,callback:function(e){t.turnoValido=e},expression:"turnoValido"}},[e("formTurno",{attrs:{generarTurno:t.generarTurno,pacientesDB:t.pacientesDB}})],1)],1),e(S.SL,[e(H.A,{attrs:{row:"",wrap:""}},[e(r.A,t._g({staticClass:"white--text terciary darken-1",attrs:{round:"",disabled:t.loading.estado||t.persona.turnero<2,loading:t.loading.estado},on:{click:function(e){return t.actualizarDialogPaciente({state:!0,id:t.generarTurno.paciente})}}},t.on),[t._v(t._s(t.generarTurno.paciente?"Editar Paciente":"Alta Nuevo Paciente"))]),e(O.hc),e(j.A,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(r.A,t._g({staticClass:"error darken-1",attrs:{round:"",disabled:t.loading.estado,loading:t.loading.estado},on:{click:t.closeTurno}},a),[t._v(" Cancelar ")])]}}])},[e("span",[t._v("Cancelar Operacion")])]),e(F.A,{staticClass:"mx-2 my-1 grey",attrs:{vertical:""}}),e(j.A,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(r.A,t._g({class:"white--text "+(t.turnoValido?"terciary darken-1":"error darken-4"),attrs:{round:"",disabled:t.loading.estado||t.persona.turnero<2||t.turnoClickeado.fecha<(new Date).toISOString().substring(0,10),loading:t.loading.estado},on:{click:function(e){return t.guardarTurno()}}},a),[t._v(" "+t._s(t.turnoNuevo?"Guardar":"Editar")+" ")])]}}])},[e("span",[t._v(t._s(t.turnoNuevo?"Guardar Turno":"Editar Turno"))])])],1)],1)],1)],1),e("dialogPaciente",{attrs:{closeFinish:t.closePaciente}})],1)],1)},B=[],U=a(95353),W=a(28597),q=function(){var t=this,e=t._self._c;return e("div",[e(H.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(I.A,{attrs:{xs0:"",sm3:"","px-3":""}}),e(I.A,{attrs:{xs12:"",sm6:"","px-3":""}},[e(W.A,{staticClass:"capitalizar",attrs:{clearable:"","background-color":"cuarto lighten-5",items:t.especialidades,"item-text":"nombre","item-value":"nombre",label:"Especialidad","prepend-icon":"work",color:"cuarto"},model:{value:t.filtro.especialidades.especialidad,callback:function(e){t.$set(t.filtro.especialidades,"especialidad",e)},expression:"filtro.especialidades.especialidad"}})],1),e(I.A,{attrs:{xs0:"",sm3:"","px-3":""}}),e(I.A,{attrs:{xs12:"",sm6:"","px-3":""}},[e(W.A,{staticClass:"capitalizar",attrs:{clearable:"","background-color":"cuarto lighten-5",items:t.unidadesAtencion,"item-text":"area","item-value":"id",label:"Unidad de Atencion Sanitaria","prepend-icon":"fa-house-medical-flag",color:"cuarto"},model:{value:t.filtro.especialidades.unidad_atencion,callback:function(e){t.$set(t.filtro.especialidades,"unidad_atencion",e)},expression:"filtro.especialidades.unidad_atencion"}})],1),e(I.A,{attrs:{xs12:"",sm6:"","px-3":""}},[e(W.A,{staticClass:"capitalizar",attrs:{clearable:"","background-color":"cuarto lighten-5","item-value":"id","item-text":"nombreC",items:t.profesionalesBusqueda,label:"Profesional (Apellido, Nombre)","prepend-icon":"fas fa-user-tie",color:"cuarto"},model:{value:t.filtro.id,callback:function(e){t.$set(t.filtro,"id",e)},expression:"filtro.id"}})],1)],1)],1)},Y=[];const V={name:"formFiltroProfesional",props:["filtro"],data(){return{especialidades:[],unidadesAtencion:[],profesionalesBusqueda:[]}},async mounted(){this.especialidades=await this.returnConfig("profEspecialidades")||[],this.unidadesAtencion=await this.buscarAreaFiltros({filtro:{uas:!0},populate:"no",select:"area"}),this.profesionalesBusqueda=await this.cargarProfesionales({select:"nombre apellido nombreC",local:!0,populate:!1})},computed:{},created(){},methods:{...(0,U.i0)(["returnConfig","cargarProfesionales"]),...(0,U.i0)(["cargarProfesionales"]),...(0,U.i0)("main",["buscarAreaFiltros"])}},G=V;var Z=a(81656),Q=(0,Z.A)(G,q,Y,!1,null,null,null);const X=Q.exports;var J=a(73769),K=a(96985),tt=a(66086),et=a(11210),at=function(){var t=this,e=t._self._c;return e(H.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},t._l(t.especialidades,(function(a,i){return e(H.A,{key:`especialidades-${i}`,class:i%2===0?"grey lighten-3":"",attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(I.A,{attrs:{xs12:"","px-2":""}},[e(H.A,{attrs:{row:"",wrap:""}},[e("div",{staticClass:"display-1 font-weight-medium text-capitalize"},[t._v(" "+t._s(a.especialidad)+" - "+t._s(a.unidad_atencion.area)+" ")])]),e(F.A)],1),e(I.A,{attrs:{xs12:"",sm3:"","px-2":""}}),e(I.A,{attrs:{xs12:"",sm6:"","px-2":""}},[e(W.A,{staticClass:"capitalizar",attrs:{readonly:"","background-color":"terciary lighten-2",items:t.turnos,label:"Duracion Turnos (Min)","prepend-icon":"update",color:"terciary"},model:{value:a.duracion_turno,callback:function(e){t.$set(a,"duracion_turno",e)},expression:"filaEspecial.duracion_turno"}})],1),e(I.A,{attrs:{xs12:"",sm3:"","px-2":""}}),t._l(a.dias_laborales,(function(i,s){return e(I.A,{key:`dia-${s}`,attrs:{xs12:"","px-2":""}},[e(H.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(I.A,{attrs:{xs12:"","px-2":""}},[e("h4",[t._v(t._s(t.diasFullNames.find((t=>t.valor===s)).label)+" - Horario de Atencion")]),e(F.A)],1),e(I.A,{attrs:{xs12:"","px-2":""}},[e("timeRange",{key:`diaRange-${s}`,attrs:{value:i,color:"terciary",readonly:!0,turno:a.duracion_turno}})],1),e(I.A,{attrs:{xs10:"","px-2":""}},[e(N.A,{attrs:{elevation:"2",height:t.heightDaily(i[0],i[1],a.duracion_turno,30)}},[e(C,{attrs:{color:"terciary",type:"day",locale:"es-ar","hide-header":!0,"interval-height":"40","interval-minutes":a.duracion_turno,"first-interval":t.intervalosTiempo(i[0],a.duracion_turno),"interval-count":t.intervalosTiempo(i[1],a.duracion_turno)-t.intervalosTiempo(i[0],a.duracion_turno)},scopedSlots:t._u([{key:"interval",fn:function({hour:i,minute:s}){return[e(H.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t.turnoTomado(i,s,a)?e(I.A,{class:`grey lighten-3\n                      ${t.colorFase[t.turnoTomado(i,s,a).fase]}\n                     text-xs-center title font-weight-medium text-capitalize`,staticStyle:{cursor:"pointer"},attrs:{xs11:"","px-2":""},on:{click:function(e){t.openTurno(t.horaMinuto(i,s,0),t.horaMinuto(i,s,a.duracion_turno),a.especialidad,a.unidad_atencion,a.duracion_turno,t.turnoTomado(i,s,a))}}},[t._v(" "+t._s(t.horaMinuto(i,s,0))+" ~ "+t._s(`${t.turnoTomado(i,s,a).nombreC} (${""!=t.turnoTomado(i,s,a).documentoC?t.turnoTomado(i,s,a).documentoC:"Documento"}) [Hist: ${""!=t.turnoTomado(i,s,a).historial?t.turnoTomado(i,s,a).historial:"Sin Dato"}]`)+" ")]):t.fecha>=t.hoy?e(I.A,{class:"grey lighten-3\n                    blue--text text--darken-4\n                     text-xs-center title font-weight-medium text-capitalize",staticStyle:{cursor:"pointer"},attrs:{xs11:"","px-2":""},on:{click:function(e){t.openTurno(t.horaMinuto(i,s,0),t.horaMinuto(i,s,a.duracion_turno),a.especialidad,a.unidad_atencion,a.duracion_turno,t.turnoTomado(i,s,a))}}},[t._v(" "+t._s(t.horaMinuto(i,s,0))+" ~ Disponible ")]):e(I.A,{class:"grey lighten-3\n                     error--text text--darken-4\n                     text-xs-center title font-weight-medium text-capitalize",staticStyle:{cursor:"pointer"},attrs:{xs11:"","px-2":""},on:{click:function(e){return t.openTurno()}}},[t._v(" "+t._s(t.horaMinuto(i,s,0))+" ~ No Disponible ")]),e(et.A,{attrs:{"open-on-hover":"",lazy:"","offset-x":"",dark:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(r.A,t._g({attrs:{color:"terciary",dark:"",icon:"",small:""}},a),[e(L.A,[t._v("more_vert")])],1)]}}],null,!0)},[t.turnoTomado(i,s,a)?e(J.A,[e(K.A,{on:{click:function(e){t.openTurno(t.horaMinuto(i,s,0),t.horaMinuto(i,s,a.duracion_turno),a.especialidad,a.unidad_atencion,a.duracion_turno,t.turnoTomado(i,s,a))}}},[e(tt.TR,{class:"grey lighten-3 terciary--text\n                        text--darken-1 text-xs-center title font-weight-medium text-capitalize"},[t._v(" "+t._s(t.horaMinuto(i,s,0))+" ~ "+t._s(t.fecha>=t.hoy?"Editar Turno":"Ver Turno"))])],1),e(K.A,{attrs:{disabled:"presente espera atencion"===t.turnoTomado(i,s,a).fase||t.soloLectura()},on:{click:function(e){t.guardarTurno({_id:t.turnoTomado(i,s,a).idTurno,fase:"presente espera atencion"})}}},[e(tt.TR,{class:"text-xs-center title font-weight-medium"},[t._v(" Presente Espera Atencion")])],1),e(K.A,{attrs:{disabled:"asistio"===t.turnoTomado(i,s,a).fase||t.soloLectura()},on:{click:function(e){t.guardarTurno({_id:t.turnoTomado(i,s,a).idTurno,fase:"asistio"})}}},[e(tt.TR,{class:"text-xs-center title font-weight-medium"},[t._v(" Asistio")])],1),e(K.A,{attrs:{disabled:"no asistio"===t.turnoTomado(i,s,a).fase||t.soloLectura()},on:{click:function(e){t.guardarTurno({_id:t.turnoTomado(i,s,a).idTurno,fase:"no asistio"})}}},[e(tt.TR,{class:"text-xs-center title font-weight-medium"},[t._v(" No Asistio")])],1),e(K.A,{attrs:{disabled:"reprogramado personal"===t.turnoTomado(i,s,a).fase||t.soloLectura()},on:{click:function(e){t.guardarTurno({_id:t.turnoTomado(i,s,a).idTurno,fase:"reprogramado personal"})}}},[e(tt.TR,{class:"text-xs-center title font-weight-medium"},[t._v(" Reprogramado Personal")])],1),e(K.A,{attrs:{disabled:"reprogramado institucional"===t.turnoTomado(i,s,a).fase||t.soloLectura()},on:{click:function(e){t.guardarTurno({_id:t.turnoTomado(i,s,a).idTurno,fase:"reprogramado institucional"})}}},[e(tt.TR,{class:"text-xs-center title font-weight-medium"},[t._v(" Reprogramado Institucional")])],1),e(K.A,{attrs:{disabled:t.soloLectura()},on:{click:function(e){t.eliminarTurno(t.turnoTomado(i,s,a).idTurno)}}},[e(tt.TR,{class:(t.soloLectura()?"":"grey lighten-3 error--text")+"\n                        text--darken-1 text-xs-center title font-weight-medium text-capitalize"},[t._v(" Eliminar Turno")])],1)],1):e(J.A,[e(K.A,{on:{click:function(e){t.openTurno(t.horaMinuto(i,s,0),t.horaMinuto(i,s,a.duracion_turno),a.especialidad,a.unidad_atencion,a.duracion_turno,t.turnoTomado(i,s,a))}}},[e(tt.TR,{class:`grey lighten-3 ${t.fecha>=t.hoy?"terciary--text":"error--text"}\n                        text--darken-1 text-xs-center title font-weight-medium text-capitalize`},[t._v(" "+t._s(t.horaMinuto(i,s,0))+" ~ "+t._s(t.fecha>=t.hoy?"Emitir Turno":"No Disponible"))])],1)],1)],1)],1)]}}],null,!0)})],1)],1)],1)],1)})),e(I.A,{attrs:{xs12:"","pa-2":"","mt-1":""}},[e(F.A)],1),e(H.A,[e(O.hc),e(r.A,{staticClass:"px-4 mx-2 white--text",attrs:{disabled:t.loading.estado,color:"terciary darken-2",round:""},on:{click:function(e){return t.imprimirTurnos(a,t.turnoList[`${a.especialidad}${a.unidad_atencion._id}`])}}},[t._v("Imprimir Turnos")])],1)],2)})),1)},rt=[],it=(a(44114),a(20296));const st={name:"cardHorarios",props:["fecha","especialidades","profesional","turnosActivos","openTurno","guardarTurno","eliminarTurno"],components:{timeRange:it.A},data(){return{hoy:"",turnos:["10","15","20","30","40","60"],colorFase:{"turno asignado":"black--text text--darken-1","presente espera atencion":"yellow--text text--darken-3",asistio:"green--text text--darken-2","no asistio":"error--text text--darken-2","reprogramado personal":"orange--text text--darken-3","reprogramado institucional":"orange--text text--darken-3"}}},computed:{...(0,U.aH)(["loading","hoy","persona","diasFullNames"]),turnoList(){let t={};return this.turnosActivos.forEach((e=>{if(e.fecha===this.fecha){t[`${e.especialidad}${e.uas.id}`]??={};let a=this.intervalosTiempo(e.horario[0],e.amplitudTurno),r=this.intervalosTiempo(e.horario[1],e.amplitudTurno),i=e?.paciente?.hist_salitas?.find((t=>t.area===e.uas.id))?.historial??null;t[`${e.especialidad}${e.uas.id}`][`${a}-${r}`]={nombreC:e.paciente.nombreC,documentoC:e.paciente.documentoC??"",id:e.paciente.id,idTurno:e._id??"",fase:e.fase??"espera atencion",derivado:e.derivado??"",historial:i??"",telefono:e.paciente.telefono??""}}})),t}},created(){this.hoy=this.hoy},methods:{...(0,U.PY)(["mostrarDialogIframe","mostrarMensaje"]),...(0,U.PY)("turnero",["guardarPdf"]),heightDaily:function(t,e,a,r){return t&&e&&a&&r&&(this.intervalosTiempo(e,a)-this.intervalosTiempo(t,a))*r<125?(this.intervalosTiempo(e,a)-this.intervalosTiempo(t,a))*r:125},intervalosTiempo:function(t,e){if(t&&e){let a=60*Number(t.split(":")[0])+Number(t.split(":")[1]);return a/Number(e)}return 0},horaMinuto:function(t,e,a){return"60"===String(e+Number(a)).padStart(2,0)?`${String(t+1).padStart(2,0)}:00`:`${String(t).padStart(2,0)}:${String(e+Number(a)).padStart(2,0)}`},turnoTomado:function(t,e,a){let r=a.duracion_turno,i=a.especialidad,s=a.unidad_atencion.id,o=this.intervalosTiempo(this.horaMinuto(t,e,0),r),n="";if(this.turnoList[`${i}${s}`])for(const l in this.turnoList[`${i}${s}`])if(Object.hasOwnProperty.call(this.turnoList[`${i}${s}`],l)&&Number(l.split("-")[0])<=o&&o<Number(l.split("-")[1]))return this.turnoList[`${i}${s}`][l];return n},intervaloParaHoraMinuto:function(t,e){if(t&&e){let a=Number(t)*Number(e),r=Math.floor(a/60);return a%=60,`${String(r).padStart(2,0)}:${String(a).padStart(2,0)}`}return 0},soloLectura(){return this.persona.turnero<2},async imprimirTurnos(t,e){let a={fecha:this.fecha||"",especialidad:t.especialidad||"",profesional:this.profesional||"",ua:t.unidad_atencion.area||"",horario:Object.values(t.dias_laborales)[0]||["",""],duracion_turno:t.duracion_turno||"",turnosList:[]},r=this.intervalosTiempo(a.horario[0],a.duracion_turno),i=this.intervalosTiempo(a.horario[1],a.duracion_turno);for(let o=r;o<i;o++)a.turnosList.push({hora:`${this.intervaloParaHoraMinuto(o,a.duracion_turno)}`,nombreC:"",documentoC:"",telefono:"",historial:"",asistio:""}||{});for(const o in e)if(Object.hasOwnProperty.call(e,o)){let t=a.turnosList.findIndex((t=>t.hora==this.intervaloParaHoraMinuto(o.split("-")[0],a.duracion_turno)));-1!==t?a.turnosList[t]={hora:`${this.intervaloParaHoraMinuto(o.split("-")[0],a.duracion_turno)}`,nombreC:e[o].nombreC,documentoC:e[o].documentoC||"",telefono:e[o].telefono||"",historial:e[o].historial||"",asistio:""}:a.turnosList.push({hora:`${this.intervaloParaHoraMinuto(o.split("-")[0],a.duracion_turno)}`,nombreC:e[o].nombreC,documentoC:e[o].documentoC||"",telefono:e[o].telefono||"",historial:e[o].historial||"",asistio:""})}this.guardarPdf(a);let s=this.$router.resolve({name:"TurneroImprimir",query:{descarga:!1}});this.mostrarDialogIframe({src:s.href,titulo_name:"Vista Previa de los Turnos"})}}},ot=st;var nt=(0,Z.A)(ot,at,rt,!1,null,null,null);const lt=nt.exports;var ct=a(57e3),dt=function(){var t=this,e=t._self._c;return e(H.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[e(I.A,{attrs:{xs12:"","px-2":""}},[e(H.A,{attrs:{row:"",wrap:""}},[e("div",{staticClass:"display-1 font-weight-medium text-capitalize"},[t._v(" "+t._s(t.generarTurno.especialidad)+" - "+t._s(t.generarTurno.uas.area)+" ")])]),e(F.A)],1),e(I.A,{attrs:{xs12:"",sm3:"","px-2":""}}),e(I.A,{attrs:{xs12:"",sm6:"","px-3":""}},[e(ct.W,{staticClass:"capitalizar",attrs:{readonly:"","prepend-icon":"fas fa-user-tie",label:"Profesional",type:"text",color:"terciary","background-color":"terciary lighten-2"},model:{value:t.generarTurno.profesional.nombreC,callback:function(e){t.$set(t.generarTurno.profesional,"nombreC",e)},expression:"generarTurno.profesional.nombreC"}})],1),e(I.A,{attrs:{xs12:"",sm3:"","px-2":""}}),e(I.A,{attrs:{xs12:"","px-2":""}},[e("timeRange",{key:`diaRange-${t.generarTurno.horario[0]}`,attrs:{value:t.generarTurno.horario,color:"terciary",readonly:!0,turno:t.generarTurno.amplitudTurno}})],1),e(I.A,{attrs:{xs12:"","px-2":""}},[e(W.A,{staticClass:"capitalizar",attrs:{readonly:t.soloLectura,clearable:!t.soloLectura,"background-color":t.soloLectura?"terciary lighten-2":"terciary lighten-5","item-value":"id","item-text":"nombreDocumento",items:t.pacientesDB,label:"Apellido, Nombre del Paciente (Documento)","prepend-icon":"personal_injury",color:"terciary",rules:[...t.rules.requerido],"validate-on-blur":""},model:{value:t.generarTurno.paciente,callback:function(e){t.$set(t.generarTurno,"paciente",e)},expression:"generarTurno.paciente"}})],1),e(I.A,{attrs:{xs12:"",sm6:"","px-2":""}},[e(W.A,{staticClass:"capitalizar",attrs:{clearable:"","background-color":"terciary lighten-5","item-value":"id","item-text":"area",items:t.unidadesAtencion,label:"Derivado de ...","prepend-icon":"transfer_within_a_station",color:"terciary"},on:{"click:clear":function(e){t.$nextTick((()=>t.generarTurno.derivado=null))}},model:{value:t.generarTurno.derivado,callback:function(e){t.$set(t.generarTurno,"derivado",e)},expression:"generarTurno.derivado"}})],1),e(I.A,{attrs:{xs12:"",sm6:"","px-2":""}},[e(W.A,{staticClass:"capitalizar",attrs:{readonly:t.soloLectura,clearable:!t.soloLectura,"background-color":t.soloLectura?"terciary lighten-2":"terciary lighten-5",items:t.listFases,label:"Fase","prepend-icon":"far fa-question-circle",color:"terciary",rules:[...t.rules.requerido]},model:{value:t.generarTurno.fase,callback:function(e){t.$set(t.generarTurno,"fase",e)},expression:"generarTurno.fase"}})],1)],1)},ut=[];const ht={name:"formTurno",props:["generarTurno","pacientesDB"],components:{timeRange:it.A},data(){return{soloLectura:!0,unidadesAtencion:[],listFases:["turno asignado","presente espera atencion","asistio","no asistio","reprogramado personal","reprogramado institucional"]}},async mounted(){this.persona.turnero<2?this.soloLectura=!0:this.soloLectura=!1,this.unidadesAtencion.push(...await this.buscarAreaFiltros({filtro:{uas:!0},populate:"no",select:"area"}))},computed:{...(0,U.aH)(["persona","rules"])},methods:{...(0,U.i0)("main",["buscarAreaFiltros"])}},pt=ht;var mt=(0,Z.A)(pt,dt,ut,!1,null,null,null);const ft=mt.exports;var gt=a(29774);const vt={name:"turneroEmitir",components:{formFiltroProfesional:X,cardHorarios:lt,formTurno:ft,dialogPaciente:gt.A},data:()=>({today:"",busqueda:{id:"",especialidades:{especialidad:"",unidad_atencion:""}},filtro:{especialidad:"",unidad_atencion:""},pacientesDB:[],profesionalesToFiltrar:[],paginaCalendario:0,dialogFecha:!1,turnoClickeado:{profesional:{},fecha:""},turnosDefault:{profesional:{},fecha:""},turnosActivos:[],dialogTurno:!1,turnoValido:!0,turnoNuevo:!0,generarTurno:{_id:"",uas:"",fecha:"",profesional:"",especialidad:"",horario:["",""],amplitudTurno:"",paciente:"",fase:"turno asignado",derivado:""},turnoBasico:{_id:"",uas:"",fecha:"",profesional:"",especialidad:"",horario:["",""],amplitudTurno:"",paciente:"",fase:"espera atencion",derivado:""}}),computed:{...(0,U.aH)(["APIURL","axiosConfig","loading","hoy","persona","mesFullNames"]),profesionalesFiltrados(){const t={};let e=0;while(e<=6&&0!==this.profesionalesToFiltrar.length){let a=this._cloneDeep(this.profesionalesToFiltrar),r=a.filter((t=>{let a=[];return a=t.especialidades.filter((t=>{if(!t.especialidad.toLowerCase().includes(this.filtro.especialidad.toLowerCase())||this.filtro.unidad_atencion&&t.unidad_atencion.id!=this.filtro.unidad_atencion||!t.turno||"si"!=t.turno)return!1;{let a={},r=!0;for(const i in t.dias_laborales)t.dias_laborales.hasOwnProperty(i)&&i===e.toString()&&(r=!1,a[i]=t.dias_laborales[i]);return!r&&(t.dias_laborales=a,!0)}})),0!==a.length&&(t.especialidades=a,!0)}));t[e]=r||[],e++}return t},turnos(){const t={};let e=this.today.split("-"),a=new Date(Date.UTC(e[0],e[1]-1,1)),r=new Date(Date.UTC(e[0],e[1]-1,1));this.mostrarLoading({titulo:"Cargando Turnos...",color:"primary"});while(0!==this.profesionalesToFiltrar.length&&a.getUTCMonth()===r.getUTCMonth()){let e=`${a.getUTCFullYear()}-${String(a.getUTCMonth()+1).padStart(2,0)}-${String(a.getUTCDate()).padStart(2,0)}`,r=a.getUTCDay().toString();t[e]=this.profesionalesFiltrados[r]||[],a.setUTCDate(a.getUTCDate()+1)}return this.ocultarLoading(),t}},watch:{dialogFecha(t){t||this.closeFecha()},paginaCalendario(t){0===t&&(this.today=this.hoy)}},created(){this.today=this.hoy},async mounted(){},methods:{...(0,U.PY)(["mostrarLoading","ocultarLoading","mostrarError","mostrarMensaje"]),...(0,U.PY)("turnero",["borrarPdf"]),...(0,U.i0)(["cargarProfesionales"]),...(0,U.i0)("paciente",["actualizarDialogPaciente","cargarPacientesBusqueda"]),async cargarTurnos(t,e){try{this.mostrarLoading({titulo:"Cargando Turnos...",color:"primary"});let r=JSON.stringify({fecha:t,profesional:e}),i=await this.axios.get(`${this.APIURL}/turnos/buscar?filtro=${r}`,this.axiosConfig);if(i.data.ok)this.turnosActivos=i.data.turnos,this.turnosActivos.sort(((t,e)=>t.horario[0]>e.horario[0]?1:e.horario[0]>t.horario[0]?-1:0)),this.turnosActivos.forEach((t=>t.fecha=t.fecha.substring(0,10)));else try{this.mostrarError({errores:"",mensaje:i.data.err.message,titulo:i.status})}catch(a){this.mostrarError({errores:"",mensaje:"Problemas con el servidor, Intente mas tarde.",titulo:500})}}catch(a){try{this.mostrarError({errores:a.response.data.err.errors,mensaje:a.response.data.err.message,titulo:a.response.status}),this.closeFecha()}catch(a){this.mostrarError({errores:"",mensaje:"Problemas con el servidor, Intente mas tarde.",titulo:500}),this.closeFecha()}}finally{this.ocultarLoading()}},async buscar(){let t=this._cloneDeep(this.busqueda);if(!t.especialidades.especialidad)return void this.mostrarError({errores:"",mensaje:"La ESPECIALIDAD es requerida para realizar la Busqueda.",titulo:"Valores Requeridos."});for(const r in t)t.hasOwnProperty(r)&&(""!==t[r]&&null!==t[r]||delete t[r]);t.estado=!0;let e={filtro:t,local:!0};try{this.mostrarLoading({titulo:"Cargando profesionales...",color:"primary"}),this.filtro.especialidad=t.especialidades.especialidad,t.especialidades.unidad_atencion?this.filtro.unidad_atencion=t.especialidades.unidad_atencion:this.filtro.unidad_atencion="",this.profesionalesToFiltrar=await this.cargarProfesionales(e)}catch(a){try{this.mostrarError({errores:a.response.data.err.errors,mensaje:a.response.data.err.message,titulo:a.response.status})}catch(a){this.mostrarError({errores:"",mensaje:"Problemas con el servidor, Intente mas tarde.",titulo:500})}}finally{this.ocultarLoading()}},anteriorCalendario(){this.paginaCalendario-=1,this.today=new Date(this.today),this.today.setUTCMonth(this.today.getUTCMonth()-1,1),this.today=this.today.toISOString().substring(0,10)},siguienteCalendario(){this.paginaCalendario+=1,this.today=new Date(this.today),this.today.setUTCMonth(this.today.getUTCMonth()+1,1),this.today=this.today.toISOString().substring(0,10)},async openFecha(t,e){this.turnoClickeado.profesional=this._cloneDeep(e),this.turnoClickeado.fecha=t,await this.cargarTurnos(this.turnoClickeado.fecha,this.turnoClickeado.profesional.id),this.dialogFecha=!0},closeFecha(){this.dialogFecha=!1,setTimeout((()=>{this.turnoClickeado=this._cloneDeep(this.turnosDefault),this.borrarPdf(),this.turnosActivos=[]}),300)},async openTurno(t,e,a,r,i,s){s||this.turnoClickeado.fecha>=this.hoy?(this.pacientesDB=await this.cargarPacientesBusqueda(),this.generarTurno={_id:s.idTurno||"",uas:r,fecha:this.turnoClickeado.fecha,profesional:this.turnoClickeado.profesional,especialidad:a,horario:[t,e],amplitudTurno:i,paciente:s.id||"",fase:s.fase||"turno asignado",derivado:s.derivado||""},""!=this.generarTurno._id&&(this.turnoNuevo=!1),this.dialogTurno=!0):this.mostrarError({titulo:"Turno no Permitido",mensaje:`No se pueden otorgar Turnos de fechas anteriores a la actual (${this.hoy}).`})},async closeTurno(){this.dialogTurno=!1,await this.cargarTurnos(this.turnoClickeado.fecha,this.turnoClickeado.profesional.id),setTimeout((()=>{this.generarTurno=this._cloneDeep(this.turnoBasico),this.$refs.formTurno.resetValidation(),this.turnoNuevo=!0}),300)},async guardarTurno(t){if(this.$refs.formTurno.validate()||t)try{let a=Object.assign({},this.generarTurno);this.mostrarLoading({titulo:"Guardando Turno...",color:"primary"});let r={data:{ok:!1,err:{message:"Sin respuesta del servidor, intente mas tarde."}}};if(t&&(a={},a["fase"]=t.fase,a["_id"]=t._id),r=this.turnoNuevo&&!t?await this.axios.post(this.APIURL+"/turno",a,this.axiosConfig):await this.axios.put(this.APIURL+"/turno/"+a._id,a,this.axiosConfig),r.data.ok)this.mostrarMensaje({msj:[""+(this.turnoNuevo&&!t?"Turno registrado exitosamente.":"Turno Editado exitosamente.")],titulo:""+(this.turnoNuevo&&!t?"Registro Exitoso":"Modificacion Exitosa")}),this.closeTurno();else try{this.mostrarError({errores:"",mensaje:r.data.err.message,titulo:r.status})}catch(e){this.mostrarError({errores:"",mensaje:"Problemas con el servidor, Intente mas tarde.",titulo:500})}}catch(e){try{this.mostrarError({errores:e.response.data.err.errors,mensaje:e.response.data.err.message,titulo:e.response.status})}catch(e){this.mostrarError({errores:"",mensaje:"Problemas con el servidor, Intente mas tarde.",titulo:500})}}finally{this.ocultarLoading()}else this.mostrarError({errores:"",mensaje:"Revise los campos obligatorios.",titulo:"Valores Requeridos."})},async eliminarTurno(t){try{if(await this.$root.$confirm.open({titulo:"ELIMINAR",msj:["Dejara libre el horario del Turno para una nueva Asignacion.\nUna vez Eliminado no se podra recuperar.","El Turno sera ELIMINADO.\n¿Desea continuar?"]})){this.mostrarLoading({titulo:"Eliminando Turno...",color:"primary"});let a={data:{ok:!1,err:{message:"Sin respuesta del servidor, intente mas tarde."}}};if(a=await this.axios.delete(this.APIURL+"/turno/"+t,this.axiosConfig),a.data.ok)this.mostrarMensaje({msj:["Turno Eliminado exitosamente."],titulo:"Eliminacion Exitosa"}),this.closeTurno();else try{this.mostrarError({errores:"",mensaje:a.data.err.message,titulo:a.status})}catch(e){this.mostrarError({errores:"",mensaje:"Problemas con el servidor, Intente mas tarde.",titulo:500})}}}catch(e){try{this.mostrarError({errores:e.response.data.err.errors,mensaje:e.response.data.err.message,titulo:e.response.status})}catch(e){this.mostrarError({errores:"",mensaje:"Problemas con el servidor, Intente mas tarde.",titulo:500})}}finally{this.ocultarLoading()}},async closePaciente(){this.pacientesDB=await this.cargarPacientesBusqueda()}}},yt=vt;var xt=(0,Z.A)(yt,z,B,!1,null,"0d125579",null);const _t=xt.exports}}]);