"use strict";(self["webpackChunksecretaria_de_salud_moreno_frontend"]=self["webpackChunksecretaria_de_salud_moreno_frontend"]||[]).push([[318],{5167:function(e,t,a){a.d(t,{Z:function(){return u}});var r=function(){var e=this,t=e._self._c;return e.field.array?t("span",[e.field.object?t("span",e._l(e._get(e.props.item,e.field.ruta),(function(a,r){return t("code",{key:`${e.field.text}-${r}`,attrs:{STYLE:"margin:4px"}},[e.field.keyShow?t("span",[e._v(e._s(e.field.date?e.mostrarFecha(a[e.field.keyShow],e.field.time):a[e.field.keyShow]||"0"==a[e.field.keyShow]?a[e.field.keyShow]:"S/D"))]):t("span",e._l(a,(function(s,i,o){return t("span",{key:`${e.field.text}-${r}-${i}`},[e._v(e._s(i)+": "),t("kbd",[e._v(e._s(isNaN(s)&&"Invalid Date"!==e.mostrarFecha(s,e.field.time)?e.mostrarFecha(s,e.field.time)||"S/D":s||"0"==s?s:"S/D"))]),o!=Object.keys(a).length-1?t("span",[e._v(e._s("\n"))]):e._e()])})),0)])})),0):t("span",e._l(e._get(e.props.item,e.field.ruta),(function(a,r){return t("code",{key:`${e.field.text}-${r}`,attrs:{STYLE:"margin:4px"}},[e._v(e._s(e.field.date?e.mostrarFecha(a,e.field.time):a||"0"==a?a:"S/D"))])})),0)]):e.field.object?t("span",[t("code",{attrs:{STYLE:"margin:4px"}},[e.field.keyShow?t("span",[e._v(e._s(e.field.date?e.mostrarFecha(e._get(e.props.item,e.field.ruta)[e.field.keyShow],e.field.time):e._get(e.props.item,e.field.ruta)[e.field.keyShow]||"0"==e._get(e.props.item,e.field.ruta)[e.field.keyShow]?e._get(e.props.item,e.field.ruta)[e.field.keyShow]:"--------"))]):t("span",e._l(e._get(e.props.item,e.field.ruta),(function(a,r,s){return t("span",{key:`${e.field.text}-${r}`},[e._v(e._s(r)+": "),t("kbd",[e._v(e._s(isNaN(a)&&"Invalid Date"!==e.mostrarFecha(a,e.field.time)?`${e.mostrarFecha(a,e.field.time)}`||"S/D":a||"0"==a?`${a}`:"S/D"))]),s!=Object.keys(e._get(e.props.item,e.field.ruta)).length-1?t("span",[e._v(e._s("\n"))]):e._e()])})),0)])]):t("span",{style:""+(e.field.numeric&&e._get(e.props.item,e.field.ruta)<0?"color: red;":"")},[e._v(e._s(e.field.date?e.mostrarFecha(e.props.item[e.field.ruta],e.field.time):e.field.boolean?""+(e._get(e.props.item,e.field.ruta)&&"false"!=e._get(e.props.item,e.field.ruta)&&"0"!=e._get(e.props.item,e.field.ruta)?"Si":"No"):e._get(e.props.item,e.field.ruta)||"0"==e._get(e.props.item,e.field.ruta)?e._get(e.props.item,e.field.ruta):"--------"))])},s=[],i={name:"body-data-table-dinamic",props:["props","field"]},o=i,n=a(1001),l=(0,n.Z)(o,r,s,!1,null,null,null),u=l.exports},4874:function(e,t,a){a.d(t,{Z:function(){return v}});var r=a(7416),s=a(7441),i=a(683),o=a(9456),n=a(4036),l=a(4618),u=function(){var e=this,t=e._self._c;return t(o.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t(i.Z,{attrs:{xs8:"","px-3":""}},[t(l.h,{attrs:{readonly:e.editando,clearable:!e.editando,"background-color":e.editando?"primary lighten-2":"primary lighten-5","prepend-icon":"person",label:"Usuario",type:"text",color:"primary",rules:e.editando?[]:[...e.rules.requerido,...e.rules.textoNumero,e.rules.minLength(3)],"validate-on-blur":"",autocomplete:"username"},model:{value:e.usuario.usuario,callback:function(t){e.$set(e.usuario,"usuario",t)},expression:"usuario.usuario"}})],1),t(i.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(l.h,{attrs:{clearable:"","background-color":"primary lighten-5","prepend-icon":"person",label:"Nombre",type:"text",color:"primary",rules:[...e.rules.requerido,e.rules.minLength(2)],"validate-on-blur":""},model:{value:e.usuario.nombre,callback:function(t){e.$set(e.usuario,"nombre",t)},expression:"usuario.nombre"}})],1),t(i.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(l.h,{attrs:{clearable:"","background-color":"primary lighten-5","prepend-icon":"person",label:"Apellido",type:"text",color:"primary",rules:[...e.rules.requerido,e.rules.minLength(2)],"validate-on-blur":""},model:{value:e.usuario.apellido,callback:function(t){e.$set(e.usuario,"apellido",t)},expression:"usuario.apellido"}})],1),t(i.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(l.h,{attrs:{clearable:"","background-color":"primary lighten-5","prepend-icon":"phone",label:"Telefono",type:"text",color:"primary",rules:[...e.rules.soloNumero],"validate-on-blur":""},model:{value:e.usuario.telefono,callback:function(t){e.$set(e.usuario,"telefono",t)},expression:"usuario.telefono"}})],1),t(i.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(l.h,{attrs:{clearable:"","background-color":"primary lighten-5","prepend-icon":"mail",label:"Email",type:"email",color:"primary",rules:[...e.rules.mail],"validate-on-blur":""},model:{value:e.usuario.email,callback:function(t){e.$set(e.usuario,"email",t)},expression:"usuario.email"}})],1),t(i.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(r.Z,{staticClass:"capitalizar",attrs:{clearable:"","background-color":"primary lighten-5","prepend-icon":"location_city",label:"Area",items:e.areas,"item-value":"id","item-text":"area",color:"primary",rules:[...e.rules.requerido],"validate-on-blur":""},model:{value:e.usuario.area,callback:function(t){e.$set(e.usuario,"area",t)},expression:"usuario.area"}})],1),t(i.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(l.h,{attrs:{clearable:"","background-color":"primary lighten-5","prepend-icon":"work",label:"Actividad en el Area",type:"text",color:"primary","validate-on-blur":""},model:{value:e.usuario.actividad,callback:function(t){e.$set(e.usuario,"actividad",t)},expression:"usuario.actividad"}})],1),e.editando?t(i.Z,{attrs:{xs12:""}},[t(o.Z,{attrs:{row:"",wrap:""}},[t(i.Z,{attrs:{xs12:"",sm6:"","px-3":""},on:{click:e.checkPassword}},[t(s.Z,{attrs:{label:"Cambiar Contraseña: "+(e.checkPass?"SI":"NO")},on:{change:function(t){e.checkPassword(),e.usuario.password=null,e.usuario.password2=null}},model:{value:e.checkPass,callback:function(t){e.checkPass=t},expression:"checkPass"}})],1),t(i.Z,{attrs:{xs12:"",sm6:"","px-3":""}})],1)],1):e._e(),!0===e.checkPass?t(i.Z,{attrs:{xs12:""}},[t(o.Z,{attrs:{grey:"","lighten-2":"",row:"",wrap:""}},[t(i.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(l.h,{attrs:{"prepend-icon":"lock",label:"Contraseña",type:"password",rules:[...e.rules.requerido,e.rules.minLength(4)],color:"primary",clearable:"","background-color":"primary lighten-5","validate-on-blur":"",autocomplete:"new-password"},model:{value:e.usuario.password,callback:function(t){e.$set(e.usuario,"password",t)},expression:"usuario.password"}})],1),t(i.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(l.h,{attrs:{"prepend-icon":"lock",label:"Repetir Contraseña",type:"password",rules:[...e.rules.requerido,e.rules.minLength(4),t=>t===e.usuario.password||"Las Constraseñas no coinciden."],color:"primary",clearable:"","background-color":"primary lighten-5","validate-on-blur":"",autocomplete:"new-password"},model:{value:e.usuario.password2,callback:function(t){e.$set(e.usuario,"password2",t)},expression:"usuario.password2"}})],1)],1)],1):e._e(),"ADMIN_ROLE"===e.persona.role?t(i.Z,{attrs:{xs12:""}},[t(o.Z,{attrs:{grey:"","lighten-2":"",row:"",wrap:""}},[t(i.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(n.r,{attrs:{"item-value":"valor","item-text":"label",items:e.opcionesRoles,label:"Rol","prepend-icon":"supervisor_account",color:"primary","background-color":"primary lighten-5",rules:[...e.rules.requerido]},model:{value:e.usuario.role,callback:function(t){e.$set(e.usuario,"role",t)},expression:"usuario.role"}})],1),t(i.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(n.r,{attrs:{"item-value":"valor","item-text":"label",items:e.opcionesEstados,label:"Estado","prepend-icon":"true"==e.usuario.estado?"check_circle":"cancel",color:"true"==e.usuario.estado?"green lighten-1":"error lighten-1","background-color":"true"==e.usuario.estado?"green lighten-1":"error lighten-1",rules:[...e.rules.requerido]},model:{value:e.usuario.estado,callback:function(t){e.$set(e.usuario,"estado",t)},expression:"usuario.estado"}})],1)],1)],1):e._e(),"ADMIN_ROLE"===e.persona.role?t(i.Z,{attrs:{grey:"","lighten-4":"",xs12:""}},[t("treeProperties",{attrs:{data:e.usuario,treeRead:e.permisos,opcionesSelect:e.opcionesPermiso,editando:e.editando,areas:e.areas}})],1):e._e()],1)},c=[],d=a(629),p=a(8535),m={name:"formUsuario",props:["usuario","editar"],components:{treeProperties:p.Z},data(){return{checkPass:!0,areas:[]}},computed:{...(0,d.rn)(["persona","rules"]),...(0,d.rn)("main_usuario",["permisos","opcionesPermiso","opcionesRoles","opcionesEstados"]),editando(){return"true"===this.editar}},async created(){this.areas.push(...await this.buscarAreaFiltros({filtro:"todos",populate:"no",select:"area farmacia unidad_atencion",free:"ADMIN_ROLE"!==this.persona?.role}))},methods:{...(0,d.nv)("main_areas",["buscarAreaFiltros"]),checkPassword(){this.$emit("checkPassword",this.checkPass)}}},h=m,f=a(1001),g=(0,f.Z)(h,u,c,!1,null,null,null),v=g.exports},2848:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});var r=a(8469),s=a(7416),i=a(6194),o=a(8956),n=a(2353),l=a(9418),u=a(6530),c=a(7352),d=a(108),p=a(683),m=a(3667),h=a(9456),f=a(6446),g=a(8143),v=a(4618),b=function(){var e=this,t=e._self._c;return t(u.Z,{attrs:{fluid:"","grid-list-xs":""}},[t(h.Z,{attrs:{"align-center":"","justify-center":"","ma-0":"",wrap:"","text-xs-center":""}},[t(p.Z,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[t(o.Z,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[t(n.ZB,{staticClass:"px-0"},[e._v("====== GESTION DE USUARIOS ======")])],1)],1),t(p.Z,{attrs:{"pa-1":"","ma-1":"",primary:"","lighten-1":"",xs12:""}},[t(o.Z,{staticClass:"elevation-6"},[t(l.Z,{staticClass:"primary"},[t(m.Z,{attrs:{medium:"",left:"",color:"white"}},[e._v("people")]),t("span",{staticClass:"title white--text"},[e._v("Usuarios")]),t(d.Z,{staticClass:"mx-3 white",attrs:{vertical:""}}),t(g.Cl),t(i.Z,{staticClass:"white--text",attrs:{round:"",color:"primary darken-1",disabled:e.loading.estado,loading:e.loading.estado},on:{click:function(t){return e.cargarUsuarios()}}},[t(m.Z,{attrs:{color:"white",left:""}},[e._v("refresh")]),e._v("Actualizar Lista")],1),t(i.Z,{staticClass:"white--text",attrs:{round:"",to:{name:"UsuarioCrear"},color:"primary darken-1",disabled:e.loading.estado,loading:e.loading.estado}},[t(m.Z,{attrs:{color:"white",left:""}},[e._v("person_add")]),e._v("Crear Usuario")],1)],1),t(l.Z,{staticClass:"title primary lighten-2"},[t(p.Z,{attrs:{xs12:"","mx-2":""}},[t(s.Z,{staticClass:"capitalizar",attrs:{clearable:"",color:"black","background-color":"primary lighten-5",items:e.filtroHeaderOptions,label:"Mostrar Columnas","prepend-icon":"pie_chart","menu-props":{top:!0,auto:!0},multiple:"",chips:"","deletable-chips":""},model:{value:e.filtroHeaderSelected,callback:function(t){e.filtroHeaderSelected=t},expression:"filtroHeaderSelected"}})],1),t(g.Cl),t(p.Z,{attrs:{xs12:"",sm6:"","mx-2":""}},[t(v.h,{attrs:{"append-icon":"search",label:"Filtrar","background-color":"primary lighten-5",color:"black","single-line":"","hide-details":"",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),t(c.Z,{key:`tablita_${e.reRenderizarTable}`,staticClass:"elevation-6",staticStyle:{"table-layout":"fixed"},attrs:{id:"tablita",headers:e.headers,items:e.listUsuarios,"item-key":"_id",pagination:e.paginacion,loading:e.loading.estado,search:e.search},on:{"update:pagination":function(t){e.paginacion=t}},scopedSlots:e._u([{key:"no-data",fn:function(){return[t(r.Z,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[e._v(" No hay datos para mostrar. ")])]},proxy:!0},{key:"no-results",fn:function(){return[t(r.Z,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[e._v(' No se encontraron resultados para "'+e._s(e.search)+'". ')])]},proxy:!0},{key:"items",fn:function(a){return[t("tr",{class:{"background-color: primary lighten-5":a.item.estado,"background-color: error lighten-4":!a.item.estado}},[t("td",[t("div",{staticStyle:{width:"88px"}},[t(i.Z,{attrs:{icon:"",small:"",disabled:e.loading.estado,to:{name:"UsuarioEditar",params:{id:a.item._id}}}},[t(m.Z,{attrs:{color:"primary"}},[e._v(" edit ")])],1),t(i.Z,{attrs:{icon:"",small:"",disabled:e.loading.estado||!a.item.estado},on:{click:function(t){return e.deleteUsuario(a.item)}}},[t(m.Z,{attrs:{color:"error"}},[e._v(" delete ")])],1)],1)]),e._l(e.headersDinamics,(function(e){return t("td",{key:e.text,class:e.class},[t("bodyDataTableDinamic",{attrs:{props:a,field:e}})],1)}))],2)]}}])},[t(f.Z,{attrs:{color:"blue",indeterminate:""}})],1)],1)],1)],1)],1)},x=[],w=a(629),y=a(5167),Z={name:"usuarioBuscar",components:{bodyDataTableDinamic:y.Z},data:()=>({paginacion:{sortBy:"usuario",descending:!1,page:1,rowsPerPage:10},search:"",listUsuarios:[],reRenderizarTable:!0,filtroHeaderOptions:["Datos Personales","Trabajo","Permisos Laboratorio","Permisos Patrimonio","Permisos HiClEM","Permisos Farmacia","Deprecated"],filtroHeaderSelected:["Trabajo"]}),computed:{...(0,w.rn)(["loading"]),headers(){if(0!=this.listUsuarios.length){let e=[{text:"Acciones",value:"_id",align:"center",sortable:!1,width:"5%",ignore:!0},{text:"Usuario",value:"usuario",class:"font-weight-bold text-sm-left",width:"5%",ruta:"usuario"},{text:"Nombre Completo",value:"nombreC",class:"font-weight-bold text-capitalize text-sm-left",width:"5%",ruta:"nombreC"}];return this.filtroHeaderSelected.includes("Datos Personales")&&e.push({text:"E-mail",value:"email",class:"font-weight-bold text-sm-left",width:"5%",ruta:"email"},{text:"Telefono",value:"telefono",class:"font-weight-bold text-sm-right",width:"5%",ruta:"telefono"}),this.filtroHeaderSelected.includes("Trabajo")&&e.push({text:"Role",value:"role",class:"font-weight-bold text-sm-left",width:"5%",ruta:"role"},{text:"Area",value:"area.area",class:"font-weight-bold text-capitalize text-sm-left",ruta:"area.area"},{text:"Actividad",value:"actividad",class:"font-weight-bold text-sm-left",ruta:"actividad"},{text:"Ultima Sesion",value:"lastLogin",class:"font-weight-bold text-sm-left",width:"5%",ruta:"lastLogin",date:!0,time:!0}),this.filtroHeaderSelected.includes("Permisos Laboratorio")&&e.push({text:"Bromatologia",value:"bromatologia",class:"font-weight-bold text-sm-center",width:"5%",ruta:"bromatologia"}),this.filtroHeaderSelected.includes("Permisos Patrimonio")&&e.push({text:"Informatica",value:"informatica",class:"font-weight-bold text-sm-center",width:"5%",ruta:"informatica"},{text:"Patrimonio",value:"patrimonio",class:"font-weight-bold text-sm-center",width:"5%",ruta:"patrimonio"},{text:"Patrimonio Area (cambiar)",value:"patrimonioArea",class:"font-weight-bold text-sm-center",width:"5%",ruta:"patrimonioArea"}),this.filtroHeaderSelected.includes("Permisos HiClEM")&&e.push({text:"Turnero",value:"turnero",class:"font-weight-bold text-sm-center",width:"5%",ruta:"turnero"},{text:"Tuberculosis",value:"tuberculosis",class:"font-weight-bold text-sm-center",width:"5%",ruta:"tuberculosis"},{text:"HICLEM",value:"historial_clinico",class:"font-weight-bold text-sm-center",width:"5%",ruta:"historial_clinico"}),this.filtroHeaderSelected.includes("Permisos Farmacia")&&e.push({text:"Crear Insumos",value:"farmacia.insumos",class:"font-weight-bold text-sm-center",width:"5%",ruta:"farmacia.insumos",boolean:!0},{text:"Entrega Medicamentos",value:"farmacia.entregas",class:"font-weight-bold text-sm-left",ruta:"farmacia.entregas",array:!0,object:!0,keyShow:"area"},{text:"Farmacia Stock",value:"farmacia.stock",class:"font-weight-bold text-sm-left",ruta:"farmacia.stock",array:!0,object:!0,keyShow:"area"},{text:"Farmacia Gestion",value:"farmacia.gestion",class:"font-weight-bold text-sm-left",ruta:"farmacia.gestion",array:!0,object:!0,keyShow:"area"},{text:"Farm Gral Stock",value:"farmacia.general.stock",class:"font-weight-bold text-sm-center",width:"5%",ruta:"farmacia.general.stock",boolean:!0},{text:"Farm Gral Reportes",value:"farmacia.general.reportes",class:"font-weight-bold text-sm-center",width:"5%",ruta:"farmacia.general.reportes",boolean:!0},{text:"Farm Gral Admin",value:"farmacia.general.admin",class:"font-weight-bold text-sm-center",width:"5%",ruta:"farmacia.general.admin",boolean:!0}),this.filtroHeaderSelected.includes("Deprecated")&&e.push({text:"Sala (Deprecated)",value:"sala",class:"font-weight-bold text-sm-left",width:"5%",ruta:"sala"},{text:"COVID-19 (Deprecated)",value:"covid",class:"font-weight-bold text-sm-center",width:"5%",ruta:"covid"},{text:"SAME (Deprecated)",value:"same",class:"font-weight-bold text-sm-center",width:"5%",ruta:"same"},{text:"Salud Mental (Deprecated)",value:"salud_mental",class:"font-weight-bold text-sm-center",width:"5%",ruta:"salud_mental"}),e}return[]},headersDinamics(){return[...this.headers.filter((e=>!0!==e.ignore))]}},created(){this.cargarUsuarios()},methods:{...(0,w.nv)("main_usuario",["buscarUsuarios","borrarUsuarioID"]),async cargarUsuarios(){this.listUsuarios=await this.buscarUsuarios()},async deleteUsuario(e){let t=this.listUsuarios.indexOf(e);if(confirm("¿Esta seguro que quiere Desactivar este Usuario?")){let a=await this.borrarUsuarioID(e._id);a&&(this.listUsuarios[t].estado=!1)}}}},_=Z,k=a(1001),S=(0,k.Z)(_,b,x,!1,null,null,null),C=S.exports},806:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z}});var r=a(6194),s=a(8956),i=a(2353),o=a(9418),n=a(6530),l=a(108),u=a(683),c=a(445),d=a(3667),p=a(9456),m=a(8143),h=function(){var e=this,t=e._self._c;return t(n.Z,{attrs:{"grid-list-xs":""}},[t(p.Z,{attrs:{"align-center":"","justify-center":"","ma-0":"",wrap:"","text-xs-center":""}},[t(u.Z,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[t(s.Z,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[t(i.ZB,{staticClass:"px-0"},[e._v("====== GESTION DE USUARIOS ======")])],1)],1),t(u.Z,{attrs:{"pa-1":"","ma-1":"",xs12:"",primary:"","lighten-1":""}},[t(s.Z,{staticClass:"elevation-6"},[t(o.Z,{staticClass:"primary"},[t(d.Z,{attrs:{medium:"",left:"",color:"white"}},[e._v("person_add")]),t("span",{staticClass:"title white--text"},[e._v("Crear Usuario")]),t(l.Z,{staticClass:"mx-3 white",attrs:{vertical:""}}),t(m.Cl),t(r.Z,{staticClass:"white--text",attrs:{round:"",to:{name:"UsuarioBuscar"},color:"primary darken-1",disabled:e.loading.estado,loading:e.loading.estado}},[t(d.Z,{attrs:{color:"white",left:""}},[e._v("search")]),e._v("Buscar Usuario")],1)],1),t(i.ZB,[t(c.Z,{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valido,callback:function(t){e.valido=t},expression:"valido"}},[t(p.Z,{attrs:{row:"",wrap:""},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.crearUsuario.apply(null,arguments)}}},[t("formUsuario",{attrs:{usuario:e.usuario}})],1)],1)],1),t(o.Z,{staticClass:"primary lighten-2"},[t(m.Cl),t(l.Z,{staticClass:"mx-3 black",attrs:{vertical:""}}),t(r.Z,{class:(e.valido?"primary":"error")+" darken-1",attrs:{round:"",disabled:e.loading.estado,loading:e.loading.estado},on:{click:e.crearUsuario}},[t(d.Z,{attrs:{left:"",color:"white"}},[e._v("person_add")]),e._v(e._s(e.valido?"Registrar":"Formulario No valido"))],1)],1)],1)],1)],1)],1)},f=[],g=a(629),v=a(4874),b={name:"usuarioCrear",components:{formUsuario:v.Z},data(){return{valido:!0,usuario:{}}},computed:{...(0,g.rn)(["loading"]),...(0,g.rn)("main_usuario",["usuarioBase"])},created(){this.usuario={...this._cloneDeep(this.usuarioBase)}},methods:{...(0,g.OI)(["mostrarError"]),...(0,g.nv)("main_usuario",["guardarUsuario"]),resetForm(){this.usuario={...this._cloneDeep(this.usuarioBase)},this.$refs.form.resetValidation()},async crearUsuario(){if(this.usuario.password!==this.usuario.password2)return this.$refs.form.validate(),void this.mostrarError({titulo:"Contraseña",mensaje:"Las contraseñas no coinciden."});await this.guardarUsuario({usuario:this.usuario,validate:this.$refs.form.validate,finish:this.resetForm})}}},x=b,w=a(1001),y=(0,w.Z)(x,h,f,!1,null,null,null),Z=y.exports},9015:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z}});var r=a(6194),s=a(8956),i=a(2353),o=a(9418),n=a(6530),l=a(108),u=a(683),c=a(445),d=a(3667),p=a(9456),m=a(8143),h=function(){var e=this,t=e._self._c;return t(n.Z,{attrs:{"grid-list-xs":""}},[t(p.Z,{attrs:{"align-center":"","justify-center":"","ma-0":"",wrap:"","text-xs-center":""}},[t(u.Z,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[t(s.Z,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[t(i.ZB,{staticClass:"px-0"},[e._v("====== GESTION DE USUARIOS ======")])],1)],1),t(u.Z,{attrs:{"pa-1":"","ma-1":"",xs12:"",primary:"","lighten-1":""}},[t(s.Z,{staticClass:"elevation-6"},[t(o.Z,{staticClass:"primary"},[t(d.Z,{attrs:{medium:"",left:"",color:"white"}},[e._v("manage_accounts")]),t("span",{staticClass:"title white--text"},[e._v("Editar Usuario")]),t(l.Z,{staticClass:"mx-3 white",attrs:{vertical:""}}),t(m.Cl),t(r.Z,{staticClass:"white--text",attrs:{round:"",to:{name:"UsuarioBuscar"},color:"primary darken-1",disabled:e.loading.estado,loading:e.loading.estado}},[t(d.Z,{attrs:{color:"white",left:""}},[e._v("search")]),e._v("Buscar Usuario")],1)],1),t(i.ZB,[t(c.Z,{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valido,callback:function(t){e.valido=t},expression:"valido"}},[t(p.Z,{attrs:{row:"",wrap:""},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editarUsuario.apply(null,arguments)}}},[t("formUsuario",{attrs:{usuario:e.usuario,editar:"true"},on:{checkPassword:function(t){return e.cambiarPassword(t)}}})],1)],1)],1),t(o.Z,{staticClass:"primary lighten-2"},[t(m.Cl),t(l.Z,{staticClass:"mx-3 black",attrs:{vertical:""}}),t(r.Z,{class:(e.valido?"primary":"error")+" darken-1",attrs:{round:"",disabled:e.loading.estado,loading:e.loading.estado},on:{click:e.editarUsuario}},[t(d.Z,{attrs:{left:"",color:"white"}},[e._v("manage_accounts")]),e._v(e._s(e.valido?"Editar Usuario":"Formulario No valido"))],1)],1)],1)],1)],1)],1)},f=[],g=a(629),v=a(4874),b={name:"usuarioEditar",components:{formUsuario:v.Z},data(){return{valido:!0,cambiarPass:!0,usuario:{}}},computed:{...(0,g.rn)(["loading"]),...(0,g.rn)("main_usuario",["usuarioBase"])},async created(){this.usuario={...this._merge(this._cloneDeep(this.usuarioBase),await this.buscarUsuarioID(this.$route.params.id))}},methods:{...(0,g.OI)(["mostrarError"]),...(0,g.nv)("main_usuario",["buscarUsuarioID","guardarUsuario"]),cambiarPassword(e){this.cambiarPass=e},async editarUsuario(){let e=JSON.parse(JSON.stringify(this.usuario));if(!1===this.cambiarPass)delete e.password,delete e.password2;else if(e.password!==e.password2)return this.$refs.form.validate(),void this.mostrarError({titulo:"Contraseña",mensaje:"Las contraseñas no coinciden."});await this.guardarUsuario({usuario:e,validate:this.$refs.form.validate,finish:"retroceder"})}}},x=b,w=a(1001),y=(0,w.Z)(x,h,f,!1,null,null,null),Z=y.exports},1232:function(e,t,a){a(7448);var r=a(1468),s=a(7416),i=a(8131);t["Z"]={name:"v-combobox",extends:s.Z,props:{delimiters:{type:Array,default:function(){return[]}},returnObject:{type:Boolean,default:!0}},data:function(){return{editingIndex:-1}},computed:{counterValue:function(){return this.multiple?this.selectedItems.length:(this.internalSearch||"").toString().length},hasSlot:function(){return r.Z.options.computed.hasSlot.call(this)||this.multiple},isAnyValueAllowed:function(){return!0},menuCanShow:function(){return!!this.isFocused&&(this.hasDisplayedItems||!!this.$slots["no-data"]&&!this.hideNoData)}},methods:{onFilteredItemsChanged:function(){},onInternalSearchChanged:function(e){if(e&&this.multiple&&this.delimiters.length){var t=this.delimiters.find((function(t){return e.endsWith(t)}));null!=t&&(this.internalSearch=e.slice(0,e.length-t.length),this.updateTags())}this.updateMenuDimensions()},genChipSelection:function(e,t){var a=this,s=r.Z.options.methods.genChipSelection.call(this,e,t);return this.multiple&&(s.componentOptions.listeners.dblclick=function(){a.editingIndex=t,a.internalSearch=a.getText(e),a.selectedIndex=-1}),s},onChipInput:function(e){r.Z.options.methods.onChipInput.call(this,e),this.editingIndex=-1},onEnterDown:function(e){e.preventDefault(),r.Z.options.methods.onEnterDown.call(this),this.getMenuIndex()>-1||this.updateSelf()},onKeyDown:function(e){var t=e.keyCode;r.Z.options.methods.onKeyDown.call(this,e),this.multiple&&t===i.Do.left&&0===this.$refs.input.selectionStart&&this.updateSelf(),this.changeSelectedIndex(t)},onTabDown:function(e){if(this.multiple&&this.internalSearch&&-1===this.getMenuIndex())return e.preventDefault(),e.stopPropagation(),this.updateTags();s.Z.options.methods.onTabDown.call(this,e)},selectItem:function(e){this.editingIndex>-1?this.updateEditing():s.Z.options.methods.selectItem.call(this,e)},setSelectedItems:function(){null==this.internalValue||""===this.internalValue?this.selectedItems=[]:this.selectedItems=this.multiple?this.internalValue:[this.internalValue]},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.internalSearch;r.Z.options.methods.setValue.call(this,e)},updateEditing:function(){var e=this.internalValue.slice();e[this.editingIndex]=this.internalSearch,this.setValue(e),this.editingIndex=-1},updateCombobox:function(){var e=Boolean(this.$scopedSlots.selection)||this.hasChips;e&&!this.searchIsDirty||(this.internalSearch!==this.getText(this.internalValue)&&this.setValue(),e&&(this.internalSearch=void 0))},updateSelf:function(){this.multiple?this.updateTags():this.updateCombobox()},updateTags:function(){var e=this.getMenuIndex();if(!(e<0)||this.searchIsDirty){if(this.editingIndex>-1)return this.updateEditing();var t=this.selectedItems.indexOf(this.internalSearch);if(t>-1){var a=this.internalValue.slice();a.splice(t,1),this.setValue(a)}if(e>-1)return this.internalSearch=null;this.selectItem(this.internalSearch),this.internalSearch=null}}}}},4036:function(e,t,a){a.d(t,{r:function(){return f},Z:function(){return g}});var r=a(1468),s=a(7416),i=s.Z,o=a(2556),n=a(8205),l=a(8219),u=i.extend({name:"v-overflow-btn",props:{segmented:Boolean,editable:Boolean,transition:r.Z.options.props.transition},computed:{classes:function(){return Object.assign(i.options.computed.classes.call(this),{"v-overflow-btn":!0,"v-overflow-btn--segmented":this.segmented,"v-overflow-btn--editable":this.editable})},isAnyValueAllowed:function(){return this.editable||i.options.computed.isAnyValueAllowed.call(this)},isSingle:function(){return!0},computedItems:function(){return this.segmented?this.allItems:this.filteredItems},$_menuProps:function(){var e=i.options.computed.$_menuProps.call(this);return e.transition=e.transition||"v-menu-transition",e}},methods:{genSelections:function(){return this.editable?i.options.methods.genSelections.call(this):r.Z.options.methods.genSelections.call(this)},genCommaSelection:function(e,t,a){return this.segmented?this.genSegmentedBtn(e):r.Z.options.methods.genCommaSelection.call(this,e,t,a)},genInput:function(){var e=o.Z.options.methods.genInput.call(this);return e.data.domProps.value=this.editable?this.internalSearch:"",e.data.attrs.readonly=!this.isAnyValueAllowed,e},genLabel:function(){if(this.editable&&this.isFocused)return null;var e=o.Z.options.methods.genLabel.call(this);return e?(e.data.style={},e):e},genSegmentedBtn:function(e){var t=this,a=this.getValue(e),r=this.computedItems.find((function(e){return t.getValue(e)===a}))||e;return r.text&&r.callback?this.$createElement(n.Z,{props:{flat:!0},on:{click:function(e){e.stopPropagation(),r.callback(e)}}},[r.text]):((0,l.Kd)("When using 'segmented' prop without a selection slot, items must contain both a text and callback property",this),null)}}}),c=u,d=a(1232),p=d.Z,m=a(8135),h=a(6505),f={functional:!0,$_wrapperFor:r.Z,props:{autocomplete:Boolean,combobox:Boolean,multiple:Boolean,tags:Boolean,editable:Boolean,overflow:Boolean,segmented:Boolean},render:function(e,t){var a=t.props,s=t.data,o=t.slots,n=t.parent;(0,h.Z)(s);var u=(0,m.Z)(o(),e);return a.autocomplete&&(0,l.Rn)("<v-select autocomplete>","<v-autocomplete>",f,n),a.combobox&&(0,l.Rn)("<v-select combobox>","<v-combobox>",f,n),a.tags&&(0,l.Rn)("<v-select tags>","<v-combobox multiple>",f,n),a.overflow&&(0,l.Rn)("<v-select overflow>","<v-overflow-btn>",f,n),a.segmented&&(0,l.Rn)("<v-select segmented>","<v-overflow-btn segmented>",f,n),a.editable&&(0,l.Rn)("<v-select editable>","<v-overflow-btn editable>",f,n),s.attrs=s.attrs||{},a.combobox||a.tags?(s.attrs.multiple=a.tags,e(p,s,u)):a.autocomplete?(s.attrs.multiple=a.multiple,e(i,s,u)):a.overflow||a.segmented||a.editable?(s.attrs.segmented=a.segmented,s.attrs.editable=a.editable,e(c,s,u)):(s.attrs.multiple=a.multiple,e(r.Z,s,u))}},g=f},4618:function(e,t,a){a.d(t,{h:function(){return l}});var r=a(2556),s=a(5730),i=a(8135),o=a(6505),n=a(8219),l={functional:!0,$_wrapperFor:r.Z,props:{textarea:Boolean,multiLine:Boolean},render:function(e,t){var a=t.props,u=t.data,c=t.slots,d=t.parent;(0,o.Z)(u);var p=(0,i.Z)(c(),e);return a.textarea&&(0,n.Rn)("<v-text-field textarea>","<v-textarea outline>",l,d),a.multiLine&&(0,n.Rn)("<v-text-field multi-line>","<v-textarea>",l,d),a.textarea||a.multiLine?(u.attrs.outline=a.textarea,e(s.Z,u,p)):e(r.Z,u,p)}}},5730:function(e,t,a){a.d(t,{Z:function(){return o}});var r=a(2556),s=a(8219),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o={name:"v-textarea",extends:r.Z,props:{autoGrow:Boolean,noResize:Boolean,outline:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(e){return!isNaN(parseFloat(e))}},rows:{type:[Number,String],default:5,validator:function(e){return!isNaN(parseInt(e,10))}}},computed:{classes:function(){return i({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},r.Z.options.computed.classes.call(this,null))},dynamicHeight:function(){return this.autoGrow?this.inputHeight:"auto"},isEnclosed:function(){return this.textarea||r.Z.options.computed.isEnclosed.call(this)},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){!this.internalChange&&this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var e=this;setTimeout((function(){e.autoGrow&&e.calculateInputHeight()}),0),this.autoGrow&&this.noResize&&(0,s.zk)('"no-resize" is now implied when using "auto-grow", and can be removed',this)},methods:{calculateInputHeight:function(){var e=this.$refs.input;if(e){e.style.height=0;var t=e.scrollHeight,a=parseInt(this.rows,10)*parseFloat(this.rowHeight);e.style.height=Math.max(a,t)+"px"}},genInput:function(){var e=r.Z.options.methods.genInput.call(this);return e.tag="textarea",delete e.data.attrs.type,e.data.attrs.rows=this.rows,e},onInput:function(e){r.Z.options.methods.onInput.call(this,e),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(e){this.isFocused&&13===e.keyCode&&e.stopPropagation(),this.internalChange=!0,this.$emit("keydown",e)}}}},6505:function(e,t,a){function r(e){if(e.model&&e.on&&e.on.input)if(Array.isArray(e.on.input)){var t=e.on.input.indexOf(e.model.callback);t>-1&&e.on.input.splice(t,1)}else delete e.on.input}a.d(t,{Z:function(){return r}})},8135:function(e,t,a){function r(e,t){var a=[];for(var r in e)e.hasOwnProperty(r)&&a.push(t("template",{slot:r},e[r]));return a}a.d(t,{Z:function(){return r}})}}]);