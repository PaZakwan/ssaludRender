"use strict";(self["webpackChunksecretaria_de_salud_moreno_frontend"]=self["webpackChunksecretaria_de_salud_moreno_frontend"]||[]).push([[312],{4959:function(e,t,a){a.r(t),a.d(t,{default:function(){return D}});var s=a(6194),r=a(8956),o=a(2353),i=a(9418),n=a(6530),l=a(108),u=a(683),c=a(445),d=a(3667),p=a(9456),h=a(8143),m=function(){var e=this,t=e._self._c;return t(n.Z,{attrs:{"grid-list-xs":""}},[t(p.Z,{attrs:{"align-center":"","justify-center":"","ma-0":"",wrap:"","text-xs-center":""}},[t(u.Z,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[t(r.Z,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[t(o.ZB,{staticClass:"px-0"},[e._v("====== PERFIL DE USUARIO ======")])],1)],1),t(u.Z,{attrs:{"pa-1":"","ma-1":"",xs12:"",primary:"","lighten-1":""}},[t(r.Z,{staticClass:"elevation-6"},[t(i.Z,{staticClass:"align-center justify-center primary"},[t(d.Z,{attrs:{medium:"",left:"",color:"white"}},[e._v("person")]),t("span",{staticClass:"title white--text"},[e._v("Mis Datos")]),t(l.Z,{staticClass:"hidden-xs-only mx-2 white",attrs:{vertical:""}}),t(h.Cl)],1),t(o.ZB,[t(c.Z,{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valido,callback:function(t){e.valido=t},expression:"valido"}},[t(p.Z,{attrs:{row:"",wrap:""},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editarPerfil.apply(null,arguments)}}},[t("formPerfil",{attrs:{usuario:e.usuario},on:{checkPassword:function(t){return e.cambiarPassword(t)}}})],1)],1)],1),t(i.Z,{staticClass:"align-center justify-center primary lighten-2"},[t(d.Z,{attrs:{medium:"",color:"black",left:""}},[e._v("info")]),t("div",[t(p.Z,{attrs:{row:""}},[t("span",{staticClass:"body-2 black--text"},[e._v("Los campos mas oscuros pueden ser modificados por un Admin.")])]),t(p.Z,{attrs:{row:""}},[t("span",{staticClass:"body-2 black--text"},[e._v("La constraseña anterior siempre sera requerida para editar el Perfil.")])])],1),t(h.Cl),t(l.Z,{staticClass:"hidden-xs-only mx-2 black",attrs:{inset:"",vertical:""}}),t(s.Z,{class:(e.valido?"primary":"error")+" darken-1",attrs:{round:"",disabled:e.loading.estado,loading:e.loading.estado},on:{click:e.editarPerfil}},[t(d.Z,{attrs:{left:"",color:"white"}},[e._v("edit")]),e._v(e._s(e.valido?"Editar Perfil":"Formulario No valido"))],1)],1)],1)],1)],1)],1)},f=[],g=a(629),v=a(7441),b=a(4036),x=a(4618),w=function(){var e=this,t=e._self._c;return t(p.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t(u.Z,{attrs:{xs12:""}},[t(p.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t(u.Z,{attrs:{xs2:"","px-3":""}}),t(u.Z,{attrs:{xs8:"","px-3":""}},[t(x.h,{attrs:{readonly:"","prepend-icon":"person",label:"Usuario",type:"text",color:"primary","background-color":"primary lighten-3",autocomplete:"username"},model:{value:e.usuario.usuario,callback:function(t){e.$set(e.usuario,"usuario",t)},expression:"usuario.usuario"}})],1),t(u.Z,{attrs:{xs2:"","px-3":""}}),t(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(x.h,{staticClass:"capitalizar",attrs:{readonly:"","prepend-icon":"person",label:"Nombre",type:"text",color:"primary","background-color":"primary lighten-2"},model:{value:e.usuario.nombre,callback:function(t){e.$set(e.usuario,"nombre",t)},expression:"usuario.nombre"}})],1),t(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(x.h,{staticClass:"capitalizar",attrs:{readonly:"","prepend-icon":"person",label:"Apellido",type:"text",color:"primary","background-color":"primary lighten-2"},model:{value:e.usuario.apellido,callback:function(t){e.$set(e.usuario,"apellido",t)},expression:"usuario.apellido"}})],1),t(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(x.h,{attrs:{"prepend-icon":"phone",label:"Telefono",type:"text",color:"primary","background-color":"primary lighten-5",rules:[...e.rules.soloNumero],clearable:"","validate-on-blur":""},model:{value:e.usuario.telefono,callback:function(t){e.$set(e.usuario,"telefono",t)},expression:"usuario.telefono"}})],1),t(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(x.h,{attrs:{"prepend-icon":"mail",label:"Email",type:"email",color:"primary","background-color":"primary lighten-5",rules:[...e.rules.mail],clearable:"","validate-on-blur":""},model:{value:e.usuario.email,callback:function(t){e.$set(e.usuario,"email",t)},expression:"usuario.email"}})],1),t(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(x.h,{staticClass:"capitalizar",attrs:{readonly:"",value:e.usuario.area?e.usuario.area.area:"","prepend-icon":"location_city",label:"Area",type:"text",color:"primary","background-color":"primary lighten-2"}})],1),t(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(x.h,{attrs:{readonly:"","prepend-icon":"work",label:"Actividad en el Area",type:"text",color:"primary","background-color":"primary lighten-2"},model:{value:e.usuario.actividad,callback:function(t){e.$set(e.usuario,"actividad",t)},expression:"usuario.actividad"}})],1)],1)],1),t(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(v.Z,{attrs:{label:"Cambiar Contraseña: "+(e.checkPass?"SI":"NO")},on:{change:function(t){e.checkPassword(),e.usuario.password=null,e.usuario.password2=null}},model:{value:e.checkPass,callback:function(t){e.checkPass=t},expression:"checkPass"}})],1),t(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}}),!0===e.checkPass?t(u.Z,{attrs:{xs12:""}},[t(p.Z,{attrs:{grey:"","lighten-2":"",row:"",wrap:""}},[t(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(x.h,{attrs:{"prepend-icon":"lock",label:"Contraseña",type:"password",rules:[...e.rules.requerido,e.rules.minLength(4)],color:"primary",clearable:"","background-color":"primary lighten-5","validate-on-blur":"",autocomplete:"new-password"},model:{value:e.usuario.password,callback:function(t){e.$set(e.usuario,"password",t)},expression:"usuario.password"}})],1),t(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(x.h,{attrs:{"prepend-icon":"lock",label:"Repetir Contraseña",type:"password",rules:[...e.rules.requerido,e.rules.minLength(4),t=>t===e.usuario.password||"Las Constraseñas no coinciden."],color:"primary",clearable:"","background-color":"primary lighten-5","validate-on-blur":"",autocomplete:"new-password"},model:{value:e.usuario.password2,callback:function(t){e.$set(e.usuario,"password2",t)},expression:"usuario.password2"}})],1)],1)],1):e._e(),"ADMIN_ROLE"===e.persona.role?t(u.Z,{attrs:{xs12:""}},[t(p.Z,{attrs:{grey:"","lighten-2":"",row:"",wrap:""}},[t(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(b.r,{attrs:{readonly:"","item-value":"valor","item-text":"label",items:e.opcionesRoles,label:"Rol","prepend-icon":"supervisor_account",color:"primary","background-color":"primary lighten-2"},model:{value:e.usuario.role,callback:function(t){e.$set(e.usuario,"role",t)},expression:"usuario.role"}})],1),t(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[t(b.r,{attrs:{readonly:"","item-value":"valor","item-text":"label",items:e.opcionesEstados,label:"Estado","prepend-icon":"true"==e.usuario.estado?"check_circle":"cancel",color:"true"==e.usuario.estado?"green lighten-1":"error lighten-1","background-color":"true"==e.usuario.estado?"green lighten-1":"error lighten-1"},model:{value:e.usuario.estado,callback:function(t){e.$set(e.usuario,"estado",t)},expression:"usuario.estado"}})],1)],1)],1):e._e(),t(u.Z,{attrs:{grey:"","lighten-4":"",xs12:""}},[t("treeProperties",{attrs:{data:e.usuario,treeRead:e.permisos,opcionesSelect:e.opcionesPermiso,soloLectura:"soloLectura",mensajeSoloLectura:{icon:"warning_amber",msj:"Los permisos para utilizar los diferentes Modulos del Sistema los otorga Informatica de la Secretaria de Salud, para agregar/modificar los mismos comuniquese con ellos."}}})],1),t(u.Z,{attrs:{xs12:""}},[t(p.Z,{attrs:{grey:"","lighten-2":"",row:"",wrap:""}},[t(u.Z,{attrs:{xs2:"","px-3":""}}),t(u.Z,{attrs:{xs8:"","px-3":""}},[t(x.h,{attrs:{clearable:"","prepend-icon":"lock",label:"Contraseña Anterior",type:"password",rules:[...e.rules.requerido,e.rules.minLength(4)],color:"cuarto darken-4","background-color":"cuarto lighten-5","validate-on-blur":"",autocomplete:"current-password"},model:{value:e.usuario.password_anterior,callback:function(t){e.$set(e.usuario,"password_anterior",t)},expression:"usuario.password_anterior"}})],1),t(u.Z,{attrs:{xs2:"","px-3":""}})],1)],1)],1)},y=[],Z=a(8535),k={name:"formPerfil",props:["usuario"],components:{treeProperties:Z.Z},data(){return{checkPass:!0}},computed:{...(0,g.rn)(["persona","rules"]),...(0,g.rn)("main_usuario",["permisos","opcionesPermiso","opcionesRoles","opcionesEstados"])},methods:{checkPassword(){this.$emit("checkPassword",this.checkPass)}}},I=k,S=a(1001),C=(0,S.Z)(I,w,y,!1,null,null,null),_=C.exports,P={name:"usuarioPerfil",components:{formPerfil:_},data(){return{valido:!0,cambiarPass:!0,usuario:{}}},computed:{...(0,g.rn)(["loading"]),...(0,g.rn)("main_usuario",["usuarioBase"])},async created(){this.usuario={...this._merge(this._cloneDeep(this.usuarioBase),await this.buscarUsuarioID(this.$route.params.id))}},methods:{...(0,g.OI)(["mostrarError"]),...(0,g.nv)("main_usuario",["buscarUsuarioID","guardarPerfil"]),cambiarPassword(e){this.cambiarPass=e},async editarPerfil(){let e=JSON.parse(JSON.stringify(this.usuario));if(!1===this.cambiarPass)delete e.password,delete e.password2;else if(e.password!==e.password2)return this.$refs.form.validate(),void this.mostrarError({titulo:"Contraseña",mensaje:"Las contraseñas no coinciden."});await this.guardarPerfil({usuario:e,validate:this.$refs.form.validate,finish:"retroceder"})}}},$=P,B=(0,S.Z)($,m,f,!1,null,null,null),D=B.exports},1232:function(e,t,a){a(7448);var s=a(1468),r=a(7416),o=a(8131);t["Z"]={name:"v-combobox",extends:r.Z,props:{delimiters:{type:Array,default:function(){return[]}},returnObject:{type:Boolean,default:!0}},data:function(){return{editingIndex:-1}},computed:{counterValue:function(){return this.multiple?this.selectedItems.length:(this.internalSearch||"").toString().length},hasSlot:function(){return s.Z.options.computed.hasSlot.call(this)||this.multiple},isAnyValueAllowed:function(){return!0},menuCanShow:function(){return!!this.isFocused&&(this.hasDisplayedItems||!!this.$slots["no-data"]&&!this.hideNoData)}},methods:{onFilteredItemsChanged:function(){},onInternalSearchChanged:function(e){if(e&&this.multiple&&this.delimiters.length){var t=this.delimiters.find((function(t){return e.endsWith(t)}));null!=t&&(this.internalSearch=e.slice(0,e.length-t.length),this.updateTags())}this.updateMenuDimensions()},genChipSelection:function(e,t){var a=this,r=s.Z.options.methods.genChipSelection.call(this,e,t);return this.multiple&&(r.componentOptions.listeners.dblclick=function(){a.editingIndex=t,a.internalSearch=a.getText(e),a.selectedIndex=-1}),r},onChipInput:function(e){s.Z.options.methods.onChipInput.call(this,e),this.editingIndex=-1},onEnterDown:function(e){e.preventDefault(),s.Z.options.methods.onEnterDown.call(this),this.getMenuIndex()>-1||this.updateSelf()},onKeyDown:function(e){var t=e.keyCode;s.Z.options.methods.onKeyDown.call(this,e),this.multiple&&t===o.Do.left&&0===this.$refs.input.selectionStart&&this.updateSelf(),this.changeSelectedIndex(t)},onTabDown:function(e){if(this.multiple&&this.internalSearch&&-1===this.getMenuIndex())return e.preventDefault(),e.stopPropagation(),this.updateTags();r.Z.options.methods.onTabDown.call(this,e)},selectItem:function(e){this.editingIndex>-1?this.updateEditing():r.Z.options.methods.selectItem.call(this,e)},setSelectedItems:function(){null==this.internalValue||""===this.internalValue?this.selectedItems=[]:this.selectedItems=this.multiple?this.internalValue:[this.internalValue]},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.internalSearch;s.Z.options.methods.setValue.call(this,e)},updateEditing:function(){var e=this.internalValue.slice();e[this.editingIndex]=this.internalSearch,this.setValue(e),this.editingIndex=-1},updateCombobox:function(){var e=Boolean(this.$scopedSlots.selection)||this.hasChips;e&&!this.searchIsDirty||(this.internalSearch!==this.getText(this.internalValue)&&this.setValue(),e&&(this.internalSearch=void 0))},updateSelf:function(){this.multiple?this.updateTags():this.updateCombobox()},updateTags:function(){var e=this.getMenuIndex();if(!(e<0)||this.searchIsDirty){if(this.editingIndex>-1)return this.updateEditing();var t=this.selectedItems.indexOf(this.internalSearch);if(t>-1){var a=this.internalValue.slice();a.splice(t,1),this.setValue(a)}if(e>-1)return this.internalSearch=null;this.selectItem(this.internalSearch),this.internalSearch=null}}}}},4036:function(e,t,a){a.d(t,{r:function(){return f},Z:function(){return g}});var s=a(1468),r=a(7416),o=r.Z,i=a(2556),n=a(8205),l=a(8219),u=o.extend({name:"v-overflow-btn",props:{segmented:Boolean,editable:Boolean,transition:s.Z.options.props.transition},computed:{classes:function(){return Object.assign(o.options.computed.classes.call(this),{"v-overflow-btn":!0,"v-overflow-btn--segmented":this.segmented,"v-overflow-btn--editable":this.editable})},isAnyValueAllowed:function(){return this.editable||o.options.computed.isAnyValueAllowed.call(this)},isSingle:function(){return!0},computedItems:function(){return this.segmented?this.allItems:this.filteredItems},$_menuProps:function(){var e=o.options.computed.$_menuProps.call(this);return e.transition=e.transition||"v-menu-transition",e}},methods:{genSelections:function(){return this.editable?o.options.methods.genSelections.call(this):s.Z.options.methods.genSelections.call(this)},genCommaSelection:function(e,t,a){return this.segmented?this.genSegmentedBtn(e):s.Z.options.methods.genCommaSelection.call(this,e,t,a)},genInput:function(){var e=i.Z.options.methods.genInput.call(this);return e.data.domProps.value=this.editable?this.internalSearch:"",e.data.attrs.readonly=!this.isAnyValueAllowed,e},genLabel:function(){if(this.editable&&this.isFocused)return null;var e=i.Z.options.methods.genLabel.call(this);return e?(e.data.style={},e):e},genSegmentedBtn:function(e){var t=this,a=this.getValue(e),s=this.computedItems.find((function(e){return t.getValue(e)===a}))||e;return s.text&&s.callback?this.$createElement(n.Z,{props:{flat:!0},on:{click:function(e){e.stopPropagation(),s.callback(e)}}},[s.text]):((0,l.Kd)("When using 'segmented' prop without a selection slot, items must contain both a text and callback property",this),null)}}}),c=u,d=a(1232),p=d.Z,h=a(8135),m=a(6505),f={functional:!0,$_wrapperFor:s.Z,props:{autocomplete:Boolean,combobox:Boolean,multiple:Boolean,tags:Boolean,editable:Boolean,overflow:Boolean,segmented:Boolean},render:function(e,t){var a=t.props,r=t.data,i=t.slots,n=t.parent;(0,m.Z)(r);var u=(0,h.Z)(i(),e);return a.autocomplete&&(0,l.Rn)("<v-select autocomplete>","<v-autocomplete>",f,n),a.combobox&&(0,l.Rn)("<v-select combobox>","<v-combobox>",f,n),a.tags&&(0,l.Rn)("<v-select tags>","<v-combobox multiple>",f,n),a.overflow&&(0,l.Rn)("<v-select overflow>","<v-overflow-btn>",f,n),a.segmented&&(0,l.Rn)("<v-select segmented>","<v-overflow-btn segmented>",f,n),a.editable&&(0,l.Rn)("<v-select editable>","<v-overflow-btn editable>",f,n),r.attrs=r.attrs||{},a.combobox||a.tags?(r.attrs.multiple=a.tags,e(p,r,u)):a.autocomplete?(r.attrs.multiple=a.multiple,e(o,r,u)):a.overflow||a.segmented||a.editable?(r.attrs.segmented=a.segmented,r.attrs.editable=a.editable,e(c,r,u)):(r.attrs.multiple=a.multiple,e(s.Z,r,u))}},g=f},4618:function(e,t,a){a.d(t,{h:function(){return l}});var s=a(2556),r=a(5730),o=a(8135),i=a(6505),n=a(8219),l={functional:!0,$_wrapperFor:s.Z,props:{textarea:Boolean,multiLine:Boolean},render:function(e,t){var a=t.props,u=t.data,c=t.slots,d=t.parent;(0,i.Z)(u);var p=(0,o.Z)(c(),e);return a.textarea&&(0,n.Rn)("<v-text-field textarea>","<v-textarea outline>",l,d),a.multiLine&&(0,n.Rn)("<v-text-field multi-line>","<v-textarea>",l,d),a.textarea||a.multiLine?(u.attrs.outline=a.textarea,e(r.Z,u,p)):e(s.Z,u,p)}}},5730:function(e,t,a){a.d(t,{Z:function(){return i}});var s=a(2556),r=a(8219),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},i={name:"v-textarea",extends:s.Z,props:{autoGrow:Boolean,noResize:Boolean,outline:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(e){return!isNaN(parseFloat(e))}},rows:{type:[Number,String],default:5,validator:function(e){return!isNaN(parseInt(e,10))}}},computed:{classes:function(){return o({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},s.Z.options.computed.classes.call(this,null))},dynamicHeight:function(){return this.autoGrow?this.inputHeight:"auto"},isEnclosed:function(){return this.textarea||s.Z.options.computed.isEnclosed.call(this)},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){!this.internalChange&&this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var e=this;setTimeout((function(){e.autoGrow&&e.calculateInputHeight()}),0),this.autoGrow&&this.noResize&&(0,r.zk)('"no-resize" is now implied when using "auto-grow", and can be removed',this)},methods:{calculateInputHeight:function(){var e=this.$refs.input;if(e){e.style.height=0;var t=e.scrollHeight,a=parseInt(this.rows,10)*parseFloat(this.rowHeight);e.style.height=Math.max(a,t)+"px"}},genInput:function(){var e=s.Z.options.methods.genInput.call(this);return e.tag="textarea",delete e.data.attrs.type,e.data.attrs.rows=this.rows,e},onInput:function(e){s.Z.options.methods.onInput.call(this,e),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(e){this.isFocused&&13===e.keyCode&&e.stopPropagation(),this.internalChange=!0,this.$emit("keydown",e)}}}},6505:function(e,t,a){function s(e){if(e.model&&e.on&&e.on.input)if(Array.isArray(e.on.input)){var t=e.on.input.indexOf(e.model.callback);t>-1&&e.on.input.splice(t,1)}else delete e.on.input}a.d(t,{Z:function(){return s}})},8135:function(e,t,a){function s(e,t){var a=[];for(var s in e)e.hasOwnProperty(s)&&a.push(t("template",{slot:s},e[s]));return a}a.d(t,{Z:function(){return s}})}}]);