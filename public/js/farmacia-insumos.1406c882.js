"use strict";(self["webpackChunksecretaria_de_salud_moreno_frontend"]=self["webpackChunksecretaria_de_salud_moreno_frontend"]||[]).push([[5982],{12683:function(a,t,e){e.d(t,{A:function(){return u}});var i=function(){var a=this,t=a._self._c;return a.field.array?t("span",[a.field.object?t("span",a._l(a._get(a.props.item,a.field.ruta),(function(e,i){return t("code",{key:`${a.field.text}-${i}`,attrs:{STYLE:"margin:4px"}},[a.field.keyShow?t("span",[a._v(a._s(a.field.date?a.mostrarFecha(e[a.field.keyShow],a.field.time)||"--------":e[a.field.keyShow]??"--------"))]):t("span",a._l(e,(function(r,o,s){return t("span",{key:`${a.field.text}-${i}-${o}`},[a._v(a._s(o)+": "),t("kbd",[a._v(a._s(isNaN(r)&&"Invalid Date"!==a.mostrarFecha(r,a.field.time)?a.mostrarFecha(r,a.field.time)||"--------":r??"--------"))]),s!=Object.keys(e).length-1?t("span",[a._v(a._s("\n"))]):a._e()])})),0)])})),0):t("span",a._l(a._get(a.props.item,a.field.ruta),(function(e,i){return t("code",{key:`${a.field.text}-${i}`,attrs:{STYLE:"margin:4px"}},[a._v(a._s(a.field.date?a.mostrarFecha(e,a.field.time)||"--------":e??"--------"))])})),0)]):a.field.object?t("span",[t("code",{attrs:{STYLE:"margin:4px"}},[a.field.keyShow?t("span",[a._v(a._s(a.field.date?a.mostrarFecha(a._get(a.props.item,a.field.ruta)[a.field.keyShow],a.field.time)||"--------":a._get(a.props.item,a.field.ruta)[a.field.keyShow]??"--------"))]):t("span",a._l(a._get(a.props.item,a.field.ruta),(function(e,i,r){return t("span",{key:`${a.field.text}-${i}`},[a._v(a._s(i)+": "),t("kbd",[a._v(a._s(isNaN(e)&&"Invalid Date"!==a.mostrarFecha(e,a.field.time)?`${a.mostrarFecha(e,a.field.time)}`||"--------":e??"--------"))]),r!=Object.keys(a._get(a.props.item,a.field.ruta)).length-1?t("span",[a._v(a._s("\n"))]):a._e()])})),0)])]):t("span",{style:""+(a.field.numeric&&a._get(a.props.item,a.field.ruta)<0?"color: red;":"")},[a._v(a._s(a.field.date?a.mostrarFecha(a.props.item[a.field.ruta],a.field.time)||"--------":a.field.boolean?""+(a._get(a.props.item,a.field.ruta)&&"false"!=a._get(a.props.item,a.field.ruta)&&"0"!=a._get(a.props.item,a.field.ruta)?"Si":"No"):a._get(a.props.item,a.field.ruta)?.toLocaleString("es-AR")??"--------"))])},r=[],o={name:"body-data-table-dinamic",props:["props","field"]},s=o,n=e(81656),l=(0,n.A)(s,i,r,!1,null,null,null),u=l.exports},23457:function(a,t,e){e.r(t),e.d(t,{default:function(){return V}});var i=e(21999),r=e(28383),o=e(3150),s=e(1899),n=e(37471),l=e(48122),u=e(81851),d=e(34172),c=e(41614),m=e(21527),p=e(69155),h=e(17912),f=e(55731),g=e(57e3),_=e(17087),v=function(){var a=this,t=a._self._c;return t(l.A,{attrs:{fluid:"","grid-list-xs":""}},[t(p.A,{attrs:{"align-center":"","justify-center":"","ma-0":"",wrap:"","text-xs-center":""}},[t(c.A,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[t(o.A,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[t(s.OQ,{staticClass:"px-0 text-uppercase"},[a._v("====== Gestion de Farmacia ======")])],1)],1),t(c.A,{attrs:{"pa-1":"","ma-1":"",red:"","darken-2":"",xs12:""}},[t(o.A,{attrs:{color:"yellow darken-1"}},[t(s.OQ,{staticClass:"px-3 font-weight-medium"},[t("p",[t(m.A,{attrs:{color:"red darken-3",left:""}},[a._v(" warning ")]),t("b",[t("u",[a._v("Antes de Crear un Nuevo Insumo:")])])],1),a._v(" Por favor, utilizar la funcion de "),t("b",[t("u",[a._v("Buscar")])]),a._v(" para ver si ya esta "),t("b",[t("u",[a._v("Creado")])]),a._v(" dicho Insumo porque al generar un nuevo Insumo con nombre similar va generar "),t("b",[t("u",[a._v("confusion")])]),a._v(" y "),t("b",[t("u",[a._v("reportes erroneos")])]),a._v(", si conoce al Insumo por otro "),t("b",[t("u",[a._v("sinonimo")])]),a._v(" puede agregarselo al ya Creado utilizando el boton de "),t("b",[t("u",[a._v("Edicion")])]),a._v(" y agregando dicho sinonimo a su "),t("b",[t("u",[a._v("Nombre")])]),a._v(" (Visible en todas las etapas) o "),t("b",[t("u",[a._v("Descripcion")])]),a._v(" (Visible solamente al momento de generar un Ingreso o Solicitudes). ")])],1)],1),t(c.A,{attrs:{"pa-1":"","ma-1":"",xs12:"",cuarto:"","lighten-1":""}},[t(o.A,{staticClass:"elevation-6"},[t(p.A,{attrs:{row:"",wrap:"","align-center":"","justify-center":"",primary:""}},[t(c.A,{attrs:{"px-3":""}},[t(m.A,{attrs:{medium:"",color:"white",left:""}},[a._v("fa-solid fa-pills")]),t("span",{staticClass:"title white--text"},[a._v("Alta de Insumos")])],1),t(f.hc),t(d.A,{staticClass:"hidden-xs-only mx-2 my-1 white",attrs:{vertical:""}}),t(r.A,{staticClass:"mb-2",attrs:{color:"primary",disabled:a.loading.estado},on:{click:a.recargarDataTable}},[t(m.A,{attrs:{medium:"",left:""}},[a._v("refresh")]),a._v(" Recargar Insumos")],1)],1),t("div",[t(n.A,[t(c.A,{attrs:{xs12:"",sm4:"","px-2":""}},[t(g.W,{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":"",clearable:""},model:{value:a.search,callback:function(t){a.search=t},expression:"search"}})],1),t(f.hc),t(d.A,{staticClass:"hidden-xs-only mx-2 primary",attrs:{inset:"",vertical:""}}),t(r.A,{staticClass:"mb-2",attrs:{color:"primary",disabled:a.soloLectura||a.loading.estado},on:{click:function(t){return a.actualizarDialogInsumo({state:!0})}}},[t(m.A,{attrs:{medium:"",left:""}},[a._v("add_circle_outline")]),a._v(" Nuevo Insumo")],1)],1),t(u.A,{staticClass:"elevation-6",staticStyle:{"table-layout":"fixed"},attrs:{headers:a.headers,items:a.dataTable,"item-key":"_id",pagination:a.paginacion,"rows-per-page-items":[5,10,25,50],loading:a.loading.estado,search:a.search},on:{"update:pagination":function(t){a.paginacion=t}},scopedSlots:a._u([{key:"no-results",fn:function(){return[t(i.A,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[a._v(' No se encontraron resultados para "'+a._s(a.search)+'". ')])]},proxy:!0},{key:"no-data",fn:function(){return[t(i.A,{staticClass:"text-sm-left",attrs:{value:!0,color:"error",icon:"warning"}},[a._v(" No hay datos para mostrar. ")])]},proxy:!0},{key:"items",fn:function(e){return[t("tr",{class:a.backgroundClass(e.item)},[t("td",{staticClass:"text-sm-left"},[t("div",{staticClass:"text-xs-center",staticStyle:{width:"60px"}},[t(_.A,{attrs:{top:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:i}){return[t(m.A,a._g({staticClass:"mr-2",attrs:{disabled:a.soloLectura||a.loading.estado,color:"primary"},on:{click:function(t){return a.actualizarDialogInsumo({state:!0,id:e.item.id})}}},i),[a._v(" edit ")])]}}],null,!0)},[t("span",[a._v("Editar - "+a._s(e.item.nombre))])]),t(_.A,{attrs:{top:"","close-delay":"0"},scopedSlots:a._u([{key:"activator",fn:function({on:i}){return[t(m.A,a._g({attrs:{disabled:a.soloLectura||a.loading.estado,color:"error"},on:{click:function(t){return a.borrarInsumo({insumo:e.item})}}},i),[a._v(" delete ")])]}}],null,!0)},[t("span",[a._v("Borrar - "+a._s(e.item.nombre))])])],1)]),a._l(a.headersDinamics,(function(a){return t("td",{key:a.text,class:a.class},[t("bodyDataTableDinamic",{attrs:{props:e,field:a}})],1)}))],2)]}}])},[t(h.A,{attrs:{color:"blue",indeterminate:""}})],1)],1)],1)],1)],1),t("dialogInsumo",{attrs:{close:a.close}})],1)},b=[],y=e(95353),x=e(12683),I=e(28597),A=e(79305),k=e(21939),w=e(70134),C=e(45621),$=function(){var a=this,t=a._self._c;return t(A.A,{attrs:{"max-width":"80%",persistent:"",scrollable:""},model:{value:a.dialogInsumo.state,callback:function(t){a.$set(a.dialogInsumo,"state",t)},expression:"dialogInsumo.state"}},[t(o.A,[t(w.A,{attrs:{color:"grey lighten-2",height:"auto",window:""}},[t(m.A,{attrs:{medium:"",color:"black darken-2"}},[a._v("fa-solid fa-pills")]),t("span",{staticClass:"display-1 font-weight-bold black--text text--darken-2"},[a._v(a._s(a.dialogInsumo.id?`Editar: ${a.insumo.nombre}`:"Nuevo Insumo"))]),t(f.hc),t(m.A,{attrs:{large:"",disabled:a.loading.estado,color:"error darken-1"},on:{click:a.close}},[a._v("cancel_presentation")])],1),t(s.OQ,[t(k.A,{ref:"form",attrs:{"lazy-validation":""},model:{value:a.valido,callback:function(t){a.valido=t},expression:"valido"}},[t(p.A,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[t(c.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(I.A,{staticClass:"capitalizar",attrs:{readonly:a.dialogInsumo.soloLectura,clearable:!a.dialogInsumo.soloLectura,"background-color":a.dialogInsumo.soloLectura?"primary lighten-1":"primary lighten-5",items:a.optionsJsonFarmacia.insumo_categorias,label:"Categoria","prepend-icon":"description",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},model:{value:a.insumo.categoria,callback:function(t){a.$set(a.insumo,"categoria",t)},expression:"insumo.categoria"}})],1),t(c.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(g.W,{attrs:{readonly:a.dialogInsumo.soloLectura,clearable:!a.dialogInsumo.soloLectura,"background-color":a.dialogInsumo.soloLectura?"primary lighten-1":"primary lighten-5","prepend-icon":"fa-solid fa-pills",label:"Nombre",type:"text",color:"primary",rules:[...a.rules.requerido],"validate-on-blur":""},model:{value:a.insumo.nombre,callback:function(t){a.$set(a.insumo,"nombre",t)},expression:"insumo.nombre"}})],1),t(c.A,{attrs:{xs12:"",sm6:"","px-3":""}},[t(g.W,{attrs:{readonly:a.dialogInsumo.soloLectura,clearable:!a.dialogInsumo.soloLectura,"background-color":a.dialogInsumo.soloLectura?"primary lighten-1":"primary lighten-5","prepend-icon":"pin",label:"Codigo Unico (opcional)",type:"text",color:"primary"},model:{value:a.insumo.unique_code,callback:function(t){a.$set(a.insumo,"unique_code",t)},expression:"insumo.unique_code"}})],1),t(c.A,{attrs:{xs12:"","px-3":""}},[t(C.A,{attrs:{readonly:a.dialogInsumo.soloLectura,clearable:!a.dialogInsumo.soloLectura,"background-color":a.dialogInsumo.soloLectura?"primary lighten-1":"primary lighten-5",label:"Descripcion",color:"primary","prepend-icon":"description","auto-grow":"",rows:"2"},model:{value:a.insumo.descripcion,callback:function(t){a.$set(a.insumo,"descripcion",t)},expression:"insumo.descripcion"}})],1)],1)],1)],1),t(s.SL,[t(p.A,{attrs:{row:"",wrap:""}},[t(f.hc),t(r.A,{staticClass:"red darken-1 white--text",attrs:{disabled:a.loading.estado,round:"",loading:a.loading.estado},on:{click:function(t){return a.close()}}},[t(m.A,{attrs:{left:""}},[a._v("cancel_presentation")]),a._v("Cancelar ")],1),t(r.A,{staticClass:"primary darken-1 white--text",attrs:{disabled:a.loading.estado||a.dialogInsumo.soloLectura,loading:a.loading.estado,round:""},on:{click:function(t){return a.guardarInsumo()}}},[t(m.A,{attrs:{left:""}},[a._v("save")]),a._v(a._s(a.valido?a.dialogInsumo.id?"Guardar":"Crear":"Formulario No valido")+" ")],1)],1)],1)],1)],1)},L=[],D=(e(44114),{name:"dialogInsumo",props:["close"],data:()=>({valido:!0,optionsJsonFarmacia:{},insumo:{},insumoBase:{categoria:"",nombre:"",descripcion:"",unique_code:"",condiciones:[],grupo_etario:[{min:{valor:"",unidad:""},max:{valor:"",unidad:""}}],dosis_posibles:[],estado:!0}}),computed:{...(0,y.aH)(["loading","persona","rules"]),...(0,y.aH)("farmacia",["dialogInsumo"])},watch:{async"dialogInsumo.state"(a){a?(setTimeout((async()=>{this.dialogInsumo.id?this.insumo=Object.assign(this._cloneDeep(this.insumoBase),{estado:!1},...await this.buscarInsumosFiltro({filtro:{_id:this.dialogInsumo.id}})):this.insumo=this._cloneDeep(this.insumoBase),this.$refs.form.resetValidation()}),350),this.optionsJsonFarmacia=await this.returnOptionsJSON({key:"farmacia",opcion:"base"})):(this.insumo=this._cloneDeep(this.insumoBase),this.$refs.form.resetValidation())}},async beforeMount(){this.insumo=this._cloneDeep(this.insumoBase),this.optionsJsonFarmacia=await this.returnOptionsJSON({key:"farmacia",opcion:"base"})},methods:{...(0,y.PY)(["mostrarLoading","mostrarError","mostrarMensaje","ocultarLoading"]),...(0,y.i0)(["returnOptionsJSON","requestAPI"]),...(0,y.i0)("farmacia",["buscarInsumosFiltro"]),agregarFila(){this.insumo.grupo_etario.push(this._cloneDeep(this.insumoBase.grupo_etario[0]))},borrarFila(a){this.insumo.grupo_etario.splice(a,1)},changeUnidad({index:a,unidad:t}){"Menor al Maximo"===t&&(this.insumo.grupo_etario[a].min.valor=""),"Mayor al Minimo"===t&&(this.insumo.grupo_etario[a].max.valor="")},async guardarInsumo(){if(!this.$refs.form.validate())return this.mostrarError({mensaje:"Revise los campos obligatorios.",titulo:"Valores Requeridos."}),!1;try{let a=this._cloneDeep(this.insumo);if(a._id){if(!await this.$root.$confirm.open({titulo:"EDITAR",msj:["Las modificaciones efectuadas repercutiran en todas las cargas Futuras y las Ya Realizadas de este Insumo.","¿Desea continuar?"]}))return!1}else{let t=this.isVacio(a,!0);if(!0===t.vacio)return this.mostrarError({mensaje:"Complete por lo menos un dato.",titulo:"Valores Requeridos"}),!1;a=t.dato}this.mostrarLoading({titulo:"Guardando Insumo..."});let t=null;return t=await this.requestAPI({method:"put",url:"/farmacia/insumo",update:a}),!!t?.data?.ok&&(this.mostrarMensaje({msj:[`Insumo ${a._id?"Editado":"Guardado"} exitosamente.`],titulo:"Completado"}),this.close(),!0)}catch(a){return this.mostrarError({mensaje:a,titulo:"Inesperado (guardarInsumo)"}),!1}finally{this.ocultarLoading()}}}}),B=D,j=e(81656),F=(0,j.A)(B,$,L,!1,null,null,null),S=F.exports,E={name:"insumoBuscar",components:{bodyDataTableDinamic:x.A,dialogInsumo:S},data:()=>({dataTable:[],search:"",paginacion:{sortBy:"nombre",descending:!1,rowsPerPage:10,page:1},headers:[{text:"Acciones",value:"id",align:"center",sortable:!1,width:"5%",ruta:"area",ignore:!0},{text:"Categoria",value:"categoria",align:"left",class:"text-xs-left",width:"15%",ruta:"categoria"},{text:"Nombre",value:"nombre",align:"left",class:"text-xs-left",width:"30%",ruta:"nombre"},{text:"Descripcion",value:"descripcion",align:"left",class:"text-xs-left",width:"35%",ruta:"descripcion"},{text:"Codigo Unico (opcional)",value:"unique_code",align:"left",class:"text-xs-left",width:"15%",ruta:"unique_code"}]}),computed:{...(0,y.aH)(["loading","persona"]),soloLectura(){return!(this.persona.farmacia.insumos||this.persona.farmacia.general?.admin)},headersDinamics(){return[...this.headers.filter((a=>!0!==a.ignore))]}},async created(){this.recargarDataTable()},methods:{...(0,y.PY)(["mostrarLoading","mostrarError","mostrarMensaje","ocultarLoading"]),...(0,y.i0)(["requestAPI"]),...(0,y.i0)("farmacia",["actualizarDialogInsumo","buscarInsumosFiltro"]),backgroundClass(a){if(!a)return"";try{return!0===a.estado?"background-color: primary lighten-5":"background-color: error lighten-4"}catch(t){return""}},close(){this.actualizarDialogInsumo({state:!1}),this.recargarDataTable()},async recargarDataTable(){this.dataTable=await this.buscarInsumosFiltro(),this.paginacion.page>Math.ceil(this.dataTable?.length/this.paginacion.rowsPerPage)&&(this.paginacion.page=1)},async borrarInsumo({insumo:a}){if(await this.$root.$confirm.open({titulo:"ELIMINAR",msj:["Podra Eliminarlo solamente si todavia no se utilizo para ningun ingreso/solicitud.","Dejara de estar disponible para la carga de ingresos y filtros de busqueda.",`El Insumo: ${a.nombre}, sera Eliminado.\n¿Desea continuar?`]}))try{this.mostrarLoading({titulo:"Borrando Insumo..."});let t=null;return t=await this.requestAPI({method:"delete",url:`/farmacia/insumo/${a.id}`}),!!t?.data?.ok&&(this.mostrarMensaje({msj:["Borrado exitosamente."],titulo:"Borrado Exitoso"}),this.recargarDataTable(),!0)}catch(t){return this.mostrarError({mensaje:t,titulo:"Inesperado (borrarInsumo)"}),!1}finally{this.ocultarLoading()}}}},N=E,T=(0,j.A)(N,v,b,!1,null,null,null),V=T.exports},21939:function(a,t,e){e.d(t,{A:function(){return r}});var i=e(88e3),r={name:"v-form",mixins:[(0,i.G)("form")],inheritAttrs:!1,props:{value:Boolean,lazyValidation:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(){var a=Object.values(this.errorBag).includes(!0);this.$emit("input",!a)},deep:!0,immediate:!0}},methods:{watchInput:function(a){var t=this,e=function(a){return a.$watch("hasError",(function(e){t.$set(t.errorBag,a._uid,e)}),{immediate:!0})},i={_uid:a._uid,valid:void 0,shouldValidate:void 0};return this.lazyValidation?i.shouldValidate=a.$watch("shouldValidate",(function(r){r&&(t.errorBag.hasOwnProperty(a._uid)||(i.valid=e(a)))})):i.valid=e(a),i},validate:function(){var a=this.inputs.filter((function(a){return!a.validate(!0)})).length;return!a},reset:function(){for(var a=this,t=this.inputs.length;t--;)this.inputs[t].reset();this.lazyValidation&&setTimeout((function(){a.errorBag={}}),0)},resetValidation:function(){for(var a=this,t=this.inputs.length;t--;)this.inputs[t].resetValidation();this.lazyValidation&&setTimeout((function(){a.errorBag={}}),0)},register:function(a){var t=this.watchInput(a);this.inputs.push(a),this.watchers.push(t)},unregister:function(a){var t=this.inputs.find((function(t){return t._uid===a._uid}));if(t){var e=this.watchers.find((function(a){return a._uid===t._uid}));e.valid&&e.valid(),e.shouldValidate&&e.shouldValidate(),this.watchers=this.watchers.filter((function(a){return a._uid!==t._uid})),this.inputs=this.inputs.filter((function(a){return a._uid!==t._uid})),this.$delete(this.errorBag,t._uid)}}},render:function(a){var t=this;return a("form",{staticClass:"v-form",attrs:Object.assign({novalidate:!0},this.$attrs),on:{submit:function(a){return t.$emit("submit",a)}}},this.$slots.default)}}}}]);