"use strict";(self["webpackChunksecretaria_de_salud_moreno_frontend"]=self["webpackChunksecretaria_de_salud_moreno_frontend"]||[]).push([[153],{4959:function(r,a,e){e.r(a),e.d(a,{default:function(){return j}});var s=e(6194),o=e(8956),t=e(2353),i=e(9418),l=e(6530),n=e(108),u=e(683),c=e(445),p=e(3667),d=e(9456),m=e(8143),x=function(){var r=this,a=r._self._c;return a(l.Z,{attrs:{"grid-list-xs":""}},[a(d.Z,{attrs:{"align-center":"","justify-center":"","ma-0":"",wrap:"","text-xs-center":""}},[a(u.Z,{attrs:{"pa-1":"","ma-1":"",cuarto:"",xs12:""}},[a(o.Z,{staticClass:"white--text",attrs:{color:"cuarto darken-2"}},[a(t.ZB,{staticClass:"px-0"},[r._v("====== PERFIL DE USUARIO ======")])],1)],1),a(u.Z,{attrs:{"pa-1":"","ma-1":"",xs12:"",primary:"","lighten-1":""}},[a(o.Z,{staticClass:"elevation-6"},[a(i.Z,{staticClass:"align-center justify-center primary"},[a(p.Z,{attrs:{medium:"",left:"",color:"white"}},[r._v("person")]),a("span",{staticClass:"title white--text"},[r._v("Mis Datos")]),a(n.Z,{staticClass:"hidden-xs-only mx-2 white",attrs:{vertical:""}}),a(m.Cl)],1),a(t.ZB,[a(c.Z,{ref:"form",attrs:{"lazy-validation":""},model:{value:r.valido,callback:function(a){r.valido=a},expression:"valido"}},[a(d.Z,{attrs:{row:"",wrap:""},on:{keypress:function(a){return!a.type.indexOf("key")&&r._k(a.keyCode,"enter",13,a.key,"Enter")?null:r.editarPerfil.apply(null,arguments)}}},[a("formPerfil",{attrs:{usuario:r.usuario},on:{checkPassword:function(a){return r.cambiarPassword(a)}}})],1)],1)],1),a(i.Z,{staticClass:"align-center justify-center primary lighten-2"},[a(p.Z,{attrs:{medium:"",color:"black",left:""}},[r._v("info")]),a("div",[a(d.Z,{attrs:{row:""}},[a("span",{staticClass:"body-2 black--text"},[r._v("Los campos mas oscuros pueden ser modificados por un Admin.")])]),a(d.Z,{attrs:{row:""}},[a("span",{staticClass:"body-2 black--text"},[r._v("La constraseña anterior siempre sera requerida para editar el Perfil.")])])],1),a(m.Cl),a(n.Z,{staticClass:"hidden-xs-only mx-2 black",attrs:{inset:"",vertical:""}}),a(s.Z,{class:(r.valido?"primary":"error")+" darken-1",attrs:{round:"",disabled:r.loading.estado,loading:r.loading.estado},on:{click:r.editarPerfil}},[a(p.Z,{attrs:{left:"",color:"white"}},[r._v("edit")]),r._v(r._s(r.valido?"Editar Perfil":"Formulario No valido"))],1)],1)],1)],1)],1)],1)},h=[],b=e(629),f=e(7441),y=e(4036),g=e(4618),k=function(){var r=this,a=r._self._c;return a(d.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[a(u.Z,{attrs:{xs12:""}},[a(d.Z,{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[a(u.Z,{attrs:{xs2:"","px-3":""}}),a(u.Z,{attrs:{xs8:"","px-3":""}},[a(g.h,{attrs:{readonly:"","prepend-icon":"person",label:"Usuario",type:"text",color:"primary","background-color":"primary lighten-3",autocomplete:"username"},model:{value:r.usuario.usuario,callback:function(a){r.$set(r.usuario,"usuario",a)},expression:"usuario.usuario"}})],1),a(u.Z,{attrs:{xs2:"","px-3":""}}),a(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[a(g.h,{staticClass:"capitalizar",attrs:{readonly:"","prepend-icon":"person",label:"Nombre",type:"text",color:"primary","background-color":"primary lighten-2"},model:{value:r.usuario.nombre,callback:function(a){r.$set(r.usuario,"nombre",a)},expression:"usuario.nombre"}})],1),a(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[a(g.h,{staticClass:"capitalizar",attrs:{readonly:"","prepend-icon":"person",label:"Apellido",type:"text",color:"primary","background-color":"primary lighten-2"},model:{value:r.usuario.apellido,callback:function(a){r.$set(r.usuario,"apellido",a)},expression:"usuario.apellido"}})],1),a(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[a(g.h,{attrs:{"prepend-icon":"phone",label:"Telefono",type:"text",color:"primary","background-color":"primary lighten-5",rules:[...r.rules.soloNumero],clearable:"","validate-on-blur":""},model:{value:r.usuario.telefono,callback:function(a){r.$set(r.usuario,"telefono",a)},expression:"usuario.telefono"}})],1),a(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[a(g.h,{attrs:{"prepend-icon":"mail",label:"Email",type:"email",color:"primary","background-color":"primary lighten-5",rules:[...r.rules.mail],clearable:"","validate-on-blur":""},model:{value:r.usuario.email,callback:function(a){r.$set(r.usuario,"email",a)},expression:"usuario.email"}})],1),a(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[a(g.h,{staticClass:"capitalizar",attrs:{readonly:"",value:r.usuario.area?r.usuario.area.area:"","prepend-icon":"location_city",label:"Area",type:"text",color:"primary","background-color":"primary lighten-2"}})],1),a(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[a(g.h,{attrs:{readonly:"","prepend-icon":"work",label:"Actividad en el Area",type:"text",color:"primary","background-color":"primary lighten-2"},model:{value:r.usuario.actividad,callback:function(a){r.$set(r.usuario,"actividad",a)},expression:"usuario.actividad"}})],1)],1)],1),a(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[a(f.Z,{attrs:{label:"Cambiar Contraseña: "+(r.checkPass?"SI":"NO")},on:{change:function(a){r.checkPassword(),r.usuario.password=null,r.usuario.password2=null}},model:{value:r.checkPass,callback:function(a){r.checkPass=a},expression:"checkPass"}})],1),a(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}}),!0===r.checkPass?a(u.Z,{attrs:{xs12:""}},[a(d.Z,{attrs:{grey:"","lighten-2":"",row:"",wrap:""}},[a(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[a(g.h,{attrs:{"prepend-icon":"lock",label:"Contraseña",type:"password",rules:[...r.rules.requerido,r.rules.minLength(4)],color:"primary",clearable:"","background-color":"primary lighten-5","validate-on-blur":"",autocomplete:"new-password"},model:{value:r.usuario.password,callback:function(a){r.$set(r.usuario,"password",a)},expression:"usuario.password"}})],1),a(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[a(g.h,{attrs:{"prepend-icon":"lock",label:"Repetir Contraseña",type:"password",rules:[...r.rules.requerido,r.rules.minLength(4),a=>a===r.usuario.password||"Las Constraseñas no coinciden."],color:"primary",clearable:"","background-color":"primary lighten-5","validate-on-blur":"",autocomplete:"new-password"},model:{value:r.usuario.password2,callback:function(a){r.$set(r.usuario,"password2",a)},expression:"usuario.password2"}})],1)],1)],1):r._e(),"ADMIN_ROLE"===r.persona.role?a(u.Z,{attrs:{xs12:""}},[a(d.Z,{attrs:{grey:"","lighten-2":"",row:"",wrap:""}},[a(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[a(y.r,{attrs:{readonly:"","item-value":"valor","item-text":"label",items:r.opcionesRoles,label:"Rol","prepend-icon":"supervisor_account",color:"primary","background-color":"primary lighten-2"},model:{value:r.usuario.role,callback:function(a){r.$set(r.usuario,"role",a)},expression:"usuario.role"}})],1),a(u.Z,{attrs:{xs12:"",sm6:"","px-3":""}},[a(y.r,{attrs:{readonly:"","item-value":"valor","item-text":"label",items:r.opcionesEstados,label:"Estado","prepend-icon":"true"==r.usuario.estado?"check_circle":"cancel",color:"true"==r.usuario.estado?"green lighten-1":"error lighten-1","background-color":"true"==r.usuario.estado?"green lighten-1":"error lighten-1"},model:{value:r.usuario.estado,callback:function(a){r.$set(r.usuario,"estado",a)},expression:"usuario.estado"}})],1)],1)],1):r._e(),a(u.Z,{attrs:{grey:"","lighten-4":"",xs12:""}},[a("treeProperties",{attrs:{data:r.usuario,treeRead:r.permisos,opcionesSelect:r.opcionesPermiso,soloLectura:"soloLectura",mensajeSoloLectura:{icon:"warning_amber",msj:"Los permisos para utilizar los diferentes Modulos del Sistema los otorga Informatica de la Secretaria de Salud, para agregar/modificar los mismos comuniquese con ellos."}}})],1),a(u.Z,{attrs:{xs12:""}},[a(d.Z,{attrs:{grey:"","lighten-2":"",row:"",wrap:""}},[a(u.Z,{attrs:{xs2:"","px-3":""}}),a(u.Z,{attrs:{xs8:"","px-3":""}},[a(g.h,{attrs:{clearable:"","prepend-icon":"lock",label:"Contraseña Anterior",type:"password",rules:[...r.rules.requerido,r.rules.minLength(4)],color:"cuarto darken-4","background-color":"cuarto lighten-5","validate-on-blur":"",autocomplete:"current-password"},model:{value:r.usuario.password_anterior,callback:function(a){r.$set(r.usuario,"password_anterior",a)},expression:"usuario.password_anterior"}})],1),a(u.Z,{attrs:{xs2:"","px-3":""}})],1)],1)],1)},v=[],w=e(8535),Z={name:"formPerfil",props:["usuario"],components:{treeProperties:w.Z},data(){return{checkPass:!0}},computed:{...(0,b.rn)(["persona","rules"]),...(0,b.rn)("main_usuario",["permisos","opcionesPermiso","opcionesRoles","opcionesEstados"])},methods:{checkPassword(){this.$emit("checkPassword",this.checkPass)}}},_=Z,P=e(1001),C=(0,P.Z)(_,k,v,!1,null,null,null),$=C.exports,L={name:"usuarioPerfil",components:{formPerfil:$},data(){return{valido:!0,cambiarPass:!0,usuario:{}}},computed:{...(0,b.rn)(["loading"]),...(0,b.rn)("main_usuario",["usuarioBase"])},async created(){this.usuario={...this._merge(this._cloneDeep(this.usuarioBase),await this.buscarUsuarioID(this.$route.params.id))}},methods:{...(0,b.OI)(["mostrarError"]),...(0,b.nv)("main_usuario",["buscarUsuarioID","guardarPerfil"]),cambiarPassword(r){this.cambiarPass=r},async editarPerfil(){let r=JSON.parse(JSON.stringify(this.usuario));if(!1===this.cambiarPass)delete r.password,delete r.password2;else if(r.password!==r.password2)return this.$refs.form.validate(),void this.mostrarError({titulo:"Contraseña",mensaje:"Las contraseñas no coinciden."});await this.guardarPerfil({usuario:r,validate:this.$refs.form.validate,finish:"retroceder"})}}},E=L,S=(0,P.Z)(E,x,h,!1,null,null,null),j=S.exports}}]);